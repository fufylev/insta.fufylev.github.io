(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[function(e,t,n){"use strict";var s=n(1),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=s.createContext&&s.createContext(r),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},c=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&(n[r[i]]=e[r[i]])}return n};function o(t){return function(e){return s.createElement(a,u({attr:u({},t.attr)},e),function n(e){return e&&e.map(function(e,t){return s.createElement(e.tag,u({key:t},e.attr),n(e.child))})}(t.child))}}function a(a){function t(e){var t,n=a.size||e.size||"1em";e.className&&(t=e.className),a.className&&(t=(t?t+" ":"")+a.className);var r=a.attr,i=a.title,o=c(a,["attr","title"]);return s.createElement("svg",u({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},e.attr,r,o,{className:t,style:u({color:a.color||e.color},e.style,a.style),height:n,width:n,xmlns:"http://www.w3.org/2000/svg"}),i&&s.createElement("title",null,i),a.children)}return void 0!==i?s.createElement(i.Consumer,null,function(e){return t(e)}):t(r)}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";e.exports=n(62)},function(e,t,n){"use strict";n.r(t),n.d(t,"__extends",function(){return i}),n.d(t,"__assign",function(){return o}),n.d(t,"__rest",function(){return a}),n.d(t,"__decorate",function(){return s}),n.d(t,"__param",function(){return u}),n.d(t,"__metadata",function(){return c}),n.d(t,"__awaiter",function(){return l}),n.d(t,"__generator",function(){return h}),n.d(t,"__exportStar",function(){return f}),n.d(t,"__values",function(){return p}),n.d(t,"__read",function(){return d}),n.d(t,"__spread",function(){return m}),n.d(t,"__spreadArrays",function(){return y}),n.d(t,"__await",function(){return v}),n.d(t,"__asyncGenerator",function(){return g}),n.d(t,"__asyncDelegator",function(){return b}),n.d(t,"__asyncValues",function(){return w}),n.d(t,"__makeTemplateObject",function(){return _}),n.d(t,"__importStar",function(){return E}),n.d(t,"__importDefault",function(){return T});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function i(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var o=function(){return(o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function a(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function s(e,t,n,r){var i,o=arguments.length,a=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;0<=s;s--)(i=e[s])&&(a=(o<3?i(a):3<o?i(t,n,a):i(t,n))||a);return 3<o&&a&&Object.defineProperty(t,n,a),a}function u(n,r){return function(e,t){r(e,t,n)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function l(o,a,s,u){return new(s=s||Promise)(function(e,t){function n(e){try{i(u.next(e))}catch(e){t(e)}}function r(e){try{i(u.throw(e))}catch(e){t(e)}}function i(t){t.done?e(t.value):new s(function(e){e(t.value)}).then(n,r)}i((u=u.apply(o,a||[])).next())})}function h(n,r){var i,o,a,e,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,o&&(a=2&t[0]?o.return:t[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,t[1])).done)return a;switch(o=0,a&&(t=[2&t[0],a.value]),t[0]){case 0:case 1:a=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,o=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(a=0<(a=s.trys).length&&a[a.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!a||t[1]>a[0]&&t[1]<a[3])){s.label=t[1];break}if(6===t[0]&&s.label<a[1]){s.label=a[1],a=t;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(t);break}a[2]&&s.ops.pop(),s.trys.pop();continue}t=r.call(n,s)}catch(e){t=[6,e],o=0}finally{i=a=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function f(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function p(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function d(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||0<t--)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(d(arguments[t]));return e}function y(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}function v(e){return this instanceof v?(this.v=e,this):new v(e)}function g(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(e,t||[]),a=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(e,t){1<a.push([r,n,e,t])||s(r,n)})})}function s(e,t){try{!function(e){e.value instanceof v?Promise.resolve(e.value.v).then(u,c):l(a[0][2],e)}(o[e](t))}catch(e){l(a[0][3],e)}}function u(e){s("next",e)}function c(e){s("throw",e)}function l(e,t){e(t),a.shift(),a.length&&s(a[0][0],a[0][1])}}function b(r){var e,i;return e={},t("next"),t("throw",function(e){throw e}),t("return"),e[Symbol.iterator]=function(){return this},e;function t(t,n){e[t]=r[t]?function(e){return(i=!i)?{value:v(r[t](e)),done:"return"===t}:n?n(e):e}:n}}function w(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,t=i[Symbol.asyncIterator];return t?t.call(i):(i=p(i),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=i[r]&&function(n){return new Promise(function(e,t){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(e,t,(n=i[r](n)).done,n.value)})}}}function _(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function E(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function T(e){return e&&e.__esModule?e:{default:e}}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i,d=n(2),m=n(17),y=n(15),o=n(31),a=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r),v=new m.ErrorFactory("app","Firebase",a),s="@firebase/app",g="[DEFAULT]",b=((i={})[s]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),w=new o.Logger("@firebase/app"),u=(Object.defineProperty(c.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),c.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(e){return e.delete()}))}).then(function(){t.isDeleted_=!0})},c.prototype._getService=function(e,t){return void 0===t&&(t=g),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:t})},c.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=g),this.container.getProvider(e).clearInstance(t)},c.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){w.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},c.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},c.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw v.create("app-deleted",{appName:this.name_})},c);function c(e,t,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=t.name,this.automaticDataCollectionEnabled_=t.automaticDataCollectionEnabled||!1,this.options_=m.deepCopy(e),this.container=new y.ComponentContainer(t.name),this._addComponent(new y.Component("app",function(){return o},"PUBLIC"));try{for(var a=d.__values(this.firebase_.INTERNAL.components.values()),s=a.next();!s.done;s=a.next()){var u=s.value;this._addComponent(u)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}u.prototype.name&&u.prototype.options||u.prototype.delete||console.log("dc");var _="7.8.0";function l(u){var c={},l=new Map,h={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={});if("object"!=typeof t||null===t){t={name:t}}var n=t;void 0===n.name&&(n.name=g);var r=n.name;if("string"!=typeof r||!r)throw v.create("bad-app-name",{appName:String(r)});if(m.contains(c,r))throw v.create("duplicate-app",{appName:r});var i=new u(e,n,h);return c[r]=i},app:f,registerVersion:function(e,t,n){var r,i=null!==(r=b[e])&&void 0!==r?r:e;n&&(i+="-"+n);var o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){var s=['Unable to register library "'+i+'" with version "'+t+'":'];return o&&s.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&a&&s.push("and"),a&&s.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void w.warn(s.join(" "))}p(new y.Component(i+"-version",function(){return{library:i,version:t}},"VERSION"))},apps:null,SDK_VERSION:_,INTERNAL:{registerComponent:p,removeApp:function(e){delete c[e]},components:l,useAsService:function(e,t){return"serverAuth"!==t?t:null}}};function f(e){if(e=e||g,!m.contains(c,e))throw v.create("no-app",{appName:e});return c[e]}function p(n){var t,e,r=n.name;if(l.has(r))return w.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?h[r]:null;if(l.set(r,n),"PUBLIC"===n.type){var i=function(e){if(void 0===e&&(e=f()),"function"!=typeof e[r])throw v.create("invalid-app-argument",{appName:r});return e[r]()};void 0!==n.serviceProps&&m.deepExtend(i,n.serviceProps),h[r]=i,u.prototype[r]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,r).apply(this,n.multipleInstances?e:[])}}try{for(var o=d.__values(Object.keys(c)),a=o.next();!a.done;a=o.next()){var s=a.value;c[s]._addComponent(n)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(e=o.return)&&e.call(o)}finally{if(t)throw t.error}}return"PUBLIC"===n.type?h[r]:null}return h.default=h,Object.defineProperty(h,"apps",{get:function(){return Object.keys(c).map(function(e){return c[e]})}}),f.App=u,h}var h=function e(){var t=l(u);return t.INTERNAL=d.__assign(d.__assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){m.deepExtend(t,e)},createSubscribe:m.createSubscribe,ErrorFactory:m.ErrorFactory,deepExtend:m.deepExtend}),t}(),f=(p.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(function(e){var t,n=e.getComponent();return"VERSION"===(null===(t=n)||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return t.library+"/"+t.version}return null}).filter(function(e){return e}).join(" ")},p);function p(e){this.container=e}if(m.isBrowser()&&void 0!==self.firebase){w.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&0<=E.indexOf("LITE")&&w.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=h.initializeApp;h.initializeApp=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.isNode()&&w.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,e)};var S,C,I=h;(S=I).INTERNAL.registerComponent(new y.Component("platform-logger",function(e){return new f(e)},"PRIVATE")),S.registerVersion(s,"0.5.3",C),S.registerVersion("fire-js",""),t.default=I,t.firebase=I},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",function(){return r})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return D});var T=n(24),r=n(22),i=n(1),S=n.n(i),o=n(20),C=(n(19),n(5)),I=n(16),k=n(18),a=function(i){function e(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=i.call.apply(i,[this].concat(n))||this).history=Object(o.a)(e.props),e}return Object(r.a)(e,i),e.prototype.render=function(){return S.a.createElement(T.c,{history:this.history,children:this.props.children})},e}(S.a.Component);S.a.Component;function N(e,t){return"function"==typeof e?e(t):e}function A(e,t){return"string"==typeof e?Object(o.c)(e,null,null,t):e}function h(e){return e}var f=S.a.forwardRef;void 0===f&&(f=h);var p=f(function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=Object(I.a)(e,["innerRef","navigate","onClick"]),a=o.target,s=Object(C.a)({},o,{onClick:function(t){try{i&&i(t)}catch(e){throw t.preventDefault(),e}t.defaultPrevented||0!==t.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(t)||(t.preventDefault(),r())}});return s.ref=h!==f&&t||n,S.a.createElement("a",s)});function O(e){return e}var D=f(function(e,o){var t=e.component,a=void 0===t?p:t,s=e.replace,u=e.to,c=e.innerRef,l=Object(I.a)(e,["component","replace","to","innerRef"]);return S.a.createElement(T.e.Consumer,null,function(t){t||Object(k.a)(!1);var n=t.history,e=A(N(u,t.location),t.location),r=e?n.createHref(e):"",i=Object(C.a)({},l,{href:r,navigate:function(){var e=N(u,t.location);(s?n.replace:n.push)(e)}});return h!==f?i.ref=o||c:i.innerRef=c,S.a.createElement(a,i)})}),P=S.a.forwardRef;void 0===P&&(P=O);P(function(e,l){var t=e["aria-current"],h=void 0===t?"page":t,n=e.activeClassName,f=void 0===n?"active":n,p=e.activeStyle,d=e.className,m=e.exact,y=e.isActive,v=e.location,g=e.strict,b=e.style,w=e.to,_=e.innerRef,E=Object(I.a)(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","strict","style","to","innerRef"]);return S.a.createElement(T.e.Consumer,null,function(e){e||Object(k.a)(!1);var t=v||e.location,n=A(N(w,t),t),r=n.pathname,i=r&&r.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),o=i?Object(T.f)(t.pathname,{path:i,exact:m,strict:g}):null,a=!!(y?y(o,t):o),s=a?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return e}).join(" ")}(d,f):d,u=a?Object(C.a)({},b,{},p):b,c=Object(C.a)({"aria-current":a&&h||null,className:s,style:u,to:n},E);return O!==P?c.ref=l||_:c.innerRef=_,S.a.createElement(D,c)})})},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}},function(e,t,n){var r=n(74),i=n(6);e.exports=function(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?i(e):t}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},n(e)}t.exports=n},function(e,t,n){var r=n(75);e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}},function(e,t,n){"use strict";var D=n(1),P=n.n(D),r=n(19),i=n.n(r),g=P.a.createContext(null);var o=function(e){e()},a={notify:function(){}};function s(){var e=o,n=[],r=[];return{clear:function(){n=r=null},notify:function(){var t=n=r;e(function(){for(var e=0;e<t.length;e++)t[e]()})},get:function(){return r},subscribe:function(e){var t=!0;return r===n&&(r=n.slice()),r.push(e),function(){t&&null!==n&&(t=!1,r===n&&(r=n.slice()),r.splice(r.indexOf(e),1))}}}}var x=function(){function e(e,t){this.store=e,this.parentSub=t,this.unsubscribe=null,this.listeners=a,this.handleChangeWrapper=this.handleChangeWrapper.bind(this)}var t=e.prototype;return t.addNestedSub=function(e){return this.trySubscribe(),this.listeners.subscribe(e)},t.notifyNestedSubs=function(){this.listeners.notify()},t.handleChangeWrapper=function(){this.onStateChange&&this.onStateChange()},t.isSubscribed=function(){return Boolean(this.unsubscribe)},t.trySubscribe=function(){this.unsubscribe||(this.unsubscribe=this.parentSub?this.parentSub.addNestedSub(this.handleChangeWrapper):this.store.subscribe(this.handleChangeWrapper),this.listeners=s())},t.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null,this.listeners.clear(),this.listeners=a)},e}();function u(e){var t=e.store,n=e.context,r=e.children,i=Object(D.useMemo)(function(){var e=new x(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}},[t]),o=Object(D.useMemo)(function(){return t.getState()},[t]);Object(D.useEffect)(function(){var e=i.subscription;return e.trySubscribe(),o!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}},[i,o]);var a=n||g;return P.a.createElement(a.Provider,{value:i},r)}u.propTypes={store:i.a.shape({subscribe:i.a.func.isRequired,dispatch:i.a.func.isRequired,getState:i.a.func.isRequired}),context:i.a.object,children:i.a.any};var c=u,R=n(5),M=n(16),l=n(32),b=n.n(l),h=n(14),L=n.n(h),F=n(34),U=[],j=[null,null];function V(e,t){var n=e[1];return[t.payload,n+1]}var q=function(){return[null,0]},B="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?D.useLayoutEffect:D.useEffect;function f(N,e){void 0===e&&(e={});var t=e,n=t.getDisplayName,o=void 0===n?function(e){return"ConnectAdvanced("+e+")"}:n,r=t.methodName,a=void 0===r?"connectAdvanced":r,i=t.renderCountProp,s=void 0===i?void 0:i,u=t.shouldHandleStateChanges,A=void 0===u||u,c=t.storeKey,l=void 0===c?"store":c,h=t.withRef,f=void 0!==h&&h,p=t.forwardRef,d=void 0!==p&&p,m=t.context,y=void 0===m?g:m,v=Object(M.a)(t,["getDisplayName","methodName","renderCountProp","shouldHandleStateChanges","storeKey","withRef","forwardRef","context"]);L()(void 0===s,"renderCountProp is removed. render counting is built into the latest React Dev Tools profiling extension"),L()(!f,"withRef is removed. To access the wrapped instance, use a ref on the connected component");L()("store"===l,"storeKey has been removed and does not do anything. To use a custom Redux store for specific components, create a custom React context with React.createContext(), and pass the context object to React Redux's Provider and specific components like: <Provider context={MyContext}><ConnectedComponent context={MyContext} /></Provider>. You may also pass a {context : MyContext} option to connect");var O=y;return function(S){var e=S.displayName||S.name||"Component",C=o(e),I=Object(R.a)({},v,{getDisplayName:o,methodName:a,renderCountProp:s,shouldHandleStateChanges:A,storeKey:l,displayName:C,wrappedComponentName:e,WrappedComponent:S}),t=v.pure;var k=t?D.useMemo:function(e){return e()};function n(n){var e=Object(D.useMemo)(function(){var e=n.forwardedRef,t=Object(M.a)(n,["forwardedRef"]);return[n.context,e,t]},[n]),t=e[0],r=e[1],i=e[2],o=Object(D.useMemo)(function(){return t&&t.Consumer&&Object(F.isContextConsumer)(P.a.createElement(t.Consumer,null))?t:O},[t,O]),a=Object(D.useContext)(o),s=Boolean(n.store),u=Boolean(a)&&Boolean(a.store);L()(s||u,'Could not find "store" in the context of "'+C+'". Either wrap the root component in a <Provider>, or pass a custom React context provider to <Provider> and the corresponding React context consumer to '+C+" in connect options.");var c=n.store||a.store,l=Object(D.useMemo)(function(){return function(e){return N(e.dispatch,I)}(c)},[c]),h=Object(D.useMemo)(function(){if(!A)return j;var e=new x(c,s?null:a.subscription),t=e.notifyNestedSubs.bind(e);return[e,t]},[c,s,a]),f=h[0],p=h[1],d=Object(D.useMemo)(function(){return s?a:Object(R.a)({},a,{subscription:f})},[s,a,f]),m=Object(D.useReducer)(V,U,q),y=m[0][0],v=m[1];if(y&&y.error)throw y.error;var g=Object(D.useRef)(),b=Object(D.useRef)(i),w=Object(D.useRef)(),_=Object(D.useRef)(!1),E=k(function(){return w.current&&i===b.current?w.current:l(c.getState(),i)},[c,y,i]);B(function(){b.current=i,g.current=E,_.current=!1,w.current&&(w.current=null,p())}),B(function(){if(A){var r=!1,i=null,e=function(){if(!r){var e,t,n=c.getState();try{e=l(n,b.current)}catch(e){i=t=e}t||(i=null),e===g.current?_.current||p():(g.current=e,w.current=e,_.current=!0,v({type:"STORE_UPDATED",payload:{latestStoreState:n,error:t}}))}};f.onStateChange=e,f.trySubscribe(),e();return function(){if(r=!0,f.tryUnsubscribe(),f.onStateChange=null,i)throw i}}},[c,f,l]);var T=Object(D.useMemo)(function(){return P.a.createElement(S,Object(R.a)({},E,{ref:r}))},[r,S,E]);return Object(D.useMemo)(function(){return A?P.a.createElement(o.Provider,{value:d},T):T},[o,T,d])}var r=t?P.a.memo(n):n;if(r.WrappedComponent=S,r.displayName=C,d){var i=P.a.forwardRef(function(e,t){return P.a.createElement(r,Object(R.a)({},e,{forwardedRef:t}))});return i.displayName=C,i.WrappedComponent=S,b()(i,S)}return b()(r,S)}}var p=Object.prototype.hasOwnProperty;function d(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}function w(e,t){if(d(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=0;i<n.length;i++)if(!p.call(t,n[i])||!d(e[n[i]],t[n[i]]))return!1;return!0}var m=n(21);function y(i){return function(e,t){var n=i(e,t);function r(){return n}return r.dependsOnOwnProps=!1,r}}function v(e){return null!==e.dependsOnOwnProps&&void 0!==e.dependsOnOwnProps?Boolean(e.dependsOnOwnProps):1!==e.length}function _(i){return function(e,t){t.displayName;var r=function(e,t){return r.dependsOnOwnProps?r.mapToProps(e,t):r.mapToProps(e)};return r.dependsOnOwnProps=!0,r.mapToProps=function(e,t){r.mapToProps=i,r.dependsOnOwnProps=v(i);var n=r(e,t);return"function"==typeof n&&(r.mapToProps=n,r.dependsOnOwnProps=v(n),n=r(e,t)),n},r}}var E=[function(e){return"function"==typeof e?_(e):void 0},function(e){return e?void 0:y(function(e){return{dispatch:e}})},function(t){return t&&"object"==typeof t?y(function(e){return Object(m.b)(t,e)}):void 0}];var T=[function(e){return"function"==typeof e?_(e):void 0},function(e){return e?void 0:y(function(){return{}})}];function S(e,t,n){return Object(R.a)({},n,{},e,{},t)}var C=[function(e){return"function"==typeof e?function(u){return function(e,t){t.displayName;var i,o=t.pure,a=t.areMergedPropsEqual,s=!1;return function(e,t,n){var r=u(e,t,n);return s?o&&a(r,i)||(i=r):(s=!0,i=r),i}}}(e):void 0},function(e){return e?void 0:function(){return S}}];function I(n,r,i,o){return function(e,t){return i(n(e,t),r(o,t),t)}}function k(i,o,a,s,e){var u,c,l,h,f,p=e.areStatesEqual,d=e.areOwnPropsEqual,m=e.areStatePropsEqual,n=!1;function r(e,t){var n=!d(t,c),r=!p(e,u);return u=e,c=t,n&&r?(l=i(u,c),o.dependsOnOwnProps&&(h=o(s,c)),f=a(l,h,c)):n?(i.dependsOnOwnProps&&(l=i(u,c)),o.dependsOnOwnProps&&(h=o(s,c)),f=a(l,h,c)):r?function(){var e=i(u,c),t=!m(e,l);return l=e,t&&(f=a(l,h,c)),f}():f}return function(e,t){return n?r(e,t):function(e,t){return l=i(u=e,c=t),h=o(s,c),f=a(l,h,c),n=!0,f}(e,t)}}function N(e,t){var n=t.initMapStateToProps,r=t.initMapDispatchToProps,i=t.initMergeProps,o=Object(M.a)(t,["initMapStateToProps","initMapDispatchToProps","initMergeProps"]),a=n(e,o),s=r(e,o),u=i(e,o);return(o.pure?k:I)(a,s,u,e,o)}function A(n,e,r){for(var t=e.length-1;0<=t;t--){var i=e[t](n);if(i)return i}return function(e,t){throw new Error("Invalid value of type "+typeof n+" for "+r+" argument when connecting component "+t.wrappedComponentName+".")}}function O(e,t){return e===t}var W,z,K,H,Q,G,Y,X,$,J,Z,ee,te=(K=(z=void 0===W?{}:W).connectHOC,H=void 0===K?f:K,Q=z.mapStateToPropsFactories,G=void 0===Q?T:Q,Y=z.mapDispatchToPropsFactories,X=void 0===Y?E:Y,$=z.mergePropsFactories,J=void 0===$?C:$,Z=z.selectorFactory,ee=void 0===Z?N:Z,function(e,t,n,r){void 0===r&&(r={});var i=r,o=i.pure,a=void 0===o||o,s=i.areStatesEqual,u=void 0===s?O:s,c=i.areOwnPropsEqual,l=void 0===c?w:c,h=i.areStatePropsEqual,f=void 0===h?w:h,p=i.areMergedPropsEqual,d=void 0===p?w:p,m=Object(M.a)(i,["pure","areStatesEqual","areOwnPropsEqual","areStatePropsEqual","areMergedPropsEqual"]),y=A(e,G,"mapStateToProps"),v=A(t,X,"mapDispatchToProps"),g=A(n,J,"mergeProps");return H(ee,Object(R.a)({methodName:"connect",getDisplayName:function(e){return"Connect("+e+")"},shouldHandleStateChanges:Boolean(e),initMapStateToProps:y,initMapDispatchToProps:v,initMergeProps:g,pure:a,areStatesEqual:u,areOwnPropsEqual:l,areStatePropsEqual:f,areMergedPropsEqual:d},m))});function ne(){var e=Object(D.useContext)(g);return L()(e,"could not find react-redux context value; please ensure the component is wrapped in a <Provider>"),e}function re(e){void 0===e&&(e=g);var t=e===g?ne:function(){return Object(D.useContext)(e)};return function(){return t().store}}var ie=re();!function(e){void 0===e&&(e=g);var t=e===g?ie:re(e)}();function oe(e,t){return e===t}var ae="undefined"!=typeof window?D.useLayoutEffect:D.useEffect;!function(e){void 0===e&&(e=g);var t=e===g?ne:function(){return Object(D.useContext)(e)}}();var se,ue=n(28);n.d(t,"a",function(){return c}),n.d(t,"b",function(){return te}),se=ue.unstable_batchedUpdates,o=se},function(e,t,n){"use strict";e.exports=function(e,t,n,r,i,o,a,s){if(0,!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,i,o,a,s],l=0;(u=new Error(t.replace(/%s/g,function(){return c[l++]}))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),i=n(17),r=(o.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},o.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},o.prototype.setServiceProps=function(e){return this.serviceProps=e,this},o);function o(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var h="[DEFAULT]",a=(s.prototype.get=function(e){void 0===e&&(e=h);var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new i.Deferred;this.instancesDeferred.set(t,n);try{var r=this.getOrInitializeService(t);r&&n.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise},s.prototype.getImmediate=function(e){var t=l.__assign({identifier:h,optional:!1},e),n=t.identifier,r=t.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(e){if(r)return null;throw e}},s.prototype.getComponent=function(){return this.component},s.prototype.setComponent=function(e){var t,n;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(function(e){return"EAGER"===e.instantiationMode}(this.component=e))try{this.getOrInitializeService(h)}catch(e){}try{for(var r=l.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=l.__read(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService(u);s.resolve(c)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}},s.prototype.clearInstance=function(e){void 0===e&&(e=h),this.instancesDeferred.delete(e),this.instances.delete(e)},s.prototype.delete=function(){return l.__awaiter(this,void 0,void 0,function(){var t;return l.__generator(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))];case 1:return e.sent(),[2]}})})},s.prototype.isComponentSet=function(){return null!=this.component},s.prototype.getOrInitializeService=function(e){var t=this.instances.get(e);return!t&&this.component&&(t=this.component.instanceFactory(this.container,function(e){return e===h?void 0:e}(e)),this.instances.set(e,t)),t||null},s.prototype.normalizeInstanceIdentifier=function(e){return this.component?this.component.multipleInstances?e:h:e},s);function s(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var u=(c.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},c.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},c.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new a(e,this);return this.providers.set(e,t),t},c.prototype.getProviders=function(){return Array.from(this.providers.values())},c);function c(e){this.name=e,this.providers=new Map}t.Component=r,t.ComponentContainer=u,t.Provider=a},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}n.d(t,"a",function(){return r})},function(e,I,k){"use strict";(function(e){Object.defineProperty(I,"__esModule",{value:!0});function a(e,t){if(!e)throw i(t)}function n(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128):t[n++]=i>>12|224,t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t}function s(e){try{return o.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null}var t=k(2),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(e){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,s=a?e[i+1]:0,u=i+2<e.length,c=u?e[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(n(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var a=((7&i)<<18|(63&(o=e[n++]))<<12|(63&(s=e[n++]))<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{o=e[n++];var s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,s=++i<e.length?n[e.charAt(i)]:64,u=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&(e[n]=u(e[n],t[n]));return e}var c=(l.prototype.wrapCallback=function(n){var r=this;return function(e,t){e?r.reject(e):r.resolve(t),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(e):n(e,t))}},l);function l(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})}function h(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f,p=(f=Error,t.__extends(d,f),d);function d(e,t){var n=f.call(this,t)||this;return n.code=e,n.name="FirebaseError",Object.setPrototypeOf(n,d.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,m.prototype.create),n}var m=(y.prototype.create=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=t[0]||{},i=this.service+"/"+e,o=this.errors[e],a=o?function(e,r){return e.replace(v,function(e,t){var n=r[t];return null!=n?n.toString():"<"+t+"?>"})}(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new p(i,s),c=0,l=Object.keys(r);c<l.length;c++){var h=l[c];"_"!==h.slice(-1)&&(h in u&&console.warn('Overwriting FirebaseError base field "'+h+'" can cause unexpected behavior.'),u[h]=r[h])}return u},y);function y(e,t,n){this.service=e,this.serviceName=t,this.errors=n}var v=/\{\$([^}]+)}/g;function g(e){return JSON.parse(e)}function b(e){var t={},n={},r={},i="";try{var o=e.split(".");t=g(s(o[0])||""),n=g(s(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(e){}return{header:t,claims:n,data:r,signature:i}}var w=(_.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},_.prototype.compress_=function(e,t){t=t||0;var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(r=0;r<16;r++)n[r]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++)a=r<40?r<20?(o=l^u&(c^l),1518500249):(o=u^c^l,1859775393):r<60?(o=u&c|l&(u|c),2400959708):(o=u^c^l,3395469782),i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295,h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i;this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},_.prototype.update=function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}},_.prototype.digest=function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)e[r]=this.chain_[n]>>i&255,++r;return e},_);function _(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}var E=(T.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},T.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},T.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},T.prototype.subscribe=function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return 0;for(var n=0,r=t;n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return 1}return 0}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=S),void 0===r.error&&(r.error=S),void 0===r.complete&&(r.complete=S);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o},T.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},T.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},T.prototype.sendOne=function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},T.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},T);function T(e,t){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(n)}).catch(function(e){n.error(e)})}function S(){}function C(e,t,n){var r="";switch(t){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=e+" failed: ";return i+=r+" argument "}I.CONSTANTS=r,I.Deferred=c,I.ErrorFactory=m,I.FirebaseError=p,I.Sha1=w,I.assert=a,I.assertionError=i,I.async=function(n,r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Promise.resolve(!0).then(function(){n.apply(void 0,e)}).catch(function(e){r&&r(e)})}},I.base64=o,I.base64Decode=s,I.base64Encode=function(e){var t=n(e);return o.encodeByteArray(t,!0)},I.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},I.createSubscribe=function(e,t){var n=new E(e,t);return n.subscribe.bind(n)},I.decode=b,I.deepCopy=function(e){return u(void 0,e)},I.deepExtend=u,I.errorPrefix=C,I.getUA=h,I.isAdmin=function(e){var t=b(e).claims;return"object"==typeof t&&!0===t.admin},I.isBrowser=function(){return"object"==typeof self&&self.self===self},I.isBrowserExtension=function(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id},I.isElectron=function(){return 0<=h().indexOf("Electron/")},I.isEmpty=function(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},I.isIE=function(){var e=h();return 0<=e.indexOf("MSIE ")||0<=e.indexOf("Trident/")},I.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h())},I.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}},I.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},I.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},I.isUWP=function(){return 0<=h().indexOf("MSAppHost/")},I.isValidFormat=function(e){var t=b(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},I.isValidTimestamp=function(e){var t=b(e).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),i=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},I.issuedAtTime=function(e){var t=b(e).claims;return"object"==typeof t&&t.hasOwnProperty("iat")?t.iat:null},I.jsonEval=g,I.map=function(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r},I.querystring=function(e){for(var n=[],t=function(t,e){Array.isArray(e)?e.forEach(function(e){n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},r=0,i=Object.entries(e);r<i.length;r++){var o=i[r];t(o[0],o[1])}return n.length?"&"+n.join("&"):""},I.querystringDecode=function(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var t=e.split("=");n[t[0]]=t[1]}}),n},I.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},I.stringLength=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:55296<=r&&r<=56319?(t+=4,n++):t+=3}return t},I.stringToByteArray=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;a(++r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return t},I.stringify=function(e){return JSON.stringify(e)},I.validateArgCount=function(e,t,n,r){var i;if(r<t?i="at least "+t:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},I.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(C(e,t,r)+"must be a valid function.")},I.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(C(e,t,r)+"must be a valid context object.")},I.validateNamespace=function(e,t,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(C(e,t,r)+"must be a valid firebase namespace.")}}).call(this,k(27))},function(e,t,n){"use strict";var r="Invariant failed";t.a=function(e,t){if(!e)throw new Error(r)}},function(e,t,n){e.exports=n(66)()},function(e,t,n){"use strict";var N=n(5);function p(e){return"/"===e.charAt(0)}function d(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}var o=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&p(e),a=t&&p(t),s=o||a;if(e&&p(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var u=i[i.length-1];n="."===u||".."===u||""===u}else n=!1;for(var c=0,l=i.length;0<=l;l--){var h=i[l];"."===h?d(i,l):".."===h?(d(i,l),c++):c&&(d(i,l),c--)}if(!s)for(;c--;)i.unshift("..");!s||""===i[0]||i[0]&&p(i[0])||i.unshift("");var f=i.join("/");return n&&"/"!==f.substr(-1)&&(f+="/"),f};function a(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}var r=function n(t,r){if(t===r)return!0;if(null==t||null==r)return!1;if(Array.isArray(t))return Array.isArray(r)&&t.length===r.length&&t.every(function(e,t){return n(e,r[t])});if("object"!=typeof t&&"object"!=typeof r)return!1;var e=a(t),i=a(r);return e!==t||i!==r?n(e,i):Object.keys(Object.assign({},t,r)).every(function(e){return n(t[e],r[e])})},A=n(18);function O(e){return"/"===e.charAt(0)?e:"/"+e}function i(e){return"/"===e.charAt(0)?e.substr(1):e}function D(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function P(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function x(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function R(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e)).state=t:(void 0===(i=Object(N.a)({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(e){throw e instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):e}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=o(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function s(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&r(e.state,t.state)}function M(){var o=null;var r=[];return{setPrompt:function(e){return o=e,function(){o===e&&(o=null)}},confirmTransitionTo:function(e,t,n,r){if(null!=o){var i="function"==typeof o?o(e,t):o;"string"==typeof i?"function"==typeof n?n(i,r):r(!0):r(!1!==i)}else r(!0)},appendListener:function(e){var t=!0;function n(){t&&e.apply(void 0,arguments)}return r.push(n),function(){t=!1,r=r.filter(function(e){return e!==n})}},notifyListeners:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.forEach(function(e){return e.apply(void 0,t)})}}}n.d(t,"a",function(){return u}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return R}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return x});var L=!("undefined"==typeof window||!window.document||!window.document.createElement);function F(e,t){t(window.confirm(e))}var U="popstate",j="hashchange";function V(){try{return window.history.state||{}}catch(e){return{}}}function u(e){void 0===e&&(e={}),L||Object(A.a)(!1);var s=window.history,u=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&(window.history&&"pushState"in window.history)}(),t=!(-1===window.navigator.userAgent.indexOf("Trident")),n=e,r=n.forceRefresh,c=void 0!==r&&r,i=n.getUserConfirmation,l=void 0===i?F:i,o=n.keyLength,a=void 0===o?6:o,h=e.basename?P(O(e.basename)):"";function f(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return h&&(o=D(o,h)),R(o,r,n)}function p(){return Math.random().toString(36).substr(2,a)}var d=M();function m(e){Object(N.a)(k,e),k.length=s.length,d.notifyListeners(k.location,k.action)}function y(e){!function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")}(e)&&b(f(e.state))}function v(){b(f(V()))}var g=!1;function b(t){if(g)g=!1,m();else{d.confirmTransitionTo(t,"POP",l,function(e){e?m({action:"POP",location:t}):function(e){var t=k.location,n=_.indexOf(t.key);-1===n&&(n=0);var r=_.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(g=!0,T(i))}(t)})}}var w=f(V()),_=[w.key];function E(e){return h+x(e)}function T(e){s.go(e)}var S=0;function C(e){1===(S+=e)&&1===e?(window.addEventListener(U,y),t&&window.addEventListener(j,v)):0===S&&(window.removeEventListener(U,y),t&&window.removeEventListener(j,v))}var I=!1;var k={length:s.length,action:"POP",location:w,createHref:E,push:function(e,t){var a=R(e,t,p(),k.location);d.confirmTransitionTo(a,"PUSH",l,function(e){if(e){var t=E(a),n=a.key,r=a.state;if(u)if(s.pushState({key:n,state:r},null,t),c)window.location.href=t;else{var i=_.indexOf(k.location.key),o=_.slice(0,i+1);o.push(a.key),_=o,m({action:"PUSH",location:a})}else window.location.href=t}})},replace:function(e,t){var o="REPLACE",a=R(e,t,p(),k.location);d.confirmTransitionTo(a,o,l,function(e){if(e){var t=E(a),n=a.key,r=a.state;if(u)if(s.replaceState({key:n,state:r},null,t),c)window.location.replace(t);else{var i=_.indexOf(k.location.key);-1!==i&&(_[i]=a.key),m({action:o,location:a})}else window.location.replace(t)}})},go:T,goBack:function(){T(-1)},goForward:function(){T(1)},block:function(e){void 0===e&&(e=!1);var t=d.setPrompt(e);return I||(C(1),I=!0),function(){return I&&(I=!1,C(-1)),t()}},listen:function(e){var t=d.appendListener(e);return C(1),function(){C(-1),t()}}};return k}var I="hashchange",k={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:"!/"+i(e)},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:i,decodePath:O},slash:{encodePath:O,decodePath:O}};function q(e){var t=e.indexOf("#");return-1===t?e:e.slice(0,t)}function B(){var e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function W(e){window.location.replace(q(window.location.href)+"#"+e)}function c(e){void 0===e&&(e={}),L||Object(A.a)(!1);var t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),r=n.getUserConfirmation,a=void 0===r?F:r,i=n.hashType,o=void 0===i?"slash":i,s=e.basename?P(O(e.basename)):"",u=k[o],c=u.encodePath,l=u.decodePath;function h(){var e=l(B());return s&&(e=D(e,s)),R(e)}var f=M();function p(e){Object(N.a)(C,e),C.length=t.length,f.notifyListeners(C.location,C.action)}var d=!1,m=null;function y(){var e=B(),t=c(e);if(e!==t)W(t);else{var n=h(),r=C.location;if(!d&&function(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash}(r,n))return;if(m===x(n))return;m=null,function(t){if(d)d=!1,p();else{f.confirmTransitionTo(t,"POP",a,function(e){e?p({action:"POP",location:t}):function(e){var t=C.location,n=w.lastIndexOf(x(t));-1===n&&(n=0);var r=w.lastIndexOf(x(e));-1===r&&(r=0);var i=n-r;i&&(d=!0,_(i))}(t)})}}(n)}}var v=B(),g=c(v);v!==g&&W(g);var b=h(),w=[x(b)];function _(e){t.go(e)}var E=0;function T(e){1===(E+=e)&&1===e?window.addEventListener(I,y):0===E&&window.removeEventListener(I,y)}var S=!1;var C={length:t.length,action:"POP",location:b,createHref:function(e){var t=document.querySelector("base"),n="";return t&&t.getAttribute("href")&&(n=q(window.location.href)),n+"#"+c(s+x(e))},push:function(e,t){var o=R(e,void 0,void 0,C.location);f.confirmTransitionTo(o,"PUSH",a,function(e){if(e){var t=x(o),n=c(s+t);if(B()!==n){m=t,function(e){window.location.hash=e}(n);var r=w.lastIndexOf(x(C.location)),i=w.slice(0,r+1);i.push(t),w=i,p({action:"PUSH",location:o})}else p()}})},replace:function(e,t){var i="REPLACE",o=R(e,void 0,void 0,C.location);f.confirmTransitionTo(o,i,a,function(e){if(e){var t=x(o),n=c(s+t);B()!==n&&(m=t,W(n));var r=w.indexOf(x(C.location));-1!==r&&(w[r]=t),p({action:i,location:o})}})},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return S||(T(1),S=!0),function(){return S&&(S=!1,T(-1)),t()}},listen:function(e){var t=f.appendListener(e);return T(1),function(){T(-1),t()}}};return C}function v(e,t,n){return Math.min(Math.max(e,t),n)}function l(e){void 0===e&&(e={});var t=e,i=t.getUserConfirmation,n=t.initialEntries,r=void 0===n?["/"]:n,o=t.initialIndex,a=void 0===o?0:o,s=t.keyLength,u=void 0===s?6:s,c=M();function l(e){Object(N.a)(y,e),y.length=y.entries.length,c.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,u)}var f=v(a,0,r.length-1),p=r.map(function(e){return R(e,void 0,"string"==typeof e?h():e.key||h())}),d=x;function m(e){var t=v(y.index+e,0,y.entries.length-1),n=y.entries[t];c.confirmTransitionTo(n,"POP",i,function(e){e?l({action:"POP",location:n,index:t}):l()})}var y={length:p.length,action:"POP",location:p[f],index:f,entries:p,createHref:d,push:function(e,t){var r=R(e,t,h(),y.location);c.confirmTransitionTo(r,"PUSH",i,function(e){if(e){var t=y.index+1,n=y.entries.slice(0);n.length>t?n.splice(t,n.length-t,r):n.push(r),l({action:"PUSH",location:r,index:t,entries:n})}})},replace:function(e,t){var n="REPLACE",r=R(e,t,h(),y.location);c.confirmTransitionTo(r,n,i,function(e){e&&(y.entries[y.index]=r,l({action:n,location:r}))})},go:m,goBack:function(){m(-1)},goForward:function(){m(1)},canGo:function(e){var t=y.index+e;return 0<=t&&t<y.entries.length},block:function(e){return void 0===e&&(e=!1),c.setPrompt(e)},listen:function(e){return c.appendListener(e)}};return y}},function(e,t,n){"use strict";n.d(t,"a",function(){return c}),n.d(t,"b",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"d",function(){return m});function r(){return Math.random().toString(36).substring(7).split("").join(".")}var p=n(38),y={INIT:"@@redux/INIT"+r(),REPLACE:"@@redux/REPLACE"+r(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+r()}};function d(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function m(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function.");if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(m)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var i=e,o=t,a=[],s=a,u=!1;function c(){s===a&&(s=a.slice())}function l(){if(u)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return o}function h(t){if("function"!=typeof t)throw new Error("Expected the listener to be a function.");if(u)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var n=!0;return c(),s.push(t),function(){if(n){if(u)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");n=!1,c();var e=s.indexOf(t);s.splice(e,1)}}}function f(e){if(!d(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(u)throw new Error("Reducers may not dispatch actions.");try{u=!0,o=i(o,e)}finally{u=!1}for(var t=a=s,n=0;n<t.length;n++){(0,t[n])()}return e}return f({type:y.INIT}),(r={dispatch:f,subscribe:h,getState:l,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");i=e,f({type:y.REPLACE})}})[p.a]=function(){var e,n=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new TypeError("Expected the observer to be an object.");function t(){e.next&&e.next(l())}return t(),{unsubscribe:n(t)}}})[p.a]=function(){return this},e},r}function i(e){for(var t=Object.keys(e),p={},n=0;n<t.length;n++){var r=t[n];0,"function"==typeof e[r]&&(p[r]=e[r])}var d,m=Object.keys(p);try{!function(n){Object.keys(n).forEach(function(e){var t=n[e];if(void 0===t(void 0,{type:y.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:y.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+y.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(p)}catch(e){d=e}return function(e,t){if(void 0===e&&(e={}),d)throw d;for(var n,r,i,o=!1,a={},s=0;s<m.length;s++){var u=m[s],c=p[u],l=e[u],h=c(l,t);if(void 0===h){var f=(n=u,void 0,"Given "+((i=(r=t)&&r.type)&&'action "'+String(i)+'"'||"an action")+', reducer "'+n+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.');throw new Error(f)}a[u]=h,o=o||h!==l}return o?a:e}}function o(e,t){return function(){return t(e.apply(this,arguments))}}function a(e,t){if("function"==typeof e)return o(e,t);if("object"!=typeof e||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=o(i,t))}return n}function s(t,e){var n=Object.keys(t);return Object.getOwnPropertySymbols&&n.push.apply(n,Object.getOwnPropertySymbols(t)),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n}function u(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?s(o,!0).forEach(function(e){var t,n,r;t=i,r=o[n=e],n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):s(o).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function c(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];return function(i){return function(){var e=i.apply(void 0,arguments),t=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},n={getState:e.getState,dispatch:function(){return t.apply(void 0,arguments)}},r=o.map(function(e){return e(n)});return u({},e,{dispatch:t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}.apply(void 0,r)(e.dispatch)})}}}},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return u}),n.d(t,"e",function(){return c});var r=n(0),i=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224.1 141c-63.6 0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 255.9 287.7 141 224.1 141zm0 189.6c-41.1 0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.6 74.7-74.7 74.7zm146.4-194.3c0 14.9-12 26.8-26.8 26.8-14.9 0-26.8-12-26.8-26.8s12-26.8 26.8-26.8 26.8 12 26.8 26.8zm76.1 27.2c-1.7-35.9-9.9-67.7-36.2-93.9-26.2-26.2-58-34.4-93.9-36.2-37-2.1-147.9-2.1-184.9 0-35.8 1.7-67.6 9.9-93.9 36.1s-34.4 58-36.2 93.9c-2.1 37-2.1 147.9 0 184.9 1.7 35.9 9.9 67.7 36.2 93.9s58 34.4 93.9 36.2c37 2.1 147.9 2.1 184.9 0 35.9-1.7 67.7-9.9 93.9-36.2 26.2-26.2 34.4-58 36.2-93.9 2.1-37 2.1-147.8 0-184.8zM398.8 388c-7.8 19.6-22.9 34.7-42.6 42.6-29.5 11.7-99.5 9-132.1 9s-102.7 2.6-132.1-9c-19.6-7.8-34.7-22.9-42.6-42.6-11.7-29.5-9-99.5-9-132.1s-2.6-102.7 9-132.1c7.8-19.6 22.9-34.7 42.6-42.6 29.5-11.7 99.5-9 132.1-9s102.7-2.6 132.1 9c19.6 7.8 34.7 22.9 42.6 42.6 11.7 29.5 9 99.5 9 132.1s2.7 102.7-9 132.1z"}}]})(e)};i.displayName="FaInstagram";var o=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 32C114.6 32 0 125.1 0 240c0 49.6 21.4 95 57 130.7C44.5 421.1 2.7 466 2.2 466.5c-2.2 2.3-2.8 5.7-1.5 8.7S4.8 480 8 480c66.3 0 116-31.8 140.6-51.4 32.7 12.3 69 19.4 107.4 19.4 141.4 0 256-93.1 256-208S397.4 32 256 32z"}}]})(e)};o.displayName="FaComment";var a=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"}}]})(e)};a.displayName="FaHeart";var s=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"}}]})(e)};s.displayName="FaSignOutAlt";var u=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M458.4 64.3C400.6 15.7 311.3 23 256 79.3 200.7 23 111.4 15.6 53.6 64.3-21.6 127.6-10.6 230.8 43 285.5l175.4 178.7c10 10.2 23.4 15.9 37.6 15.9 14.3 0 27.6-5.6 37.6-15.8L469 285.6c53.5-54.7 64.7-157.9-10.6-221.3zm-23.6 187.5L259.4 430.5c-2.4 2.4-4.4 2.4-6.8 0L77.2 251.8c-36.5-37.2-43.9-107.6 7.3-150.7 38.9-32.7 98.9-27.8 136.5 10.5l35 35.7 35-35.7c37.8-38.5 97.8-43.2 136.5-10.6 51.1 43.1 43.5 113.9 7.3 150.8z"}}]})(e)};u.displayName="FaRegHeart";var c=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M313.6 304c-28.7 0-42.5 16-89.6 16-47.1 0-60.8-16-89.6-16C60.2 304 0 364.2 0 438.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-25.6c0-74.2-60.2-134.4-134.4-134.4zM400 464H48v-25.6c0-47.6 38.8-86.4 86.4-86.4 14.6 0 38.3 16 89.6 16 51.7 0 74.9-16 89.6-16 47.6 0 86.4 38.8 86.4 86.4V464zM224 288c79.5 0 144-64.5 144-144S303.5 0 224 0 80 64.5 80 144s64.5 144 144 144zm0-240c52.9 0 96 43.1 96 96s-43.1 96-96 96-96-43.1-96-96 43.1-96 96-96z"}}]})(e)};c.displayName="FaRegUser"},function(e,t,n){"use strict";var r=n(22),s=n(1),c=n.n(s),i=n(19),u=n.n(i),l=n(20),o=n(39),h=n.n(o),a=n(52),f=n.n(a),p=1073741823;var d=c.a.createContext||function(r,i){var e,t,o="__create-react-context-"+f()()+"__",n=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).emitter=function(n){var r=[];return{on:function(e){r.push(e)},off:function(t){r=r.filter(function(e){return e!==t})},get:function(){return n},set:function(e,t){n=e,r.forEach(function(e){return e(n,t)})}}}(e.props.value),e}h()(e,t);var n=e.prototype;return n.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},n.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var t,n=this.props.value,r=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(n,r)?(t="function"==typeof i?i(n,r):p,0!==(t|=0)&&this.emitter.set(e.value,t)):t=0}},n.render=function(){return this.props.children},e}(s.Component);n.childContextTypes=((e={})[o]=u.a.object.isRequired,e);var a=function(e){function t(){var n;return(n=e.apply(this,arguments)||this).state={value:n.getValue()},n.onUpdate=function(e,t){0!=((0|n.observedBits)&t)&&n.setState({value:n.getValue()})},n}h()(t,e);var n=t.prototype;return n.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?p:t},n.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?p:e},n.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},n.getValue=function(){return this.context[o]?this.context[o].get():r},n.render=function(){return function(e){return Array.isArray(e)?e[0]:e}(this.props.children)(this.state.value)},t}(s.Component);return a.contextTypes=((t={})[o]=u.a.object,t),{Provider:n,Consumer:a}},m=n(18),y=n(5),v=n(40),g=n.n(v),b=(n(34),n(16)),w=n(32),_=n.n(w);n.d(t,"a",function(){return A}),n.d(t,"b",function(){return R}),n.d(t,"c",function(){return T}),n.d(t,"d",function(){return j}),n.d(t,"e",function(){return E}),n.d(t,"f",function(){return x}),n.d(t,"g",function(){return V});var E=function(e){var t=d();return t.displayName=e,t}("Router"),T=function(n){function e(e){var t;return(t=n.call(this,e)||this).state={location:e.history.location},t._isMounted=!1,t._pendingLocation=null,e.staticContext||(t.unlisten=e.history.listen(function(e){t._isMounted?t.setState({location:e}):t._pendingLocation=e})),t}Object(r.a)(e,n),e.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var t=e.prototype;return t.componentDidMount=function(){this._isMounted=!0,this._pendingLocation&&this.setState({location:this._pendingLocation})},t.componentWillUnmount=function(){this.unlisten&&this.unlisten()},t.render=function(){return c.a.createElement(E.Provider,{children:this.props.children||null,value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}})},e}(c.a.Component);c.a.Component;var S=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(c.a.Component);var C={},I=1e4,k=0;function N(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(C[e])return C[e];var t=g.a.compile(e);return k<I&&(C[e]=t,k++),t}(e)(t,{pretty:!0})}function A(e){var o=e.computedMatch,a=e.to,t=e.push,s=void 0!==t&&t;return c.a.createElement(E.Consumer,null,function(e){e||Object(m.a)(!1);var t=e.history,n=e.staticContext,r=s?t.push:t.replace,i=Object(l.c)(o?"string"==typeof a?N(a,o.params):Object(y.a)({},a,{pathname:N(a.pathname,o.params)}):a);return n?(r(i),null):c.a.createElement(S,{onMount:function(){r(i)},onUpdate:function(e,t){var n=Object(l.c)(t.to);Object(l.f)(n,Object(y.a)({},i,{key:n.key}))||r(i)},to:a})})}var O={},D=1e4,P=0;function x(c,e){void 0===e&&(e={}),"string"!=typeof e&&!Array.isArray(e)||(e={path:e});var t=e,n=t.path,r=t.exact,l=void 0!==r&&r,i=t.strict,h=void 0!==i&&i,o=t.sensitive,f=void 0!==o&&o;return[].concat(n).reduce(function(e,t){if(!t&&""!==t)return null;if(e)return e;var n=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=O[n]||(O[n]={});if(r[e])return r[e];var i=[],o={regexp:g()(e,i,t),keys:i};return P<D&&(r[e]=o,P++),o}(t,{end:l,strict:h,sensitive:f}),r=n.regexp,i=n.keys,o=r.exec(c);if(!o)return null;var a=o[0],s=o.slice(1),u=c===a;return l&&!u?null:{path:t,url:"/"===t&&""===a?"/":a,isExact:u,params:i.reduce(function(e,t,n){return e[t.name]=s[n],e},{})}},null)}var R=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var u=this;return c.a.createElement(E.Consumer,null,function(e){e||Object(m.a)(!1);var t=u.props.location||e.location,n=u.props.computedMatch?u.props.computedMatch:u.props.path?x(t.pathname,u.props):e.match,r=Object(y.a)({},e,{location:t,match:n}),i=u.props,o=i.children,a=i.component,s=i.render;return Array.isArray(o)&&0===o.length&&(o=null),c.a.createElement(E.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:a?c.a.createElement(a,r):s?s(r):null:"function"==typeof o?o(r):null)})},t}(c.a.Component);function M(e){return"/"===e.charAt(0)?e:"/"+e}function L(e){return"string"==typeof e?e:Object(l.e)(e)}function F(){return function(){Object(m.a)(!1)}}function U(){}c.a.Component;var j=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this;return c.a.createElement(E.Consumer,null,function(n){n||Object(m.a)(!1);var r,i,o=e.props.location||n.location;return c.a.Children.forEach(e.props.children,function(e){if(null==i&&c.a.isValidElement(e)){var t=(r=e).props.path||e.props.from;i=t?x(o.pathname,Object(y.a)({},e.props,{path:t})):n.match}}),i?c.a.cloneElement(r,{location:o,computedMatch:i}):null})},t}(c.a.Component);function V(r){function e(e){var t=e.wrappedComponentRef,n=Object(b.a)(e,["wrappedComponentRef"]);return c.a.createElement(E.Consumer,null,function(e){return e||Object(m.a)(!1),c.a.createElement(r,Object(y.a)({},n,e,{ref:t}))})}var t="withRouter("+(r.displayName||r.name)+")";return e.displayName=t,e.WrappedComponent=r,_()(e,r)}c.a.useContext},function(e,t,n){!function(e){"use strict";function o(e){return Array.prototype.slice.call(e)}function a(n){return new Promise(function(e,t){n.onsuccess=function(){e(n.result)};n.onerror=function(){t(n.error)}})}function s(n,r,i){var o;var e=new Promise(function(e,t){o=n[r].apply(n,i);a(o).then(e,t)});e.request=o;return e}function i(e,t,n){var r=s(e,t,n);return r.then(function(e){if(!e)return;return new l(e,r.request)})}function t(e,n,t){t.forEach(function(t){Object.defineProperty(e.prototype,t,{get:function(){return this[n][t]},set:function(e){this[n][t]=e}})})}function n(t,n,r,e){e.forEach(function(e){if(!(e in r.prototype))return;t.prototype[e]=function(){return s(this[n],e,arguments)}})}function r(t,n,r,e){e.forEach(function(e){if(!(e in r.prototype))return;t.prototype[e]=function(){return this[n][e].apply(this[n],arguments)}})}function u(t,n,r,e){e.forEach(function(e){if(!(e in r.prototype))return;t.prototype[e]=function(){return i(this[n],e,arguments)}})}function c(e){this._index=e}function l(e,t){this._cursor=e;this._request=t}function h(e){this._store=e}function f(n){this._tx=n;this.complete=new Promise(function(e,t){n.oncomplete=function(){e()};n.onerror=function(){t(n.error)};n.onabort=function(){t(n.error)}})}function p(e,t,n){this._db=e;this.oldVersion=t;this.transaction=new f(n)}function d(e){this._db=e}function m(e,t,n){var r=s(indexedDB,"open",[e,t]);var i=r.request;if(i){i.onupgradeneeded=function(e){if(n){n(new p(i.result,e.oldVersion,i.transaction))}}}return r.then(function(e){return new d(e)})}function y(e){return s(indexedDB,"deleteDatabase",[e])}t(c,"_index",["name","keyPath","multiEntry","unique"]),n(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),t(l,"_cursor",["direction","key","primaryKey","value"]),n(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){if(!(n in IDBCursor.prototype))return;l.prototype[n]=function(){var t=this;var e=arguments;return Promise.resolve().then(function(){t._cursor[n].apply(t._cursor,e);return a(t._request).then(function(e){if(!e)return;return new l(e,t._request)})})}}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},t(h,"_store",["name","keyPath","indexNames","autoIncrement"]),n(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},t(f,"_tx",["objectStoreNames","mode"]),r(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},t(p,"_db",["name","version","objectStoreNames"]),r(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},t(d,"_db",["name","version","objectStoreNames"]),r(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[h,c].forEach(function(e){if(!(i in e.prototype))return;e.prototype[i.replace("open","iterate")]=function(){var e=o(arguments);var t=e[e.length-1];var n=this._store||this._index;var r=n[i].apply(n,e.slice(0,-1));r.onsuccess=function(){t(r.result)}}})}),[c,h].forEach(function(e){if(e.prototype.getAll)return;e.prototype.getAll=function(e,n){var r=this;var i=[];return new Promise(function(t){r.iterateCursor(e,function(e){if(!e){t(i);return}i.push(e.value);if(n!==undefined&&i.length==n){t(i);return}e.continue()})})}}),e.openDb=m,e.deleteDb=y,Object.defineProperty(e,"__esModule",{value:true})}(t)},function(e,t,n){"use strict";t.a=function(e){return e}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";(function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(e){console.error(e)}})(),e.exports=n(63)},function(e,t,n){"use strict";t.a=function(e){return"function"==typeof e}},,function(e,t,n){"use strict";function o(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}n.r(t),n.d(t,"LogLevel",function(){return a}),n.d(t,"Logger",function(){return c}),n.d(t,"setLogLevel",function(){return h});var a,r,i=[];(r=a=a||{})[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";function s(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(t<e.logLevel)){var i=(new Date).toISOString();switch(t){case a.DEBUG:case a.VERBOSE:console.log.apply(console,o(["["+i+"]  "+e.name+":"],n));break;case a.INFO:console.info.apply(console,o(["["+i+"]  "+e.name+":"],n));break;case a.WARN:console.warn.apply(console,o(["["+i+"]  "+e.name+":"],n));break;case a.ERROR:console.error.apply(console,o(["["+i+"]  "+e.name+":"],n));break;default:throw new Error("Attempted to log a message with an invalid logType (value: "+t+")")}}}var u=a.INFO,c=(Object.defineProperty(l.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),l.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,o([this,a.DEBUG],e))},l.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,o([this,a.VERBOSE],e))},l.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,o([this,a.INFO],e))},l.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,o([this,a.WARN],e))},l.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._logHandler.apply(this,o([this,a.ERROR],e))},l);function l(e){this.name=e,this._logLevel=u,this._logHandler=s,i.push(this)}function h(t){i.forEach(function(e){e.logLevel=t})}},function(e,t,n){"use strict";var r=n(34),i={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},h={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},a={};function f(e){return r.isMemo(e)?o:a[e.$$typeof]||i}a[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0};var p=Object.defineProperty,d=Object.getOwnPropertyNames,m=Object.getOwnPropertySymbols,y=Object.getOwnPropertyDescriptor,v=Object.getPrototypeOf,g=Object.prototype;e.exports=function e(t,n,r){if("string"==typeof n)return t;if(g){var i=v(n);i&&i!==g&&e(t,i,r)}var o=d(n);m&&(o=o.concat(m(n)));for(var a=f(t),s=f(n),u=0;u<o.length;++u){var c=o[u];if(!(h[c]||r&&r[c]||s&&s[c]||a&&a[c])){var l=y(n,c);try{p(t,c,l)}catch(e){}}}return t}},function(e,t,n){"use strict";n.r(t),n.d(t,"registerInstallations",function(){return ne});var r,i=n(4),o=n.n(i),a=n(15),h=n(2),s=n(17),u=n(25),c="@firebase/installations",l="0.4.1",f=1e4,p="w:"+l,d="FIS_v2",m="https://firebaseinstallations.googleapis.com/v1",y=36e5,v=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["not-registered"]="Firebase Installation is not registered.",r["installation-not-found"]="Firebase Installation not found.",r["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',r["app-offline"]="Could not process request. Application offline.",r["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",r),g=new s.ErrorFactory("installations","Installations",v);function b(e){return e instanceof s.FirebaseError&&e.code.includes("request-failed")}function w(e){var t=e.projectId;return m+"/projects/"+t+"/installations"}function _(e){return{token:e.token,requestStatus:2,expiresIn:function(e){return Number(e.replace("s","000"))}(e.expiresIn),creationTime:Date.now()}}function E(r,i){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,i.json()];case 1:return t=e.sent(),n=t.error,[2,g.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function T(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function S(e,t){var n=t.refreshToken,r=T(e);return r.append("Authorization",function(e){return d+" "+e}(n)),r}function C(n){return Object(h.__awaiter)(this,void 0,void 0,function(){var t;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,n()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,n()]:[2,t]}})})}function I(t){return new Promise(function(e){setTimeout(e,t)})}var k=/^[cdef][\w-]{21}$/,N="";function A(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,Object(h.__spread)(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return k.test(t)?t:N}catch(e){return N}}function O(e){return e.appName+"!"+e.appId}var D=new Map;function P(e,t){var n=O(e);x(n,t),function(e,t){var n=M();n&&n.postMessage({key:e,fid:t});L()}(n,t)}function x(e,t){var n,r,i=D.get(e);if(i)try{for(var o=Object(h.__values)(i),a=o.next();!a.done;a=o.next()){(0,a.value)(t)}}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var R=null;function M(){return!R&&"BroadcastChannel"in self&&((R=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){x(e.data.key,e.data.fid)}),R}function L(){0===D.size&&R&&(R.close(),R=null)}var F="firebase-installations-database",U=1,j="firebase-installations-store",V=null;function q(){return V=V||Object(u.openDb)(F,U,function(e){switch(e.oldVersion){case 0:e.createObjectStore(j)}})}function B(a,s){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=O(a),[4,q()];case 1:return n=e.sent(),r=n.transaction(j,"readwrite"),[4,(i=r.objectStore(j)).get(t)];case 2:return o=e.sent(),[4,i.put(s,t)];case 3:return e.sent(),[4,r.complete];case 4:return e.sent(),o&&o.fid===s.fid||P(a,s.fid),[2,s]}})})}function W(i){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=O(i),[4,q()];case 1:return n=e.sent(),[4,(r=n.transaction(j,"readwrite")).objectStore(j).delete(t)];case 2:return e.sent(),[4,r.complete];case 3:return e.sent(),[2]}})})}function z(s,u){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=O(s),[4,q()];case 1:return n=e.sent(),r=n.transaction(j,"readwrite"),[4,(i=r.objectStore(j)).get(t)];case 2:return o=e.sent(),void 0!==(a=u(o))?[3,4]:[4,i.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,i.put(a,t)];case 5:e.sent(),e.label=6;case 6:return[4,r.complete];case 7:return e.sent(),!a||o&&o.fid===a.fid||P(s,a.fid),[2,a]}})})}function K(i){return Object(h.__awaiter)(this,void 0,void 0,function(){var r,t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,z(i,function(e){var t=function(e){return Q(e||{fid:A(),registrationStatus:0})}(e),n=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(o){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,H(o)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,I(100)];case 3:return e.sent(),[4,H(o)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,K(o)];case 6:return n=e.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var n=Promise.reject(g.create("app-offline"));return{installationEntry:t,registrationPromise:n}}var r={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(s,e){var u=e.fid;return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=w(s),n=T(s),r={fid:u,authVersion:d,appId:s.appId,sdkVersion:p},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,C(function(){return fetch(t,i)})];case 1:return(o=e.sent()).ok?[4,o.json()]:[3,3];case 2:return a=e.sent(),[2,{fid:a.fid||u,registrationStatus:2,refreshToken:a.refreshToken,authToken:_(a.authToken)}];case 3:return[4,E("Create Installation",o)];case 4:throw e.sent()}})})}(r,i)];case 1:return t=e.sent(),[2,B(r,t)];case 2:return b(n=e.sent())&&409===n.serverCode?[4,W(r)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,B(r,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw n;case 7:return[2]}})})}(e,r);return{installationEntry:r,registrationPromise:i}}}(i,t);return r=n.registrationPromise,n.installationEntry})];case 1:return(t=e.sent()).fid!==N?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=e.sent(),n)];case 3:return[2,{installationEntry:t,registrationPromise:r}]}})})}function H(e){return z(e,function(e){if(!e)throw g.create("installation-not-found");return Q(e)})}function Q(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+f<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function G(e,u){var c=e.appConfig,l=e.platformLoggerProvider;return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=function(e,t){var n=t.fid;return w(e)+"/"+n+"/authTokens:generate"}(c,u),n=S(c,u),(r=l.getImmediate({optional:!0}))&&n.append("x-firebase-client",r.getPlatformInfoString()),i={installation:{sdkVersion:p}},o={method:"POST",headers:n,body:JSON.stringify(i)},[4,C(function(){return fetch(t,o)})];case 1:return(a=e.sent()).ok?[4,a.json()]:[3,3];case 2:return s=e.sent(),[2,_(s)];case 3:return[4,E("Generate Auth Token",a)];case 4:throw e.sent()}})})}function Y(i,o){return void 0===o&&(o=!1),Object(h.__awaiter)(this,void 0,void 0,function(){var r,t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,z(i.appConfig,function(e){if(!$(e))throw g.create("not-registered");var t=e.authToken;if(!o&&function(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+y}(e)}(t))return e;if(1===t.requestStatus)return r=function(r,i){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,X(r.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,I(100)];case 3:return e.sent(),[4,X(r.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(n=t.authToken).requestStatus?[2,Y(r,i)]:[2,n]}})})}(i,o),e;if(!navigator.onLine)throw g.create("app-offline");var n=function(e){var t={requestStatus:1,requestTime:Date.now()};return Object(h.__assign)(Object(h.__assign)({},e),{authToken:t})}(e);return r=function(i,o){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,G(i,o)];case 1:return t=e.sent(),r=Object(h.__assign)(Object(h.__assign)({},o),{authToken:t}),[4,B(i.appConfig,r)];case 2:return e.sent(),[2,t];case 3:return!b(n=e.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,W(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return r=Object(h.__assign)(Object(h.__assign)({},o),{authToken:{requestStatus:0}}),[4,B(i.appConfig,r)];case 6:e.sent(),e.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n})];case 1:return t=e.sent(),r?[4,r]:[3,3];case 2:return n=e.sent(),[3,4];case 3:n=t.authToken,e.label=4;case 4:return[2,n]}})})}function X(e){return z(e,function(e){if(!$(e))throw g.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+f<Date.now()}(e.authToken)?Object(h.__assign)(Object(h.__assign)({},e),{authToken:{requestStatus:0}}):e})}function $(e){return void 0!==e&&2===e.registrationStatus}function J(t,n){return void 0===n&&(n=!1),Object(h.__awaiter)(this,void 0,void 0,function(){return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,function(n){return Object(h.__awaiter)(this,void 0,void 0,function(){var t;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,K(n)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t.appConfig)];case 1:return e.sent(),[4,Y(t,n)];case 2:return[2,e.sent().token]}})})}function Z(o,a){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return t=function(e,t){var n=t.fid;return w(e)+"/"+n}(o,a),n=S(o,a),r={method:"DELETE",headers:n},[4,C(function(){return fetch(t,r)})];case 1:return(i=e.sent()).ok?[3,3]:[4,E("Delete Installation",i)];case 2:throw e.sent();case 3:return[2]}})})}function ee(e,t){var n=e.appConfig;return function(e,t){M();var n=O(e),r=D.get(n);r||(r=new Set,D.set(n,r)),r.add(t)}(n,t),function(){!function(e,t){var n=O(e),r=D.get(n);r&&(r.delete(t),0===r.size&&D.delete(n),L())}(n,t)}}function te(e){return g.create("missing-app-config-values",{valueName:e})}function ne(e){e.INTERNAL.registerComponent(new a.Component("installations",function(e){var t=e.getProvider("app").getImmediate(),n={appConfig:function(e){var t,n;if(!e||!e.options)throw te("App Configuration");if(!e.name)throw te("App Name");try{for(var r=Object(h.__values)(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!e.options[o])throw te(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:e.getProvider("platform-logger")};return{app:t,getId:function(){return function(i){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,K(i.appConfig)];case 1:return t=e.sent(),n=t.installationEntry,(r=t.registrationPromise)?r.catch(console.error):Y(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(e){return J(n,e)},delete:function(){return function(r){return Object(h.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(h.__generator)(this,function(e){switch(e.label){case 0:return[4,z(t=r.appConfig,function(e){if(!e||0!==e.registrationStatus)return e})];case 1:if(!(n=e.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw g.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw g.create("app-offline");case 3:return[4,Z(t,n)];case 4:return e.sent(),[4,W(t)];case 5:e.sent(),e.label=6;case 6:return[2]}})})}(n)},onIdChange:function(e){return ee(n,e)}}},"PUBLIC")),e.registerVersion(c,l)}ne(o.a)},function(e,t,n){"use strict";e.exports=n(68)},,function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o});var r=n(0),i=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 48C140.559 48 48 140.559 48 256c0 115.436 92.559 208 208 208 115.435 0 208-92.564 208-208 0-115.441-92.564-208-208-208zm104.002 282.881l-29.12 29.117L256 285.117l-74.881 74.881-29.121-29.117L226.881 256l-74.883-74.881 29.121-29.116L256 226.881l74.881-74.878 29.12 29.116L285.119 256l74.883 74.881z"}}]})(e)};i.displayName="IoMdCloseCircle";var o=function(e){return Object(r.a)({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M337.509 305.372h-17.501l-6.571-5.486c20.791-25.232 33.922-57.054 33.922-93.257C347.358 127.632 283.896 64 205.135 64 127.452 64 64 127.632 64 206.629s63.452 142.628 142.225 142.628c35.011 0 67.831-13.167 92.991-34.008l6.561 5.487v17.551L415.18 448 448 415.086 337.509 305.372zm-131.284 0c-54.702 0-98.463-43.887-98.463-98.743 0-54.858 43.761-98.742 98.463-98.742 54.7 0 98.462 43.884 98.462 98.742 0 54.856-43.762 98.743-98.462 98.743z"}}]})(e)};o.displayName="IoMdSearch"},,function(e,o,a){"use strict";(function(e,t){var n,r=a(47);n="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:t;var i=Object(r.a)(n);o.a=i}).call(this,a(27),a(69)(e))},function(e,t){e.exports=function(e,t){e.prototype=Object.create(t.prototype),(e.prototype.constructor=e).__proto__=t}},function(e,t,n){var f=n(88);e.exports=a,e.exports.parse=r,e.exports.compile=function(e,t){return i(r(e,t))},e.exports.tokensToFunction=i,e.exports.tokensToRegExp=o;var S=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function r(e,t){for(var n,r,i=[],o=0,a=0,s="",u=t&&t.delimiter||"/";null!=(n=S.exec(e));){var c=n[0],l=n[1],h=n.index;if(s+=e.slice(a,h),a=h+c.length,l)s+=l[1];else{var f=e[a],p=n[2],d=n[3],m=n[4],y=n[5],v=n[6],g=n[7];s&&(i.push(s),s="");var b=null!=p&&null!=f&&f!==p,w="+"===v||"*"===v,_="?"===v||"*"===v,E=n[2]||u,T=m||y;i.push({name:d||o++,prefix:p||"",delimiter:E,optional:_,repeat:w,partial:b,asterisk:!!g,pattern:T?(r=T,r.replace(/([=!:$\/()])/g,"\\$1")):g?".*":"[^"+C(E)+"]+?"})}}return a<e.length&&(s+=e.substr(a)),s&&i.push(s),i}function p(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(l){for(var h=new Array(l.length),e=0;e<l.length;e++)"object"==typeof l[e]&&(h[e]=new RegExp("^(?:"+l[e].pattern+")$"));return function(e,t){for(var n="",r=e||{},i=(t||{}).pretty?p:encodeURIComponent,o=0;o<l.length;o++){var a=l[o];if("string"!=typeof a){var s,u=r[a.name];if(null==u){if(a.optional){a.partial&&(n+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(f(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(u)+"`");if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var c=0;c<u.length;c++){if(s=i(u[c]),!h[o].test(s))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(s)+"`");n+=(0===c?a.prefix:a.delimiter)+s}}else{if(s=a.asterisk?encodeURI(u).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}):i(u),!h[o].test(s))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+s+'"');n+=a.prefix+s}}else n+=a}return n}}function C(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function d(e,t){return e.keys=t,e}function m(e){return e.sensitive?"":"i"}function o(e,t,n){f(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=C(s);else{var u=C(s.prefix),c="(?:"+s.pattern+")";t.push(s),s.repeat&&(c+="(?:"+u+c+")*"),o+=c=s.optional?s.partial?u+"("+c+")?":"(?:"+u+"("+c+"))?":u+"("+c+")"}}var l=C(n.delimiter||"/"),h=o.slice(-l.length)===l;return r||(o=(h?o.slice(0,-l.length):o)+"(?:"+l+"(?=$))?"),o+=i?"$":r&&h?"":"(?="+l+"|$)",d(new RegExp("^"+o,m(n)),t)}function a(e,t,n){return f(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return d(e,t)}(e,t):f(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(a(e[i],t,n).source);return d(new RegExp("(?:"+r.join("|")+")",m(n)),t)}(e,t,n):function(e,t,n){return o(r(e,n),t,n)}(e,t,n)}},function(e,t,n){"use strict";var _="persist:",E="persist/FLUSH",T="persist/REHYDRATE",S="persist/PAUSE",C="persist/PERSIST",I="persist/PURGE",u="persist/REGISTER",r=-1;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(t,n,r,e){e.debug;var i=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(n,!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},r);return t&&"object"===o(t)&&Object.keys(t).forEach(function(e){"_persist"!==e&&n[e]===r[e]&&(i[e]=t[e])}),i}function k(e){var t,n=e.blacklist||null,r=e.whitelist||null,i=e.transforms||[],o=e.throttle||0,a="".concat(void 0!==e.keyPrefix?e.keyPrefix:_).concat(e.key),s=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:v;var u=e.writeFailHandler||null,c={},l={},h=[],f=null,p=null;function d(){if(0===h.length)return f&&clearInterval(f),void(f=null);var n=h.shift(),e=i.reduce(function(e,t){return t.in(e,n,c)},c[n]);if(void 0!==e)try{l[n]=t(e)}catch(e){console.error("redux-persist/createPersistoid: error serializing state",e)}else delete l[n];0===h.length&&(Object.keys(l).forEach(function(e){void 0===c[e]&&delete l[e]}),p=s.setItem(a,t(l)).catch(y))}function m(e){return(!r||-1!==r.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function y(e){u&&u(e)}return{update:function(t){Object.keys(t).forEach(function(e){m(e)&&c[e]!==t[e]&&-1===h.indexOf(e)&&h.push(e)}),Object.keys(c).forEach(function(e){void 0===t[e]&&m(e)&&-1===h.indexOf(e)&&void 0!==c[e]&&h.push(e)}),null===f&&(f=setInterval(d,o)),c=t},flush:function(){for(;0!==h.length;)d();return p||Promise.resolve()}}}function v(e){return JSON.stringify(e)}function c(e){var i,o=e.transforms||[],t="".concat(void 0!==e.keyPrefix?e.keyPrefix:_).concat(e.key),n=e.storage;e.debug;return i=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:l,n.getItem(t).then(function(e){if(e)try{var t={},r=i(e);return Object.keys(r).forEach(function(n){t[n]=o.reduceRight(function(e,t){return t.out(e,n,r)},i(r[n]))}),t}catch(e){throw e}})}function l(e){return JSON.parse(e)}function N(e){0}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function A(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(n,!0).forEach(function(e){f(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],0<=t.indexOf(n)||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var D=5e3;function p(h,f){function p(e){return e._persist.rehydrated&&g&&!w&&g.update(e),e}var d=void 0!==h.version?h.version:r,m=(h.debug,void 0===h.stateReconciler?i:h.stateReconciler),y=h.getStoredState||c,v=void 0!==h.timeout?h.timeout:D,g=null,b=!1,w=!0;return function(e,n){var t=e||{},r=t._persist,i=O(t,["_persist"]);if(n.type===C){var o=!1,a=function(e,t){o||(n.rehydrate(h.key,e,t),o=!0)};if(v&&setTimeout(function(){o||a(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(h.key,'"')))},v),w=!1,g=g||k(h),r)return A({},f(i,n),{_persist:r});if("function"!=typeof n.rehydrate||"function"!=typeof n.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return n.register(h.key),y(h).then(function(e){(h.migrate||function(e,t){return Promise.resolve(e)})(e,d).then(function(e){a(e)},function(e){a(void 0,e)})},function(e){a(void 0,e)}),A({},f(i,n),{_persist:{version:d,rehydrated:!1}})}if(n.type===I)return b=!0,n.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:_).concat(e.key);return t.removeItem(n,N)}(h)),A({},f(i,n),{_persist:r});if(n.type===E)return n.result(g&&g.flush()),A({},f(i,n),{_persist:r});if(n.type===S)w=!0;else if(n.type===T){if(b)return A({},i,{_persist:A({},r,{rehydrated:!0})});if(n.key===h.key){var s=f(i,n),u=n.payload,c=A({},!1!==m&&void 0!==u?m(u,e,s,h):s,{_persist:A({},r,{rehydrated:!0})});return p(c)}}if(!r)return f(e,n);var l=f(i,n);return l===i?e:p(A({},l,{_persist:r}))}}var d=n(21);function m(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function y(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?y(n,!0).forEach(function(e){b(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){var n=0<arguments.length&&void 0!==e?e:P,r=1<arguments.length?t:void 0;switch(r.type){case u:return g({},n,{registry:[].concat(m(n.registry),[r.key])});case T:var i=n.registry.indexOf(r.key),o=m(n.registry);return o.splice(i,1),g({},n,{registry:o,bootstrapped:0===o.length});default:return n}}var P={registry:[],bootstrapped:!1};function x(i,e,t){function n(e){a.dispatch({type:u,key:e})}function r(e,t,n){var r={type:T,payload:t,err:n,key:e};i.dispatch(r),a.dispatch(r),o&&s.getState().bootstrapped&&(o(),o=!1)}var o=t||!1,a=Object(d.d)(w,P,e&&e.enhancer?e.enhancer:void 0),s=g({},a,{purge:function(){var t=[];return i.dispatch({type:I,result:function(e){t.push(e)}}),Promise.all(t)},flush:function(){var t=[];return i.dispatch({type:E,result:function(e){t.push(e)}}),Promise.all(t)},pause:function(){i.dispatch({type:S})},persist:function(){i.dispatch({type:C,register:n,rehydrate:r})}});return e&&e.manualPersist||s.persist(),s}n.d(t,"a",function(){return p}),n.d(t,"b",function(){return x})},function(e,t,n){"use strict";var u=Object.getOwnPropertySymbols,c=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),o=1;o<arguments.length;o++){for(var a in n=Object(arguments[o]))c.call(n,a)&&(i[a]=n[a]);if(u){r=u(n);for(var s=0;s<r.length;s++)l.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i}},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=c.length;t;){for(u=c,c=[];++h<t;)u&&u[h].run();h=-1,t=c.length}u=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new d(e,t)),1!==c.length||l||s(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,Rl,Ml){"use strict";(function(t){Object.defineProperty(Rl,"__esModule",{value:!0});var e,f,n,r=(e=Ml(4))&&"object"==typeof e&&"default"in e?e.default:e,m=Ml(2),o=Ml(31),h=Ml(17),i=Ml(15),p=Ml(79),a=r.SDK_VERSION,s=new o.Logger("@firebase/firestore");function d(){return s.logLevel===o.LogLevel.DEBUG?f.DEBUG:s.logLevel===o.LogLevel.SILENT?f.SILENT:f.ERROR}function u(e){switch(e){case f.DEBUG:s.logLevel=o.LogLevel.DEBUG;break;case f.ERROR:s.logLevel=o.LogLevel.ERROR;break;case f.SILENT:s.logLevel=o.LogLevel.SILENT;break;default:s.error("Firestore ("+a+"): Invalid value passed to `setLogLevel`")}}function y(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(s.logLevel<=o.LogLevel.DEBUG){var i=n.map(l);s.debug.apply(s,m.__spreadArrays(["Firestore ("+a+") ["+e+"]: "+t],i))}}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(s.logLevel<=o.LogLevel.ERROR){var r=t.map(l);s.error.apply(s,m.__spreadArrays(["Firestore ("+a+"): "+e],r))}}function l(t){if("string"==typeof t)return t;var e=g.getPlatform();try{return e.formatJSON(t)}catch(e){return t}}function w(e){var t="FIRESTORE ("+a+") INTERNAL ASSERTION FAILED: "+e;throw c(t),new Error(t)}function v(e,t){e||w(t)}(n=f=f||{})[n.DEBUG=0]="DEBUG",n[n.ERROR=1]="ERROR",n[n.SILENT=2]="SILENT";var g=(b.setPlatform=function(e){b.platform&&w("Platform already defined"),b.platform=e},b.getPlatform=function(){return b.platform||w("Platform not set"),b.platform},b);function b(){}function _(){return g.getPlatform().emptyByteString}var E,T={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},S=(E=Error,m.__extends(C,E),C);function C(e,t){var n=E.call(this,t)||this;return n.code=e,n.message=t,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function I(e,t){function n(){var e="This constructor is private.";throw t&&(e+=" ",e+=t),new S(T.INVALID_ARGUMENT,e)}for(var r in n.prototype=e.prototype,e)e.hasOwnProperty(r)&&(n[r]=e[r]);return n}function k(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function N(e,t){return void 0!==e?e:t}function A(e,t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Number(n);isNaN(r)||t(r,e[n])}}function O(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function D(e){for(var t in v(null!=e&&"object"==typeof e,"isEmpty() expects object parameter."),e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function P(e,t){if(0!==t.length)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() does not support arguments, but was called with "+X(t.length,"argument")+".")}function x(e,t,n){if(t.length!==n)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires "+X(n,"argument")+", but was called with "+X(t.length,"argument")+".")}function R(e,t,n){if(t.length<n)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires at least "+X(n,"argument")+", but was called with "+X(t.length,"argument")+".")}function M(e,t,n,r){if(t.length<n||t.length>r)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires between "+n+" and "+r+" arguments, but was called with "+X(t.length,"argument")+".")}function L(e,t,n,r){B(e,t,Y(n)+" argument",r)}function F(e,t,n,r){void 0!==r&&L(e,t,n,r)}function U(e,t,n,r){B(e,t,n+" option",r)}function j(e,t,n,r){void 0!==r&&U(e,t,n,r)}function V(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){if(!(r instanceof Array))throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires its "+t+" option to be an array, but it was: "+z(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires all "+t+" elements to be "+n+", but the value at index "+o+" was: "+z(r[o]))}(e,t,n,r,i)}function q(e,t,n,r,i){void 0!==r&&function(e,t,n,r,i){for(var o=[],a=0,s=i;a<s.length;a++){var u=s[a];if(u===r)return;o.push(z(u))}var c=z(r);throw new S(T.INVALID_ARGUMENT,"Invalid value "+c+" provided to function "+e+'() for option "'+n+'". Acceptable values: '+o.join(", "))}(e,0,n,r,i)}function B(e,t,n,r){if(!("object"===t?W(r):"non-empty string"===t?"string"==typeof r&&""!==r:typeof r===t)){var i=z(r);throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" to be of type "+t+", but it was: "+i)}}function W(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function z(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":w("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(e){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}(e);return t?"a custom "+t+" object":"an object"}function K(e,t,n){if(void 0===n)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires a valid "+Y(t)+" argument, but it was undefined.")}function H(n,e,r){O(e,function(e,t){if(r.indexOf(e)<0)throw new S(T.INVALID_ARGUMENT,"Unknown option '"+e+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function Q(e,t,n,r){var i=z(r);return new S(T.INVALID_ARGUMENT,"Function "+e+"() requires its "+Y(n)+" argument to be a "+t+", but it was: "+i)}function G(e,t,n){if(n<=0)throw new S(T.INVALID_ARGUMENT,'Function "'+e+'()" requires its '+Y(t)+" argument to be a positive number, but it was: "+n+".")}function Y(e){switch(e){case 1:return"first";case 2:return"second";case 3:return"third";default:return e+"th"}}function X(e,t){return e+" "+t+(1===e?"":"s")}var $=(J.newId=function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t="",n=0;n<20;n++)t+=e.charAt(Math.floor(Math.random()*e.length));return v(20===t.length,"Invalid auto ID: "+t),t},J);function J(){}function Z(e,t){return e<t?-1:t<e?1:0}function ee(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!e[n].isEqual(t[n]))return!1;return!0}function te(e){return e+"\0"}function ne(){if("undefined"==typeof Uint8Array)throw new S(T.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function re(){if(!g.getPlatform().base64Available)throw new S(T.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var ie=(oe.fromBase64String=function(e){x("Blob.fromBase64String",arguments,1),L("Blob.fromBase64String","string",1,e),re();try{return new oe(g.getPlatform().atob(e))}catch(e){throw new S(T.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+e)}},oe.fromUint8Array=function(e){if(x("Blob.fromUint8Array",arguments,1),ne(),!(e instanceof Uint8Array))throw Q("Blob.fromUint8Array","Uint8Array",1,e);return new oe(Array.prototype.map.call(e,function(e){return String.fromCharCode(e)}).join(""))},oe.prototype.toBase64=function(){return x("Blob.toBase64",arguments,0),re(),g.getPlatform().btoa(this._binaryString)},oe.prototype.toUint8Array=function(){x("Blob.toUint8Array",arguments,0),ne();for(var e=new Uint8Array(this._binaryString.length),t=0;t<this._binaryString.length;t++)e[t]=this._binaryString.charCodeAt(t);return e},oe.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},oe.prototype.isEqual=function(e){return this._binaryString===e._binaryString},oe.prototype._approximateByteSize=function(){return 2*this._binaryString.length},oe.prototype._compareTo=function(e){return Z(this._binaryString,e._binaryString)},oe);function oe(e){re(),this._binaryString=e}var ae=I(ie,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),se=function(e,t,n,r,i){this.databaseId=e,this.persistenceKey=t,this.host=n,this.ssl=r,this.forceLongPolling=i},ue=(Object.defineProperty(ce.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),ce.prototype.isEqual=function(e){return e instanceof ce&&e.projectId===this.projectId&&e.database===this.database},ce.prototype.compareTo=function(e){return Z(this.projectId,e.projectId)||Z(this.database,e.database)},ce);function ce(e,t){this.projectId=e,this.database=t||"(default)"}var le=(he.prototype.setPreviousValue=function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue},he.prototype.next=function(){var e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e},he.INVALID=-1,he);function he(e,t){var n=this;this.previousValue=e,t&&(t.sequenceNumberHandler=function(e){return n.setPreviousValue(e)},this.writeNewSequenceNumber=function(e){return t.writeSequenceNumber(e)})}var fe=(Object.defineProperty(pe.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),pe.prototype.isEqual=function(e){return 0===pe.comparator(this,e)},pe.prototype.child=function(e){var t=this.segments.slice(this.offset,this.limit());return e instanceof pe?e.forEach(function(e){t.push(e)}):t.push(e),this.construct(t)},pe.prototype.limit=function(){return this.offset+this.length},pe.prototype.popFirst=function(e){return e=void 0===e?1:e,v(this.length>=e,"Can't call popFirst() with less segments"),this.construct(this.segments,this.offset+e,this.length-e)},pe.prototype.popLast=function(){return v(!this.isEmpty(),"Can't call popLast() on empty path"),this.construct(this.segments,this.offset,this.length-1)},pe.prototype.firstSegment=function(){return v(!this.isEmpty(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},pe.prototype.lastSegment=function(){return this.get(this.length-1)},pe.prototype.get=function(e){return v(e<this.length,"Index out of range"),this.segments[this.offset+e]},pe.prototype.isEmpty=function(){return 0===this.length},pe.prototype.isPrefixOf=function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},pe.prototype.isImmediateParentOf=function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0},pe.prototype.forEach=function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])},pe.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},pe.comparator=function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(o<i)return 1}return e.length<t.length?-1:e.length>t.length?1:0},pe);function pe(e,t,n){void 0===t?t=0:t>e.length&&w("offset "+t+" out of range "+e.length),void 0===n?n=e.length-t:n>e.length-t&&w("length "+n+" out of range "+(e.length-t)),this.segments=e,this.offset=t,this.len=n}var de,me=(de=fe,m.__extends(ye,de),ye.prototype.construct=function(e,t,n){return new ye(e,t,n)},ye.prototype.canonicalString=function(){return this.toArray().join("/")},ye.prototype.toString=function(){return this.canonicalString()},ye.fromString=function(e){if(0<=e.indexOf("//"))throw new S(T.INVALID_ARGUMENT,"Invalid path ("+e+"). Paths must not contain // in them.");return new ye(e.split("/").filter(function(e){return 0<e.length}))},ye.EMPTY_PATH=new ye([]),ye);function ye(){return null!==de&&de.apply(this,arguments)||this}var ve,ge=/^[_a-zA-Z][_a-zA-Z0-9]*$/,be=(ve=fe,m.__extends(we,ve),we.prototype.construct=function(e,t,n){return new we(e,t,n)},we.isValidIdentifier=function(e){return ge.test(e)},we.prototype.canonicalString=function(){return this.toArray().map(function(e){return e=e.replace("\\","\\\\").replace("`","\\`"),we.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")},we.prototype.toString=function(){return this.canonicalString()},we.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},we.keyField=function(){return new we(["__name__"])},we.fromServerFormat=function(e){for(var t=[],n="",r=0,i=function(){if(0===n.length)throw new S(T.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");t.push(n),n=""},o=!1;r<e.length;){var a=e[r];if("\\"===a){if(r+1===e.length)throw new S(T.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[r+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new S(T.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=s,r+=2}else"`"===a?o=!o:"."!==a||o?n+=a:i(),r++}if(i(),o)throw new S(T.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new we(t)},we.EMPTY_PATH=new we([]),we);function we(){return null!==ve&&ve.apply(this,arguments)||this}var _e=(Ee.prototype.hasCollectionId=function(e){return 2<=this.path.length&&this.path.get(this.path.length-2)===e},Ee.prototype.isEqual=function(e){return null!==e&&0===me.comparator(this.path,e.path)},Ee.prototype.toString=function(){return this.path.toString()},Ee.comparator=function(e,t){return me.comparator(e.path,t.path)},Ee.isDocumentKey=function(e){return e.length%2==0},Ee.fromSegments=function(e){return new Ee(new me(e.slice()))},Ee.fromPathString=function(e){return new Ee(me.fromString(e))},Ee.EMPTY=new Ee(new me([])),Ee);function Ee(e){this.path=e,v(Ee.isDocumentKey(e),"Invalid DocumentKey with an odd number of segments: "+e.toArray().join("/"))}var Te,Se,Ce=function(){var n=this;this.promise=new Promise(function(e,t){n.resolve=e,n.reject=t})};(Se=Te=Te||{}).All="all",Se.ListenStreamIdle="listen_stream_idle",Se.ListenStreamConnectionBackoff="listen_stream_connection_backoff",Se.WriteStreamIdle="write_stream_idle",Se.WriteStreamConnectionBackoff="write_stream_connection_backoff",Se.OnlineStateTimeout="online_state_timeout",Se.ClientMetadataRefresh="client_metadata_refresh",Se.LruGarbageCollection="lru_garbage_collection",Se.RetryTransaction="retry_transaction";var Ie=(ke.createAndSchedule=function(e,t,n,r,i){var o=new ke(e,t,Date.now()+n,r,i);return o.start(n),o},ke.prototype.start=function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)},ke.prototype.skipDelay=function(){return this.handleDelayElapsed()},ke.prototype.cancel=function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new S(T.CANCELLED,"Operation cancelled"+(e?": "+e:""))))},ke.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},ke.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},ke);function ke(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ce,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.catch=this.deferred.promise.catch.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}var Ne=(Object.defineProperty(Ae.prototype,"isShuttingDown",{get:function(){return this._isShuttingDown},enumerable:!0,configurable:!0}),Ae.prototype.enqueueAndForget=function(e){this.enqueue(e)},Ae.prototype.enqueueAndForgetEvenAfterShutdown=function(e){this.verifyNotFailed(),this.enqueueInternal(e)},Ae.prototype.enqueueEvenAfterShutdown=function(e){return this.verifyNotFailed(),this.enqueueInternal(e)},Ae.prototype.enqueueAndInitiateShutdown=function(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.verifyNotFailed(),this._isShuttingDown?[3,2]:(this._isShuttingDown=!0,[4,this.enqueueEvenAfterShutdown(t)]);case 1:e.sent(),e.label=2;case 2:return[2]}})})},Ae.prototype.enqueue=function(e){return this.verifyNotFailed(),this._isShuttingDown?new Promise(function(e){}):this.enqueueInternal(e)},Ae.prototype.enqueueInternal=function(e){var n=this,t=this.tail.then(function(){return n.operationInProgress=!0,e().catch(function(e){n.failure=e,n.operationInProgress=!1;var t=e.stack||e.message||"";throw c("INTERNAL UNHANDLED ERROR: ",t),t.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw e},0),e}).then(function(e){return n.operationInProgress=!1,e})});return this.tail=t},Ae.prototype.enqueueAfterDelay=function(e,t,n){var r=this;this.verifyNotFailed(),v(0<=t,"Attempted to schedule an operation with a negative delay of "+t),-1<this.timerIdsToSkip.indexOf(e)&&(t=0);var i=Ie.createAndSchedule(this,e,t,n,function(e){return r.removeDelayedOperation(e)});return this.delayedOperations.push(i),i},Ae.prototype.verifyNotFailed=function(){this.failure&&w("AsyncQueue is already failed: "+(this.failure.stack||this.failure.message))},Ae.prototype.verifyOperationInProgress=function(){v(this.operationInProgress,"verifyOpInProgress() called when no op in progress on this queue.")},Ae.prototype.drain=function(){return this.enqueueEvenAfterShutdown(function(){return Promise.resolve()})},Ae.prototype.containsDelayedOperation=function(e){for(var t=0,n=this.delayedOperations;t<n.length;t++)if(n[t].timerId===e)return!0;return!1},Ae.prototype.runDelayedOperationsEarly=function(r){var i=this;return this.drain().then(function(){v(r===Te.All||i.containsDelayedOperation(r),"Attempted to drain to missing operation "+r),i.delayedOperations.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});for(var e=0,t=i.delayedOperations;e<t.length;e++){var n=t[e];if(n.skipDelay(),r!==Te.All&&n.timerId===r)break}return i.drain()})},Ae.prototype.skipDelaysForTimerId=function(e){this.timerIdsToSkip.push(e)},Ae.prototype.removeDelayedOperation=function(e){var t=this.delayedOperations.indexOf(e);v(0<=t,"Delayed operation not found."),this.delayedOperations.splice(t,1)},Ae);function Ae(){this.tail=Promise.resolve(),this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.timerIdsToSkip=[]}var Oe="",De="",Pe="",xe="";function Re(e){for(var t="",n=0;n<e.length;n++)0<t.length&&(t=Le(t)),t=Me(e.get(n),t);return Le(t)}function Me(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+=Oe+Pe;break;case Oe:n+=Oe+xe;break;default:n+=o}}return n}function Le(e){return e+Oe+De}function Fe(e){var t=e.length;if(v(2<=t,"Invalid path "+e),2===t)return v(e.charAt(0)===Oe&&e.charAt(1)===De,"Non-empty path "+e+" had length 2"),me.EMPTY_PATH;for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf(Oe,o);switch((a<0||n<a)&&w('Invalid encoded resource path: "'+e+'"'),e.charAt(a+1)){case De:var s=e.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case Pe:i+=e.substring(o,a),i+="\0";break;case xe:i+=e.substring(o,a+1);break;default:w('Invalid encoded resource path: "'+e+'"')}o=a+2}return new me(r)}var Ue=(je.now=function(){return je.fromMillis(Date.now())},je.fromDate=function(e){return je.fromMillis(e.getTime())},je.fromMillis=function(e){var t=Math.floor(e/1e3);return new je(t,1e6*(e-1e3*t))},je.prototype.toDate=function(){return new Date(this.toMillis())},je.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},je.prototype._compareTo=function(e){return this.seconds===e.seconds?Z(this.nanoseconds,e.nanoseconds):Z(this.seconds,e.seconds)},je.prototype.isEqual=function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds},je.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},je);function je(e,t){if(this.seconds=e,(this.nanoseconds=t)<0)throw new S(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(1e9<=t)throw new S(T.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new S(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(253402300800<=e)throw new S(T.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}var Ve=(qe.fromMicroseconds=function(e){var t=Math.floor(e/1e6);return new qe(new Ue(t,e%1e6*1e3))},qe.fromTimestamp=function(e){return new qe(e)},qe.forDeletedDoc=function(){return qe.MIN},qe.prototype.compareTo=function(e){return this.timestamp._compareTo(e.timestamp)},qe.prototype.isEqual=function(e){return this.timestamp.isEqual(e.timestamp)},qe.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},qe.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},qe.prototype.toTimestamp=function(){return this.timestamp},qe.MIN=new qe(new Ue(0,0)),qe);function qe(e){this.timestamp=e}var Be=(We.prototype.insert=function(e,t){return new We(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,He.BLACK,null,null))},We.prototype.remove=function(e){return new We(this.comparator,this.root.remove(e,this.comparator).copy(null,null,He.BLACK,null,null))},We.prototype.get=function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:0<n&&(t=t.right)}return null},We.prototype.indexOf=function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;n=r<0?n.left:(t+=n.left.size+1,n.right)}return-1},We.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(We.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),We.prototype.minKey=function(){return this.root.minKey()},We.prototype.maxKey=function(){return this.root.maxKey()},We.prototype.inorderTraversal=function(e){return this.root.inorderTraversal(e)},We.prototype.forEach=function(n){this.inorderTraversal(function(e,t){return n(e,t),!1})},We.prototype.toString=function(){var n=[];return this.inorderTraversal(function(e,t){return n.push(e+":"+t),!1}),"{"+n.join(", ")+"}"},We.prototype.reverseTraversal=function(e){return this.root.reverseTraversal(e)},We.prototype.getIterator=function(){return new ze(this.root,null,this.comparator,!1)},We.prototype.getIteratorFrom=function(e){return new ze(this.root,e,this.comparator,!1)},We.prototype.getReverseIterator=function(){return new ze(this.root,null,this.comparator,!0)},We.prototype.getReverseIteratorFrom=function(e){return new ze(this.root,e,this.comparator,!0)},We);function We(e,t){this.comparator=e,this.root=t||He.EMPTY}var ze=(Ke.prototype.getNext=function(){v(0<this.nodeStack.length,"getNext() called on iterator when hasNext() is false.");var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t},Ke.prototype.hasNext=function(){return 0<this.nodeStack.length},Ke.prototype.peek=function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}},Ke);function Ke(e,t,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}var He=(Qe.prototype.copy=function(e,t,n,r,i){return new Qe(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Qe.prototype.isEmpty=function(){return!1},Qe.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)},Qe.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},Qe.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},Qe.prototype.minKey=function(){return this.min().key},Qe.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Qe.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()},Qe.prototype.removeMin=function(){if(this.left.isEmpty())return Qe.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},Qe.prototype.remove=function(e,t){var n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Qe.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()},Qe.prototype.isRed=function(){return this.color},Qe.prototype.fixUp=function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e},Qe.prototype.moveRedLeft=function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e},Qe.prototype.moveRedRight=function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e},Qe.prototype.rotateLeft=function(){var e=this.copy(null,null,Qe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},Qe.prototype.rotateRight=function(){var e=this.copy(null,null,Qe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},Qe.prototype.colorFlip=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},Qe.prototype.checkMaxDepth=function(){var e=this.check();return Math.pow(2,e)<=this.size+1},Qe.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw w("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed())throw w("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check();if(e!==this.right.check())throw w("Black depths differ");return e+(this.isRed()?0:1)},Qe.EMPTY=null,Qe.RED=!0,Qe.BLACK=!1,Qe);function Qe(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Qe.RED,this.left=null!=r?r:Qe.EMPTY,this.right=null!=i?i:Qe.EMPTY,this.size=this.left.size+1+this.right.size}var Ge=(Object.defineProperty(Ye.prototype,"key",{get:function(){throw w("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"value",{get:function(){throw w("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"color",{get:function(){throw w("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"left",{get:function(){throw w("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Ye.prototype,"right",{get:function(){throw w("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Ye.prototype.copy=function(e,t,n,r,i){return this},Ye.prototype.insert=function(e,t,n){return new He(e,t)},Ye.prototype.remove=function(e,t){return this},Ye.prototype.isEmpty=function(){return!0},Ye.prototype.inorderTraversal=function(e){return!1},Ye.prototype.reverseTraversal=function(e){return!1},Ye.prototype.minKey=function(){return null},Ye.prototype.maxKey=function(){return null},Ye.prototype.isRed=function(){return!1},Ye.prototype.checkMaxDepth=function(){return!0},Ye.prototype.check=function(){return 0},Ye);function Ye(){this.size=0}He.EMPTY=new Ge;var Xe=($e.fromMapKeys=function(e){var t=new $e(e.comparator);return e.forEach(function(e){t=t.add(e)}),t},$e.prototype.has=function(e){return null!==this.data.get(e)},$e.prototype.first=function(){return this.data.minKey()},$e.prototype.last=function(){return this.data.maxKey()},Object.defineProperty($e.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),$e.prototype.indexOf=function(e){return this.data.indexOf(e)},$e.prototype.forEach=function(n){this.data.inorderTraversal(function(e,t){return n(e),!1})},$e.prototype.forEachInRange=function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(0<=this.comparator(r.key,e[1]))return;t(r.key)}},$e.prototype.forEachWhile=function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return},$e.prototype.firstAfterOrEqual=function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null},$e.prototype.getIterator=function(){return new Je(this.data.getIterator())},$e.prototype.getIteratorFrom=function(e){return new Je(this.data.getIteratorFrom(e))},$e.prototype.add=function(e){return this.copy(this.data.remove(e).insert(e,!0))},$e.prototype.delete=function(e){return this.has(e)?this.copy(this.data.remove(e)):this},$e.prototype.isEmpty=function(){return this.data.isEmpty()},$e.prototype.unionWith=function(e){var t=this;return e.forEach(function(e){t=t.add(e)}),t},$e.prototype.isEqual=function(e){if(!(e instanceof $e))return!1;if(this.size!==e.size)return!1;for(var t=this.data.getIterator(),n=e.data.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(r,i))return!1}return!0},$e.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},$e.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},$e.prototype.copy=function(e){var t=new $e(this.comparator);return t.data=e,t},$e);function $e(e){this.comparator=e,this.data=new Be(this.comparator)}var Je=(Ze.prototype.getNext=function(){return this.iter.getNext().key},Ze.prototype.hasNext=function(){return this.iter.hasNext()},Ze);function Ze(e){this.iter=e}var et=new Be(_e.comparator);function tt(){return et}function nt(){return tt()}var rt=new Be(_e.comparator);function it(){return rt}var ot=new Be(_e.comparator);function at(){return ot}var st=new Xe(_e.comparator);function ut(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=st,r=0,i=e;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ct=new Xe(Z);function lt(){return ct}var ht=(ft.prototype.applyToRemoteDocument=function(e,t,n){t&&v(t.key.isEqual(e),"applyToRemoteDocument: key "+e+" should match maybeDoc key\n        "+t.key);var r=n.mutationResults;v(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(e)){var a=r[i];t=o.applyToRemoteDocument(t,a)}}return t},ft.prototype.applyToLocalView=function(e,t){t&&v(t.key.isEqual(e),"applyToLocalDocument: key "+e+" should match maybeDoc key\n        "+t.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(e)&&(t=s.applyToLocalView(t,t,this.localWriteTime));for(var i=t,o=0,a=this.mutations;o<a.length;o++){var s;(s=a[o]).key.isEqual(e)&&(t=s.applyToLocalView(t,i,this.localWriteTime))}return t},ft.prototype.applyToLocalDocumentSet=function(n){var r=this,i=n;return this.mutations.forEach(function(e){var t=r.applyToLocalView(e.key,n.get(e.key));t&&(i=i.insert(e.key,t))}),i},ft.prototype.keys=function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},ut())},ft.prototype.isEqual=function(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations)&&ee(this.baseMutations,e.baseMutations)},ft);function ft(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,v(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}var pt=(dt.from=function(e,t,n,r){v(e.mutations.length===n.length,"Mutations sent "+e.mutations.length+" must equal results received "+n.length);for(var i=at(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,n[a].version);return new dt(e,t,n,r,i)},dt);function dt(e,t,n,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.streamToken=r,this.docVersions=i}var mt=(yt.prototype.catch=function(e){return this.next(void 0,e)},yt.prototype.next=function(r,i){var o=this;return this.callbackAttached&&w("Called next() or catch() twice for PersistencePromise"),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(i,this.error):this.wrapSuccess(r,this.result):new yt(function(t,n){o.nextCallback=function(e){o.wrapSuccess(r,e).next(t,n)},o.catchCallback=function(e){o.wrapFailure(i,e).next(t,n)}})},yt.prototype.toPromise=function(){var n=this;return new Promise(function(e,t){n.next(e,t)})},yt.prototype.wrapUserFunction=function(e){try{var t=e();return t instanceof yt?t:yt.resolve(t)}catch(e){return yt.reject(e)}},yt.prototype.wrapSuccess=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):yt.resolve(t)},yt.prototype.wrapFailure=function(e,t){return e?this.wrapUserFunction(function(){return e(t)}):yt.reject(t)},yt.resolve=function(n){return new yt(function(e,t){e(n)})},yt.reject=function(n){return new yt(function(e,t){t(n)})},yt.waitFor=function(e){return new yt(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(e){return n(e)})}),o=!0,i===r&&t()})},yt.or=function(e){for(var n=yt.resolve(!1),t=function(t){n=n.next(function(e){return e?yt.resolve(e):t()})},r=0,i=e;r<i.length;r++)t(i[r]);return n},yt.forEach=function(e,n){var r=this,i=[];return e.forEach(function(e,t){i.push(n.call(r,e,t))}),this.waitFor(i)},yt);function yt(e){var t=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(function(e){t.isDone=!0,t.result=e,t.nextCallback&&t.nextCallback(e)},function(e){t.isDone=!0,t.error=e,t.catchCallback&&t.catchCallback(e)})}var vt="SimpleDb",gt=(bt.openOrCreate=function(o,e,a){return v(bt.isAvailable(),"IndexedDB not supported in current environment."),y(vt,"Opening database:",o),new mt(function(n,r){var i=window.indexedDB.open(o,e);i.onsuccess=function(e){var t=e.target.result;n(new bt(t))},i.onblocked=function(){r(new S(T.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var t=e.target.error;"VersionError"===t.name?r(new S(T.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(t)},i.onupgradeneeded=function(e){y(vt,'Database "'+o+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;a.createOrUpgrade(t,i.transaction,e.oldVersion,qr).next(function(){y(vt,"Database upgrade to version "+qr+" complete")})}}).toPromise()},bt.delete=function(e){return y(vt,"Removing database:",e),It(window.indexedDB.deleteDatabase(e)).toPromise()},bt.isAvailable=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(bt.isMockPersistence())return!0;if(void 0===window.navigator)return!1;var e=h.getUA(),t=bt.getIOSVersion(e),n=0<t&&t<10,r=bt.getAndroidVersion(e),i=0<r&&r<4.5;return!(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/")||0<e.indexOf("Edge/")||n||i)},bt.isMockPersistence=function(){var e;return void 0!==t&&"YES"===(null===(e=t.env)||void 0===e?void 0:e.USE_MOCK_PERSISTENCE)},bt.getStore=function(e,t){return e.store(t)},bt.getIOSVersion=function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)},bt.getAndroidVersion=function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)},bt.prototype.setVersionChangeListener=function(t){this.db.onversionchange=function(e){return t(e)}},bt.prototype.runTransaction=function(r,c,l){return m.__awaiter(this,void 0,void 0,function(){var o,a,s,t,u,n;return m.__generator(this,function(e){switch(e.label){case 0:o=r.startsWith("readonly"),a=r.endsWith("idempotent"),s=0,t=function(){var t,n,r,i;return m.__generator(this,function(e){switch(e.label){case 0:++s,t=Et.open(u.db,o?"readonly":"readwrite",c),e.label=1;case 1:return e.trys.push([1,3,,4]),(n=l(t).catch(function(e){return t.abort(e),mt.reject(e)}).toPromise()).catch(function(){}),[4,t.completionPromise];case 2:return e.sent(),[2,{value:n}];case 3:return r=e.sent(),i=a&&"FirebaseError"!==r.name&&s<3,y(vt,"Transaction failed with error: %s. Retrying: %s.",r.message,i),i?[3,4]:[2,{value:Promise.reject(r)}];case 4:return[2]}})},u=this,e.label=1;case 1:return[5,t()];case 2:return"object"==typeof(n=e.sent())?[2,n.value]:[3,1];case 3:return[2]}})})},bt.prototype.close=function(){this.db.close()},bt);function bt(e){this.db=e,12.2===bt.getIOSVersion(h.getUA())&&c("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}var wt=(Object.defineProperty(_t.prototype,"isDone",{get:function(){return this.shouldStop},enumerable:!0,configurable:!0}),Object.defineProperty(_t.prototype,"skipToKey",{get:function(){return this.nextKey},enumerable:!0,configurable:!0}),Object.defineProperty(_t.prototype,"cursor",{set:function(e){this.dbCursor=e},enumerable:!0,configurable:!0}),_t.prototype.done=function(){this.shouldStop=!0},_t.prototype.skip=function(e){this.nextKey=e},_t.prototype.delete=function(){return It(this.dbCursor.delete())},_t);function _t(e){this.dbCursor=e,this.shouldStop=!1,this.nextKey=null}var Et=(Tt.open=function(e,t,n){return new Tt(e.transaction(n,t))},Object.defineProperty(Tt.prototype,"completionPromise",{get:function(){return this.completionDeferred.promise},enumerable:!0,configurable:!0}),Tt.prototype.abort=function(e){e&&this.completionDeferred.reject(e),this.aborted||(y(vt,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Tt.prototype.store=function(e){var t=this.transaction.objectStore(e);return v(!!t,"Object store not part of transaction: "+e),new St(t)},Tt);function Tt(e){var n=this;this.transaction=e,this.aborted=!1,this.completionDeferred=new Ce,this.transaction.oncomplete=function(){n.completionDeferred.resolve()},this.transaction.onabort=function(){e.error?n.completionDeferred.reject(e.error):n.completionDeferred.resolve()},this.transaction.onerror=function(e){var t=Nt(e.target.error);n.completionDeferred.reject(t)}}var St=(Ct.prototype.put=function(e,t){return It(void 0!==t?(y(vt,"PUT",this.store.name,e,t),this.store.put(t,e)):(y(vt,"PUT",this.store.name,"<auto-key>",e),this.store.put(e)))},Ct.prototype.add=function(e){return y(vt,"ADD",this.store.name,e,e),It(this.store.add(e))},Ct.prototype.get=function(t){var n=this;return It(this.store.get(t)).next(function(e){return void 0===e&&(e=null),y(vt,"GET",n.store.name,t,e),e})},Ct.prototype.delete=function(e){return y(vt,"DELETE",this.store.name,e),It(this.store.delete(e))},Ct.prototype.count=function(){return y(vt,"COUNT",this.store.name),It(this.store.count())},Ct.prototype.loadAll=function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.iterateCursor(n,function(e,t){r.push(t)}).next(function(){return r})},Ct.prototype.deleteAll=function(e,t){y(vt,"DELETE ALL",this.store.name);var n=this.options(e,t);n.keysOnly=!1;var r=this.cursor(n);return this.iterateCursor(r,function(e,t,n){return n.delete()})},Ct.prototype.iterate=function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.iterateCursor(r,t)},Ct.prototype.iterateSerial=function(i){var e=this.cursor({});return new mt(function(n,r){e.onerror=function(e){var t=Nt(e.target.error);r(t)},e.onsuccess=function(e){var t=e.target.result;t?i(t.primaryKey,t.value).next(function(e){e?t.continue():n()}):n()}})},Ct.prototype.iterateCursor=function(e,a){var s=[];return new mt(function(o,t){e.onerror=function(e){t(e.target.error)},e.onsuccess=function(e){var t=e.target.result;if(t){var n=new wt(t),r=a(t.primaryKey,t.value,n);if(r instanceof mt){var i=r.catch(function(e){return n.done(),mt.reject(e)});s.push(i)}n.isDone?o():null===n.skipToKey?t.continue():t.continue(n.skipToKey)}else o()}}).next(function(){return mt.waitFor(s)})},Ct.prototype.options=function(e,t){var n=void 0;return void 0!==e&&("string"==typeof e?n=e:(v(void 0===t,"3rd argument must not be defined if 2nd is a range."),t=e)),{index:n,range:t}},Ct.prototype.cursor=function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.keysOnly?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)},Ct);function Ct(e){this.store=e}function It(e){return new mt(function(n,r){e.onsuccess=function(e){var t=e.target.result;n(t)},e.onerror=function(e){var t=Nt(e.target.error);r(t)}})}var kt=!1;function Nt(e){var t=gt.getIOSVersion(h.getUA());if(12.2<=t&&t<13){var n="An internal error was encountered in the Indexed Database server";if(0<=e.message.indexOf(n)){var r=new S("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return kt||(kt=!0,setTimeout(function(){throw r},0)),r}}return e}var At=(Ot.forUser=function(e,t,n,r){return v(""!==e.uid,"UserID must not be an empty string."),new Ot(e.isAuthenticated()?e.uid:"",t,n,r)},Ot.prototype.checkEmpty=function(e){var r=!0,t=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Rt(e).iterate({index:Yr.userMutationsIndex,range:t},function(e,t,n){r=!1,n.done()}).next(function(){return r})},Ot.prototype.acknowledgeBatch=function(t,e,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=xt(n),Lt(t).put(e)})},Ot.prototype.getLastStreamToken=function(e){return this.getMutationQueueMetadata(e).next(function(e){return e.lastStreamToken})},Ot.prototype.setLastStreamToken=function(t,n){return this.getMutationQueueMetadata(t).next(function(e){return e.lastStreamToken=xt(n),Lt(t).put(e)})},Ot.prototype.addMutationBatch=function(c,l,h,f){var p=this,d=Mt(c),m=Rt(c);return m.add({}).next(function(e){v("number"==typeof e,"Auto-generated key is not a number");for(var t=new ht(e,l,h,f),n=p.serializer.toDbMutationBatch(p.userId,t),r=[],i=new Xe(function(e,t){return Z(e.canonicalString(),t.canonicalString())}),o=0,a=f;o<a.length;o++){var s=a[o],u=$r.key(p.userId,s.key.path,e);i=i.add(s.key.path.popLast()),r.push(m.put(n)),r.push(d.put(u,$r.PLACEHOLDER))}return i.forEach(function(e){r.push(p.indexManager.addToCollectionParentIndex(c,e))}),c.addOnCommittedListener(function(){p.documentKeysByBatchId[e]=t.keys()}),mt.waitFor(r).next(function(){return t})})},Ot.prototype.lookupMutationBatch=function(e,t){var n=this;return Rt(e).get(t).next(function(e){return e?(v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),n.serializer.fromDbMutationBatch(e)):null})},Ot.prototype.lookupMutationKeys=function(e,n){var r=this;return this.documentKeysByBatchId[n]?mt.resolve(this.documentKeysByBatchId[n]):this.lookupMutationBatch(e,n).next(function(e){if(e){var t=e.keys();return r.documentKeysByBatchId[n]=t}return null})},Ot.prototype.getNextMutationBatchAfterBatchId=function(e,t){var r=this,i=t+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Rt(e).iterate({index:Yr.userMutationsIndex,range:n},function(e,t,n){t.userId===r.userId&&(v(t.batchId>=i,"Should have found mutation after "+i),o=r.serializer.fromDbMutationBatch(t)),n.done()}).next(function(){return o})},Ot.prototype.getHighestUnacknowledgedBatchId=function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Rt(e).iterate({index:Yr.userMutationsIndex,range:t,reverse:!0},function(e,t,n){r=t.batchId,n.done()}).next(function(){return r})},Ot.prototype.getAllMutationBatches=function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Rt(e).loadAll(Yr.userMutationsIndex,n).next(function(e){return e.map(function(e){return t.serializer.fromDbMutationBatch(e)})})},Ot.prototype.getAllMutationBatchesAffectingDocumentKey=function(s,u){var c=this,e=$r.prefixForPath(this.userId,u.path),t=IDBKeyRange.lowerBound(e),l=[];return Mt(s).iterate({range:t},function(t,e,n){var r=t[0],i=t[1],o=t[2],a=Fe(i);if(r===c.userId&&u.path.isEqual(a))return Rt(s).get(o).next(function(e){if(!e)throw w("Dangling document-mutation reference found: "+t+" which points to "+o);v(e.userId===c.userId,"Unexpected user '"+e.userId+"' for mutation batch "+o),l.push(c.serializer.fromDbMutationBatch(e))});n.done()}).next(function(){return l})},Ot.prototype.getAllMutationBatchesAffectingDocumentKeys=function(r,e){var u=this,c=new Xe(Z),i=[];return e.forEach(function(s){var e=$r.prefixForPath(u.userId,s.path),t=IDBKeyRange.lowerBound(e),n=Mt(r).iterate({range:t},function(e,t,n){var r=e[0],i=e[1],o=e[2],a=Fe(i);r===u.userId&&s.path.isEqual(a)?c=c.add(o):n.done()});i.push(n)}),mt.waitFor(i).next(function(){return u.lookupMutationBatches(r,c)})},Ot.prototype.getAllMutationBatchesAffectingQuery=function(e,t){var s=this;v(!t.isDocumentQuery(),"Document queries shouldn't go down this path"),v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var u=t.path,c=u.length+1,n=$r.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),l=new Xe(Z);return Mt(e).iterate({range:r},function(e,t,n){var r=e[0],i=e[1],o=e[2],a=Fe(i);r===s.userId&&u.isPrefixOf(a)?a.length===c&&(l=l.add(o)):n.done()}).next(function(){return s.lookupMutationBatches(e,l)})},Ot.prototype.lookupMutationBatches=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Rt(e).get(t).next(function(e){if(null===e)throw w("Dangling document-mutation reference found, which points to "+t);v(e.userId===n.userId,"Unexpected user '"+e.userId+"' for mutation batch "+t),r.push(n.serializer.fromDbMutationBatch(e))}))}),mt.waitFor(i).next(function(){return r})},Ot.prototype.removeMutationBatch=function(t,n){var r=this;return Pt(t.simpleDbTransaction,this.userId,n).next(function(e){return t.addOnCommittedListener(function(){r.removeCachedMutationKeys(n.batchId)}),mt.forEach(e,function(e){return r.referenceDelegate.removeMutationReference(t,e)})})},Ot.prototype.removeCachedMutationKeys=function(e){delete this.documentKeysByBatchId[e]},Ot.prototype.performConsistencyCheck=function(n){var o=this;return this.checkEmpty(n).next(function(e){if(!e)return mt.resolve();var t=IDBKeyRange.lowerBound($r.prefixForUser(o.userId)),i=[];return Mt(n).iterate({range:t},function(e,t,n){if(e[0]===o.userId){var r=Fe(e[1]);i.push(r)}else n.done()}).next(function(){v(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(e){return e.canonicalString()}))})})},Ot.prototype.containsKey=function(e,t){return Dt(e,this.userId,t)},Ot.prototype.getMutationQueueMetadata=function(e){var t=this;return Lt(e).get(this.userId).next(function(e){return e||new Qr(t.userId,-1,"")})},Ot);function Ot(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}function Dt(e,o,t){var n=$r.prefixForPath(o,t.path),a=n[1],r=IDBKeyRange.lowerBound(n),s=!1;return Mt(e).iterate({range:r,keysOnly:!0},function(e,t,n){var r=e[0],i=e[1];e[2];r===o&&i===a&&(s=!0),n.done()}).next(function(){return s})}function Pt(e,t,n){var r=e.store(Yr.store),i=e.store($r.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.iterate({range:a},function(e,t,n){return s++,n.delete()});o.push(u.next(function(){v(1===s,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=$r.key(t,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return mt.waitFor(o).next(function(){return c})}function xt(e){return e instanceof Uint8Array?(v(gt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence."),e.toString()):e}function Rt(e){return ro.getStore(e,Yr.store)}function Mt(e){return ro.getStore(e,$r.store)}function Lt(e){return ro.getStore(e,Qr.store)}var Ft,Ut;(Ut=Ft=Ft||{})[Ut.QueryCache=0]="QueryCache",Ut[Ut.SyncEngine=1]="SyncEngine";var jt=(Vt.prototype.next=function(){var e=this.nextId;return this.nextId+=2,e},Vt.prototype.after=function(e){return this.seek(e+2),this.next()},Vt.prototype.seek=function(e){v((1&e)===this.generatorId,"Cannot supply target ID from different generator ID"),this.nextId=e},Vt.forTargetCache=function(){return new Vt(Ft.QueryCache,2)},Vt.forSyncEngine=function(){return new Vt(Ft.SyncEngine)},Vt);function Vt(e,t){v((1&(this.generatorId=e))===e,"Generator ID "+e+" contains more than 1 reserved bits"),this.seek(void 0!==t?t:this.generatorId)}var qt=(Bt.prototype.allocateTargetId=function(t){var n=this;return this.retrieveMetadata(t).next(function(e){return e.highestTargetId=n.targetIdGenerator.after(e.highestTargetId),n.saveMetadata(t,e).next(function(){return e.highestTargetId})})},Bt.prototype.getLastRemoteSnapshotVersion=function(e){return this.retrieveMetadata(e).next(function(e){return Ve.fromTimestamp(new Ue(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})},Bt.prototype.getHighestSequenceNumber=function(e){return Kt(e.simpleDbTransaction)},Bt.prototype.setTargetsMetadata=function(t,n,r){var i=this;return this.retrieveMetadata(t).next(function(e){return e.highestListenSequenceNumber=n,r&&(e.lastRemoteSnapshotVersion=r.toTimestamp()),n>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=n),i.saveMetadata(t,e)})},Bt.prototype.addTargetData=function(t,n){var r=this;return this.saveTargetData(t,n).next(function(){return r.retrieveMetadata(t).next(function(e){return e.targetCount+=1,r.updateMetadataFromTargetData(n,e),r.saveMetadata(t,e)})})},Bt.prototype.updateTargetData=function(e,t){return this.saveTargetData(e,t)},Bt.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Wt(t).delete(e.targetId)}).next(function(){return n.retrieveMetadata(t)}).next(function(e){return v(0<e.targetCount,"Removing from an empty target cache"),e.targetCount-=1,n.saveMetadata(t,e)})},Bt.prototype.removeTargets=function(r,i,o){var a=this,s=0,u=[];return Wt(r).iterate(function(e,t){var n=a.serializer.fromDbTarget(t);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(s++,u.push(a.removeTargetData(r,n)))}).next(function(){return mt.waitFor(u)}).next(function(){return s})},Bt.prototype.forEachTarget=function(e,r){var i=this;return Wt(e).iterate(function(e,t){var n=i.serializer.fromDbTarget(t);r(n)})},Bt.prototype.retrieveMetadata=function(e){return zt(e.simpleDbTransaction)},Bt.prototype.saveMetadata=function(e,t){return function(e){return ro.getStore(e,ci.store)}(e).put(ci.key,t)},Bt.prototype.saveTargetData=function(e,t){return Wt(e).put(this.serializer.toDbTarget(t))},Bt.prototype.updateMetadataFromTargetData=function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n},Bt.prototype.getTargetCount=function(e){return this.retrieveMetadata(e).next(function(e){return e.targetCount})},Bt.prototype.getTargetData=function(e,i){var o=this,t=i.canonicalId(),n=IDBKeyRange.bound([t,Number.NEGATIVE_INFINITY],[t,Number.POSITIVE_INFINITY]),a=null;return Wt(e).iterate({range:n,index:oi.queryTargetsIndexName},function(e,t,n){var r=o.serializer.fromDbTarget(t);i.isEqual(r.target)&&(a=r,n.done())}).next(function(){return a})},Bt.prototype.addMatchingKeys=function(n,e,r){var i=this,o=[],a=Ht(n);return e.forEach(function(e){var t=Re(e.path);o.push(a.put(new si(r,t))),o.push(i.referenceDelegate.addReference(n,e))}),mt.waitFor(o)},Bt.prototype.removeMatchingKeys=function(n,e,r){var i=this,o=Ht(n);return mt.forEach(e,function(e){var t=Re(e.path);return mt.waitFor([o.delete([r,t]),i.referenceDelegate.removeReference(n,e)])})},Bt.prototype.removeMatchingKeysForTargetId=function(e,t){var n=Ht(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)},Bt.prototype.getMatchingKeysForTargetId=function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Ht(e),o=ut();return r.iterate({range:n,keysOnly:!0},function(e,t,n){var r=Fe(e[1]),i=new _e(r);o=o.add(i)}).next(function(){return o})},Bt.prototype.containsKey=function(e,t){var n=Re(t.path),r=IDBKeyRange.bound([n],[te(n)],!1,!0),i=0;return Ht(e).iterate({index:si.documentTargetsIndex,keysOnly:!0,range:r},function(e,t,n){var r=e[0];e[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},Bt.prototype.getTargetDataForTarget=function(e,t){var n=this;return Wt(e).get(t).next(function(e){return e?n.serializer.fromDbTarget(e):null})},Bt);function Bt(e,t){this.referenceDelegate=e,this.serializer=t,this.targetIdGenerator=jt.forTargetCache()}function Wt(e){return ro.getStore(e,oi.store)}function zt(e){return gt.getStore(e,ci.store).get(ci.key).next(function(e){return v(null!==e,"Missing metadata row."),e})}function Kt(e){return zt(e).next(function(e){return e.highestListenSequenceNumber})}function Ht(e){return ro.getStore(e,si.store)}var Qt=(Gt.fromSet=function(e){return new Gt(e)},Gt.fromArray=function(e){var t=new Xe(be.comparator);return e.forEach(function(e){return t=t.add(e)}),new Gt(t)},Gt.prototype.covers=function(t){var n=!1;return this.fields.forEach(function(e){e.isPrefixOf(t)&&(n=!0)}),n},Gt.prototype.isEqual=function(e){return this.fields.isEqual(e.fields)},Gt);function Gt(e){this.fields=e}var Yt=(Xt.prototype.isEqual=function(e){return this.field.isEqual(e.field)&&this.transform.isEqual(e.transform)},Xt);function Xt(e,t){this.field=e,this.transform=t}var $t,Jt,Zt=function(e,t){this.version=e,this.transformResults=t};(Jt=$t=$t||{})[Jt.Set=0]="Set",Jt[Jt.Patch=1]="Patch",Jt[Jt.Transform=2]="Transform",Jt[Jt.Delete=3]="Delete",Jt[Jt.Verify=4]="Verify";var en=(tn.exists=function(e){return new tn(void 0,e)},tn.updateTime=function(e){return new tn(e)},Object.defineProperty(tn.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),tn.prototype.isValidFor=function(e){return void 0!==this.updateTime?e instanceof vr&&e.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===e instanceof vr:(v(this.isNone,"Precondition should be empty"),!0)},tn.prototype.isEqual=function(e){return function(e,t){return null!=e?!(!t||!e.isEqual(t)):e===t}(this.updateTime,e.updateTime)&&this.exists===e.exists},tn.NONE=new tn,tn);function tn(e,t){this.updateTime=e,this.exists=t,v(void 0===e||void 0===t,'Precondition can specify "exists" or "updateTime" but not both')}var nn=(rn.prototype.verifyKeyMatches=function(e){null!=e&&v(e.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},rn.getPostMutationVersion=function(e){return e instanceof vr?e.version:Ve.MIN},rn);function rn(){}var on,an=(on=nn,m.__extends(sn,on),sn.prototype.applyToRemoteDocument=function(e,t){this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by SetMutation.");var n=t.version;return new vr(this.key,n,{hasCommittedMutations:!0},this.value)},sn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=nn.getPostMutationVersion(e);return new vr(this.key,r,{hasLocalMutations:!0},this.value)},sn.prototype.extractBaseValue=function(e){return null},sn.prototype.isEqual=function(e){return e instanceof sn&&this.key.isEqual(e.key)&&this.value.isEqual(e.value)&&this.precondition.isEqual(e.precondition)},sn);function sn(e,t,n){var r=on.call(this)||this;return r.key=e,r.value=t,r.precondition=n,r.type=$t.Set,r}var un,cn=(un=nn,m.__extends(ln,un),ln.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by PatchMutation."),!this.precondition.isValidFor(e))return new Tr(this.key,t.version);var n=this.patchDocument(e);return new vr(this.key,t.version,{hasCommittedMutations:!0},n)},ln.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=nn.getPostMutationVersion(e),i=this.patchDocument(e);return new vr(this.key,r,{hasLocalMutations:!0},i)},ln.prototype.extractBaseValue=function(e){return null},ln.prototype.isEqual=function(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.fieldMask.isEqual(e.fieldMask)&&this.precondition.isEqual(e.precondition)},ln.prototype.patchDocument=function(e){var t;return t=e instanceof vr?e.data():cr.EMPTY,this.patchObject(t)},ln.prototype.patchObject=function(n){var r=this;return this.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var t=r.data.field(e);n=null!==t?n.set(e,t):n.delete(e)}}),n},ln);function ln(e,t,n,r){var i=un.call(this)||this;return i.key=e,i.data=t,i.fieldMask=n,i.precondition=r,i.type=$t.Patch,i}var hn,fn=(hn=nn,m.__extends(pn,hn),pn.prototype.applyToRemoteDocument=function(e,t){if(this.verifyKeyMatches(e),v(null!=t.transformResults,"Transform results missing for TransformMutation."),!this.precondition.isValidFor(e))return new Tr(this.key,t.version);var n=this.requireDocument(e),r=this.serverTransformResults(e,t.transformResults),i=t.version,o=this.transformObject(n.data(),r);return new vr(this.key,i,{hasCommittedMutations:!0},o)},pn.prototype.applyToLocalView=function(e,t,n){if(this.verifyKeyMatches(e),!this.precondition.isValidFor(e))return e;var r=this.requireDocument(e),i=this.localTransformResults(n,e,t),o=this.transformObject(r.data(),i);return new vr(this.key,r.version,{hasLocalMutations:!0},o)},pn.prototype.extractBaseValue=function(e){for(var t=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=e instanceof vr?e.field(i.field):void 0,a=i.transform.computeBaseValue(o||null);null!=a&&(t=null==t?cr.EMPTY.set(i.field,a):t.set(i.field,a))}return t},pn.prototype.isEqual=function(e){return e instanceof pn&&this.key.isEqual(e.key)&&ee(this.fieldTransforms,e.fieldTransforms)&&this.precondition.isEqual(e.precondition)},pn.prototype.requireDocument=function(e){return v(e instanceof vr,"Unknown MaybeDocument type "+e),v(e.key.isEqual(this.key),"Can only transform a document with the same key"),e},pn.prototype.serverTransformResults=function(e,t){var n=[];v(this.fieldTransforms.length===t.length,"server transform result count ("+t.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<t.length;r++){var i=this.fieldTransforms[r],o=i.transform,a=null;e instanceof vr&&(a=e.field(i.field)),n.push(o.applyToRemoteDocument(a,t[r]))}return n},pn.prototype.localTransformResults=function(e,t,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var a=o[i],s=a.transform,u=null;t instanceof vr&&(u=t.field(a.field)),null===u&&n instanceof vr&&(u=n.field(a.field)),r.push(s.applyToLocalView(u,e))}return r},pn.prototype.transformObject=function(e,t){v(t.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=0;n<this.fieldTransforms.length;n++){var r=this.fieldTransforms[n].field;e=e.set(r,t[n])}return e},pn);function pn(e,t){var n=hn.call(this)||this;return n.key=e,n.fieldTransforms=t,n.type=$t.Transform,n.precondition=en.exists(!0),n}var dn,mn=(dn=nn,m.__extends(yn,dn),yn.prototype.applyToRemoteDocument=function(e,t){return this.verifyKeyMatches(e),v(null==t.transformResults,"Transform results received by DeleteMutation."),new wr(this.key,t.version,{hasCommittedMutations:!0})},yn.prototype.applyToLocalView=function(e,t,n){return this.verifyKeyMatches(e),this.precondition.isValidFor(e)?(e&&v(e.key.isEqual(this.key),"Can only apply mutation to document with same key"),new wr(this.key,Ve.forDeletedDoc())):e},yn.prototype.extractBaseValue=function(e){return null},yn.prototype.isEqual=function(e){return e instanceof yn&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},yn);function yn(e,t){var n=dn.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Delete,n}var vn,gn,bn,wn,_n,En=(vn=nn,m.__extends(Tn,vn),Tn.prototype.applyToRemoteDocument=function(e,t){w("VerifyMutation should only be used in Transactions.")},Tn.prototype.applyToLocalView=function(e,t,n){w("VerifyMutation should only be used in Transactions.")},Tn.prototype.extractBaseValue=function(e){w("VerifyMutation should only be used in Transactions.")},Tn.prototype.isEqual=function(e){return e instanceof Tn&&this.key.isEqual(e.key)&&this.precondition.isEqual(e.precondition)},Tn);function Tn(e,t){var n=vn.call(this)||this;return n.key=e,n.precondition=t,n.type=$t.Verify,n}(bn=gn=gn||{})[bn.NullValue=0]="NullValue",bn[bn.BooleanValue=1]="BooleanValue",bn[bn.NumberValue=2]="NumberValue",bn[bn.TimestampValue=3]="TimestampValue",bn[bn.StringValue=4]="StringValue",bn[bn.BlobValue=5]="BlobValue",bn[bn.RefValue=6]="RefValue",bn[bn.GeoPointValue=7]="GeoPointValue",bn[bn.ArrayValue=8]="ArrayValue",bn[bn.ObjectValue=9]="ObjectValue",(_n=wn=wn||{})[_n.Default=0]="Default",_n[_n.Estimate=1]="Estimate",_n[_n.Previous=2]="Previous";var Sn=(Cn.fromSnapshotOptions=function(e,t){switch(e.serverTimestamps){case"estimate":return new Cn(wn.Estimate,t);case"previous":return new Cn(wn.Previous,t);case"none":case void 0:return new Cn(wn.Default,t);default:return w("fromSnapshotOptions() called with invalid options.")}},Cn);function Cn(e,t){this.serverTimestampBehavior=e,this.timestampsInSnapshots=t}var In=(kn.prototype.toString=function(){var e=this.value();return null===e?"null":e.toString()},kn.prototype.defaultCompareTo=function(e){return v(this.typeOrder!==e.typeOrder,"Default compareTo should not be used for values of same type."),Z(this.typeOrder,e.typeOrder)},kn);function kn(){}var Nn,An=(Nn=In,m.__extends(On,Nn),On.prototype.value=function(e){return null},On.prototype.isEqual=function(e){return e instanceof On},On.prototype.compareTo=function(e){return e instanceof On?0:this.defaultCompareTo(e)},On.prototype.approximateByteSize=function(){return 4},On.INSTANCE=new On,On);function On(){var e=Nn.call(this)||this;return e.typeOrder=gn.NullValue,e.internalValue=null,e}var Dn,Pn=(Dn=In,m.__extends(xn,Dn),xn.prototype.value=function(e){return this.internalValue},xn.prototype.isEqual=function(e){return e instanceof xn&&this.internalValue===e.internalValue},xn.prototype.compareTo=function(e){return e instanceof xn?Z(this,e):this.defaultCompareTo(e)},xn.prototype.approximateByteSize=function(){return 4},xn.of=function(e){return e?xn.TRUE:xn.FALSE},xn.TRUE=new xn(!0),xn.FALSE=new xn(!1),xn);function xn(e){var t=Dn.call(this)||this;return t.internalValue=e,t.typeOrder=gn.BooleanValue,t}var Rn,Mn=(Rn=In,m.__extends(Ln,Rn),Ln.prototype.value=function(e){return this.internalValue},Ln.prototype.compareTo=function(e){return e instanceof Ln?function(e,t){return e<t?-1:t<e?1:e===t?0:isNaN(e)?isNaN(t)?0:-1:1}(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Ln.prototype.approximateByteSize=function(){return 8},Ln);function Ln(e){var t=Rn.call(this)||this;return t.internalValue=e,t.typeOrder=gn.NumberValue,t}function Fn(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}var Un,jn=(Un=Mn,m.__extends(Vn,Un),Vn.prototype.isEqual=function(e){return e instanceof Vn&&Fn(this.internalValue,e.internalValue)},Vn);function Vn(){return null!==Un&&Un.apply(this,arguments)||this}var qn,Bn=(qn=Mn,m.__extends(Wn,qn),Wn.prototype.isEqual=function(e){return e instanceof Wn&&Fn(this.internalValue,e.internalValue)},Wn.NAN=new Wn(NaN),Wn.POSITIVE_INFINITY=new Wn(1/0),Wn.NEGATIVE_INFINITY=new Wn(-1/0),Wn);function Wn(){return null!==qn&&qn.apply(this,arguments)||this}var zn,Kn=(zn=In,m.__extends(Hn,zn),Hn.prototype.value=function(e){return this.internalValue},Hn.prototype.isEqual=function(e){return e instanceof Hn&&this.internalValue===e.internalValue},Hn.prototype.compareTo=function(e){return e instanceof Hn?Z(this.internalValue,e.internalValue):this.defaultCompareTo(e)},Hn.prototype.approximateByteSize=function(){return 2*this.internalValue.length},Hn);function Hn(e){var t=zn.call(this)||this;return t.internalValue=e,t.typeOrder=gn.StringValue,t}var Qn,Gn=(Qn=In,m.__extends(Yn,Qn),Yn.prototype.value=function(e){return!e||e.timestampsInSnapshots?this.internalValue:this.internalValue.toDate()},Yn.prototype.isEqual=function(e){return e instanceof Yn&&this.internalValue.isEqual(e.internalValue)},Yn.prototype.compareTo=function(e){return e instanceof Yn?this.internalValue._compareTo(e.internalValue):e instanceof $n?-1:this.defaultCompareTo(e)},Yn.prototype.approximateByteSize=function(){return 16},Yn);function Yn(e){var t=Qn.call(this)||this;return t.internalValue=e,t.typeOrder=gn.TimestampValue,t}var Xn,$n=(Xn=In,m.__extends(Jn,Xn),Jn.prototype.value=function(e){return e&&e.serverTimestampBehavior===wn.Estimate?new Gn(this.localWriteTime).value(e):e&&e.serverTimestampBehavior===wn.Previous&&this.previousValue?this.previousValue.value(e):null},Jn.prototype.isEqual=function(e){return e instanceof Jn&&this.localWriteTime.isEqual(e.localWriteTime)},Jn.prototype.compareTo=function(e){return e instanceof Jn?this.localWriteTime._compareTo(e.localWriteTime):e instanceof Gn?1:this.defaultCompareTo(e)},Jn.prototype.toString=function(){return"<ServerTimestamp localTime="+this.localWriteTime.toString()+">"},Jn.prototype.approximateByteSize=function(){return 16+(this.previousValue?this.previousValue.approximateByteSize():0)},Jn);function Jn(e,t){var n=Xn.call(this)||this;return n.localWriteTime=e,n.previousValue=t,n.typeOrder=gn.TimestampValue,n}var Zn,er=(Zn=In,m.__extends(tr,Zn),tr.prototype.value=function(e){return this.internalValue},tr.prototype.isEqual=function(e){return e instanceof tr&&this.internalValue.isEqual(e.internalValue)},tr.prototype.compareTo=function(e){return e instanceof tr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},tr.prototype.approximateByteSize=function(){return this.internalValue._approximateByteSize()},tr);function tr(e){var t=Zn.call(this)||this;return t.internalValue=e,t.typeOrder=gn.BlobValue,t}var nr,rr=(nr=In,m.__extends(ir,nr),ir.prototype.value=function(e){return this.key},ir.prototype.isEqual=function(e){return e instanceof ir&&this.key.isEqual(e.key)&&this.databaseId.isEqual(e.databaseId)},ir.prototype.compareTo=function(e){if(e instanceof ir){var t=this.databaseId.compareTo(e.databaseId);return 0!==t?t:_e.comparator(this.key,e.key)}return this.defaultCompareTo(e)},ir.prototype.approximateByteSize=function(){return this.databaseId.projectId.length+this.databaseId.database.length+this.key.toString().length},ir);function ir(e,t){var n=nr.call(this)||this;return n.databaseId=e,n.key=t,n.typeOrder=gn.RefValue,n}var or,ar=(or=In,m.__extends(sr,or),sr.prototype.value=function(e){return this.internalValue},sr.prototype.isEqual=function(e){return e instanceof sr&&this.internalValue.isEqual(e.internalValue)},sr.prototype.compareTo=function(e){return e instanceof sr?this.internalValue._compareTo(e.internalValue):this.defaultCompareTo(e)},sr.prototype.approximateByteSize=function(){return 16},sr);function sr(e){var t=or.call(this)||this;return t.internalValue=e,t.typeOrder=gn.GeoPointValue,t}var ur,cr=(ur=In,m.__extends(lr,ur),lr.prototype.value=function(n){var r={};return this.internalValue.inorderTraversal(function(e,t){r[e]=t.value(n)}),r},lr.prototype.forEach=function(e){this.internalValue.inorderTraversal(e)},lr.prototype.isEqual=function(e){if(e instanceof lr){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!t.hasNext()&&!n.hasNext()}return!1},lr.prototype.compareTo=function(e){if(e instanceof lr){for(var t=this.internalValue.getIterator(),n=e.internalValue.getIterator();t.hasNext()&&n.hasNext();){var r=t.getNext(),i=n.getNext(),o=Z(r.key,i.key)||r.value.compareTo(i.value);if(o)return o}return Z(t.hasNext(),n.hasNext())}return this.defaultCompareTo(e)},lr.prototype.set=function(e,t){if(v(!e.isEmpty(),"Cannot set field for empty path on ObjectValue"),1===e.length)return this.setChild(e.firstSegment(),t);var n=this.child(e.firstSegment());n instanceof lr||(n=lr.EMPTY);var r=n.set(e.popFirst(),t);return this.setChild(e.firstSegment(),r)},lr.prototype.delete=function(e){if(v(!e.isEmpty(),"Cannot delete field for empty path on ObjectValue"),1===e.length)return new lr(this.internalValue.remove(e.firstSegment()));var t=this.child(e.firstSegment());if(t instanceof lr){var n=t.delete(e.popFirst());return new lr(this.internalValue.insert(e.firstSegment(),n))}return this},lr.prototype.contains=function(e){return null!==this.field(e)},lr.prototype.field=function(e){v(!e.isEmpty(),"Can't get field of empty path");var t=this;return e.forEach(function(e){t=t instanceof lr?t.internalValue.get(e):null}),t},lr.prototype.fieldMask=function(){var i=new Xe(be.comparator);return this.internalValue.forEach(function(e,t){var n=new be([e]);if(t instanceof lr){var r=t.fieldMask().fields;r.isEmpty()?i=i.add(n):r.forEach(function(e){i=i.add(n.child(e))})}else i=i.add(n)}),Qt.fromSet(i)},lr.prototype.approximateByteSize=function(){var n=0;return this.internalValue.inorderTraversal(function(e,t){n+=e.length+t.approximateByteSize()}),n},lr.prototype.toString=function(){return this.internalValue.toString()},lr.prototype.child=function(e){return this.internalValue.get(e)||void 0},lr.prototype.setChild=function(e,t){return new lr(this.internalValue.insert(e,t))},lr.EMPTY=new lr(new Be(Z)),lr);function lr(e){var t=ur.call(this)||this;return t.internalValue=e,t.typeOrder=gn.ObjectValue,t}var hr,fr=(hr=In,m.__extends(pr,hr),pr.prototype.value=function(t){return this.internalValue.map(function(e){return e.value(t)})},pr.prototype.contains=function(e){for(var t=0,n=this.internalValue;t<n.length;t++)if(n[t].isEqual(e))return!0;return!1},pr.prototype.forEach=function(e){this.internalValue.forEach(e)},pr.prototype.isEqual=function(e){if(e instanceof pr){if(this.internalValue.length!==e.internalValue.length)return!1;for(var t=0;t<this.internalValue.length;t++)if(!this.internalValue[t].isEqual(e.internalValue[t]))return!1;return!0}return!1},pr.prototype.compareTo=function(e){if(e instanceof pr){for(var t=Math.min(this.internalValue.length,e.internalValue.length),n=0;n<t;n++){var r=this.internalValue[n].compareTo(e.internalValue[n]);if(r)return r}return Z(this.internalValue.length,e.internalValue.length)}return this.defaultCompareTo(e)},pr.prototype.approximateByteSize=function(){return this.internalValue.reduce(function(e,t){return e+t.approximateByteSize()},0)},pr.prototype.toString=function(){return"["+this.internalValue.map(function(e){return e.toString()}).join(",")+"]"},pr);function pr(e){var t=hr.call(this)||this;return t.internalValue=e,t.typeOrder=gn.ArrayValue,t}var dr=(mr.compareByKey=function(e,t){return _e.comparator(e.key,t.key)},mr);function mr(e,t){this.key=e,this.version=t}var yr,vr=(yr=dr,m.__extends(gr,yr),gr.prototype.field=function(e){if(this.objectValue)return this.objectValue.field(e);this.fieldValueCache||(this.fieldValueCache=new Map);var t=e.canonicalString(),n=this.fieldValueCache.get(t);if(void 0===n){var r=this.getProtoField(e);n=void 0===r?null:this.converter(r),this.fieldValueCache.set(t,n)}return n},gr.prototype.data=function(){var n=this;if(!this.objectValue){var r=cr.EMPTY;O(this.proto.fields||{},function(e,t){r=r.set(new be([e]),n.converter(t))}),this.objectValue=r,this.fieldValueCache=void 0}return this.objectValue},gr.prototype.value=function(){return this.data().value()},gr.prototype.isEqual=function(e){return e instanceof gr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.hasLocalMutations===e.hasLocalMutations&&this.hasCommittedMutations===e.hasCommittedMutations&&this.data().isEqual(e.data())},gr.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(gr.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!0,configurable:!0}),gr.prototype.getProtoField=function(e){v(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var t=this.proto.fields?this.proto.fields[e.firstSegment()]:void 0,n=1;n<e.length;++n){if(!t||!t.mapValue||!t.mapValue.fields)return;t=t.mapValue.fields[e.get(n)]}return t},gr.compareByField=function(e,t,n){var r=t.field(e),i=n.field(e);return null!==r&&null!==i?r.compareTo(i):w("Trying to compare documents on fields that don't exist")},gr);function gr(e,t,n,r,i,o){var a=yr.call(this,e,t)||this;return a.objectValue=r,a.proto=i,a.converter=o,v(void 0!==a.objectValue||void 0!==a.proto&&void 0!==a.converter,"If objectValue is not defined, proto and converter need to be set."),a.hasLocalMutations=!!n.hasLocalMutations,a.hasCommittedMutations=!!n.hasCommittedMutations,a}var br,wr=(br=dr,m.__extends(_r,br),_r.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(_r.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),_r.prototype.isEqual=function(e){return e instanceof _r&&e.hasCommittedMutations===this.hasCommittedMutations&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},_r);function _r(e,t,n){var r=br.call(this,e,t)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}var Er,Tr=(Er=dr,m.__extends(Sr,Er),Sr.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Sr.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),Sr.prototype.isEqual=function(e){return e instanceof Sr&&e.version.isEqual(this.version)&&e.key.isEqual(this.key)},Sr);function Sr(){return null!==Er&&Er.apply(this,arguments)||this}var Cr=(Ir.prototype.get=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(a.isEqual(e))return s}},Ir.prototype.has=function(e){return void 0!==this.get(e)},Ir.prototype.set=function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]},Ir.prototype.delete=function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1},Ir.prototype.forEach=function(s){O(this.inner,function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n],o=i[0],a=i[1];s(o,a)}})},Ir.prototype.isEmpty=function(){return D(this.inner)},Ir);function Ir(e){this.mapKeyFn=e,this.inner={}}var kr=(Object.defineProperty(Nr.prototype,"readTime",{get:function(){return v(void 0!==this._readTime,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this._readTime},set:function(e){v(void 0===this._readTime||this._readTime.isEqual(e),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this._readTime=e},enumerable:!0,configurable:!0}),Nr.prototype.addEntry=function(e,t){this.assertNotApplied(),this.readTime=t,this.changes.set(e.key,e)},Nr.prototype.removeEntry=function(e,t){this.assertNotApplied(),t&&(this.readTime=t),this.changes.set(e,null)},Nr.prototype.getEntry=function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?mt.resolve(n):this.getFromCache(e,t)},Nr.prototype.getEntries=function(e,t){return this.getAllFromCache(e,t)},Nr.prototype.apply=function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)},Nr.prototype.assertNotApplied=function(){v(!this.changesApplied,"Changes have already been applied.")},Nr);function Nr(){this.changes=new Cr(function(e){return e.toString()}),this.changesApplied=!1}var Ar,Or=(Dr.prototype.addEntry=function(e,t,n){return Rr(e).put(Mr(t),n)},Dr.prototype.removeEntry=function(e,t){var n=Rr(e),r=Mr(t);return n.delete(r)},Dr.prototype.updateMetadata=function(t,n){var r=this;return this.getMetadata(t).next(function(e){return e.byteSize+=n,r.setMetadata(t,e)})},Dr.prototype.getEntry=function(e,t){var n=this;return Rr(e).get(Mr(t)).next(function(e){return n.maybeDecodeDocument(e)})},Dr.prototype.getSizedEntry=function(e,t){var n=this;return Rr(e).get(Mr(t)).next(function(e){var t=n.maybeDecodeDocument(e);return t?{maybeDocument:t,size:Lr(e)}:null})},Dr.prototype.getEntries=function(e,t){var r=this,i=nt();return this.forEachDbEntry(e,t,function(e,t){var n=r.maybeDecodeDocument(t);i=i.insert(e,n)}).next(function(){return i})},Dr.prototype.getSizedEntries=function(e,t){var r=this,i=nt(),o=new Be(_e.comparator);return this.forEachDbEntry(e,t,function(e,t){var n=r.maybeDecodeDocument(t);o=n?(i=i.insert(e,n),o.insert(e,Lr(t))):(i=i.insert(e,null),o.insert(e,0))}).next(function(){return{maybeDocuments:i,sizeMap:o}})},Dr.prototype.forEachDbEntry=function(e,t,i){if(t.isEmpty())return mt.resolve();var n=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),o=t.getIterator(),a=o.getNext();return Rr(e).iterate({range:n},function(e,t,n){for(var r=_e.fromSegments(e);a&&_e.comparator(a,r)<0;)i(a,null),a=o.getNext();a&&a.isEqual(r)&&(i(a,t),a=o.hasNext()?o.getNext():null),a?n.skip(a.path.toArray()):n.done()}).next(function(){for(;a;)i(a,null),a=o.hasNext()?o.getNext():null})},Dr.prototype.getDocumentsMatchingQuery=function(e,i,t){var o=this;v(!i.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var a=it(),s=i.path.length+1,n={};if(t.isEqual(Ve.MIN)){var r=i.path.toArray();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.toArray(),c=this.serializer.toDbTimestampKey(t);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=ti.collectionReadTimeIndex}return Rr(e).iterate(n,function(e,t,n){if(e.length===s){var r=o.serializer.fromDbRemoteDocument(t);i.path.isPrefixOf(r.key.path)?r instanceof vr&&i.matches(r)&&(a=a.insert(r.key,r)):n.done()}}).next(function(){return a})},Dr.prototype.getNewDocumentChanges=function(e,t){var r=this,i=tt(),o=this.serializer.toDbTimestampKey(t),n=Rr(e),a=IDBKeyRange.lowerBound(o,!0);return n.iterate({index:ti.readTimeIndex,range:a},function(e,t){var n=r.serializer.fromDbRemoteDocument(t);i=i.insert(n.key,n),o=t.readTime}).next(function(){return{changedDocs:i,readTime:r.serializer.fromDbTimestampKey(o)}})},Dr.prototype.getLastReadTime=function(e){var r=this,t=Rr(e),i=Ve.MIN;return t.iterate({index:ti.readTimeIndex,reverse:!0},function(e,t,n){t.readTime&&(i=r.serializer.fromDbTimestampKey(t.readTime)),n.done()}).next(function(){return i})},Dr.prototype.newChangeBuffer=function(e){return new Dr.RemoteDocumentChangeBuffer(this,!!e&&e.trackRemovals)},Dr.prototype.getSize=function(e){return this.getMetadata(e).next(function(e){return e.byteSize})},Dr.prototype.getMetadata=function(e){return xr(e).get(ri.key).next(function(e){return v(!!e,"Missing document cache metadata"),e})},Dr.prototype.setMetadata=function(e,t){return xr(e).put(ri.key,t)},Dr.prototype.maybeDecodeDocument=function(e){if(e){var t=this.serializer.fromDbRemoteDocument(e);return t instanceof wr&&t.version.isEqual(Ve.forDeletedDoc())?null:t}return null},Dr.RemoteDocumentChangeBuffer=(Ar=kr,m.__extends(Pr,Ar),Pr.prototype.applyChanges=function(a){var s=this,u=[],c=0,l=new Xe(function(e,t){return Z(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(e,t){var n=s.documentSizes.get(e);if(v(void 0!==n,"Cannot modify a document that wasn't read (for "+e+")"),t){v(!s.readTime.isEqual(Ve.MIN),"Cannot add a document with a read time of zero");var r=s.documentCache.serializer.toDbRemoteDocument(t,s.readTime);l=l.add(e.path.popLast());var i=Lr(r);c+=i-n,u.push(s.documentCache.addEntry(a,e,r))}else if(c-=n,s.trackRemovals){var o=s.documentCache.serializer.toDbRemoteDocument(new wr(e,Ve.forDeletedDoc()),s.readTime);u.push(s.documentCache.addEntry(a,e,o))}else u.push(s.documentCache.removeEntry(a,e))}),l.forEach(function(e){u.push(s.documentCache.indexManager.addToCollectionParentIndex(a,e))}),u.push(this.documentCache.updateMetadata(a,c)),mt.waitFor(u)},Pr.prototype.getFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntry(e,t).next(function(e){return null===e?(n.documentSizes.set(t,0),null):(n.documentSizes.set(t,e.size),e.maybeDocument)})},Pr.prototype.getAllFromCache=function(e,t){var n=this;return this.documentCache.getSizedEntries(e,t).next(function(e){var t=e.maybeDocuments;return e.sizeMap.forEach(function(e,t){n.documentSizes.set(e,t)}),t})},Pr),Dr);function Dr(e,t){this.serializer=e,this.indexManager=t}function Pr(e,t){var n=Ar.call(this)||this;return n.documentCache=e,n.trackRemovals=t,n.documentSizes=new Cr(function(e){return e.toString()}),n}function xr(e){return ro.getStore(e,ri.store)}function Rr(e){return ro.getStore(e,ti.store)}function Mr(e){return e.path.toArray()}function Lr(e){var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw w("Unknown remote document type");t=e.noDocument}return JSON.stringify(t).length}var Fr=(Ur.prototype.addToCollectionParentIndex=function(e,t){return this.collectionParentIndex.add(t),mt.resolve()},Ur.prototype.getCollectionParents=function(e,t){return mt.resolve(this.collectionParentIndex.getEntries(t))},Ur);function Ur(){this.collectionParentIndex=new jr}var jr=(Vr.prototype.add=function(e){v(e.length%2==1,"Expected a collection path.");var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Xe(me.comparator),i=!r.has(n);return this.index[t]=r.add(n),i},Vr.prototype.has=function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)},Vr.prototype.getEntries=function(e){return(this.index[e]||new Xe(me.comparator)).toArray()},Vr);function Vr(){this.index={}}var qr=9,Br=(Wr.prototype.createOrUpgrade=function(e,t,n,r){var i=this;v(n<r&&0<=n&&r<=qr,"Unexpected schema upgrade from v"+n+" to v{toVersion}.");var o=new Et(t);n<1&&1<=r&&(function(e){e.createObjectStore(Kr.store)}(e),function(e){e.createObjectStore(Qr.store,{keyPath:Qr.keyPath}),e.createObjectStore(Yr.store,{keyPath:Yr.keyPath,autoIncrement:!0}).createIndex(Yr.userMutationsIndex,Yr.userMutationsKeyPath,{unique:!0}),e.createObjectStore($r.store)}(e),pi(e),function(e){e.createObjectStore(ti.store)}(e));var a=mt.resolve();return n<3&&3<=r&&(0!==n&&(function(e){e.deleteObjectStore(si.store),e.deleteObjectStore(oi.store),e.deleteObjectStore(ci.store)}(e),pi(e)),a=a.next(function(){return function(e){var t=e.store(ci.store),n=new ci(0,0,Ve.MIN.toTimestamp(),0);return t.put(ci.key,n)}(o)})),n<4&&4<=r&&(0!==n&&(a=a.next(function(){return function(r,i){return i.store(Yr.store).loadAll().next(function(e){r.deleteObjectStore(Yr.store),r.createObjectStore(Yr.store,{keyPath:Yr.keyPath,autoIncrement:!0}).createIndex(Yr.userMutationsIndex,Yr.userMutationsKeyPath,{unique:!0});var t=i.store(Yr.store),n=e.map(function(e){return t.put(e)});return mt.waitFor(n)})}(e,o)})),a=a.next(function(){!function(e){e.createObjectStore(di.store,{keyPath:di.keyPath})}(e)})),n<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),n<6&&6<=r&&(a=a.next(function(){return function(e){e.createObjectStore(ri.store)}(e),i.addDocumentGlobal(o)})),n<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),n<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),n<9&&9<=r&&(a=a.next(function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){var t=e.objectStore(ti.store);t.createIndex(ti.readTimeIndex,ti.readTimeIndexPath,{unique:!1}),t.createIndex(ti.collectionReadTimeIndex,ti.collectionReadTimeIndexPath,{unique:!1})}(t)})),a},Wr.prototype.addDocumentGlobal=function(t){var n=0;return t.store(ti.store).iterate(function(e,t){n+=Lr(t)}).next(function(){var e=new ri(n);return t.store(ri.store).put(ri.key,e)})},Wr.prototype.removeAcknowledgedMutations=function(r){var i=this,e=r.store(Qr.store),t=r.store(Yr.store);return e.loadAll().next(function(e){return mt.forEach(e,function(n){var e=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return t.loadAll(Yr.userMutationsIndex,e).next(function(e){return mt.forEach(e,function(e){v(e.userId===n.userId,"Cannot process batch "+e.batchId+" from unexpected user");var t=i.serializer.fromDbMutationBatch(e);return Pt(r,n.userId,t).next(function(){})})})})})},Wr.prototype.ensureSequenceNumbers=function(e){var a=e.store(si.store),t=e.store(ti.store);return Kt(e).next(function(i){var o=[];return t.iterate(function(e,t){var n=new me(e),r=function(e){return[0,Re(e)]}(n);o.push(a.get(r).next(function(e){return e?mt.resolve():function(e){return a.put(new si(0,Re(e),i))}(n)}))}).next(function(){return mt.waitFor(o)})})},Wr.prototype.createCollectionParentIndex=function(e,t){function i(e){if(o.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Re(n)})}}e.createObjectStore(hi.store,{keyPath:hi.keyPath});var r=t.store(hi.store),o=new jr;return t.store(ti.store).iterate({keysOnly:!0},function(e,t){var n=new me(e);return i(n.popLast())}).next(function(){return t.store($r.store).iterate({keysOnly:!0},function(e,t){e[0];var n=e[1],r=(e[2],Fe(n));return i(r.popLast())})})},Wr);function Wr(e){this.serializer=e}var zr=function(e,t){this.seconds=e,this.nanoseconds=t},Kr=(Hr.store="owner",Hr.key="owner",Hr);function Hr(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}var Qr=(Gr.store="mutationQueues",Gr.keyPath="userId",Gr);function Gr(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}var Yr=(Xr.store="mutations",Xr.keyPath="batchId",Xr.userMutationsIndex="userMutationsIndex",Xr.userMutationsKeyPath=["userId","batchId"],Xr);function Xr(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}var $r=(Jr.prefixForUser=function(e){return[e]},Jr.prefixForPath=function(e,t){return[e,Re(t)]},Jr.key=function(e,t,n){return[e,Re(t),n]},Jr.store="documentMutations",Jr.PLACEHOLDER=new Jr,Jr);function Jr(){}var Zr=function(e,t){this.path=e,this.readTime=t},ei=function(e,t){this.path=e,this.version=t},ti=(ni.store="remoteDocuments",ni.readTimeIndex="readTimeIndex",ni.readTimeIndexPath="readTime",ni.collectionReadTimeIndex="collectionReadTimeIndex",ni.collectionReadTimeIndexPath=["parentPath","readTime"],ni);function ni(e,t,n,r,i,o){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var ri=(ii.store="remoteDocumentGlobal",ii.key="remoteDocumentGlobalKey",ii);function ii(e){this.byteSize=e}var oi=(ai.store="targets",ai.keyPath="targetId",ai.queryTargetsIndexName="queryTargetsIndex",ai.queryTargetsKeyPath=["canonicalId","targetId"],ai);function ai(e,t,n,r,i,o,a){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a}var si=(ui.store="targetDocuments",ui.keyPath=["targetId","path"],ui.documentTargetsIndex="documentTargetsIndex",ui.documentTargetsKeyPath=["path","targetId"],ui);function ui(e,t,n){this.targetId=e,this.path=t,v(0===e==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}var ci=(li.key="targetGlobalKey",li.store="targetGlobal",li);function li(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}var hi=(fi.store="collectionParents",fi.keyPath=["collectionId","parent"],fi);function fi(e,t){this.collectionId=e,this.parent=t}function pi(e){e.createObjectStore(si.store,{keyPath:si.keyPath}).createIndex(si.documentTargetsIndex,si.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(oi.store,{keyPath:oi.keyPath}).createIndex(oi.queryTargetsIndexName,oi.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ci.store)}var di=(mi.store="clientMetadata",mi.keyPath="clientId",mi);function mi(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}var yi,vi,gi=[Qr.store,Yr.store,$r.store,ti.store,oi.store,Kr.store,ci.store,si.store],bi=m.__spreadArrays(gi,[di.store]),wi=m.__spreadArrays(bi,[ri.store]),_i=m.__spreadArrays(wi,[hi.store]),Ei=(Ti.prototype.addToCollectionParentIndex=function(e,t){var n=this;if(v(t.length%2==1,"Expected a collection path."),this.collectionParentsCache.has(t))return mt.resolve();var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.collectionParentsCache.add(t)});var o={collectionId:r,parent:Re(i)};return Si(e).put(o)},Ti.prototype.getCollectionParents=function(e,i){var o=[],t=IDBKeyRange.bound([i,""],[te(i),""],!1,!0);return Si(e).loadAll(t).next(function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];if(r.collectionId!==i)break;o.push(Fe(r.parent))}return o})},Ti);function Ti(){this.collectionParentsCache=new jr}function Si(e){return ro.getStore(e,hi.store)}(vi=yi=yi||{})[vi.Listen=0]="Listen",vi[vi.ExistenceFilterMismatch=1]="ExistenceFilterMismatch",vi[vi.LimboResolution=2]="LimboResolution";var Ci=(Ii.prototype.withSequenceNumber=function(e){return new Ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},Ii.prototype.withResumeToken=function(e,t){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)},Ii.prototype.withLastLimboFreeSnapshotVersion=function(e){return new Ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},Ii.prototype.isEqual=function(e){return this.targetId===e.targetId&&this.purpose===e.purpose&&this.sequenceNumber===e.sequenceNumber&&this.snapshotVersion.isEqual(e.snapshotVersion)&&this.lastLimboFreeSnapshotVersion.isEqual(e.lastLimboFreeSnapshotVersion)&&this.resumeToken===e.resumeToken&&this.target.isEqual(e.target)},Ii);function Ii(e,t,n,r,i,o,a){void 0===i&&(i=Ve.MIN),void 0===o&&(o=Ve.MIN),void 0===a&&(a=_()),this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}var ki=(Ni.prototype.fromDbRemoteDocument=function(e){if(e.document)return this.remoteSerializer.fromDocument(e.document,!!e.hasCommittedMutations);if(e.noDocument){var t=_e.fromSegments(e.noDocument.path),n=this.fromDbTimestamp(e.noDocument.readTime);return new wr(t,n,{hasCommittedMutations:!!e.hasCommittedMutations})}return e.unknownDocument?(t=_e.fromSegments(e.unknownDocument.path),n=this.fromDbTimestamp(e.unknownDocument.version),new Tr(t,n)):w("Unexpected DbRemoteDocument")},Ni.prototype.toDbRemoteDocument=function(e,t){var n=this.toDbTimestampKey(t),r=e.key.path.popLast().toArray();if(e instanceof vr){var i=e.proto?e.proto:this.remoteSerializer.toDocument(e),o=e.hasCommittedMutations;return new ti(null,null,i,o,n,r)}if(e instanceof wr){var a=e.key.path.toArray(),s=this.toDbTimestamp(e.version);return o=e.hasCommittedMutations,new ti(null,new Zr(a,s),null,o,n,r)}if(e instanceof Tr){a=e.key.path.toArray();var u=this.toDbTimestamp(e.version);return new ti(new ei(a,u),null,null,!0,n,r)}return w("Unexpected MaybeDocument")},Ni.prototype.toDbTimestampKey=function(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]},Ni.prototype.fromDbTimestampKey=function(e){var t=new Ue(e[0],e[1]);return Ve.fromTimestamp(t)},Ni.prototype.toDbTimestamp=function(e){var t=e.toTimestamp();return new zr(t.seconds,t.nanoseconds)},Ni.prototype.fromDbTimestamp=function(e){var t=new Ue(e.seconds,e.nanoseconds);return Ve.fromTimestamp(t)},Ni.prototype.toDbMutationBatch=function(e,t){var n=this,r=t.baseMutations.map(function(e){return n.remoteSerializer.toMutation(e)}),i=t.mutations.map(function(e){return n.remoteSerializer.toMutation(e)});return new Yr(e,t.batchId,t.localWriteTime.toMillis(),r,i)},Ni.prototype.fromDbMutationBatch=function(e){var t=this,n=(e.baseMutations||[]).map(function(e){return t.remoteSerializer.fromMutation(e)}),r=e.mutations.map(function(e){return t.remoteSerializer.fromMutation(e)}),i=Ue.fromMillis(e.localWriteTimeMs);return new ht(e.batchId,i,n,r)},Ni.prototype.toDbResourcePaths=function(e){var t=[];return e.forEach(function(e){t.push(Re(e.path))}),t},Ni.prototype.fromDbResourcePaths=function(e){for(var t=ut(),n=0,r=e;n<r.length;n++){var i=r[n];t=t.add(new _e(Fe(i)))}return t},Ni.prototype.fromDbTarget=function(e){var t,n=this.fromDbTimestamp(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?this.fromDbTimestamp(e.lastLimboFreeSnapshotVersion):Ve.MIN,i=e.resumeToken;return t=function(e){return void 0!==e.documents}(e.query)?this.remoteSerializer.fromDocumentsTarget(e.query):this.remoteSerializer.fromQueryTarget(e.query),new Ci(t,e.targetId,yi.Listen,e.lastListenSequenceNumber,n,r,i)},Ni.prototype.toDbTarget=function(e){v(yi.Listen===e.purpose,"Only queries with purpose "+yi.Listen+" may be stored, got "+e.purpose);var t,n,r=this.toDbTimestamp(e.snapshotVersion),i=this.toDbTimestamp(e.lastLimboFreeSnapshotVersion);return t=e.target.isDocumentQuery()?this.remoteSerializer.toDocumentsTarget(e.target):this.remoteSerializer.toQueryTarget(e.target),n=e.resumeToken instanceof Uint8Array?(v(gt.isMockPersistence(),"Persisting non-string stream tokens is only supported with mock persistence ."),e.resumeToken.toString()):e.resumeToken,new oi(e.targetId,e.target.canonicalId(),r,n,e.sequenceNumber,i,t)},Ni);function Ni(e){this.remoteSerializer=e}var Ai=(Oi.prototype.getDocument=function(t,n){var r=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKey(t,n).next(function(e){return r.getDocumentInternal(t,n,e)})},Oi.prototype.getDocumentInternal=function(e,r,i){return this.remoteDocumentCache.getEntry(e,r).next(function(e){for(var t=0,n=i;t<n.length;t++)e=n[t].applyToLocalView(r,e);return e})},Oi.prototype.applyLocalMutationsToDocuments=function(e,t,i){var o=nt();return t.forEach(function(e,t){for(var n=0,r=i;n<r.length;n++)t=r[n].applyToLocalView(e,t);o=o.insert(e,t)}),o},Oi.prototype.getDocuments=function(t,e){var n=this;return this.remoteDocumentCache.getEntries(t,e).next(function(e){return n.getLocalViewOfDocuments(t,e)})},Oi.prototype.getLocalViewOfDocuments=function(r,i){var o=this;return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(r,i).next(function(e){var t=o.applyLocalMutationsToDocuments(r,i,e),n=tt();return t.forEach(function(e,t){t=t||new wr(e,Ve.forDeletedDoc()),n=n.insert(e,t)}),n})},Oi.prototype.getDocumentsMatchingQuery=function(e,t,n){return t.isDocumentQuery()?this.getDocumentsMatchingDocumentQuery(e,t.path):t.isCollectionGroupQuery()?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)},Oi.prototype.getDocumentsMatchingDocumentQuery=function(e,t){return this.getDocument(e,new _e(t)).next(function(e){var t=it();return e instanceof vr&&(t=t.insert(e.key,e)),t})},Oi.prototype.getDocumentsMatchingCollectionGroupQuery=function(n,r,i){var o=this;v(r.path.isEmpty(),"Currently we only support collection group queries at the root.");var a=r.collectionGroup,s=it();return this.indexManager.getCollectionParents(n,a).next(function(e){return mt.forEach(e,function(e){var t=r.asCollectionQueryAtPath(e.child(a));return o.getDocumentsMatchingCollectionQuery(n,t,i).next(function(e){e.forEach(function(e,t){s=s.insert(e,t)})})}).next(function(){return s})})},Oi.prototype.getDocumentsMatchingCollectionQuery=function(t,n,e){var l,h,r=this;return this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,e).next(function(e){return l=e,r.mutationQueue.getAllMutationBatchesAffectingQuery(t,n)}).next(function(e){return h=e,r.addMissingBaseDocuments(t,h,l).next(function(e){l=e;for(var t=0,n=h;t<n.length;t++)for(var r=n[t],i=0,o=r.mutations;i<o.length;i++){var a=o[i],s=a.key,u=l.get(s),c=a.applyToLocalView(u,u,r.localWriteTime);l=c instanceof vr?l.insert(s,c):l.remove(s)}})}).next(function(){return l.forEach(function(e,t){n.matches(t)||(l=l.remove(e))}),l})},Oi.prototype.addMissingBaseDocuments=function(e,t,n){for(var r=ut(),i=0,o=t;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof cn&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.remoteDocumentCache.getEntries(e,r).next(function(e){return e.forEach(function(e,t){null!==t&&t instanceof vr&&(c=c.insert(e,t))}),c})},Oi);function Oi(e,t,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.indexManager=n}var Di="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pi=(xi.prototype.addOnCommittedListener=function(e){this.onCommittedListeners.push(e)},xi.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(e){return e()})},xi);function xi(){this.onCommittedListeners=[]}var Ri=(Mi.prototype.isEmpty=function(){return this.refsByKey.isEmpty()},Mi.prototype.addReference=function(e,t){var n=new Li(e,t);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)},Mi.prototype.addReferences=function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})},Mi.prototype.removeReference=function(e,t){this.removeRef(new Li(e,t))},Mi.prototype.removeReferences=function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})},Mi.prototype.removeReferencesForId=function(e){var t=this,n=_e.EMPTY,r=new Li(n,e),i=new Li(n,e+1),o=[];return this.refsByTarget.forEachInRange([r,i],function(e){t.removeRef(e),o.push(e.key)}),o},Mi.prototype.removeAllReferences=function(){var t=this;this.refsByKey.forEach(function(e){return t.removeRef(e)})},Mi.prototype.removeRef=function(e){this.refsByKey=this.refsByKey.delete(e),this.refsByTarget=this.refsByTarget.delete(e)},Mi.prototype.referencesForId=function(e){var t=_e.EMPTY,n=new Li(t,e),r=new Li(t,e+1),i=ut();return this.refsByTarget.forEachInRange([n,r],function(e){i=i.add(e.key)}),i},Mi.prototype.containsKey=function(e){var t=new Li(e,0),n=this.refsByKey.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)},Mi);function Mi(){this.refsByKey=new Xe(Li.compareByKey),this.refsByTarget=new Xe(Li.compareByTargetId)}var Li=(Fi.compareByKey=function(e,t){return _e.comparator(e.key,t.key)||Z(e.targetOrBatchId,t.targetOrBatchId)},Fi.compareByTargetId=function(e,t){return Z(e.targetOrBatchId,t.targetOrBatchId)||_e.comparator(e.key,t.key)},Fi);function Fi(e,t){this.key=e,this.targetOrBatchId=t}var Ui="LocalStore",ji=(Vi.prototype.start=function(){return this.synchronizeLastDocumentChangeReadTime()},Vi.prototype.handleUserChange=function(i){return m.__awaiter(this,void 0,void 0,function(){var t,y,n,r=this;return m.__generator(this,function(e){switch(e.label){case 0:return t=this.mutationQueue,y=this.localDocuments,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(d){var m;return r.mutationQueue.getAllMutationBatches(d).next(function(e){return m=e,t=r.persistence.getMutationQueue(i),y=new Ai(r.remoteDocuments,t,r.persistence.getIndexManager()),t.getAllMutationBatches(d)}).next(function(e){for(var t=[],n=[],r=ut(),i=0,o=m;i<o.length;i++){var a=o[i];t.push(a.batchId);for(var s=0,u=a.mutations;s<u.length;s++){var c=u[s];r=r.add(c.key)}}for(var l=0,h=e;l<h.length;l++){a=h[l],n.push(a.batchId);for(var f=0,p=a.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return y.getDocuments(d,r).next(function(e){return{affectedDocuments:e,removedBatchIds:t,addedBatchIds:n}})})})];case 1:return n=e.sent(),this.mutationQueue=t,this.localDocuments=y,this.queryEngine.setLocalDocumentsView(this.localDocuments),[2,n]}})})},Vi.prototype.localWrite=function(s){var u,c=this,l=Ue.now(),e=s.reduce(function(e,t){return e.add(t.key)},ut());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(a){return c.localDocuments.getDocuments(a,e).next(function(e){u=e;for(var t=[],n=0,r=s;n<r.length;n++){var i=r[n],o=i.extractBaseValue(u.get(i.key));null!=o&&t.push(new cn(i.key,o,o.fieldMask(),en.exists(!0)))}return c.mutationQueue.addMutationBatch(a,l,t,s)})}).then(function(e){var t=e.applyToLocalDocumentSet(u);return{batchId:e.batchId,changes:t}})},Vi.prototype.lookupMutationDocuments=function(e){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(t){return n.mutationQueue.lookupMutationKeys(t,e).next(function(e){return e?n.localDocuments.getDocuments(t,e):mt.resolve(null)})})},Vi.prototype.acknowledgeBatch=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(e){var t=r.batch.keys(),n=i.remoteDocuments.newChangeBuffer({trackRemovals:!0});return i.mutationQueue.acknowledgeBatch(e,r.batch,r.streamToken).next(function(){return i.applyWriteToRemoteDocuments(e,r,n)}).next(function(){return n.apply(e)}).next(function(){return i.mutationQueue.performConsistencyCheck(e)}).next(function(){return i.localDocuments.getDocuments(e,t)})})},Vi.prototype.rejectBatch=function(e){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(t){var n;return r.mutationQueue.lookupMutationBatch(t,e).next(function(e){return v(null!==e,"Attempt to reject nonexistent batch!"),n=e.keys(),r.mutationQueue.removeMutationBatch(t,e)}).next(function(){return r.mutationQueue.performConsistencyCheck(t)}).next(function(){return r.localDocuments.getDocuments(t,n)})})},Vi.prototype.getHighestUnacknowledgedBatchId=function(){var t=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)})},Vi.prototype.getLastStreamToken=function(){var t=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(e){return t.mutationQueue.getLastStreamToken(e)})},Vi.prototype.setLastStreamToken=function(t){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(e){return n.mutationQueue.setLastStreamToken(e,t)})},Vi.prototype.getLastRemoteSnapshotVersion=function(){var t=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(e){return t.targetCache.getLastRemoteSnapshotVersion(e)})},Vi.prototype.applyRemoteEvent=function(u){var c=this,l=u.snapshotVersion,h=this.targetDataByTarget;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(o){var i=c.remoteDocuments.newChangeBuffer({trackRemovals:!0});h=c.targetDataByTarget;var a=[];A(u.targetChanges,function(e,t){var n=h.get(e);if(n){a.push(c.targetCache.removeMatchingKeys(o,t.removedDocuments,e).next(function(){return c.targetCache.addMatchingKeys(o,t.addedDocuments,e)}));var r=t.resumeToken;if(0<r.length){var i=n.withResumeToken(r,l).withSequenceNumber(o.currentSequenceNumber);h=h.insert(e,i),Vi.shouldPersistTargetData(n,i,t)&&a.push(c.targetCache.updateTargetData(o,i))}}});var s=tt(),n=ut();if(u.documentUpdates.forEach(function(e,t){n=n.add(e)}),a.push(i.getEntries(o,n).next(function(r){u.documentUpdates.forEach(function(e,t){var n=r.get(e);t instanceof wr&&t.version.isEqual(Ve.MIN)?(i.removeEntry(e,l),s=s.insert(e,t)):null==n||0<t.version.compareTo(n.version)||0===t.version.compareTo(n.version)&&n.hasPendingWrites?(v(!Ve.MIN.isEqual(l),"Cannot add a document when the remote version is zero"),i.addEntry(t,l),s=s.insert(e,t)):y(Ui,"Ignoring outdated watch update for ",e,". Current version:",n.version," Watch version:",t.version),u.resolvedLimboDocuments.has(e)&&a.push(c.persistence.referenceDelegate.updateLimboDocument(o,e))})})),!l.isEqual(Ve.MIN)){var e=c.targetCache.getLastRemoteSnapshotVersion(o).next(function(e){return v(0<=l.compareTo(e),"Watch stream reverted to previous snapshot?? "+l+" < "+e),c.targetCache.setTargetsMetadata(o,o.currentSequenceNumber,l)});a.push(e)}return mt.waitFor(a).next(function(){return i.apply(o)}).next(function(){return c.localDocuments.getLocalViewOfDocuments(o,s)})}).then(function(e){return c.targetDataByTarget=h,e})},Vi.shouldPersistTargetData=function(e,t,n){return v(0<t.resumeToken.length,"Attempted to persist target data with no resume token"),0===e.resumeToken.length||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=this.RESUME_TOKEN_MAX_AGE_MICROS||0<n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size},Vi.prototype.notifyLocalViewChanges=function(e){for(var n=this,t=0,r=e;t<r.length;t++){var i=r[t],o=i.targetId;if(this.localViewReferences.addReferences(i.addedKeys,o),this.localViewReferences.removeReferences(i.removedKeys,o),!i.fromCache){var a=this.targetDataByTarget.get(o);v(null!==a,"Can't set limbo-free snapshot version for unknown target: "+o);var s=a.snapshotVersion,u=a.withLastLimboFreeSnapshotVersion(s);this.targetDataByTarget=this.targetDataByTarget.insert(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(t){return mt.forEach(e,function(e){return mt.forEach(e.removedKeys,function(e){return n.persistence.referenceDelegate.removeReference(t,e)})})})},Vi.prototype.nextMutationBatch=function(t){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)})},Vi.prototype.readDocument=function(t){var n=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(e){return n.localDocuments.getDocument(e,t)})},Vi.prototype.allocateTarget=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(t){var n;return i.targetCache.getTargetData(t,r).next(function(e){return e?(n=e,mt.resolve(n)):i.targetCache.allocateTargetId(t).next(function(e){return n=new Ci(r,e,yi.Listen,t.currentSequenceNumber),i.targetCache.addTargetData(t,n).next(function(){return n})})})}).then(function(e){return null===i.targetDataByTarget.get(e.targetId)&&(i.targetDataByTarget=i.targetDataByTarget.insert(e.targetId,e),i.targetIdByTarget.set(r,e.targetId)),e})},Vi.prototype.getTargetData=function(e,t){var n=this.targetIdByTarget.get(t);return void 0!==n?mt.resolve(this.targetDataByTarget.get(n)):this.targetCache.getTargetData(e,t)},Vi.prototype.releaseTarget=function(n,r){var i=this,o=this.targetDataByTarget.get(n);v(null!==o,"Tried to release nonexistent target: "+n);var e=r?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",e,function(t){var e=i.localViewReferences.removeReferencesForId(n);return r?mt.resolve():mt.forEach(e,function(e){return i.persistence.referenceDelegate.removeReference(t,e)}).next(function(){i.persistence.referenceDelegate.removeTarget(t,o)})}).then(function(){i.targetDataByTarget=i.targetDataByTarget.remove(n),i.targetIdByTarget.delete(o.target)})},Vi.prototype.executeQuery=function(e,n){var r=this,i=Ve.MIN,o=ut();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(t){return r.getTargetData(t,e.toTarget()).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.targetCache.getMatchingKeysForTargetId(t,e.targetId).next(function(e){o=e})}).next(function(){return r.queryEngine.getDocumentsMatchingQuery(t,e,n?i:Ve.MIN,n?o:ut())}).next(function(e){return{documents:e,remoteKeys:o}})})},Vi.prototype.remoteDocumentKeys=function(t){var n=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(e){return n.targetCache.getMatchingKeysForTargetId(e,t)})},Vi.prototype.getActiveClients=function(){return this.persistence.getActiveClients()},Vi.prototype.removeCachedMutationBatchMetadata=function(e){this.mutationQueue.removeCachedMutationKeys(e)},Vi.prototype.setNetworkEnabled=function(e){this.persistence.setNetworkEnabled(e)},Vi.prototype.applyWriteToRemoteDocuments=function(e,i,o){var t=this,a=i.batch,n=a.keys(),s=mt.resolve();return n.forEach(function(r){s=s.next(function(){return o.getEntry(e,r)}).next(function(e){var t=e,n=i.docVersions.get(r);v(null!==n,"ackVersions should contain every doc in the write."),(!t||t.version.compareTo(n)<0)&&((t=a.applyToRemoteDocument(r,t,i))?o.addEntry(t,i.commitVersion):v(!e,"Mutation batch "+a+" applied to document "+e+" resulted in null"))})}),s.next(function(){return t.mutationQueue.removeMutationBatch(e,a)})},Vi.prototype.collectGarbage=function(t){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(e){return t.collect(e,n.targetDataByTarget)})},Vi.prototype.getTarget=function(t){var n=this,e=this.targetDataByTarget.get(t);return e?Promise.resolve(e.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(e){return n.targetCache.getTargetDataForTarget(e,t).next(function(e){return e?e.target:null})})},Vi.prototype.getNewDocumentChanges=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(e){return r.remoteDocuments.getNewDocumentChanges(e,r.lastDocumentChangeReadTime)}).then(function(e){var t=e.changedDocs,n=e.readTime;return r.lastDocumentChangeReadTime=n,t})},Vi.prototype.synchronizeLastDocumentChangeReadTime=function(){return m.__awaiter(this,void 0,void 0,function(){var t,n=this;return m.__generator(this,function(e){switch(e.label){case 0:return[4,(t=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(e){return n.remoteDocuments.getLastReadTime(e)})];case 1:return t.lastDocumentChangeReadTime=e.sent(),[2]}})})},Vi.RESUME_TOKEN_MAX_AGE_MICROS=3e8,Vi);function Vi(e,t,n){this.persistence=e,this.queryEngine=t,this.localViewReferences=new Ri,this.targetDataByTarget=new Be(Z),this.targetIdByTarget=new Cr(function(e){return e.canonicalId()}),this.lastDocumentChangeReadTime=Ve.MIN,v(e.started,"LocalStore was passed an unstarted persistence implementation"),this.persistence.referenceDelegate.setInMemoryPins(this.localViewReferences),this.mutationQueue=e.getMutationQueue(n),this.remoteDocuments=e.getRemoteDocumentCache(),this.targetCache=e.getTargetCache(),this.localDocuments=new Ai(this.remoteDocuments,this.mutationQueue,this.persistence.getIndexManager()),this.queryEngine.setLocalDocumentsView(this.localDocuments)}function qi(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){if(t.code!==T.FAILED_PRECONDITION||t.message!==Di)throw t;return y(Ui,"Unexpectedly lost primary lease"),[2]})})}function Bi(e,t){var n=e[0],r=e[1],i=t[0],o=t[1],a=Z(n,i);return 0===a?Z(r,o):a}var Wi=(zi.prototype.nextIndex=function(){return++this.previousIndex},zi.prototype.addElement=function(e){var t=[e,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Bi(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}},Object.defineProperty(zi.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),zi);function zi(e){this.maxElements=e,this.buffer=new Xe(Bi),this.previousIndex=0}var Ki={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Hi=(Qi.withCacheSize=function(e){return new Qi(e,Qi.DEFAULT_COLLECTION_PERCENTILE,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},Qi.COLLECTION_DISABLED=-1,Qi.MINIMUM_CACHE_SIZE_BYTES=1048576,Qi.DEFAULT=new Qi(Qi.DEFAULT_CACHE_SIZE_BYTES=41943040,Qi.DEFAULT_COLLECTION_PERCENTILE=10,Qi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3),Qi.DISABLED=new Qi(Qi.COLLECTION_DISABLED,0,0),Qi);function Qi(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}var Gi=(Yi.prototype.start=function(){v(null===this.gcTask,"Cannot start an already started LruScheduler"),this.garbageCollector.params.cacheSizeCollectionThreshold!==Hi.COLLECTION_DISABLED&&this.scheduleGC()},Yi.prototype.stop=function(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)},Object.defineProperty(Yi.prototype,"started",{get:function(){return null!==this.gcTask},enumerable:!0,configurable:!0}),Yi.prototype.scheduleGC=function(){var e=this;v(null===this.gcTask,"Cannot schedule GC while a task is pending");var t=this.hasRun?3e5:6e4;y("LruGarbageCollector","Garbage collection scheduled in "+t+"ms"),this.gcTask=this.asyncQueue.enqueueAfterDelay(Te.LruGarbageCollection,t,function(){return e.gcTask=null,e.hasRun=!0,e.localStore.collectGarbage(e.garbageCollector).then(function(){return e.scheduleGC()}).catch(qi)})},Yi);function Yi(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.hasRun=!1,this.gcTask=null}var Xi=($i.prototype.calculateTargetCount=function(e,t){return this.delegate.getSequenceNumberCount(e).next(function(e){return Math.floor(t/100*e)})},$i.prototype.nthSequenceNumber=function(e,t){var n=this;if(0===t)return mt.resolve(le.INVALID);var r=new Wi(t);return this.delegate.forEachTarget(e,function(e){return r.addElement(e.sequenceNumber)}).next(function(){return n.delegate.forEachOrphanedDocumentSequenceNumber(e,function(e){return r.addElement(e)})}).next(function(){return r.maxValue})},$i.prototype.removeTargets=function(e,t,n){return this.delegate.removeTargets(e,t,n)},$i.prototype.removeOrphanedDocuments=function(e,t){return this.delegate.removeOrphanedDocuments(e,t)},$i.prototype.collect=function(t,n){var r=this;return this.params.cacheSizeCollectionThreshold===Hi.COLLECTION_DISABLED?(y("LruGarbageCollector","Garbage collection skipped; disabled"),mt.resolve(Ki)):this.getCacheSize(t).next(function(e){return e<r.params.cacheSizeCollectionThreshold?(y("LruGarbageCollector","Garbage collection skipped; Cache size "+e+" is lower than threshold "+r.params.cacheSizeCollectionThreshold),Ki):r.runGarbageCollection(t,n)})},$i.prototype.getCacheSize=function(e){return this.delegate.getCacheSize(e)},$i.prototype.runGarbageCollection=function(t,n){var r,i,o,a,s,u,c,l=this,h=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return i=e>l.params.maximumSequenceNumbersToCollect?(y("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+l.params.maximumSequenceNumbersToCollect+" from "+e),l.params.maximumSequenceNumbersToCollect):e,a=Date.now(),l.nthSequenceNumber(t,i)}).next(function(e){return r=e,s=Date.now(),l.removeTargets(t,r,n)}).next(function(e){return o=e,u=Date.now(),l.removeOrphanedDocuments(t,r)}).next(function(e){return c=Date.now(),d()<=f.DEBUG&&y("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(a-h)+"ms\n\tDetermined least recently used "+i+" in "+(s-a)+"ms\n\tRemoved "+o+" targets in "+(u-s)+"ms\n\tRemoved "+e+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-h)+"ms"),mt.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:e})})},$i);function $i(e,t){this.delegate=e,this.params=t}var Ji,Zi="IndexedDbPersistence",eo="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",to=(Ji=Pi,m.__extends(no,Ji),no);function no(e,t){var n=Ji.call(this)||this;return n.simpleDbTransaction=e,n.currentSequenceNumber=t,n}var ro=(io.getStore=function(e,t){if(e instanceof to)return gt.getStore(e.simpleDbTransaction,t);throw w("IndexedDbPersistence must use instances of IndexedDbTransaction")},io.createIndexedDbPersistence=function(n){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:if(!io.isAvailable())throw new S(T.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(t=new io(n.allowTabSynchronization,n.persistenceKey,n.clientId,n.platform,n.lruParams,n.queue,n.serializer,n.sequenceNumberSyncer)).start()];case 1:return e.sent(),[2,t]}})})},io.prototype.start=function(){var t=this;return v(!this.started,"IndexedDbPersistence double-started!"),v(null!==this.window,"Expected 'window' to be defined"),gt.openOrCreate(this.dbName,qr,new Br(this.serializer)).then(function(e){return t.simpleDb=e,t.updateClientMetadataAndTryBecomePrimary()}).then(function(){return t.attachVisibilityHandler(),t.attachWindowUnloadHook(),t.scheduleClientMetadataAndPrimaryLeaseRefreshes(),t.simpleDb.runTransaction("readonly-idempotent",[ci.store],function(e){return Kt(e)})}).then(function(e){t.listenSequence=new le(e,t.sequenceNumberSyncer)}).then(function(){t._started=!0}).catch(function(e){return t.simpleDb&&t.simpleDb.close(),Promise.reject(e)})},io.prototype.setPrimaryStateListener=function(n){var e=this;return this.primaryStateListener=function(t){return m.__awaiter(e,void 0,void 0,function(){return m.__generator(this,function(e){return this.started?[2,n(t)]:[2]})})},n(this.isPrimary)},io.prototype.setDatabaseDeletedListener=function(n){var e=this;this.simpleDb.setVersionChangeListener(function(t){return m.__awaiter(e,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return null!==t.newVersion?[3,2]:[4,n()];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},io.prototype.setNetworkEnabled=function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.queue.enqueueAndForget(function(){return m.__awaiter(t,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.started?[4,this.updateClientMetadataAndTryBecomePrimary()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}))},io.prototype.updateClientMetadataAndTryBecomePrimary=function(){var n=this;return this.simpleDb.runTransaction("readwrite-idempotent",_i,function(t){return ao(t).put(new di(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.verifyPrimaryLease(t).next(function(e){e||(n.isPrimary=!1,n.queue.enqueueAndForget(function(){return n.primaryStateListener(!1)}))})}).next(function(){return n.canActAsPrimary(t)}).next(function(e){return n.isPrimary&&!e?n.releasePrimaryLeaseIfHeld(t).next(function(){return!1}):!!e&&n.acquireOrExtendPrimaryLease(t).next(function(){return!0})})}).catch(function(e){if(!n.allowTabSynchronization)throw e;return y(Zi,"Releasing owner lease after error during lease refresh",e),!1}).then(function(e){n.isPrimary!==e&&n.queue.enqueueAndForget(function(){return n.primaryStateListener(e)}),n.isPrimary=e})},io.prototype.verifyPrimaryLease=function(e){var t=this;return oo(e).get(Kr.key).next(function(e){return mt.resolve(t.isLocalClient(e))})},io.prototype.removeClientMetadata=function(e){return ao(e).delete(this.clientId)},io.prototype.maybeGarbageCollectMultiClientState=function(){return m.__awaiter(this,void 0,void 0,function(){var i=this;return m.__generator(this,function(e){switch(e.label){case 0:return!this.isPrimary||this.isWithinAge(this.lastGarbageCollectionTime,18e5)?[3,2]:(this.lastGarbageCollectionTime=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(e){var r=io.getStore(e,di.store);return r.loadAll().next(function(e){var t=i.filterActiveClients(e,18e5),n=e.filter(function(e){return-1===t.indexOf(e)});return mt.forEach(n,function(e){return r.delete(e.clientId)}).next(function(){return n})})})]);case 1:e.sent().forEach(function(e){i.window.localStorage.removeItem(i.zombiedClientLocalStorageKey(e.clientId))}),e.label=2;case 2:return[2]}})})},io.prototype.scheduleClientMetadataAndPrimaryLeaseRefreshes=function(){var e=this;this.clientMetadataRefresher=this.queue.enqueueAfterDelay(Te.ClientMetadataRefresh,4e3,function(){return e.updateClientMetadataAndTryBecomePrimary().then(function(){return e.maybeGarbageCollectMultiClientState()}).then(function(){return e.scheduleClientMetadataAndPrimaryLeaseRefreshes()})})},io.prototype.isLocalClient=function(e){return!!e&&e.ownerId===this.clientId},io.prototype.canActAsPrimary=function(t){var i=this;return oo(t).get(Kr.key).next(function(e){if(null!==e&&i.isWithinAge(e.leaseTimestampMs,5e3)&&!i.isClientZombied(e.ownerId)){if(i.isLocalClient(e)&&i.networkEnabled)return!0;if(!i.isLocalClient(e)){if(!e.allowTabSynchronization)throw new S(T.FAILED_PRECONDITION,eo);return!1}}return!(!i.networkEnabled||!i.inForeground)||ao(t).loadAll().next(function(e){return void 0===i.filterActiveClients(e,5e3).find(function(e){if(i.clientId!==e.clientId){var t=!i.networkEnabled&&e.networkEnabled,n=!i.inForeground&&e.inForeground,r=i.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1})})}).next(function(e){return i.isPrimary!==e&&y(Zi,"Client "+(e?"is":"is not")+" eligible for a primary lease."),e})},io.prototype.shutdown=function(){return m.__awaiter(this,void 0,void 0,function(){var t=this;return m.__generator(this,function(e){switch(e.label){case 0:return this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),[4,this.simpleDb.runTransaction("readwrite-idempotent",[Kr.store,di.store],function(e){return t.releasePrimaryLeaseIfHeld(e).next(function(){return t.removeClientMetadata(e)})})];case 1:return e.sent(),this.simpleDb.close(),this.removeClientZombiedEntry(),[2]}})})},io.prototype.filterActiveClients=function(e,t){var n=this;return e.filter(function(e){return n.isWithinAge(e.updateTimeMs,t)&&!n.isClientZombied(e.clientId)})},io.prototype.getActiveClients=function(){var t=this;return this.simpleDb.runTransaction("readonly-idempotent",[di.store],function(e){return ao(e).loadAll().next(function(e){return t.filterActiveClients(e,18e5).map(function(e){return e.clientId})})})},io.clearPersistence=function(n){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:return io.isAvailable()?(t=n+io.MAIN_DATABASE,[4,gt.delete(t)]):[2,Promise.resolve()];case 1:return e.sent(),[2]}})})},Object.defineProperty(io.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),io.prototype.getMutationQueue=function(e){return v(this.started,"Cannot initialize MutationQueue before persistence is started."),At.forUser(e,this.serializer,this.indexManager,this.referenceDelegate)},io.prototype.getTargetCache=function(){return v(this.started,"Cannot initialize TargetCache before persistence is started."),this.targetCache},io.prototype.getRemoteDocumentCache=function(){return v(this.started,"Cannot initialize RemoteDocumentCache before persistence is started."),this.remoteDocumentCache},io.prototype.getIndexManager=function(){return v(this.started,"Cannot initialize IndexManager before persistence is started."),this.indexManager},io.prototype.runTransaction=function(n,e,r){var i=this;y(Zi,"Starting transaction:",n);var o,t=e.endsWith("idempotent"),a=e.startsWith("readonly")?t?"readonly-idempotent":"readonly":t?"readwrite-idempotent":"readwrite";return this.simpleDb.runTransaction(a,_i,function(t){return o=new to(t,i.listenSequence.next()),"readwrite-primary"===e||"readwrite-primary-idempotent"===e?i.verifyPrimaryLease(t).next(function(e){return!!e||i.canActAsPrimary(t)}).next(function(e){if(!e)throw c("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.queue.enqueueAndForget(function(){return i.primaryStateListener(!1)}),new S(T.FAILED_PRECONDITION,Di);return r(o)}).next(function(e){return i.acquireOrExtendPrimaryLease(t).next(function(){return e})}):i.verifyAllowTabSynchronization(t).next(function(){return r(o)})}).then(function(e){return o.raiseOnCommittedEvent(),e})},io.prototype.verifyAllowTabSynchronization=function(e){var t=this;return oo(e).get(Kr.key).next(function(e){if(null!==e&&t.isWithinAge(e.leaseTimestampMs,5e3)&&!t.isClientZombied(e.ownerId)&&!t.isLocalClient(e)&&!e.allowTabSynchronization)throw new S(T.FAILED_PRECONDITION,eo)})},io.prototype.acquireOrExtendPrimaryLease=function(e){var t=new Kr(this.clientId,this.allowTabSynchronization,Date.now());return oo(e).put(Kr.key,t)},io.isAvailable=function(){return gt.isAvailable()},io.buildStoragePrefix=function(e){var t=e.databaseId.projectId;return e.databaseId.isDefaultDatabase||(t+="."+e.databaseId.database),"firestore/"+e.persistenceKey+"/"+t+"/"},io.prototype.releasePrimaryLeaseIfHeld=function(e){var t=this,n=oo(e);return n.get(Kr.key).next(function(e){return t.isLocalClient(e)?(y(Zi,"Releasing primary lease."),n.delete(Kr.key)):mt.resolve()})},io.prototype.isWithinAge=function(e,t){var n=Date.now();return!(e<n-t||n<e&&(c("Detected an update time that is in the future: "+e+" > "+n),1))},io.prototype.attachVisibilityHandler=function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.documentVisibilityHandler=function(){e.queue.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.updateClientMetadataAndTryBecomePrimary()})},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground="visible"===this.document.visibilityState)},io.prototype.detachVisibilityHandler=function(){this.documentVisibilityHandler&&(v(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)},io.prototype.attachWindowUnloadHook=function(){var e=this;"function"==typeof this.window.addEventListener&&(this.windowUnloadHandler=function(){e.markClientZombied(),e.queue.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.windowUnloadHandler))},io.prototype.detachWindowUnloadHook=function(){this.windowUnloadHandler&&(v("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.windowUnloadHandler),this.windowUnloadHandler=null)},io.prototype.isClientZombied=function(e){try{var t=null!==this.webStorage.getItem(this.zombiedClientLocalStorageKey(e));return y(Zi,"Client '"+e+"' "+(t?"is":"is not")+" zombied in LocalStorage"),t}catch(e){return c(Zi,"Failed to get zombied client id.",e),!1}},io.prototype.markClientZombied=function(){try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(e){c("Failed to set zombie client id.",e)}},io.prototype.removeClientZombiedEntry=function(){try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch(e){}},io.prototype.zombiedClientLocalStorageKey=function(e){return"firestore_zombie_"+this.persistenceKey+"_"+e},io.MAIN_DATABASE="main",io);function io(e,t,n,r,i,o,a,s){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.queue=o,this.sequenceNumberSyncer=s,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=function(e){return Promise.resolve()},this.referenceDelegate=new so(this,i),this.dbName=t+io.MAIN_DATABASE,this.serializer=new ki(a),this.document=r.document,this.targetCache=new qt(this.referenceDelegate,this.serializer),this.indexManager=new Ei,this.remoteDocumentCache=new Or(this.serializer,this.indexManager),!r.window||!r.window.localStorage)throw new S(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.webStorage=this.window.localStorage}function oo(e){return e.store(Kr.store)}function ao(e){return e.store(di.store)}var so=(uo.prototype.getSequenceNumberCount=function(e){var n=this.orphanedDocmentCount(e);return this.db.getTargetCache().getTargetCount(e).next(function(t){return n.next(function(e){return t+e})})},uo.prototype.orphanedDocmentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},uo.prototype.forEachTarget=function(e,t){return this.db.getTargetCache().forEachTarget(e,t)},uo.prototype.forEachOrphanedDocumentSequenceNumber=function(e,n){return this.forEachOrphanedDocument(e,function(e,t){return n(t)})},uo.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},uo.prototype.addReference=function(e,t){return co(e,t)},uo.prototype.removeReference=function(e,t){return co(e,t)},uo.prototype.removeTargets=function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)},uo.prototype.removeMutationReference=function(e,t){return co(e,t)},uo.prototype.isPinned=function(e,t){return this.inMemoryPins.containsKey(t)?mt.resolve(!0):function(t,n){var r=!1;return Lt(t).iterateSerial(function(e){return Dt(t,e,n).next(function(e){return e&&(r=!0),mt.resolve(!e)})}).next(function(){return r})}(e,t)},uo.prototype.removeOrphanedDocuments=function(r,i){var o=this,a=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],u=0;return this.forEachOrphanedDocument(r,function(t,e){if(e<=i){var n=o.isPinned(r,t).next(function(e){if(!e)return u++,a.getEntry(r,t).next(function(){return a.removeEntry(t),Ht(r).delete(function(e){return[0,Re(e.path)]}(t))})});s.push(n)}}).next(function(){return mt.waitFor(s)}).next(function(){return a.apply(r)}).next(function(){return u})},uo.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)},uo.prototype.updateLimboDocument=function(e,t){return co(e,t)},uo.prototype.forEachOrphanedDocument=function(e,o){var a,t=Ht(e),s=le.INVALID;return t.iterate({index:si.documentTargetsIndex},function(e,t){var n=e[0],r=(e[1],t.path),i=t.sequenceNumber;0===n?(s!==le.INVALID&&o(new _e(Fe(a)),s),s=i,a=r):s=le.INVALID}).next(function(){s!==le.INVALID&&o(new _e(Fe(a)),s)})},uo.prototype.getCacheSize=function(e){return this.db.getRemoteDocumentCache().getSize(e)},uo);function uo(e,t){this.db=e,this.inMemoryPins=null,this.garbageCollector=new Xi(this,t)}function co(e,t){return Ht(e).put(function(e,t){return new si(0,Re(e.path),t)}(t,e.currentSequenceNumber))}var lo=Number,ho=lo.MIN_SAFE_INTEGER||-(Math.pow(2,53)-1),fo=lo.MAX_SAFE_INTEGER||Math.pow(2,53)-1,po=lo.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function mo(e){return null==e}function yo(e){return po(e)&&e<=fo&&ho<=e}var vo,go,bo=(wo.prototype.canonicalId=function(){if(null===this.memoizedCanonicalId){var e=this.path.canonicalString();null!==this.collectionGroup&&(e+="|cg:"+this.collectionGroup),e+="|f:";for(var t=0,n=this.filters;t<n.length;t++)e+=n[t].canonicalId(),e+=",";e+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)e+=i[r].canonicalId(),e+=",";mo(this.limit)||(e+="|l:",e+=this.limit),this.startAt&&(e+="|lb:",e+=this.startAt.canonicalId()),this.endAt&&(e+="|ub:",e+=this.endAt.canonicalId()),this.memoizedCanonicalId=e}return this.memoizedCanonicalId},wo.prototype.toString=function(){var e=this.path.canonicalString();return null!==this.collectionGroup&&(e+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(e+=", filters: ["+this.filters.join(", ")+"]"),mo(this.limit)||(e+=", limit: "+this.limit),0<this.orderBy.length&&(e+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(e+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(e+=", endAt: "+this.endAt.canonicalId()),"Target("+e+")"},wo.prototype.isEqual=function(e){if(this.limit!==e.limit)return!1;if(this.orderBy.length!==e.orderBy.length)return!1;for(var t=0;t<this.orderBy.length;t++)if(!this.orderBy[t].isEqual(e.orderBy[t]))return!1;if(this.filters.length!==e.filters.length)return!1;for(t=0;t<this.filters.length;t++)if(!this.filters[t].isEqual(e.filters[t]))return!1;return this.collectionGroup===e.collectionGroup&&!!this.path.isEqual(e.path)&&!(null!==this.startAt?!this.startAt.isEqual(e.startAt):null!==e.startAt)&&(null!==this.endAt?this.endAt.isEqual(e.endAt):null===e.endAt)},wo.prototype.isDocumentQuery=function(){return _e.isDocumentKey(this.path)&&null===this.collectionGroup&&0===this.filters.length},wo);function wo(e,t,n,r,i,o,a){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}(go=vo=vo||{}).First="F",go.Last="L";var _o=(Eo.atPath=function(e){return new Eo(e)},Object.defineProperty(Eo.prototype,"orderBy",{get:function(){if(null===this.memoizedOrderBy){var e=this.getInequalityFilterField(),t=this.getFirstOrderByField();if(null!==e&&null===t)e.isKeyField()?this.memoizedOrderBy=[Xo]:this.memoizedOrderBy=[new Go(e),Xo];else{v(null===e||null!==t&&e.isEqual(t),"First orderBy should match inequality field.");for(var n=!(this.memoizedOrderBy=[]),r=0,i=this.explicitOrderBy;r<i.length;r++){var o=i[r];this.memoizedOrderBy.push(o),o.field.isKeyField()&&(n=!0)}if(!n){var a=0<this.explicitOrderBy.length?this.explicitOrderBy[this.explicitOrderBy.length-1].dir:zo.ASCENDING;this.memoizedOrderBy.push(a===zo.ASCENDING?Xo:$o)}}}return this.memoizedOrderBy},enumerable:!0,configurable:!0}),Eo.prototype.addFilter=function(e){v(null==this.getInequalityFilterField()||!(e instanceof ko)||!e.isInequality()||e.field.isEqual(this.getInequalityFilterField()),"Query must only have one inequality field."),v(!this.isDocumentQuery(),"No filtering allowed for document query");var t=this.filters.concat([e]);return new Eo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),t,this.limit,this.limitType,this.startAt,this.endAt)},Eo.prototype.addOrderBy=function(e){v(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var t=this.explicitOrderBy.concat([e]);return new Eo(this.path,this.collectionGroup,t,this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Eo.prototype.withLimitToFirst=function(e){return new Eo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,vo.First,this.startAt,this.endAt)},Eo.prototype.withLimitToLast=function(e){return new Eo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),e,vo.Last,this.startAt,this.endAt)},Eo.prototype.withStartAt=function(e){return new Eo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,e,this.endAt)},Eo.prototype.withEndAt=function(e){return new Eo(this.path,this.collectionGroup,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,e)},Eo.prototype.asCollectionQueryAtPath=function(e){return new Eo(e,null,this.explicitOrderBy.slice(),this.filters.slice(),this.limit,this.limitType,this.startAt,this.endAt)},Eo.prototype.matchesAllDocuments=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.explicitOrderBy.length||1===this.explicitOrderBy.length&&this.explicitOrderBy[0].field.isKeyField())},Eo.prototype.canonicalId=function(){return this.toTarget().canonicalId()+"|lt:"+this.limitType},Eo.prototype.toString=function(){return"Query(target="+this.toTarget().toString()+"; limitType="+this.limitType+")"},Eo.prototype.isEqual=function(e){return this.toTarget().isEqual(e.toTarget())&&this.limitType===e.limitType},Eo.prototype.docComparator=function(e,t){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],a=o.compare(e,t);if(0!==a)return a;n=n||o.field.isKeyField()}return v(n,"orderBy used that doesn't compare on key field"),0},Eo.prototype.matches=function(e){return this.matchesPathAndCollectionGroup(e)&&this.matchesOrderBy(e)&&this.matchesFilters(e)&&this.matchesBounds(e)},Eo.prototype.hasLimitToFirst=function(){return!mo(this.limit)&&this.limitType===vo.First},Eo.prototype.hasLimitToLast=function(){return!mo(this.limit)&&this.limitType===vo.Last},Eo.prototype.getFirstOrderByField=function(){return 0<this.explicitOrderBy.length?this.explicitOrderBy[0].field:null},Eo.prototype.getInequalityFilterField=function(){for(var e=0,t=this.filters;e<t.length;e++){var n=t[e];if(n instanceof ko&&n.isInequality())return n.field}return null},Eo.prototype.findFilterOperator=function(e){for(var t=0,n=this.filters;t<n.length;t++){var r=n[t];if(r instanceof ko&&0<=e.indexOf(r.op))return r.op}return null},Eo.prototype.isDocumentQuery=function(){return this.toTarget().isDocumentQuery()},Eo.prototype.isCollectionGroupQuery=function(){return null!==this.collectionGroup},Eo.prototype.toTarget=function(){if(!this.memoizedTarget)if(this.limitType===vo.First)this.memoizedTarget=new bo(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var e=[],t=0,n=this.orderBy;t<n.length;t++){var r=n[t],i=r.dir===zo.DESCENDING?zo.ASCENDING:zo.DESCENDING;e.push(new Go(r.field,i))}var o=this.endAt?new Ho(this.endAt.position,!this.endAt.before):null,a=this.startAt?new Ho(this.startAt.position,!this.startAt.before):null;this.memoizedTarget=new bo(this.path,this.collectionGroup,e,this.filters,this.limit,o,a)}return this.memoizedTarget},Eo.prototype.matchesPathAndCollectionGroup=function(e){var t=e.key.path;return null!==this.collectionGroup?e.key.hasCollectionId(this.collectionGroup)&&this.path.isPrefixOf(t):_e.isDocumentKey(this.path)?this.path.isEqual(t):this.path.isImmediateParentOf(t)},Eo.prototype.matchesOrderBy=function(e){for(var t=0,n=this.explicitOrderBy;t<n.length;t++){var r=n[t];if(!r.field.isKeyField()&&null===e.field(r.field))return!1}return!0},Eo.prototype.matchesFilters=function(e){for(var t=0,n=this.filters;t<n.length;t++)if(!n[t].matches(e))return!1;return!0},Eo.prototype.matchesBounds=function(e){return!(this.startAt&&!this.startAt.sortsBeforeDocument(this.orderBy,e)||this.endAt&&this.endAt.sortsBeforeDocument(this.orderBy,e))},Eo.prototype.assertValidBound=function(e){v(e.position.length<=this.orderBy.length,"Bound is longer than orderBy")},Eo);function Eo(e,t,n,r,i,o,a,s){void 0===t&&(t=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=vo.First),void 0===a&&(a=null),void 0===s&&(s=null),this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.memoizedOrderBy=null,this.memoizedTarget=null,this.startAt&&this.assertValidBound(this.startAt),this.endAt&&this.assertValidBound(this.endAt)}function To(){}var So=(Co.fromString=function(e){switch(e){case"<":return Co.LESS_THAN;case"<=":return Co.LESS_THAN_OR_EQUAL;case"==":return Co.EQUAL;case">=":return Co.GREATER_THAN_OR_EQUAL;case">":return Co.GREATER_THAN;case"array-contains":return Co.ARRAY_CONTAINS;case"in":return Co.IN;case"array-contains-any":return Co.ARRAY_CONTAINS_ANY;default:return w("Unknown FieldFilter operator: "+e)}},Co.prototype.toString=function(){return this.name},Co.prototype.isEqual=function(e){return this.name===e.name},Co.LESS_THAN=new Co("<"),Co.LESS_THAN_OR_EQUAL=new Co("<="),Co.EQUAL=new Co("=="),Co.GREATER_THAN=new Co(">"),Co.GREATER_THAN_OR_EQUAL=new Co(">="),Co.ARRAY_CONTAINS=new Co("array-contains"),Co.IN=new Co("in"),Co.ARRAY_CONTAINS_ANY=new Co("array-contains-any"),Co);function Co(e){this.name=e}var Io,ko=(Io=To,m.__extends(No,Io),No.create=function(e,t,n){if(e.isKeyField())return t===So.IN?(v(n instanceof fr,"Comparing on key with IN, but filter value not an ArrayValue"),v(n.internalValue.every(function(e){return e instanceof rr}),"Comparing on key with IN, but an array value was not a RefValue"),new xo(e,n)):(v(n instanceof rr,"Comparing on key, but filter value not a RefValue"),v(t!==So.ARRAY_CONTAINS&&t!==So.ARRAY_CONTAINS_ANY,"'"+t.toString()+"' queries don't make sense on document keys."),new Oo(e,t,n));if(n.isEqual(An.INSTANCE)){if(t!==So.EQUAL)throw new S(T.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new No(e,t,n)}if(n.isEqual(Bn.NAN)){if(t!==So.EQUAL)throw new S(T.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new No(e,t,n)}return t===So.ARRAY_CONTAINS?new Lo(e,n):t===So.IN?(v(n instanceof fr,"IN filter has invalid value: "+n.toString()),new jo(e,n)):t===So.ARRAY_CONTAINS_ANY?(v(n instanceof fr,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new Bo(e,n)):new No(e,t,n)},No.prototype.matches=function(e){var t=e.field(this.field);return null!==t&&this.value.typeOrder===t.typeOrder&&this.matchesComparison(t.compareTo(this.value))},No.prototype.matchesComparison=function(e){switch(this.op){case So.LESS_THAN:return e<0;case So.LESS_THAN_OR_EQUAL:return e<=0;case So.EQUAL:return 0===e;case So.GREATER_THAN:return 0<e;case So.GREATER_THAN_OR_EQUAL:return 0<=e;default:return w("Unknown FieldFilter operator: "+this.op)}},No.prototype.isInequality=function(){return 0<=[So.LESS_THAN,So.LESS_THAN_OR_EQUAL,So.GREATER_THAN,So.GREATER_THAN_OR_EQUAL].indexOf(this.op)},No.prototype.canonicalId=function(){return this.field.canonicalString()+this.op.toString()+this.value.toString()},No.prototype.isEqual=function(e){return e instanceof No&&this.op.isEqual(e.op)&&this.field.isEqual(e.field)&&this.value.isEqual(e.value)},No.prototype.toString=function(){return this.field.canonicalString()+" "+this.op+" "+this.value.value()},No);function No(e,t,n){var r=Io.call(this)||this;return r.field=e,r.op=t,r.value=n,r}var Ao,Oo=(Ao=ko,m.__extends(Do,Ao),Do.prototype.matches=function(e){var t=this.value,n=_e.comparator(e.key,t.key);return this.matchesComparison(n)},Do);function Do(){return null!==Ao&&Ao.apply(this,arguments)||this}var Po,xo=(Po=ko,m.__extends(Ro,Po),Ro.prototype.matches=function(t){return this.value.internalValue.some(function(e){return t.key.isEqual(e.key)})},Ro);function Ro(e,t){var n=Po.call(this,e,So.IN,t)||this;return n.value=t,n}var Mo,Lo=(Mo=ko,m.__extends(Fo,Mo),Fo.prototype.matches=function(e){var t=e.field(this.field);return t instanceof fr&&t.contains(this.value)},Fo);function Fo(e,t){return Mo.call(this,e,So.ARRAY_CONTAINS,t)||this}var Uo,jo=(Uo=ko,m.__extends(Vo,Uo),Vo.prototype.matches=function(e){var t=this.value,n=e.field(this.field);return null!==n&&t.contains(n)},Vo);function Vo(e,t){var n=Uo.call(this,e,So.IN,t)||this;return n.value=t,n}var qo,Bo=(qo=ko,m.__extends(Wo,qo),Wo.prototype.matches=function(e){var t=this,n=e.field(this.field);return n instanceof fr&&n.internalValue.some(function(e){return t.value.contains(e)})},Wo);function Wo(e,t){var n=qo.call(this,e,So.ARRAY_CONTAINS_ANY,t)||this;return n.value=t,n}var zo=(Ko.prototype.toString=function(){return this.name},Ko.ASCENDING=new Ko("asc"),Ko.DESCENDING=new Ko("desc"),Ko);function Ko(e){this.name=e}var Ho=(Qo.prototype.canonicalId=function(){for(var e=this.before?"b:":"a:",t=0,n=this.position;t<n.length;t++)e+=n[t].toString();return e},Qo.prototype.sortsBeforeDocument=function(e,t){v(this.position.length<=e.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=e[r],o=this.position[r];if(i.field.isKeyField())v(o instanceof rr,"Bound has a non-key value where the key path is being used."),n=_e.comparator(o.key,t.key);else{var a=t.field(i.field);v(null!==a,"Field should exist since document matched the orderBy already."),n=o.compareTo(a)}if(i.dir===zo.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Qo.prototype.isEqual=function(e){if(null===e)return!1;if(this.before!==e.before||this.position.length!==e.position.length)return!1;for(var t=0;t<this.position.length;t++){var n=this.position[t],r=e.position[t];if(!n.isEqual(r))return!1}return!0},Qo);function Qo(e,t){this.position=e,this.before=t}var Go=(Yo.prototype.compare=function(e,t){var n=this.isKeyOrderBy?vr.compareByKey(e,t):vr.compareByField(this.field,e,t);switch(this.dir){case zo.ASCENDING:return n;case zo.DESCENDING:return-1*n;default:return w("Unknown direction: "+this.dir)}},Yo.prototype.canonicalId=function(){return this.field.canonicalString()+this.dir.toString()},Yo.prototype.toString=function(){return this.field.canonicalString()+" ("+this.dir+")"},Yo.prototype.isEqual=function(e){return this.dir===e.dir&&this.field.isEqual(e.field)},Yo);function Yo(e,t){this.field=e,void 0===t&&(t=zo.ASCENDING),this.dir=t,this.isKeyOrderBy=e.isKeyField()}var Xo=new Go(be.keyField(),zo.ASCENDING),$o=new Go(be.keyField(),zo.DESCENDING),Jo=(Zo.prototype.setLocalDocumentsView=function(e){this.localDocumentsView=e},Zo.prototype.getDocumentsMatchingQuery=function(t,r,i,o){var a=this;return v(void 0!==this.localDocumentsView,"setLocalDocumentsView() not called"),r.matchesAllDocuments()?this.executeFullCollectionScan(t,r):i.isEqual(Ve.MIN)?this.executeFullCollectionScan(t,r):this.localDocumentsView.getDocuments(t,o).next(function(e){var n=a.applyQuery(r,e);return(r.hasLimitToFirst()||r.hasLimitToLast())&&a.needsRefill(r.limitType,n,o,i)?a.executeFullCollectionScan(t,r):(d()<=f.DEBUG&&y("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),a.localDocumentsView.getDocumentsMatchingQuery(t,r,i).next(function(t){return n.forEach(function(e){t=t.insert(e.key,e)}),t}))})},Zo.prototype.applyQuery=function(n,e){var r=new Xe(function(e,t){return n.docComparator(e,t)});return e.forEach(function(e,t){t instanceof vr&&n.matches(t)&&(r=r.add(t))}),r},Zo.prototype.needsRefill=function(e,t,n,r){if(n.size!==t.size)return!0;var i=e===vo.First?t.last():t.first();return!!i&&(i.hasPendingWrites||0<i.version.compareTo(r))},Zo.prototype.executeFullCollectionScan=function(e,t){return d()<=f.DEBUG&&y("IndexFreeQueryEngine","Using full collection scan to execute query: %s",t.toString()),this.localDocumentsView.getDocumentsMatchingQuery(e,t,Ve.MIN)},Zo);function Zo(){}var ea=(ta.prototype.checkEmpty=function(e){return mt.resolve(0===this.mutationQueue.length)},ta.prototype.acknowledgeBatch=function(e,t,n){var r=t.batchId,i=this.indexOfExistingBatchId(r,"acknowledged");v(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.mutationQueue[i];return v(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,mt.resolve()},ta.prototype.getLastStreamToken=function(e){return mt.resolve(this.lastStreamToken)},ta.prototype.setLastStreamToken=function(e,t){return this.lastStreamToken=t,mt.resolve()},ta.prototype.addMutationBatch=function(e,t,n,r){v(0!==r.length,"Mutation batches should not be empty");var i=this.nextBatchId;this.nextBatchId++,0<this.mutationQueue.length&&v(this.mutationQueue[this.mutationQueue.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new ht(i,t,n,r);this.mutationQueue.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Li(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast())}return mt.resolve(o)},ta.prototype.lookupMutationBatch=function(e,t){return mt.resolve(this.findMutationBatch(t))},ta.prototype.lookupMutationKeys=function(e,t){var n=this.findMutationBatch(t);return v(null!=n,"Failed to find local mutation batch."),mt.resolve(n.keys())},ta.prototype.getNextMutationBatchAfterBatchId=function(e,t){var n=t+1,r=this.indexOfBatchId(n),i=r<0?0:r;return mt.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)},ta.prototype.getHighestUnacknowledgedBatchId=function(){return mt.resolve(0===this.mutationQueue.length?-1:this.nextBatchId-1)},ta.prototype.getAllMutationBatches=function(e){return mt.resolve(this.mutationQueue.slice())},ta.prototype.getAllMutationBatchesAffectingDocumentKey=function(e,n){var r=this,t=new Li(n,0),i=new Li(n,Number.POSITIVE_INFINITY),o=[];return this.batchesByDocumentKey.forEachInRange([t,i],function(e){v(n.isEqual(e.key),"Should only iterate over a single key's batches");var t=r.findMutationBatch(e.targetOrBatchId);v(null!==t,"Batches in the index must exist in the main table"),o.push(t)}),mt.resolve(o)},ta.prototype.getAllMutationBatchesAffectingDocumentKeys=function(e,t){var r=this,i=new Xe(Z);return t.forEach(function(t){var e=new Li(t,0),n=new Li(t,Number.POSITIVE_INFINITY);r.batchesByDocumentKey.forEachInRange([e,n],function(e){v(t.isEqual(e.key),"For each key, should only iterate over a single key's batches"),i=i.add(e.targetOrBatchId)})}),mt.resolve(this.findMutationBatches(i))},ta.prototype.getAllMutationBatchesAffectingQuery=function(e,t){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=t.path,r=n.length+1,i=n;_e.isDocumentKey(i)||(i=i.child(""));var o=new Li(new _e(i),0),a=new Xe(Z);return this.batchesByDocumentKey.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.targetOrBatchId)),!0)},o),mt.resolve(this.findMutationBatches(a))},ta.prototype.findMutationBatches=function(e){var n=this,r=[];return e.forEach(function(e){var t=n.findMutationBatch(e);null!==t&&r.push(t)}),r},ta.prototype.removeMutationBatch=function(n,r){var i=this;v(0===this.indexOfExistingBatchId(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.mutationQueue.shift();var o=this.batchesByDocumentKey;return mt.forEach(r.mutations,function(e){var t=new Li(e.key,r.batchId);return o=o.delete(t),i.referenceDelegate.removeMutationReference(n,e.key)}).next(function(){i.batchesByDocumentKey=o})},ta.prototype.removeCachedMutationKeys=function(e){},ta.prototype.containsKey=function(e,t){var n=new Li(t,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return mt.resolve(t.isEqual(r&&r.key))},ta.prototype.performConsistencyCheck=function(e){return 0===this.mutationQueue.length&&v(this.batchesByDocumentKey.isEmpty(),"Document leak -- detected dangling mutation references when queue is empty."),mt.resolve()},ta.prototype.indexOfExistingBatchId=function(e,t){var n=this.indexOfBatchId(e);return v(0<=n&&n<this.mutationQueue.length,"Batches must exist to be "+t),n},ta.prototype.indexOfBatchId=function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId},ta.prototype.findMutationBatch=function(e){var t=this.indexOfBatchId(e);if(t<0||t>=this.mutationQueue.length)return null;var n=this.mutationQueue[t];return v(n.batchId===e,"If found batch must match"),n},ta);function ta(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.nextBatchId=1,this.lastStreamToken=_(),this.batchesByDocumentKey=new Xe(Li.compareByKey)}var na,ra=(ia.prototype.addEntry=function(e,t,n){v(!n.isEqual(Ve.MIN),"Cannot add a document with a read time of zero");var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.sizer(t);return this.docs=this.docs.insert(r,{maybeDocument:t,size:a,readTime:n}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())},ia.prototype.removeEntry=function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)},ia.prototype.getEntry=function(e,t){var n=this.docs.get(t);return mt.resolve(n?n.maybeDocument:null)},ia.prototype.getEntries=function(e,t){var n=this,r=nt();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.maybeDocument:null)}),mt.resolve(r)},ia.prototype.getDocumentsMatchingQuery=function(e,t,n){v(!t.isCollectionGroupQuery(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=it(),i=new _e(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.maybeDocument,l=u.readTime;if(!t.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||c instanceof vr&&t.matches(c)&&(r=r.insert(c.key,c))}return mt.resolve(r)},ia.prototype.forEachDocumentKey=function(e,t){return mt.forEach(this.docs,function(e){return t(e)})},ia.prototype.getNewDocumentChanges=function(e,t){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},ia.prototype.getLastReadTime=function(e){return mt.resolve(Ve.MIN)},ia.prototype.newChangeBuffer=function(e){return new ia.RemoteDocumentChangeBuffer(this)},ia.prototype.getSize=function(e){return mt.resolve(this.size)},ia.RemoteDocumentChangeBuffer=(na=kr,m.__extends(oa,na),oa.prototype.applyChanges=function(n){var r=this,i=[];return this.changes.forEach(function(e,t){t?i.push(r.documentCache.addEntry(n,t,r.readTime)):r.documentCache.removeEntry(e)}),mt.waitFor(i)},oa.prototype.getFromCache=function(e,t){return this.documentCache.getEntry(e,t)},oa.prototype.getAllFromCache=function(e,t){return this.documentCache.getEntries(e,t)},oa),ia);function ia(e,t){this.indexManager=e,this.sizer=t,this.docs=new Be(_e.comparator),this.size=0}function oa(e){var t=na.call(this)||this;return t.documentCache=e,t}var aa=(sa.prototype.forEachTarget=function(e,n){return this.targets.forEach(function(e,t){return n(t)}),mt.resolve()},sa.prototype.getLastRemoteSnapshotVersion=function(e){return mt.resolve(this.lastRemoteSnapshotVersion)},sa.prototype.getHighestSequenceNumber=function(e){return mt.resolve(this.highestSequenceNumber)},sa.prototype.allocateTargetId=function(e){var t=this.targetIdGenerator.after(this.highestTargetId);return this.highestTargetId=t,mt.resolve(t)},sa.prototype.setTargetsMetadata=function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.highestSequenceNumber&&(this.highestSequenceNumber=t),mt.resolve()},sa.prototype.saveTargetData=function(e){this.targets.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.highestTargetId=t),e.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=e.sequenceNumber)},sa.prototype.addTargetData=function(e,t){return v(!this.targets.has(t.target),"Adding a target that already exists"),this.saveTargetData(t),this.targetCount+=1,mt.resolve()},sa.prototype.updateTargetData=function(e,t){return v(this.targets.has(t.target),"Updating a non-existent target"),this.saveTargetData(t),mt.resolve()},sa.prototype.removeTargetData=function(e,t){return v(0<this.targetCount,"Removing a target from an empty cache"),v(this.targets.has(t.target),"Removing a non-existent target from the cache"),this.targets.delete(t.target),this.references.removeReferencesForId(t.targetId),this.targetCount-=1,mt.resolve()},sa.prototype.removeTargets=function(n,r,i){var o=this,a=0,s=[];return this.targets.forEach(function(e,t){t.sequenceNumber<=r&&null===i.get(t.targetId)&&(o.targets.delete(e),s.push(o.removeMatchingKeysForTargetId(n,t.targetId)),a++)}),mt.waitFor(s).next(function(){return a})},sa.prototype.getTargetCount=function(e){return mt.resolve(this.targetCount)},sa.prototype.getTargetData=function(e,t){var n=this.targets.get(t)||null;return mt.resolve(n)},sa.prototype.getTargetDataForTarget=function(e,t){return w("Not yet implemented.")},sa.prototype.addMatchingKeys=function(t,e,n){this.references.addReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.addReference(t,e))}),mt.waitFor(i)},sa.prototype.removeMatchingKeys=function(t,e,n){this.references.removeReferences(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.removeReference(t,e))}),mt.waitFor(i)},sa.prototype.removeMatchingKeysForTargetId=function(e,t){return this.references.removeReferencesForId(t),mt.resolve()},sa.prototype.getMatchingKeysForTargetId=function(e,t){var n=this.references.referencesForId(t);return mt.resolve(n)},sa.prototype.containsKey=function(e,t){return mt.resolve(this.references.containsKey(t))},sa);function sa(e){this.persistence=e,this.targets=new Cr(function(e){return e.canonicalId()}),this.lastRemoteSnapshotVersion=Ve.MIN,this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Ri,this.targetCount=0,this.targetIdGenerator=jt.forTargetCache()}var ua=(ca.createLruPersistence=function(e,t){return new ca(e,function(e){return new ma(e,t)})},ca.createEagerPersistence=function(e){return new ca(e,function(e){return new pa(e)})},ca.prototype.shutdown=function(){return this._started=!1,Promise.resolve()},Object.defineProperty(ca.prototype,"started",{get:function(){return this._started},enumerable:!0,configurable:!0}),ca.prototype.getActiveClients=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return[2,[this.clientId]]})})},ca.prototype.setPrimaryStateListener=function(e){return e(!0)},ca.prototype.setDatabaseDeletedListener=function(){},ca.prototype.setNetworkEnabled=function(e){},ca.prototype.getIndexManager=function(){return this.indexManager},ca.prototype.getMutationQueue=function(e){var t=this.mutationQueues[e.toKey()];return t||(t=new ea(this.indexManager,this.referenceDelegate),this.mutationQueues[e.toKey()]=t),t},ca.prototype.getTargetCache=function(){return this.targetCache},ca.prototype.getRemoteDocumentCache=function(){return this.remoteDocumentCache},ca.prototype.runTransaction=function(e,t,n){var r=this;y("MemoryPersistence","Starting transaction:",e);var i=new ha(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(i).next(function(e){return r.referenceDelegate.onTransactionCommitted(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})},ca.prototype.mutationQueuesContainKey=function(t,n){return mt.or(function(e){var n=[];return O(e,function(e,t){return n.push(t)}),n}(this.mutationQueues).map(function(e){return function(){return e.containsKey(t,n)}}))},ca);function ca(e,t){var n=this;this.clientId=e,this.mutationQueues={},this.listenSequence=new le(0),this._started=!1,this._started=!0,this.referenceDelegate=t(this),this.targetCache=new aa(this);this.indexManager=new Fr,this.remoteDocumentCache=new ra(this.indexManager,function(e){return n.referenceDelegate.documentSize(e)})}var la,ha=(la=Pi,m.__extends(fa,la),fa);function fa(e){var t=la.call(this)||this;return t.currentSequenceNumber=e,t}var pa=(Object.defineProperty(da.prototype,"orphanedDocuments",{get:function(){if(this._orphanedDocuments)return this._orphanedDocuments;throw w("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),da.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},da.prototype.addReference=function(e,t){return this.orphanedDocuments.delete(t),mt.resolve()},da.prototype.removeReference=function(e,t){return this.orphanedDocuments.add(t),mt.resolve()},da.prototype.removeMutationReference=function(e,t){return this.orphanedDocuments.add(t),mt.resolve()},da.prototype.removeTarget=function(e,t){var n=this,r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.orphanedDocuments.add(e)})}).next(function(){return r.removeTargetData(e,t)})},da.prototype.onTransactionStarted=function(){this._orphanedDocuments=new Set},da.prototype.onTransactionCommitted=function(e){var n=this,r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mt.forEach(this.orphanedDocuments,function(t){return n.isReferenced(e,t).next(function(e){e||r.removeEntry(t)})}).next(function(){return n._orphanedDocuments=null,r.apply(e)})},da.prototype.updateLimboDocument=function(e,t){var n=this;return this.isReferenced(e,t).next(function(e){e?n.orphanedDocuments.delete(t):n.orphanedDocuments.add(t)})},da.prototype.documentSize=function(e){return 0},da.prototype.isReferenced=function(e,t){var n=this;return mt.or([function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.mutationQueuesContainKey(e,t)},function(){return mt.resolve(n.inMemoryPins.containsKey(t))}])},da);function da(e){this.persistence=e,this.inMemoryPins=null,this._orphanedDocuments=null}var ma=(ya.prototype.onTransactionStarted=function(){},ya.prototype.onTransactionCommitted=function(e){return mt.resolve()},ya.prototype.forEachTarget=function(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)},ya.prototype.getSequenceNumberCount=function(e){var n=this.orphanedDocumentCount(e);return this.persistence.getTargetCache().getTargetCount(e).next(function(t){return n.next(function(e){return t+e})})},ya.prototype.orphanedDocumentCount=function(e){var t=0;return this.forEachOrphanedDocumentSequenceNumber(e,function(e){t++}).next(function(){return t})},ya.prototype.forEachOrphanedDocumentSequenceNumber=function(n,r){var i=this;return mt.forEach(this.orphanedSequenceNumbers,function(e,t){return i.isPinned(n,e,t).next(function(e){return e?mt.resolve():r(t)})})},ya.prototype.setInMemoryPins=function(e){this.inMemoryPins=e},ya.prototype.removeTargets=function(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)},ya.prototype.removeOrphanedDocuments=function(e,n){var r=this,i=0,t=this.persistence.getRemoteDocumentCache(),o=t.newChangeBuffer();return t.forEachDocumentKey(e,function(t){return r.isPinned(e,t,n).next(function(e){e||(i++,o.removeEntry(t))})}).next(function(){return o.apply(e)}).next(function(){return i})},ya.prototype.removeMutationReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),mt.resolve()},ya.prototype.removeTarget=function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)},ya.prototype.addReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),mt.resolve()},ya.prototype.removeReference=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),mt.resolve()},ya.prototype.updateLimboDocument=function(e,t){return this.orphanedSequenceNumbers.set(t,e.currentSequenceNumber),mt.resolve()},ya.prototype.documentSize=function(e){var t=e.key.toString().length;return e instanceof vr&&(t+=e.data().approximateByteSize()),t},ya.prototype.isPinned=function(e,t,n){var r=this;return mt.or([function(){return r.persistence.mutationQueuesContainKey(e,t)},function(){return mt.resolve(r.inMemoryPins.containsKey(t))},function(){return r.persistence.getTargetCache().containsKey(e,t)},function(){var e=r.orphanedSequenceNumbers.get(t);return mt.resolve(void 0!==e&&n<e)}])},ya.prototype.getCacheSize=function(e){return this.persistence.getRemoteDocumentCache().getSize(e)},ya);function ya(e,t){this.persistence=e,this.inMemoryPins=null,this.orphanedSequenceNumbers=new Cr(function(e){return Re(e.path)}),this.garbageCollector=new Xi(this,t)}var va=(ga.prototype.reset=function(){this.currentBaseMs=0},ga.prototype.resetToMax=function(){this.currentBaseMs=this.maxDelayMs},ga.prototype.backoffAndRun=function(e){var t=this;this.cancel();var n=Math.floor(this.currentBaseMs+this.jitterDelayMs()),r=Math.max(0,Date.now()-this.lastAttemptTime),i=Math.max(0,n-r);0<this.currentBaseMs&&y("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.currentBaseMs+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,i,function(){return t.lastAttemptTime=Date.now(),e()}),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)},ga.prototype.cancel=function(){null!==this.timerPromise&&(this.timerPromise.cancel(),this.timerPromise=null)},ga.prototype.jitterDelayMs=function(){return(Math.random()-.5)*this.currentBaseMs},ga);function ga(e,t,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.queue=e,this.timerId=t,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=i,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}var ba,wa,_a="PersistentStream";(wa=ba=ba||{})[wa.Initial=0]="Initial",wa[wa.Starting=1]="Starting",wa[wa.Open=2]="Open",wa[wa.Error=3]="Error",wa[wa.Backoff=4]="Backoff";var Ea=(Ta.prototype.isStarted=function(){return this.state===ba.Starting||this.state===ba.Open||this.state===ba.Backoff},Ta.prototype.isOpen=function(){return this.state===ba.Open},Ta.prototype.start=function(){this.state!==ba.Error?(v(this.state===ba.Initial,"Already started"),this.auth()):this.performBackoff()},Ta.prototype.stop=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.isStarted()?[4,this.close(ba.Initial)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},Ta.prototype.inhibitBackoff=function(){v(!this.isStarted(),"Can only inhibit backoff in a stopped state"),this.state=ba.Initial,this.backoff.reset()},Ta.prototype.markIdle=function(){var e=this;this.isOpen()&&null===this.idleTimer&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,6e4,function(){return e.handleIdleCloseTimer()}))},Ta.prototype.sendRequest=function(e){this.cancelIdleCheck(),this.stream.send(e)},Ta.prototype.handleIdleCloseTimer=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return this.isOpen()?[2,this.close(ba.Initial)]:[2]})})},Ta.prototype.cancelIdleCheck=function(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)},Ta.prototype.close=function(t,n){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return v(this.isStarted(),"Only started streams should be closed."),v(t===ba.Error||mo(n),"Can't provide an error when not in an error state."),this.cancelIdleCheck(),this.backoff.cancel(),this.closeCount++,t!==ba.Error?this.backoff.reset():n&&n.code===T.RESOURCE_EXHAUSTED?(c(n.toString()),c("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):n&&n.code===T.UNAUTHENTICATED&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.onClose(n)];case 1:return e.sent(),[2]}})})},Ta.prototype.tearDown=function(){},Ta.prototype.auth=function(){var n=this;v(this.state===ba.Initial,"Must be in initial state to auth"),this.state=ba.Starting;var e=this.getCloseGuardedDispatcher(this.closeCount),t=this.closeCount;this.credentialsProvider.getToken().then(function(e){n.closeCount===t&&n.startStream(e)},function(t){e(function(){var e=new S(T.UNKNOWN,"Fetching auth token failed: "+t.message);return n.handleStreamClose(e)})})},Ta.prototype.startStream=function(e){var t=this;v(this.state===ba.Starting,"Trying to start stream in a non-starting state");var n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(e),this.stream.onOpen(function(){n(function(){return v(t.state===ba.Starting,"Expected stream to be in state Starting, but was "+t.state),t.state=ba.Open,t.listener.onOpen()})}),this.stream.onClose(function(e){n(function(){return t.handleStreamClose(e)})}),this.stream.onMessage(function(e){n(function(){return t.onMessage(e)})})},Ta.prototype.performBackoff=function(){var e=this;v(this.state===ba.Error,"Should only perform backoff when in Error state"),this.state=ba.Backoff,this.backoff.backoffAndRun(function(){return m.__awaiter(e,void 0,void 0,function(){return m.__generator(this,function(e){return v(this.state===ba.Backoff,"Backoff elapsed but state is now: "+this.state),this.state=ba.Initial,this.start(),v(this.isStarted(),"PersistentStream should have started"),[2]})})})},Ta.prototype.handleStreamClose=function(e){return v(this.isStarted(),"Can't handle server close on non-started stream"),y(_a,"close with error: "+e),this.stream=null,this.close(ba.Error,e)},Ta.prototype.getCloseGuardedDispatcher=function(t){var n=this;return function(e){n.queue.enqueueAndForget(function(){return n.closeCount===t?e():(y(_a,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},Ta);function Ta(e,t,n,r,i,o){this.queue=e,this.idleTimerId=n,this.connection=r,this.credentialsProvider=i,this.listener=o,this.state=ba.Initial,this.closeCount=0,this.idleTimer=null,this.stream=null,this.backoff=new va(e,t)}var Sa,Ca=(Sa=Ea,m.__extends(Ia,Sa),Ia.prototype.startRpc=function(e){return this.connection.openStream("Listen",e)},Ia.prototype.onMessage=function(e){this.backoff.reset();var t=this.serializer.fromWatchChange(e),n=this.serializer.versionFromListenResponse(e);return this.listener.onWatchChange(t,n)},Ia.prototype.watch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.addTarget=this.serializer.toTarget(e);var n=this.serializer.toListenRequestLabels(e);n&&(t.labels=n),this.sendRequest(t)},Ia.prototype.unwatch=function(e){var t={};t.database=this.serializer.encodedDatabaseId,t.removeTarget=e,this.sendRequest(t)},Ia);function Ia(e,t,n,r,i){var o=Sa.call(this,e,Te.ListenStreamConnectionBackoff,Te.ListenStreamIdle,t,n,i)||this;return o.serializer=r,o}var ka,Na=(ka=Ea,m.__extends(Aa,ka),Object.defineProperty(Aa.prototype,"handshakeComplete",{get:function(){return this.handshakeComplete_},enumerable:!0,configurable:!0}),Aa.prototype.start=function(){this.handshakeComplete_=!1,ka.prototype.start.call(this)},Aa.prototype.tearDown=function(){this.handshakeComplete_&&this.writeMutations([])},Aa.prototype.startRpc=function(e){return this.connection.openStream("Write",e)},Aa.prototype.onMessage=function(e){if(v(!!e.streamToken,"Got a write response without a stream token"),this.lastStreamToken=e.streamToken,this.handshakeComplete_){this.backoff.reset();var t=this.serializer.fromWriteResults(e.writeResults,e.commitTime),n=this.serializer.fromVersion(e.commitTime);return this.listener.onMutationResult(n,t)}return v(!e.writeResults||0===e.writeResults.length,"Got mutation results for handshake"),this.handshakeComplete_=!0,this.listener.onHandshakeComplete()},Aa.prototype.writeHandshake=function(){v(this.isOpen(),"Writing handshake requires an opened stream"),v(!this.handshakeComplete_,"Handshake already completed");var e={};e.database=this.serializer.encodedDatabaseId,this.sendRequest(e)},Aa.prototype.writeMutations=function(e){var t=this;v(this.isOpen(),"Writing mutations requires an opened stream"),v(this.handshakeComplete_,"Handshake must be complete before writing mutations"),v(0<this.lastStreamToken.length,"Trying to write mutation without a token");var n={streamToken:this.lastStreamToken,writes:e.map(function(e){return t.serializer.toMutation(e)})};this.sendRequest(n)},Aa);function Aa(e,t,n,r,i){var o=ka.call(this,e,Te.WriteStreamConnectionBackoff,Te.WriteStreamIdle,t,n,i)||this;return o.serializer=r,o.handshakeComplete_=!1,o.lastStreamToken=_(),o}var Oa=(Da.prototype.newPersistentWriteStream=function(e){return new Na(this.queue,this.connection,this.credentials,this.serializer,e)},Da.prototype.newPersistentWatchStream=function(e){return new Ca(this.queue,this.connection,this.credentials,this.serializer,e)},Da.prototype.commit=function(e){var t=this,n={database:this.serializer.encodedDatabaseId,writes:e.map(function(e){return t.serializer.toMutation(e)})};return this.invokeRPC("Commit",n).then(function(e){return t.serializer.fromWriteResults(e.writeResults,e.commitTime)})},Da.prototype.lookup=function(t){var i=this,e={database:this.serializer.encodedDatabaseId,documents:t.map(function(e){return i.serializer.toName(e)})};return this.invokeStreamingRPC("BatchGetDocuments",e).then(function(e){var n=tt();e.forEach(function(e){var t=i.serializer.fromMaybeDocument(e);n=n.insert(t.key,t)});var r=[];return t.forEach(function(e){var t=n.get(e);v(!!t,"Missing entity in write response for "+e),r.push(t)}),r})},Da.prototype.invokeRPC=function(t,n){var r=this;return this.credentials.getToken().then(function(e){return r.connection.invokeRPC(t,n,e)}).catch(function(e){throw e.code===T.UNAUTHENTICATED&&r.credentials.invalidateToken(),e})},Da.prototype.invokeStreamingRPC=function(t,n){var r=this;return this.credentials.getToken().then(function(e){return r.connection.invokeStreamingRPC(t,n,e)}).catch(function(e){throw e.code===T.UNAUTHENTICATED&&r.credentials.invalidateToken(),e})},Da);function Da(e,t,n,r){this.queue=e,this.connection=t,this.credentials=n,this.serializer=r}var Pa,xa,Ra,Ma,La=(Fa.prototype.lookup=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n=this;return m.__generator(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),0<this.mutations.length)throw new S(T.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.datastore.lookup(r)];case 1:return(t=e.sent()).forEach(function(e){e instanceof wr||e instanceof vr?n.recordVersion(e):w("Document in a transaction was a "+e.constructor.name)}),[2,t]}})})},Fa.prototype.set=function(e,t){this.write(t.toMutations(e,this.precondition(e))),this.writtenDocs.add(e)},Fa.prototype.update=function(e,t){try{this.write(t.toMutations(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e)},Fa.prototype.delete=function(e){this.write([new mn(e,this.precondition(e))]),this.writtenDocs.add(e)},Fa.prototype.commit=function(){return m.__awaiter(this,void 0,void 0,function(){var t,n=this;return m.__generator(this,function(e){switch(e.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t=t.remove(e.key)}),t.forEach(function(e,t){n.mutations.push(new En(e,n.precondition(e)))}),[4,this.datastore.commit(this.mutations)];case 1:return e.sent(),this.committed=!0,[2]}})})},Fa.prototype.recordVersion=function(e){var t;if(e instanceof vr)t=e.version;else{if(!(e instanceof wr))throw w("Document in a transaction was a "+e.constructor.name);t=Ve.forDeletedDoc()}var n=this.readVersions.get(e.key);if(null!==n){if(!t.isEqual(n))throw new S(T.ABORTED,"Document version changed between two reads.")}else this.readVersions=this.readVersions.insert(e.key,t)},Fa.prototype.precondition=function(e){var t=this.readVersions.get(e);return!this.writtenDocs.has(e)&&t?en.updateTime(t):en.NONE},Fa.prototype.preconditionForUpdate=function(e){var t=this.readVersions.get(e);if(this.writtenDocs.has(e)||!t)return en.exists(!0);if(t.isEqual(Ve.forDeletedDoc()))throw new S(T.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return en.updateTime(t)},Fa.prototype.write=function(e){this.ensureCommitNotCalled(),this.mutations=this.mutations.concat(e)},Fa.prototype.ensureCommitNotCalled=function(){v(!this.committed,"A transaction object cannot be used after its update callback has been invoked.")},Fa);function Fa(e){this.datastore=e,this.readVersions=at(),this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}(xa=Pa=Pa||{})[xa.Unknown=0]="Unknown",xa[xa.Online=1]="Online",xa[xa.Offline=2]="Offline",(Ma=Ra=Ra||{})[Ma.RemoteStore=0]="RemoteStore",Ma[Ma.SharedClientState=1]="SharedClientState";var Ua,ja,Va=(qa.prototype.handleWatchStreamStart=function(){var e=this;0===this.watchStreamFailures&&(this.setAndBroadcast(Pa.Unknown),v(null===this.onlineStateTimer,"onlineStateTimer shouldn't be started yet"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay(Te.OnlineStateTimeout,1e4,function(){return e.onlineStateTimer=null,v(e.state===Pa.Unknown,"Timer should be canceled if we transitioned to a different state."),e.logClientOfflineWarningIfNecessary("Backend didn't respond within 10 seconds."),e.setAndBroadcast(Pa.Offline),Promise.resolve()}))},qa.prototype.handleWatchStreamFailure=function(e){this.state===Pa.Online?(this.setAndBroadcast(Pa.Unknown),v(0===this.watchStreamFailures,"watchStreamFailures must be 0"),v(null===this.onlineStateTimer,"onlineStateTimer must be null")):(this.watchStreamFailures++,1<=this.watchStreamFailures&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary("Connection failed 1 times. Most recent error: "+e.toString()),this.setAndBroadcast(Pa.Offline)))},qa.prototype.set=function(e){this.clearOnlineStateTimer(),this.watchStreamFailures=0,e===Pa.Online&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(e)},qa.prototype.setAndBroadcast=function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))},qa.prototype.logClientOfflineWarningIfNecessary=function(e){var t="Could not reach Cloud Firestore backend. "+e+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.shouldWarnClientIsOffline?(c(t),this.shouldWarnClientIsOffline=!1):y("OnlineStateTracker",t)},qa.prototype.clearOnlineStateTimer=function(){null!==this.onlineStateTimer&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)},qa);function qa(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state=Pa.Unknown,this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}function Ba(e){switch(e){case T.OK:return w("Treated status OK as error");case T.CANCELLED:case T.UNKNOWN:case T.DEADLINE_EXCEEDED:case T.RESOURCE_EXHAUSTED:case T.INTERNAL:case T.UNAVAILABLE:case T.UNAUTHENTICATED:return!1;case T.INVALID_ARGUMENT:case T.NOT_FOUND:case T.ALREADY_EXISTS:case T.PERMISSION_DENIED:case T.FAILED_PRECONDITION:case T.ABORTED:case T.OUT_OF_RANGE:case T.UNIMPLEMENTED:case T.DATA_LOSS:return!0;default:return w("Unknown status code: "+e)}}function Wa(e){if(void 0===e)return c("GRPC error has no .code"),T.UNKNOWN;switch(e){case Ua.OK:return T.OK;case Ua.CANCELLED:return T.CANCELLED;case Ua.UNKNOWN:return T.UNKNOWN;case Ua.DEADLINE_EXCEEDED:return T.DEADLINE_EXCEEDED;case Ua.RESOURCE_EXHAUSTED:return T.RESOURCE_EXHAUSTED;case Ua.INTERNAL:return T.INTERNAL;case Ua.UNAVAILABLE:return T.UNAVAILABLE;case Ua.UNAUTHENTICATED:return T.UNAUTHENTICATED;case Ua.INVALID_ARGUMENT:return T.INVALID_ARGUMENT;case Ua.NOT_FOUND:return T.NOT_FOUND;case Ua.ALREADY_EXISTS:return T.ALREADY_EXISTS;case Ua.PERMISSION_DENIED:return T.PERMISSION_DENIED;case Ua.FAILED_PRECONDITION:return T.FAILED_PRECONDITION;case Ua.ABORTED:return T.ABORTED;case Ua.OUT_OF_RANGE:return T.OUT_OF_RANGE;case Ua.UNIMPLEMENTED:return T.UNIMPLEMENTED;case Ua.DATA_LOSS:return T.DATA_LOSS;default:return w("Unknown status code: "+e)}}(ja=Ua=Ua||{})[ja.OK=0]="OK",ja[ja.CANCELLED=1]="CANCELLED",ja[ja.UNKNOWN=2]="UNKNOWN",ja[ja.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ja[ja.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ja[ja.NOT_FOUND=5]="NOT_FOUND",ja[ja.ALREADY_EXISTS=6]="ALREADY_EXISTS",ja[ja.PERMISSION_DENIED=7]="PERMISSION_DENIED",ja[ja.UNAUTHENTICATED=16]="UNAUTHENTICATED",ja[ja.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ja[ja.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ja[ja.ABORTED=10]="ABORTED",ja[ja.OUT_OF_RANGE=11]="OUT_OF_RANGE",ja[ja.UNIMPLEMENTED=12]="UNIMPLEMENTED",ja[ja.INTERNAL=13]="INTERNAL",ja[ja.UNAVAILABLE=14]="UNAVAILABLE",ja[ja.DATA_LOSS=15]="DATA_LOSS";var za,Ka,Ha,Qa,Ga=(Ya.emptySet=function(e){return new Ya(e.comparator)},Ya.prototype.has=function(e){return null!=this.keyedMap.get(e)},Ya.prototype.get=function(e){return this.keyedMap.get(e)},Ya.prototype.first=function(){return this.sortedSet.minKey()},Ya.prototype.last=function(){return this.sortedSet.maxKey()},Ya.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},Ya.prototype.indexOf=function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1},Object.defineProperty(Ya.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!0,configurable:!0}),Ya.prototype.forEach=function(n){this.sortedSet.inorderTraversal(function(e,t){return n(e),!1})},Ya.prototype.add=function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))},Ya.prototype.delete=function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this},Ya.prototype.isEqual=function(e){if(!(e instanceof Ya))return!1;if(this.size!==e.size)return!1;for(var t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();t.hasNext();){var r=t.getNext().key,i=n.getNext().key;if(!r.isEqual(i))return!1}return!0},Ya.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},Ya.prototype.copy=function(e,t){var n=new Ya;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n},Ya);function Ya(n){this.comparator=n?function(e,t){return n(e,t)||_e.comparator(e.key,t.key)}:function(e,t){return _e.comparator(e.key,t.key)},this.keyedMap=it(),this.sortedSet=new Be(this.comparator)}(Ka=za=za||{})[Ka.Added=0]="Added",Ka[Ka.Removed=1]="Removed",Ka[Ka.Modified=2]="Modified",Ka[Ka.Metadata=3]="Metadata",(Qa=Ha=Ha||{})[Qa.Local=0]="Local",Qa[Qa.Synced=1]="Synced";var Xa=($a.prototype.track=function(e){var t=e.doc.key,n=this.changeMap.get(t);n?e.type!==za.Added&&n.type===za.Metadata?this.changeMap=this.changeMap.insert(t,e):e.type===za.Metadata&&n.type!==za.Removed?this.changeMap=this.changeMap.insert(t,{type:n.type,doc:e.doc}):e.type===za.Modified&&n.type===za.Modified?this.changeMap=this.changeMap.insert(t,{type:za.Modified,doc:e.doc}):e.type===za.Modified&&n.type===za.Added?this.changeMap=this.changeMap.insert(t,{type:za.Added,doc:e.doc}):e.type===za.Removed&&n.type===za.Added?this.changeMap=this.changeMap.remove(t):e.type===za.Removed&&n.type===za.Modified?this.changeMap=this.changeMap.insert(t,{type:za.Removed,doc:n.doc}):e.type===za.Added&&n.type===za.Removed?this.changeMap=this.changeMap.insert(t,{type:za.Modified,doc:e.doc}):w("unsupported combination of changes: "+JSON.stringify(e)+" after "+JSON.stringify(n)):this.changeMap=this.changeMap.insert(t,e)},$a.prototype.getChanges=function(){var n=[];return this.changeMap.inorderTraversal(function(e,t){n.push(t)}),n},$a);function $a(){this.changeMap=new Be(_e.comparator)}var Ja=(Za.fromInitialDocuments=function(e,t,n,r){var i=[];return t.forEach(function(e){i.push({type:za.Added,doc:e})}),new Za(e,t,Ga.emptySet(t),i,n,r,!0,!1)},Object.defineProperty(Za.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!0,configurable:!0}),Za.prototype.isEqual=function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&this.query.isEqual(e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0},Za);function Za(e,t,n,r,i,o,a,s){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}var es=(ts.createSynthesizedRemoteEventForCurrentChange=function(e,t){var n,r=((n={})[e]=ns.createSynthesizedTargetChangeForCurrentChange(e,t),n);return new ts(Ve.MIN,r,lt(),tt(),ut())},ts);function ts(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}var ns=(rs.createSynthesizedTargetChangeForCurrentChange=function(e,t){return new rs(_(),t,ut(),ut(),ut())},rs);function rs(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}var is,os,as=function(e,t,n,r){this.updatedTargetIds=e,this.removedTargetIds=t,this.key=n,this.newDoc=r},ss=function(e,t){this.targetId=e,this.existenceFilter=t};(os=is=is||{})[os.NoChange=0]="NoChange",os[os.Added=1]="Added",os[os.Removed=2]="Removed",os[os.Current=3]="Current",os[os.Reset=4]="Reset";var us=function(e,t,n,r){void 0===n&&(n=_()),void 0===r&&(r=null),this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r},cs=(Object.defineProperty(ls.prototype,"current",{get:function(){return this._current},enumerable:!0,configurable:!0}),Object.defineProperty(ls.prototype,"resumeToken",{get:function(){return this._resumeToken},enumerable:!0,configurable:!0}),Object.defineProperty(ls.prototype,"isPending",{get:function(){return 0!==this.pendingResponses},enumerable:!0,configurable:!0}),Object.defineProperty(ls.prototype,"hasPendingChanges",{get:function(){return this._hasPendingChanges},enumerable:!0,configurable:!0}),ls.prototype.updateResumeToken=function(e){0<e.length&&(this._hasPendingChanges=!0,this._resumeToken=e)},ls.prototype.toTargetChange=function(){var n=ut(),r=ut(),i=ut();return this.documentChanges.forEach(function(e,t){switch(t){case za.Added:n=n.add(e);break;case za.Modified:r=r.add(e);break;case za.Removed:i=i.add(e);break;default:w("Encountered invalid change type: "+t)}}),new ns(this._resumeToken,this._current,n,r,i)},ls.prototype.clearPendingChanges=function(){this._hasPendingChanges=!1,this.documentChanges=ds()},ls.prototype.addDocumentChange=function(e,t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(e,t)},ls.prototype.removeDocumentChange=function(e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(e)},ls.prototype.recordPendingTargetRequest=function(){this.pendingResponses+=1},ls.prototype.recordTargetResponse=function(){this.pendingResponses-=1},ls.prototype.markCurrent=function(){this._hasPendingChanges=!0,this._current=!0},ls);function ls(){this.pendingResponses=0,this.documentChanges=ds(),this._resumeToken=_(),this._current=!1,this._hasPendingChanges=!0}var hs=(fs.prototype.handleDocumentChange=function(e){for(var t=0,n=e.updatedTargetIds;t<n.length;t++){var r=n[t];e.newDoc instanceof vr?this.addDocumentToTarget(r,e.newDoc):e.newDoc instanceof wr&&this.removeDocumentFromTarget(r,e.key,e.newDoc)}for(var i=0,o=e.removedTargetIds;i<o.length;i++)r=o[i],this.removeDocumentFromTarget(r,e.key,e.newDoc)},fs.prototype.handleTargetChange=function(n){var r=this;this.forEachTarget(n,function(e){var t=r.ensureTargetState(e);switch(n.state){case is.NoChange:r.isActiveTarget(e)&&t.updateResumeToken(n.resumeToken);break;case is.Added:t.recordTargetResponse(),t.isPending||t.clearPendingChanges(),t.updateResumeToken(n.resumeToken);break;case is.Removed:t.recordTargetResponse(),t.isPending||r.removeTarget(e),v(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case is.Current:r.isActiveTarget(e)&&(t.markCurrent(),t.updateResumeToken(n.resumeToken));break;case is.Reset:r.isActiveTarget(e)&&(r.resetTarget(e),t.updateResumeToken(n.resumeToken));break;default:w("Unknown target watch change state: "+n.state)}})},fs.prototype.forEachTarget=function(e,t){0<e.targetIds.length?e.targetIds.forEach(t):A(this.targetStates,t)},fs.prototype.handleExistenceFilter=function(e){var t=e.targetId,n=e.existenceFilter.count,r=this.targetDataForActiveTarget(t);if(r){var i=r.target;if(i.isDocumentQuery())if(0===n){var o=new _e(i.path);this.removeDocumentFromTarget(t,o,new wr(o,Ve.forDeletedDoc()))}else v(1===n,"Single document existence filter with count: "+n);else this.getCurrentDocumentCountForTarget(t)!==n&&(this.resetTarget(t),this.pendingTargetResets=this.pendingTargetResets.add(t))}},fs.prototype.createRemoteEvent=function(i){var o=this,a={};A(this.targetStates,function(e,t){var n=o.targetDataForActiveTarget(e);if(n){if(t.current&&n.target.isDocumentQuery()){var r=new _e(n.target.path);null!==o.pendingDocumentUpdates.get(r)||o.targetContainsDocument(e,r)||o.removeDocumentFromTarget(e,r,new wr(r,i))}t.hasPendingChanges&&(a[e]=t.toTargetChange(),t.clearPendingChanges())}});var r=ut();this.pendingDocumentTargetMapping.forEach(function(e,t){var n=!0;t.forEachWhile(function(e){var t=o.targetDataForActiveTarget(e);return!t||t.purpose===yi.LimboResolution||(n=!1)}),n&&(r=r.add(e))});var e=new es(i,a,this.pendingTargetResets,this.pendingDocumentUpdates,r);return this.pendingDocumentUpdates=tt(),this.pendingDocumentTargetMapping=ps(),this.pendingTargetResets=new Xe(Z),e},fs.prototype.addDocumentToTarget=function(e,t){if(this.isActiveTarget(e)){var n=this.targetContainsDocument(e,t.key)?za.Modified:za.Added;this.ensureTargetState(e).addDocumentChange(t.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t.key,t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t.key,this.ensureDocumentTargetMapping(t.key).add(e))}},fs.prototype.removeDocumentFromTarget=function(e,t,n){if(this.isActiveTarget(e)){var r=this.ensureTargetState(e);this.targetContainsDocument(e,t)?r.addDocumentChange(t,za.Removed):r.removeDocumentChange(t),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,this.ensureDocumentTargetMapping(t).delete(e)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(t,n))}},fs.prototype.removeTarget=function(e){delete this.targetStates[e]},fs.prototype.getCurrentDocumentCountForTarget=function(e){var t=this.ensureTargetState(e).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size},fs.prototype.recordPendingTargetRequest=function(e){this.ensureTargetState(e).recordPendingTargetRequest()},fs.prototype.ensureTargetState=function(e){return this.targetStates[e]||(this.targetStates[e]=new cs),this.targetStates[e]},fs.prototype.ensureDocumentTargetMapping=function(e){var t=this.pendingDocumentTargetMapping.get(e);return t||(t=new Xe(Z),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,t)),t},fs.prototype.isActiveTarget=function(e){var t=null!==this.targetDataForActiveTarget(e);return t||y("WatchChangeAggregator","Detected inactive target",e),t},fs.prototype.targetDataForActiveTarget=function(e){var t=this.targetStates[e];return t&&t.isPending?null:this.metadataProvider.getTargetDataForTarget(e)},fs.prototype.resetTarget=function(t){var n=this;v(!this.targetStates[t].isPending,"Should only reset active targets"),this.targetStates[t]=new cs,this.metadataProvider.getRemoteKeysForTarget(t).forEach(function(e){n.removeDocumentFromTarget(t,e,null)})},fs.prototype.targetContainsDocument=function(e,t){return this.metadataProvider.getRemoteKeysForTarget(e).has(t)},fs);function fs(e){this.metadataProvider=e,this.targetStates={},this.pendingDocumentUpdates=tt(),this.pendingDocumentTargetMapping=ps(),this.pendingTargetResets=new Xe(Z)}function ps(){return new Be(_e.comparator)}function ds(){return new Be(_e.comparator)}var ms="RemoteStore",ys=(vs.prototype.start=function(){return this.enableNetwork()},vs.prototype.enableNetwork=function(){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!0,this.canUseNetwork()?(t=this.writeStream,[4,this.localStore.getLastStreamToken()]):[3,3];case 1:return t.lastStreamToken=e.sent(),this.shouldStartWatchStream()?this.startWatchStream():this.onlineStateTracker.set(Pa.Unknown),[4,this.fillWritePipeline()];case 2:e.sent(),e.label=3;case 3:return[2]}})})},vs.prototype.disableNetwork=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Pa.Offline),[2]}})})},vs.prototype.disableNetworkInternal=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.writeStream.stop()];case 1:return e.sent(),[4,this.watchStream.stop()];case 2:return e.sent(),0<this.writePipeline.length&&(y(ms,"Stopping write stream with "+this.writePipeline.length+" pending writes"),this.writePipeline=[]),this.cleanUpWatchStreamState(),[2]}})})},vs.prototype.shutdown=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return y(ms,"RemoteStore shutting down."),this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.connectivityMonitor.shutdown(),this.onlineStateTracker.set(Pa.Unknown),[2]}})})},vs.prototype.listen=function(e){k(this.listenTargets,e.targetId)||(this.listenTargets[e.targetId]=e,this.shouldStartWatchStream()?this.startWatchStream():this.watchStream.isOpen()&&this.sendWatchRequest(e))},vs.prototype.unlisten=function(e){v(k(this.listenTargets,e),"unlisten called on target no currently watched: "+e),delete this.listenTargets[e],this.watchStream.isOpen()&&this.sendUnwatchRequest(e),D(this.listenTargets)&&(this.watchStream.isOpen()?this.watchStream.markIdle():this.canUseNetwork()&&this.onlineStateTracker.set(Pa.Unknown))},vs.prototype.getTargetDataForTarget=function(e){return this.listenTargets[e]||null},vs.prototype.getRemoteKeysForTarget=function(e){return this.syncEngine.getRemoteKeysForTarget(e)},vs.prototype.sendWatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e.targetId),this.watchStream.watch(e)},vs.prototype.sendUnwatchRequest=function(e){this.watchChangeAggregator.recordPendingTargetRequest(e),this.watchStream.unwatch(e)},vs.prototype.startWatchStream=function(){v(this.shouldStartWatchStream(),"startWatchStream() called when shouldStartWatchStream() is false."),this.watchChangeAggregator=new hs(this),this.watchStream.start(),this.onlineStateTracker.handleWatchStreamStart()},vs.prototype.shouldStartWatchStream=function(){return this.canUseNetwork()&&!this.watchStream.isStarted()&&!D(this.listenTargets)},vs.prototype.canUseNetwork=function(){return this.isPrimary&&this.networkEnabled},vs.prototype.cleanUpWatchStreamState=function(){this.watchChangeAggregator=null},vs.prototype.onWatchStreamOpen=function(){return m.__awaiter(this,void 0,void 0,function(){var n=this;return m.__generator(this,function(e){return A(this.listenTargets,function(e,t){n.sendWatchRequest(t)}),[2]})})},vs.prototype.onWatchStreamClose=function(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return void 0===t&&v(!this.shouldStartWatchStream(),"Watch stream was stopped gracefully while still needed."),this.cleanUpWatchStreamState(),this.shouldStartWatchStream()?(this.onlineStateTracker.handleWatchStreamFailure(t),this.startWatchStream()):this.onlineStateTracker.set(Pa.Unknown),[2]})})},vs.prototype.onWatchStreamChange=function(n,r){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:return this.onlineStateTracker.set(Pa.Online),n instanceof us&&n.state===is.Removed&&n.cause?[2,this.handleTargetError(n)]:(n instanceof as?this.watchChangeAggregator.handleDocumentChange(n):n instanceof ss?this.watchChangeAggregator.handleExistenceFilter(n):(v(n instanceof us,"Expected watchChange to be an instance of WatchTargetChange"),this.watchChangeAggregator.handleTargetChange(n)),r.isEqual(Ve.MIN)?[3,3]:[4,this.localStore.getLastRemoteSnapshotVersion()]);case 1:return t=e.sent(),0<=r.compareTo(t)?[4,this.raiseWatchSnapshot(r)]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})},vs.prototype.raiseWatchSnapshot=function(r){var i=this;v(!r.isEqual(Ve.MIN),"Can't raise event for unknown SnapshotVersion");var e=this.watchChangeAggregator.createRemoteEvent(r);return A(e.targetChanges,function(e,t){if(0<t.resumeToken.length){var n=i.listenTargets[e];n&&(i.listenTargets[e]=n.withResumeToken(t.resumeToken,r))}}),e.targetMismatches.forEach(function(e){var t=i.listenTargets[e];if(t){i.listenTargets[e]=t.withResumeToken(_(),t.snapshotVersion),i.sendUnwatchRequest(e);var n=new Ci(t.target,e,yi.ExistenceFilterMismatch,t.sequenceNumber);i.sendWatchRequest(n)}}),this.syncEngine.applyRemoteEvent(e)},vs.prototype.handleTargetError=function(e){var n=this;v(!!e.cause,"Handling target error without a cause");var r=e.cause,i=Promise.resolve();return e.targetIds.forEach(function(t){i=i.then(function(){return m.__awaiter(n,void 0,void 0,function(){return m.__generator(this,function(e){return k(this.listenTargets,t)?(delete this.listenTargets[t],this.watchChangeAggregator.removeTarget(t),[2,this.syncEngine.rejectListen(t,r)]):[2]})})})}),i},vs.prototype.fillWritePipeline=function(){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:return this.canAddToWritePipeline()?(t=0<this.writePipeline.length?this.writePipeline[this.writePipeline.length-1].batchId:-1,[4,this.localStore.nextMutationBatch(t)]):[3,4];case 1:return null!==(n=e.sent())?[3,2]:(0===this.writePipeline.length&&this.writeStream.markIdle(),[3,4]);case 2:return this.addToWritePipeline(n),[4,this.fillWritePipeline()];case 3:e.sent(),e.label=4;case 4:return this.shouldStartWriteStream()&&this.startWriteStream(),[2]}})})},vs.prototype.canAddToWritePipeline=function(){return this.canUseNetwork()&&this.writePipeline.length<10},vs.prototype.outstandingWrites=function(){return this.writePipeline.length},vs.prototype.addToWritePipeline=function(e){v(this.canAddToWritePipeline(),"addToWritePipeline called when pipeline is full"),this.writePipeline.push(e),this.writeStream.isOpen()&&this.writeStream.handshakeComplete&&this.writeStream.writeMutations(e.mutations)},vs.prototype.shouldStartWriteStream=function(){return this.canUseNetwork()&&!this.writeStream.isStarted()&&0<this.writePipeline.length},vs.prototype.startWriteStream=function(){v(this.shouldStartWriteStream(),"startWriteStream() called when shouldStartWriteStream() is false."),this.writeStream.start()},vs.prototype.onWriteStreamOpen=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return this.writeStream.writeHandshake(),[2]})})},vs.prototype.onWriteHandshakeComplete=function(){var r=this;return this.localStore.setLastStreamToken(this.writeStream.lastStreamToken).then(function(){for(var e=0,t=r.writePipeline;e<t.length;e++){var n=t[e];r.writeStream.writeMutations(n.mutations)}}).catch(qi)},vs.prototype.onMutationResult=function(e,t){var n=this;v(0<this.writePipeline.length,"Got result for empty write pipeline");var r=this.writePipeline.shift(),i=pt.from(r,e,t,this.writeStream.lastStreamToken);return this.syncEngine.applySuccessfulWrite(i).then(function(){return n.fillWritePipeline()})},vs.prototype.onWriteStreamClose=function(n){return m.__awaiter(this,void 0,void 0,function(){var t=this;return m.__generator(this,function(e){return void 0===n&&v(!this.shouldStartWriteStream(),"Write stream was stopped gracefully while still needed."),n&&0<this.writePipeline.length?[2,(this.writeStream.handshakeComplete?this.handleWriteError(n):this.handleHandshakeError(n)).then(function(){t.shouldStartWriteStream()&&t.startWriteStream()})]:[2]})})},vs.prototype.handleHandshakeError=function(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return Ba(t.code)?(y(ms,"RemoteStore error before completed handshake; resetting stream token: ",this.writeStream.lastStreamToken),this.writeStream.lastStreamToken=_(),[2,this.localStore.setLastStreamToken(_()).catch(qi)]):[2]})})},vs.prototype.handleWriteError=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n=this;return m.__generator(this,function(e){return function(e){return Ba(e)&&e!==T.ABORTED}(r.code)?(t=this.writePipeline.shift(),this.writeStream.inhibitBackoff(),[2,this.syncEngine.rejectFailedWrite(t.batchId,r).then(function(){return n.fillWritePipeline()})]):[2]})})},vs.prototype.createTransaction=function(){return new La(this.datastore)},vs.prototype.restartNetwork=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.networkEnabled=!1,[4,this.disableNetworkInternal()];case 1:return e.sent(),this.onlineStateTracker.set(Pa.Unknown),[4,this.enableNetwork()];case 2:return e.sent(),[2]}})})},vs.prototype.handleCredentialChange=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(y(ms,"RemoteStore restarting streams for new credential"),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},vs.prototype.applyPrimaryState=function(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return(this.isPrimary=t)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return e.sent(),[3,4];case 2:return t?[3,4]:[4,this.disableNetworkInternal()];case 3:e.sent(),this.onlineStateTracker.set(Pa.Unknown),e.label=4;case 4:return[2]}})})},vs);function vs(e,t,n,r,i){var o=this;this.localStore=e,this.datastore=t,this.writePipeline=[],this.listenTargets={},this.watchChangeAggregator=null,this.networkEnabled=!1,this.isPrimary=!1,this.connectivityMonitor=i,this.connectivityMonitor.addCallback(function(e){n.enqueueAndForget(function(){return m.__awaiter(o,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.canUseNetwork()?(y(ms,"Restarting streams for network reachability change."),[4,this.restartNetwork()]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})}),this.onlineStateTracker=new Va(n,r),this.watchStream=this.datastore.newPersistentWatchStream({onOpen:this.onWatchStreamOpen.bind(this),onClose:this.onWatchStreamClose.bind(this),onWatchChange:this.onWatchStreamChange.bind(this)}),this.writeStream=this.datastore.newPersistentWriteStream({onOpen:this.onWriteStreamOpen.bind(this),onClose:this.onWriteStreamClose.bind(this),onHandshakeComplete:this.onWriteHandshakeComplete.bind(this),onMutationResult:this.onMutationResult.bind(this)})}var gs=(Object.defineProperty(bs.prototype,"latitude",{get:function(){return this._lat},enumerable:!0,configurable:!0}),Object.defineProperty(bs.prototype,"longitude",{get:function(){return this._long},enumerable:!0,configurable:!0}),bs.prototype.isEqual=function(e){return this._lat===e._lat&&this._long===e._long},bs.prototype._compareTo=function(e){return Z(this._lat,e._lat)||Z(this._long,e._long)},bs);function bs(e,t){if(x("GeoPoint",arguments,2),L("GeoPoint","number",1,e),L("GeoPoint","number",2,t),!isFinite(e)||e<-90||90<e)throw new S(T.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||180<t)throw new S(T.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}var ws=(_s.prototype.applyToLocalView=function(e,t){return new $n(t,e)},_s.prototype.applyToRemoteDocument=function(e,t){return t},_s.prototype.computeBaseValue=function(e){return null},_s.prototype.isEqual=function(e){return e instanceof _s},_s.instance=new _s,_s);function _s(){}var Es=(Ts.prototype.applyToLocalView=function(e,t){return this.apply(e)},Ts.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Ts.prototype.apply=function(e){for(var n=Ns(e),t=function(t){n.find(function(e){return e.isEqual(t)})||n.push(t)},r=0,i=this.elements;r<i.length;r++)t(i[r]);return new fr(n)},Ts.prototype.computeBaseValue=function(e){return null},Ts.prototype.isEqual=function(e){return e instanceof Ts&&ee(e.elements,this.elements)},Ts);function Ts(e){this.elements=e}var Ss=(Cs.prototype.applyToLocalView=function(e,t){return this.apply(e)},Cs.prototype.applyToRemoteDocument=function(e,t){return this.apply(e)},Cs.prototype.apply=function(e){for(var n=Ns(e),t=function(t){n=n.filter(function(e){return!e.isEqual(t)})},r=0,i=this.elements;r<i.length;r++)t(i[r]);return new fr(n)},Cs.prototype.computeBaseValue=function(e){return null},Cs.prototype.isEqual=function(e){return e instanceof Cs&&ee(e.elements,this.elements)},Cs);function Cs(e){this.elements=e}var Is=(ks.prototype.applyToLocalView=function(e,t){var n=this.computeBaseValue(e);if(n instanceof jn&&this.operand instanceof jn){var r=n.internalValue+this.operand.internalValue;return new jn(r)}return r=n.internalValue+this.operand.internalValue,new Bn(r)},ks.prototype.applyToRemoteDocument=function(e,t){return v(null!==t,"Didn't receive transformResult for NUMERIC_ADD transform"),t},ks.prototype.computeBaseValue=function(e){return e instanceof Mn?e:new jn(0)},ks.prototype.isEqual=function(e){return e instanceof ks&&this.operand.isEqual(e.operand)},ks);function ks(e){this.operand=e}function Ns(e){return e instanceof fr?e.internalValue.slice():[]}var As=(Os.prototype.isEqual=function(e){return e&&e.count===this.count},Os);function Os(e){this.count=e}var Ds,Ps,xs=((Ds={})[zo.ASCENDING.name]="ASCENDING",Ds[zo.DESCENDING.name]="DESCENDING",Ds),Rs=((Ps={})[So.LESS_THAN.name]="LESS_THAN",Ps[So.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Ps[So.GREATER_THAN.name]="GREATER_THAN",Ps[So.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Ps[So.EQUAL.name]="EQUAL",Ps[So.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Ps[So.IN.name]="IN",Ps[So.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Ps),Ms=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ls(e,t){v(!mo(e),t+" is missing")}function Fs(e){return"number"==typeof e?e:"string"==typeof e?Number(e):w("can't parse "+e)}var Us=(js.prototype.emptyByteString=function(){return this.options.useProto3Json?"":new Uint8Array(0)},js.prototype.unsafeCastProtoByteString=function(e){return e},js.prototype.fromRpcStatus=function(e){var t=void 0===e.code?T.UNKNOWN:Wa(e.code);return new S(t,e.message||"")},js.prototype.toInt32Value=function(e){return this.options.useProto3Json||mo(e)?e:{value:e}},js.prototype.fromInt32Value=function(e){var t;return mo(t="object"==typeof e?e.value:e)?null:t},js.prototype.toTimestamp=function(e){return this.options.useProto3Json?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}},js.prototype.fromTimestamp=function(e){if("string"==typeof e)return this.fromIso8601String(e);v(!!e,"Cannot deserialize null or undefined timestamp.");var t=Fs(e.seconds||"0"),n=e.nanos||0;return new Ue(t,n)},js.prototype.fromIso8601String=function(e){var t=0,n=Ms.exec(e);if(v(!!n,"invalid timestamp: "+e),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e),o=Math.floor(i.getTime()/1e3);return new Ue(o,t)},js.prototype.toBytes=function(e){return this.options.useProto3Json?e.toBase64():this.unsafeCastProtoByteString(e.toUint8Array())},js.prototype.fromBlob=function(e){return"string"==typeof e?(v(this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ie.fromBase64String(e)):(v(!this.options.useProto3Json,"Expected bytes to be passed in as Uint8Array, but got a string instead."),ie.fromUint8Array(e))},js.prototype.toVersion=function(e){return this.toTimestamp(e.toTimestamp())},js.prototype.fromVersion=function(e){return v(!!e,"Trying to deserialize version that isn't set"),Ve.fromTimestamp(this.fromTimestamp(e))},js.prototype.toResourceName=function(e,t){return this.fullyQualifiedPrefixPath(e).child("documents").child(t).canonicalString()},js.prototype.fromResourceName=function(e){var t=me.fromString(e);return v(this.isValidResourceName(t),"Tried to deserialize invalid key "+t.toString()),t},js.prototype.toName=function(e){return this.toResourceName(this.databaseId,e.path)},js.prototype.fromName=function(e){var t=this.fromResourceName(e);return v(t.get(1)===this.databaseId.projectId,"Tried to deserialize key from different project: "+t.get(1)+" vs "+this.databaseId.projectId),v(!t.get(3)&&!this.databaseId.database||t.get(3)===this.databaseId.database,"Tried to deserialize key from different database: "+t.get(3)+" vs "+this.databaseId.database),new _e(this.extractLocalPathFromResourceName(t))},js.prototype.toQueryPath=function(e){return this.toResourceName(this.databaseId,e)},js.prototype.fromQueryPath=function(e){var t=this.fromResourceName(e);return 4===t.length?me.EMPTY_PATH:this.extractLocalPathFromResourceName(t)},Object.defineProperty(js.prototype,"encodedDatabaseId",{get:function(){return new me(["projects",this.databaseId.projectId,"databases",this.databaseId.database]).canonicalString()},enumerable:!0,configurable:!0}),js.prototype.fullyQualifiedPrefixPath=function(e){return new me(["projects",e.projectId,"databases",e.database])},js.prototype.extractLocalPathFromResourceName=function(e){return v(4<e.length&&"documents"===e.get(4),"tried to deserialize invalid key "+e.toString()),e.popFirst(5)},js.prototype.isValidResourceName=function(e){return 4<=e.length&&"projects"===e.get(0)&&"databases"===e.get(2)},js.prototype.toValue=function(e){if(e instanceof An)return{nullValue:"NULL_VALUE"};if(e instanceof Pn)return{booleanValue:e.value()};if(e instanceof jn)return{integerValue:""+e.value()};if(e instanceof Bn){var t=e.value();if(this.options.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:e.value()}}return e instanceof Kn?{stringValue:e.value()}:e instanceof cr?{mapValue:this.toMapValue(e)}:e instanceof fr?{arrayValue:this.toArrayValue(e)}:e instanceof Gn?{timestampValue:this.toTimestamp(e.internalValue)}:e instanceof ar?{geoPointValue:{latitude:e.value().latitude,longitude:e.value().longitude}}:e instanceof er?{bytesValue:this.toBytes(e.value())}:e instanceof rr?{referenceValue:this.toResourceName(e.databaseId,e.key.path)}:w("Unknown FieldValue "+JSON.stringify(e))},js.prototype.fromValue=function(e){var t=this;if("nullValue"in e)return An.INSTANCE;if("booleanValue"in e)return Pn.of(e.booleanValue);if("integerValue"in e)return new jn(Fs(e.integerValue));if("doubleValue"in e){if(this.options.useProto3Json){if("NaN"===e.doubleValue)return Bn.NAN;if("Infinity"===e.doubleValue)return Bn.POSITIVE_INFINITY;if("-Infinity"===e.doubleValue)return Bn.NEGATIVE_INFINITY}return new Bn(e.doubleValue)}if("stringValue"in e)return new Kn(e.stringValue);if("mapValue"in e)return this.fromFields(e.mapValue.fields||{});if("arrayValue"in e){Ls(e.arrayValue,"arrayValue");var n=e.arrayValue.values||[];return new fr(n.map(function(e){return t.fromValue(e)}))}if("timestampValue"in e)return Ls(e.timestampValue,"timestampValue"),new Gn(this.fromTimestamp(e.timestampValue));if("geoPointValue"in e){Ls(e.geoPointValue,"geoPointValue");var r=e.geoPointValue.latitude||0,i=e.geoPointValue.longitude||0;return new ar(new gs(r,i))}if("bytesValue"in e){Ls(e.bytesValue,"bytesValue");var o=this.fromBlob(e.bytesValue);return new er(o)}if("referenceValue"in e){Ls(e.referenceValue,"referenceValue");var a=this.fromResourceName(e.referenceValue),s=new ue(a.get(1),a.get(3)),u=new _e(this.extractLocalPathFromResourceName(a));return new rr(s,u)}return w("Unknown Value proto "+JSON.stringify(e))},js.prototype.toMutationDocument=function(e,t){return{name:this.toName(e),fields:this.toFields(t)}},js.prototype.toDocument=function(e){return v(!e.hasLocalMutations,"Can't serialize documents with mutations."),{name:this.toName(e.key),fields:this.toFields(e.data()),updateTime:this.toTimestamp(e.version.toTimestamp())}},js.prototype.fromDocument=function(e,t){var n=this,r=this.fromName(e.name),i=this.fromVersion(e.updateTime);return new vr(r,i,{hasCommittedMutations:!!t},void 0,e,function(e){return n.fromValue(e)})},js.prototype.toFields=function(e){var n=this,r={};return e.forEach(function(e,t){r[e]=n.toValue(t)}),r},js.prototype.fromFields=function(e){var n=this,t=e,r=cr.EMPTY;return O(t,function(e,t){r=r.set(new be([e]),n.fromValue(t))}),r},js.prototype.toMapValue=function(e){return{fields:this.toFields(e)}},js.prototype.toArrayValue=function(e){var t=this,n=[];return e.forEach(function(e){n.push(t.toValue(e))}),{values:n}},js.prototype.fromFound=function(e){var t=this;v(!!e.found,"Tried to deserialize a found document from a missing document."),Ls(e.found.name,"doc.found.name"),Ls(e.found.updateTime,"doc.found.updateTime");var n=this.fromName(e.found.name),r=this.fromVersion(e.found.updateTime);return new vr(n,r,{},void 0,e.found,function(e){return t.fromValue(e)})},js.prototype.fromMissing=function(e){v(!!e.missing,"Tried to deserialize a missing document from a found document."),v(!!e.readTime,"Tried to deserialize a missing document without a read time.");var t=this.fromName(e.missing),n=this.fromVersion(e.readTime);return new wr(t,n)},js.prototype.fromMaybeDocument=function(e){return"found"in e?this.fromFound(e):"missing"in e?this.fromMissing(e):w("invalid batch get response: "+JSON.stringify(e))},js.prototype.toWatchTargetChangeState=function(e){switch(e){case is.Added:return"ADD";case is.Current:return"CURRENT";case is.NoChange:return"NO_CHANGE";case is.Removed:return"REMOVE";case is.Reset:return"RESET";default:return w("Unknown WatchTargetChangeState: "+e)}},js.prototype.toTestWatchChange=function(e){if(e instanceof ss)return{filter:{count:e.existenceFilter.count,targetId:e.targetId}};if(e instanceof as){if(e.newDoc instanceof vr){var t=e.newDoc;return{documentChange:{document:{name:this.toName(t.key),fields:this.toFields(t.data()),updateTime:this.toVersion(t.version)},targetIds:e.updatedTargetIds,removedTargetIds:e.removedTargetIds}}}if(e.newDoc instanceof wr)return t=e.newDoc,{documentDelete:{document:this.toName(t.key),readTime:this.toVersion(t.version),removedTargetIds:e.removedTargetIds}};if(null===e.newDoc)return{documentRemove:{document:this.toName(e.key),removedTargetIds:e.removedTargetIds}}}if(e instanceof us){var n=void 0;return e.cause&&(n={code:function(e){if(void 0===e)return Ua.OK;switch(e){case T.OK:return Ua.OK;case T.CANCELLED:return Ua.CANCELLED;case T.UNKNOWN:return Ua.UNKNOWN;case T.DEADLINE_EXCEEDED:return Ua.DEADLINE_EXCEEDED;case T.RESOURCE_EXHAUSTED:return Ua.RESOURCE_EXHAUSTED;case T.INTERNAL:return Ua.INTERNAL;case T.UNAVAILABLE:return Ua.UNAVAILABLE;case T.UNAUTHENTICATED:return Ua.UNAUTHENTICATED;case T.INVALID_ARGUMENT:return Ua.INVALID_ARGUMENT;case T.NOT_FOUND:return Ua.NOT_FOUND;case T.ALREADY_EXISTS:return Ua.ALREADY_EXISTS;case T.PERMISSION_DENIED:return Ua.PERMISSION_DENIED;case T.FAILED_PRECONDITION:return Ua.FAILED_PRECONDITION;case T.ABORTED:return Ua.ABORTED;case T.OUT_OF_RANGE:return Ua.OUT_OF_RANGE;case T.UNIMPLEMENTED:return Ua.UNIMPLEMENTED;case T.DATA_LOSS:return Ua.DATA_LOSS;default:return w("Unknown status code: "+e)}}(e.cause.code),message:e.cause.message}),{targetChange:{targetChangeType:this.toWatchTargetChangeState(e.state),targetIds:e.targetIds,resumeToken:this.unsafeCastProtoByteString(e.resumeToken),cause:n}}}return w("Unrecognized watch change: "+JSON.stringify(e))},js.prototype.fromWatchChange=function(e){var t,n=this;if("targetChange"in e){Ls(e.targetChange,"targetChange");var r=this.fromWatchTargetChangeState(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=e.targetChange.resumeToken||this.emptyByteString(),a=e.targetChange.cause,s=a&&this.fromRpcStatus(a);t=new us(r,i,o,s||null)}else if("documentChange"in e){Ls(e.documentChange,"documentChange");var u=e.documentChange;Ls(u.document,"documentChange.name"),Ls(u.document.name,"documentChange.document.name"),Ls(u.document.updateTime,"documentChange.document.updateTime");var c=this.fromName(u.document.name),l=this.fromVersion(u.document.updateTime),h=new vr(c,l,{},void 0,u.document,function(e){return n.fromValue(e)}),f=u.targetIds||[],p=u.removedTargetIds||[];t=new as(f,p,h.key,h)}else if("documentDelete"in e){Ls(e.documentDelete,"documentDelete");var d=e.documentDelete;Ls(d.document,"documentDelete.document"),c=this.fromName(d.document),l=d.readTime?this.fromVersion(d.readTime):Ve.forDeletedDoc(),h=new wr(c,l),p=d.removedTargetIds||[],t=new as([],p,h.key,h)}else if("documentRemove"in e){Ls(e.documentRemove,"documentRemove");var m=e.documentRemove;Ls(m.document,"documentRemove"),c=this.fromName(m.document),p=m.removedTargetIds||[],t=new as([],p,c,null)}else{if(!("filter"in e))return w("Unknown change type "+JSON.stringify(e));Ls(e.filter,"filter");var y=e.filter;Ls(y.targetId,"filter.targetId");var v=y.count||0,g=new As(v),b=y.targetId;t=new ss(b,g)}return t},js.prototype.fromWatchTargetChangeState=function(e){return"NO_CHANGE"===e?is.NoChange:"ADD"===e?is.Added:"REMOVE"===e?is.Removed:"CURRENT"===e?is.Current:"RESET"===e?is.Reset:w("Got unexpected TargetChange.state: "+e)},js.prototype.versionFromListenResponse=function(e){if(!("targetChange"in e))return Ve.MIN;var t=e.targetChange;return t.targetIds&&t.targetIds.length?Ve.MIN:t.readTime?this.fromVersion(t.readTime):Ve.MIN},js.prototype.toMutation=function(e){var t,n=this;if(e instanceof an)t={update:this.toMutationDocument(e.key,e.value)};else if(e instanceof mn)t={delete:this.toName(e.key)};else if(e instanceof cn)t={update:this.toMutationDocument(e.key,e.data),updateMask:this.toDocumentMask(e.fieldMask)};else if(e instanceof fn)t={transform:{document:this.toName(e.key),fieldTransforms:e.fieldTransforms.map(function(e){return n.toFieldTransform(e)})}};else{if(!(e instanceof En))return w("Unknown mutation type "+e.type);t={verify:this.toName(e.key)}}return e.precondition.isNone||(t.currentDocument=this.toPrecondition(e.precondition)),t},js.prototype.fromMutation=function(e){var t=this,n=e.currentDocument?this.fromPrecondition(e.currentDocument):en.NONE;if(e.update){Ls(e.update.name,"name");var r=this.fromName(e.update.name),i=this.fromFields(e.update.fields||{});if(e.updateMask){var o=this.fromDocumentMask(e.updateMask);return new cn(r,i,o,n)}return new an(r,i,n)}if(e.delete)return r=this.fromName(e.delete),new mn(r,n);if(e.transform){r=this.fromName(e.transform.document);var a=e.transform.fieldTransforms.map(function(e){return t.fromFieldTransform(e)});return v(!0===n.exists,'Transforms only support precondition "exists == true"'),new fn(r,a)}return e.verify?(r=this.fromName(e.verify),new En(r,n)):w("unknown mutation proto: "+JSON.stringify(e))},js.prototype.toPrecondition=function(e){return v(!e.isNone,"Can't serialize an empty precondition"),void 0!==e.updateTime?{updateTime:this.toVersion(e.updateTime)}:void 0!==e.exists?{exists:e.exists}:w("Unknown precondition")},js.prototype.fromPrecondition=function(e){return void 0!==e.updateTime?en.updateTime(this.fromVersion(e.updateTime)):void 0!==e.exists?en.exists(e.exists):en.NONE},js.prototype.fromWriteResult=function(e,t){var n=this,r=e.updateTime?this.fromVersion(e.updateTime):this.fromVersion(t);r.isEqual(Ve.MIN)&&(r=this.fromVersion(t));var i=null;return e.transformResults&&0<e.transformResults.length&&(i=e.transformResults.map(function(e){return n.fromValue(e)})),new Zt(r,i)},js.prototype.fromWriteResults=function(e,t){var n=this;return e&&0<e.length?(v(void 0!==t,"Received a write result without a commit time"),e.map(function(e){return n.fromWriteResult(e,t)})):[]},js.prototype.toFieldTransform=function(e){var t=this,n=e.transform;if(n instanceof ws)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Es)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Ss)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements.map(function(e){return t.toValue(e)})}};if(n instanceof Is)return{fieldPath:e.field.canonicalString(),increment:this.toValue(n.operand)};throw w("Unknown transform: "+e.transform)},js.prototype.fromFieldTransform=function(e){var t=this,n=null;if("setToServerValue"in e)v("REQUEST_TIME"===e.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(e)),n=ws.instance;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Es(r.map(function(e){return t.fromValue(e)}))}else if("removeAllFromArray"in e)r=e.removeAllFromArray.values||[],n=new Ss(r.map(function(e){return t.fromValue(e)}));else if("increment"in e){var i=this.fromValue(e.increment);v(i instanceof Mn,"NUMERIC_ADD transform requires a NumberValue"),n=new Is(i)}else w("Unknown transform proto: "+JSON.stringify(e));var o=be.fromServerFormat(e.fieldPath);return new Yt(o,n)},js.prototype.toDocumentsTarget=function(e){return{documents:[this.toQueryPath(e.path)]}},js.prototype.fromDocumentsTarget=function(e){var t=e.documents.length;v(1===t,"DocumentsTarget contained other than 1 document: "+t);var n=e.documents[0];return _o.atPath(this.fromQueryPath(n)).toTarget()},js.prototype.toQueryTarget=function(e){var t={structuredQuery:{}},n=e.path;null!==e.collectionGroup?(v(n.length%2==0,"Collection Group queries should be within a document path or root."),t.parent=this.toQueryPath(n),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(v(n.length%2!=0,"Document queries with filters are not supported."),t.parent=this.toQueryPath(n.popLast()),t.structuredQuery.from=[{collectionId:n.lastSegment()}]);var r=this.toFilter(e.filters);r&&(t.structuredQuery.where=r);var i=this.toOrder(e.orderBy);i&&(t.structuredQuery.orderBy=i);var o=this.toInt32Value(e.limit);return null!==o&&(t.structuredQuery.limit=o),e.startAt&&(t.structuredQuery.startAt=this.toCursor(e.startAt)),e.endAt&&(t.structuredQuery.endAt=this.toCursor(e.endAt)),t},js.prototype.fromQueryTarget=function(e){var t=this.fromQueryPath(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){v(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=this.fromFilter(n.where));var s=[];n.orderBy&&(s=this.fromOrder(n.orderBy));var u=null;n.limit&&(u=this.fromInt32Value(n.limit));var c=null;n.startAt&&(c=this.fromCursor(n.startAt));var l=null;return n.endAt&&(l=this.fromCursor(n.endAt)),new _o(t,i,s,a,u,vo.First,c,l).toTarget()},js.prototype.toListenRequestLabels=function(e){var t=this.toLabel(e.purpose);return null==t?null:{"goog-listen-tags":t}},js.prototype.toLabel=function(e){switch(e){case yi.Listen:return null;case yi.ExistenceFilterMismatch:return"existence-filter-mismatch";case yi.LimboResolution:return"limbo-document";default:return w("Unrecognized query purpose: "+e)}},js.prototype.toTarget=function(e){var t,n=e.target;return(t=n.isDocumentQuery()?{documents:this.toDocumentsTarget(n)}:{query:this.toQueryTarget(n)}).targetId=e.targetId,0<e.resumeToken.length&&(t.resumeToken=this.unsafeCastProtoByteString(e.resumeToken)),t},js.prototype.toFilter=function(e){var t=this;if(0!==e.length){var n=e.map(function(e){return e instanceof ko?t.toUnaryOrFieldFilter(e):w("Unrecognized filter: "+JSON.stringify(e))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},js.prototype.fromFilter=function(e){var t=this;return e?void 0!==e.unaryFilter?[this.fromUnaryFilter(e)]:void 0!==e.fieldFilter?[this.fromFieldFilter(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return t.fromFilter(e)}).reduce(function(e,t){return e.concat(t)}):w("Unknown filter: "+JSON.stringify(e)):[]},js.prototype.toOrder=function(e){var t=this;if(0!==e.length)return e.map(function(e){return t.toPropertyOrder(e)})},js.prototype.fromOrder=function(e){var t=this;return e.map(function(e){return t.fromPropertyOrder(e)})},js.prototype.toCursor=function(e){var t=this;return{before:e.before,values:e.position.map(function(e){return t.toValue(e)})}},js.prototype.fromCursor=function(e){var t=this,n=!!e.before,r=e.values.map(function(e){return t.fromValue(e)});return new Ho(r,n)},js.prototype.toDirection=function(e){return xs[e.name]},js.prototype.fromDirection=function(e){switch(e){case"ASCENDING":return zo.ASCENDING;case"DESCENDING":return zo.DESCENDING;default:return}},js.prototype.toOperatorName=function(e){return Rs[e.name]},js.prototype.fromOperatorName=function(e){switch(e){case"EQUAL":return So.EQUAL;case"GREATER_THAN":return So.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return So.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return So.LESS_THAN;case"LESS_THAN_OR_EQUAL":return So.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return So.ARRAY_CONTAINS;case"IN":return So.IN;case"ARRAY_CONTAINS_ANY":return So.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return w("Unspecified operator");default:return w("Unknown operator")}},js.prototype.toFieldPathReference=function(e){return{fieldPath:e.canonicalString()}},js.prototype.fromFieldPathReference=function(e){return be.fromServerFormat(e.fieldPath)},js.prototype.toPropertyOrder=function(e){return{field:this.toFieldPathReference(e.field),direction:this.toDirection(e.dir)}},js.prototype.fromPropertyOrder=function(e){return new Go(this.fromFieldPathReference(e.field),this.fromDirection(e.direction))},js.prototype.fromFieldFilter=function(e){return ko.create(this.fromFieldPathReference(e.fieldFilter.field),this.fromOperatorName(e.fieldFilter.op),this.fromValue(e.fieldFilter.value))},js.prototype.toUnaryOrFieldFilter=function(e){if(e.op===So.EQUAL){if(e.value.isEqual(Bn.NAN))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NAN"}};if(e.value.isEqual(An.INSTANCE))return{unaryFilter:{field:this.toFieldPathReference(e.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.toFieldPathReference(e.field),op:this.toOperatorName(e.op),value:this.toValue(e.value)}}},js.prototype.fromUnaryFilter=function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=this.fromFieldPathReference(e.unaryFilter.field);return ko.create(t,So.EQUAL,Bn.NAN);case"IS_NULL":var n=this.fromFieldPathReference(e.unaryFilter.field);return ko.create(n,So.EQUAL,An.INSTANCE);case"OPERATOR_UNSPECIFIED":return w("Unspecified filter");default:return w("Unknown filter")}},js.prototype.toDocumentMask=function(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}},js.prototype.fromDocumentMask=function(e){var t=(e.fieldPaths||[]).map(function(e){return be.fromServerFormat(e)});return Qt.fromArray(t)},js);function js(e,t){this.databaseId=e,this.options=t}var Vs=function(){this.viewSnap=null,this.targetId=0,this.listeners=[]},qs=(Bs.prototype.listen=function(e){var t=e.query,n=!1,r=this.queries.get(t);return r||(n=!0,r=new Vs,this.queries.set(t,r)),r.listeners.push(e),v(!e.applyOnlineStateChange(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),!r.viewSnap||e.onViewSnapshot(r.viewSnap)&&this.raiseSnapshotsInSyncEvent(),n?this.syncEngine.listen(t).then(function(e){return r.targetId=e}):Promise.resolve(r.targetId)},Bs.prototype.unlisten=function(o){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i;return m.__generator(this,function(e){return t=o.query,n=!1,(r=this.queries.get(t))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.queries.delete(t),[2,this.syncEngine.unlisten(t)]):[2]})})},Bs.prototype.onWatchChange=function(e){for(var t=!1,n=0,r=e;n<r.length;n++){var i=r[n],o=i.query,a=this.queries.get(o);if(a){for(var s=0,u=a.listeners;s<u.length;s++)u[s].onViewSnapshot(i)&&(t=!0);a.viewSnap=i}}t&&this.raiseSnapshotsInSyncEvent()},Bs.prototype.onWatchError=function(e,t){var n=this.queries.get(e);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(t);this.queries.delete(e)},Bs.prototype.onOnlineStateChange=function(i){this.onlineState=i;var o=!1;this.queries.forEach(function(e,t){for(var n=0,r=t.listeners;n<r.length;n++)r[n].applyOnlineStateChange(i)&&(o=!0)}),o&&this.raiseSnapshotsInSyncEvent()},Bs.prototype.addSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.add(e),e.next()},Bs.prototype.removeSnapshotsInSyncListener=function(e){this.snapshotsInSyncListeners.delete(e)},Bs.prototype.raiseSnapshotsInSyncEvent=function(){this.snapshotsInSyncListeners.forEach(function(e){e.next()})},Bs);function Bs(e){this.syncEngine=e,this.queries=new Cr(function(e){return e.canonicalId()}),this.onlineState=Pa.Unknown,this.snapshotsInSyncListeners=new Set,this.syncEngine.subscribe(this)}var Ws=(zs.prototype.onViewSnapshot=function(e){if(v(0<e.docChanges.length||e.syncStateChanged,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var t=[],n=0,r=e.docChanges;n<r.length;n++){var i=r[n];i.type!==za.Metadata&&t.push(i)}e=new Ja(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(e)&&(this.queryObserver.next(e),o=!0):this.shouldRaiseInitialEvent(e,this.onlineState)&&(this.raiseInitialEvent(e),o=!0),this.snap=e,o},zs.prototype.onError=function(e){this.queryObserver.error(e)},zs.prototype.applyOnlineStateChange=function(e){this.onlineState=e;var t=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,e)&&(this.raiseInitialEvent(this.snap),t=!0),t},zs.prototype.shouldRaiseInitialEvent=function(e,t){if(v(!this.raisedInitialEvent,"Determining whether to raise first event but already had first event"),!e.fromCache)return!0;var n=t!==Pa.Offline;return this.options.waitForSyncWhenOnline&&n?(v(e.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!e.docs.isEmpty()||t===Pa.Offline},zs.prototype.shouldRaiseEvent=function(e){if(0<e.docChanges.length)return!0;var t=this.snap&&this.snap.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges},zs.prototype.raiseInitialEvent=function(e){v(!this.raisedInitialEvent,"Trying to raise initial events for second time"),e=Ja.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.raisedInitialEvent=!0,this.queryObserver.next(e)},zs);function zs(e,t,n){this.query=e,this.queryObserver=t,this.raisedInitialEvent=!1,this.snap=null,this.onlineState=Pa.Unknown,this.options=n||{}}var Ks=(Hs.fromSnapshot=function(e,t){for(var n=ut(),r=ut(),i=0,o=t.docChanges;i<o.length;i++){var a=o[i];switch(a.type){case za.Added:n=n.add(a.doc.key);break;case za.Removed:r=r.add(a.doc.key)}}return new Hs(e,t.fromCache,n,r)},Hs);function Hs(e,t,n,r){this.targetId=e,this.fromCache=t,this.addedKeys=n,this.removedKeys=r}var Qs=function(e){this.key=e},Gs=function(e){this.key=e},Ys=(Object.defineProperty(Xs.prototype,"syncedDocuments",{get:function(){return this._syncedDocuments},enumerable:!0,configurable:!0}),Xs.prototype.computeDocChanges=function(e,t){var s=this,u=t?t.changeSet:new Xa,c=t?t.documentSet:this.documentSet,l=t?t.mutatedKeys:this.mutatedKeys,h=c,f=!1,p=this.query.hasLimitToFirst()&&c.size===this.query.limit?c.last():null,d=this.query.hasLimitToLast()&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal(function(e,t){var n=c.get(e),r=t instanceof vr?t:null;r&&(v(e.isEqual(r.key),"Mismatching keys found in document changes: "+e+" != "+r.key),r=s.query.matches(r)?r:null);var i=!!n&&s.mutatedKeys.has(n.key),o=!!r&&(r.hasLocalMutations||s.mutatedKeys.has(r.key)&&r.hasCommittedMutations),a=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:za.Metadata,doc:r}),a=!0):s.shouldWaitForSyncedDocument(n,r)||(u.track({type:za.Modified,doc:r}),a=!0,(p&&0<s.query.docComparator(r,p)||d&&s.query.docComparator(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:za.Added,doc:r}),a=!0):n&&!r&&(u.track({type:za.Removed,doc:n}),a=!0,(p||d)&&(f=!0)),a&&(l=r?(h=h.add(r),o?l.add(e):l.delete(e)):(h=h.delete(e),l.delete(e)))}),this.query.hasLimitToFirst()||this.query.hasLimitToLast())for(;h.size>this.query.limit;){var n=this.query.hasLimitToFirst()?h.last():h.first();h=h.delete(n.key),l=l.delete(n.key),u.track({type:za.Removed,doc:n})}return v(!f||!t,"View was refilled using docs that themselves needed refilling."),{documentSet:h,changeSet:u,needsRefill:f,mutatedKeys:l}},Xs.prototype.shouldWaitForSyncedDocument=function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations},Xs.prototype.applyChanges=function(e,t,n){var r=this;v(!e.needsRefill,"Cannot apply changes that need a refill");var i=this.documentSet;this.documentSet=e.documentSet,this.mutatedKeys=e.mutatedKeys;var o=e.changeSet.getChanges();o.sort(function(e,t){return function(e,t){function n(e){switch(e){case za.Added:return 1;case za.Modified:case za.Metadata:return 2;case za.Removed:return 0;default:return w("Unknown ChangeType: "+e)}}return n(e)-n(t)}(e.type,t.type)||r.query.docComparator(e.doc,t.doc)}),this.applyTargetChange(n);var a=t?this.updateLimboDocuments():[],s=0===this.limboDocuments.size&&this.current?Ha.Synced:Ha.Local,u=s!==this.syncState;return this.syncState=s,0!==o.length||u?{snapshot:new Ja(this.query,e.documentSet,i,o,e.mutatedKeys,s===Ha.Local,u,!1),limboChanges:a}:{limboChanges:a}},Xs.prototype.applyOnlineStateChange=function(e){return this.current&&e===Pa.Offline?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Xa,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}},Xs.prototype.shouldBeInLimbo=function(e){return!this._syncedDocuments.has(e)&&!!this.documentSet.has(e)&&!this.documentSet.get(e).hasLocalMutations},Xs.prototype.applyTargetChange=function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.add(e)}),e.modifiedDocuments.forEach(function(e){return v(t._syncedDocuments.has(e),"Modified document "+e+" not found in view.")}),e.removedDocuments.forEach(function(e){return t._syncedDocuments=t._syncedDocuments.delete(e)}),this.current=e.current)},Xs.prototype.updateLimboDocuments=function(){var t=this;if(!this.current)return[];var n=this.limboDocuments;this.limboDocuments=ut(),this.documentSet.forEach(function(e){t.shouldBeInLimbo(e.key)&&(t.limboDocuments=t.limboDocuments.add(e.key))});var r=[];return n.forEach(function(e){t.limboDocuments.has(e)||r.push(new Gs(e))}),this.limboDocuments.forEach(function(e){n.has(e)||r.push(new Qs(e))}),r},Xs.prototype.synchronizeWithPersistedState=function(e){this._syncedDocuments=e.remoteKeys,this.limboDocuments=ut();var t=this.computeDocChanges(e.documents);return this.applyChanges(t,!0)},Xs.prototype.computeInitialSnapshot=function(){return Ja.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===Ha.Local)},Xs);function Xs(e,t){this.query=e,this._syncedDocuments=t,this.syncState=null,this.current=!1,this.limboDocuments=ut(),this.mutatedKeys=ut(),this.documentSet=new Ga(e.docComparator.bind(e))}var $s=(Js.prototype.run=function(){this.runWithBackOff()},Js.prototype.runWithBackOff=function(){var e=this;this.backoff.backoffAndRun(function(){return m.__awaiter(e,void 0,void 0,function(){var t,n,r=this;return m.__generator(this,function(e){return t=this.remoteStore.createTransaction(),(n=this.tryRunUpdateFunction(t))&&n.then(function(e){r.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){r.deferred.resolve(e)}).catch(function(e){r.handleTransactionError(e)})})}).catch(function(e){r.handleTransactionError(e)}),[2]})})})},Js.prototype.tryRunUpdateFunction=function(e){try{var t=this.updateFunction(e);return!mo(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}},Js.prototype.handleTransactionError=function(e){var t=this;0<this.retries&&this.isRetryableTransactionError(e)?(this.retries-=1,this.asyncQueue.enqueueAndForget(function(){return t.runWithBackOff(),Promise.resolve()})):this.deferred.reject(e)},Js.prototype.isRetryableTransactionError=function(e){if("FirebaseError"!==e.name)return!1;var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ba(t)},Js);function Js(e,t,n,r){this.asyncQueue=e,this.remoteStore=t,this.updateFunction=n,this.deferred=r,this.retries=5,this.backoff=new va(this.asyncQueue,Te.RetryTransaction)}var Zs="SyncEngine",eu=function(e,t,n){this.query=e,this.targetId=t,this.view=n},tu=function(e){this.key=e,this.receivedDocument=!1},nu=(Object.defineProperty(ru.prototype,"isPrimaryClient",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),ru.prototype.subscribe=function(e){v(null!==e,"SyncEngine listener cannot be null"),v(null===this.syncEngineListener,"SyncEngine already has a subscriber."),this.syncEngineListener=e},ru.prototype.listen=function(a){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return m.__generator(this,function(e){switch(e.label){case 0:return this.assertSubscribed("listen()"),(r=this.queryViewsByQuery.get(a))?(t=r.targetId,this.sharedClientState.addLocalQueryTarget(t),n=r.view.computeInitialSnapshot(),[3,4]):[3,1];case 1:return[4,this.localStore.allocateTarget(a.toTarget())];case 2:return i=e.sent(),o=this.sharedClientState.addLocalQueryTarget(i.targetId),t=i.targetId,[4,this.initializeViewAndComputeSnapshot(a,t,"current"===o)];case 3:n=e.sent(),this.isPrimary&&this.remoteStore.listen(i),e.label=4;case 4:return this.syncEngineListener.onWatchChange([n]),[2,t]}})})},ru.prototype.initializeViewAndComputeSnapshot=function(s,u,c){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a;return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.localStore.executeQuery(s,!0)];case 1:return t=e.sent(),n=new Ys(s,t.remoteKeys),r=n.computeDocChanges(t.documents),i=ns.createSynthesizedTargetChangeForCurrentChange(u,c&&this.onlineState!==Pa.Offline),v(0===(o=n.applyChanges(r,!0===this.isPrimary,i)).limboChanges.length,"View returned limbo docs before target ack from the server."),v(!!o.snapshot,"applyChanges for new view should always return a snapshot"),a=new eu(s,u,n),this.queryViewsByQuery.set(s,a),this.queriesByTarget[u]||(this.queriesByTarget[u]=[]),this.queriesByTarget[u].push(s),[2,o.snapshot]}})})},ru.prototype.synchronizeViewAndComputeSnapshot=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.localStore.executeQuery(r.query,!0)];case 1:return t=e.sent(),n=r.view.synchronizeWithPersistedState(t),this.isPrimary&&this.updateTrackedLimbos(r.targetId,n.limboChanges),[2,n]}})})},ru.prototype.unlisten=function(i){return m.__awaiter(this,void 0,void 0,function(){var t,n,r=this;return m.__generator(this,function(e){switch(e.label){case 0:return this.assertSubscribed("unlisten()"),v(!!(t=this.queryViewsByQuery.get(i)),"Trying to unlisten on query not found:"+i),1<(n=this.queriesByTarget[t.targetId]).length?(this.queriesByTarget[t.targetId]=n.filter(function(e){return!e.isEqual(i)}),this.queryViewsByQuery.delete(i),[2]):this.isPrimary?(this.sharedClientState.removeLocalQueryTarget(t.targetId),this.sharedClientState.isActiveQueryTarget(t.targetId)?[3,2]:[4,this.localStore.releaseTarget(t.targetId,!1).then(function(){r.sharedClientState.clearQueryState(t.targetId),r.remoteStore.unlisten(t.targetId),r.removeAndCleanupTarget(t.targetId)}).catch(qi)]):[3,3];case 1:e.sent(),e.label=2;case 2:return[3,5];case 3:return this.removeAndCleanupTarget(t.targetId),[4,this.localStore.releaseTarget(t.targetId,!0)];case 4:e.sent(),e.label=5;case 5:return[2]}})})},ru.prototype.write=function(n,r){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:return this.assertSubscribed("write()"),[4,this.localStore.localWrite(n)];case 1:return t=e.sent(),this.sharedClientState.addPendingMutation(t.batchId),this.addMutationCallback(t.batchId,r),[4,this.emitNewSnapsAndNotifyLocalStore(t.changes)];case 2:return e.sent(),[4,this.remoteStore.fillWritePipeline()];case 3:return e.sent(),[2]}})})},ru.prototype.runTransaction=function(e,t,n){new $s(e,this.remoteStore,t,n).run()},ru.prototype.applyRemoteEvent=function(n){return m.__awaiter(this,void 0,void 0,function(){var t,r=this;return m.__generator(this,function(e){switch(e.label){case 0:this.assertSubscribed("applyRemoteEvent()"),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,this.localStore.applyRemoteEvent(n)];case 2:return t=e.sent(),O(n.targetChanges,function(e,t){var n=r.limboResolutionsByTarget[Number(e)];n&&(v(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,"Limbo resolution for single document contains multiple changes."),0<t.addedDocuments.size?n.receivedDocument=!0:0<t.modifiedDocuments.size?v(n.receivedDocument,"Received change for limbo target document without add."):0<t.removedDocuments.size&&(v(n.receivedDocument,"Received remove for limbo target document without add."),n.receivedDocument=!1))}),[4,this.emitNewSnapsAndNotifyLocalStore(t,n)];case 3:return e.sent(),[3,6];case 4:return[4,qi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}})})},ru.prototype.applyOnlineStateChange=function(r,e){if(this.isPrimary&&e===Ra.RemoteStore||!this.isPrimary&&e===Ra.SharedClientState){this.assertSubscribed("applyOnlineStateChange()");var i=[];this.queryViewsByQuery.forEach(function(e,t){var n=t.view.applyOnlineStateChange(r);v(0===n.limboChanges.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.syncEngineListener.onOnlineStateChange(r),this.syncEngineListener.onWatchChange(i),this.onlineState=r,this.isPrimary&&this.sharedClientState.setOnlineState(r)}},ru.prototype.rejectListen=function(s,u){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a=this;return m.__generator(this,function(e){switch(e.label){case 0:return this.assertSubscribed("rejectListens()"),this.sharedClientState.updateQueryState(s,"rejected",u),t=this.limboResolutionsByTarget[s],(n=t&&t.key)?(this.limboTargetsByKey=this.limboTargetsByKey.remove(n),delete this.limboResolutionsByTarget[s],r=(r=new Be(_e.comparator)).insert(n,new wr(n,Ve.forDeletedDoc())),i=ut().add(n),o=new es(Ve.MIN,{},new Xe(Z),r,i),[2,this.applyRemoteEvent(o)]):[3,1];case 1:return[4,this.localStore.releaseTarget(s,!1).then(function(){return a.removeAndCleanupTarget(s,u)}).catch(qi)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},ru.prototype.applyBatchState=function(n,r,i){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:return this.assertSubscribed("applyBatchState()"),[4,this.localStore.lookupMutationDocuments(n)];case 1:return null===(t=e.sent())?(y(Zs,"Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.remoteStore.fillWritePipeline()];case 2:return e.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.processUserCallback(n,i||null),this.localStore.removeCachedMutationBatchMetadata(n)):w("Unknown batchState: "+r),e.label=4;case 4:return[4,this.emitNewSnapsAndNotifyLocalStore(t)];case 5:return e.sent(),[2]}})})},ru.prototype.applySuccessfulWrite=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:this.assertSubscribed("applySuccessfulWrite()"),t=r.batch.batchId,this.processUserCallback(t,null),this.triggerPendingWritesCallbacks(t),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,this.localStore.acknowledgeBatch(r)];case 2:return n=e.sent(),this.sharedClientState.updateMutationState(t,"acknowledged"),[4,this.emitNewSnapsAndNotifyLocalStore(n)];case 3:return e.sent(),[3,6];case 4:return[4,qi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}})})},ru.prototype.rejectFailedWrite=function(n,r){return m.__awaiter(this,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:this.assertSubscribed("rejectFailedWrite()"),this.processUserCallback(n,r),this.triggerPendingWritesCallbacks(n),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,this.localStore.rejectBatch(n)];case 2:return t=e.sent(),this.sharedClientState.updateMutationState(n,"rejected",r),[4,this.emitNewSnapsAndNotifyLocalStore(t)];case 3:return e.sent(),[3,6];case 4:return[4,qi(e.sent())];case 5:return e.sent(),[3,6];case 6:return[2]}})})},ru.prototype.registerPendingWritesCallback=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:return this.remoteStore.canUseNetwork()||y(Zs,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.localStore.getHighestUnacknowledgedBatchId()];case 1:return-1===(t=e.sent())?r.resolve():((n=this.pendingWritesCallbacks.get(t)||[]).push(r),this.pendingWritesCallbacks.set(t,n)),[2]}})})},ru.prototype.triggerPendingWritesCallbacks=function(e){(this.pendingWritesCallbacks.get(e)||[]).forEach(function(e){e.resolve()}),this.pendingWritesCallbacks.delete(e)},ru.prototype.rejectOutstandingPendingWritesCallbacks=function(t){this.pendingWritesCallbacks.forEach(function(e){e.forEach(function(e){e.reject(new S(T.CANCELLED,t))})}),this.pendingWritesCallbacks.clear()},ru.prototype.addMutationCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];n=(n=n||new Be(Z)).insert(e,t),this.mutationUserCallbacks[this.currentUser.toKey()]=n},ru.prototype.processUserCallback=function(e,t){var n=this.mutationUserCallbacks[this.currentUser.toKey()];if(n){var r=n.get(e);r&&(v(e===n.minKey(),"Mutation callbacks processed out-of-order?"),t?r.reject(t):r.resolve(),n=n.remove(e)),this.mutationUserCallbacks[this.currentUser.toKey()]=n}},ru.prototype.removeAndCleanupTarget=function(e,t){var n=this;void 0===t&&(t=null),this.sharedClientState.removeLocalQueryTarget(e),v(this.queriesByTarget[e]&&0!==this.queriesByTarget[e].length,"There are no queries mapped to target id "+e);for(var r=0,i=this.queriesByTarget[e];r<i.length;r++){var o=i[r];this.queryViewsByQuery.delete(o),t&&this.syncEngineListener.onWatchError(o,t)}if(delete this.queriesByTarget[e],this.isPrimary){var a=this.limboDocumentRefs.referencesForId(e);this.limboDocumentRefs.removeReferencesForId(e),a.forEach(function(e){n.limboDocumentRefs.containsKey(e)||n.removeLimboTarget(e)})}},ru.prototype.removeLimboTarget=function(e){var t=this.limboTargetsByKey.get(e);null!==t&&(this.remoteStore.unlisten(t),this.limboTargetsByKey=this.limboTargetsByKey.remove(e),delete this.limboResolutionsByTarget[t])},ru.prototype.updateTrackedLimbos=function(e,t){for(var n=0,r=t;n<r.length;n++){var i=r[n];i instanceof Qs?(this.limboDocumentRefs.addReference(i.key,e),this.trackLimboChange(i)):i instanceof Gs?(y(Zs,"Document no longer in limbo: "+i.key),this.limboDocumentRefs.removeReference(i.key,e),this.limboDocumentRefs.containsKey(i.key)||this.removeLimboTarget(i.key)):w("Unknown limbo change: "+JSON.stringify(i))}},ru.prototype.trackLimboChange=function(e){var t=e.key;if(!this.limboTargetsByKey.get(t)){y(Zs,"New document in limbo: "+t);var n=this.limboTargetIdGenerator.next(),r=_o.atPath(t.path);this.limboResolutionsByTarget[n]=new tu(t),this.remoteStore.listen(new Ci(r.toTarget(),n,yi.LimboResolution,le.INVALID)),this.limboTargetsByKey=this.limboTargetsByKey.insert(t,n)}},ru.prototype.currentLimboDocs=function(){return this.limboTargetsByKey},ru.prototype.emitNewSnapsAndNotifyLocalStore=function(r,u){return m.__awaiter(this,void 0,void 0,function(){var o,a,t,s=this;return m.__generator(this,function(e){switch(e.label){case 0:return o=[],a=[],t=[],this.queryViewsByQuery.forEach(function(e,i){t.push(Promise.resolve().then(function(){var n=i.view.computeDocChanges(r);return n.needsRefill?s.localStore.executeQuery(i.query,!1).then(function(e){var t=e.documents;return i.view.computeDocChanges(t,n)}):n}).then(function(e){var t=u&&u.targetChanges[i.targetId],n=i.view.applyChanges(e,!0===s.isPrimary,t);if(s.updateTrackedLimbos(i.targetId,n.limboChanges),n.snapshot){s.isPrimary&&s.sharedClientState.updateQueryState(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=Ks.fromSnapshot(i.targetId,n.snapshot);a.push(r)}}))}),[4,Promise.all(t)];case 1:return e.sent(),this.syncEngineListener.onWatchChange(o),[4,this.localStore.notifyLocalViewChanges(a)];case 2:return e.sent(),[2]}})})},ru.prototype.assertSubscribed=function(e){v(null!==this.syncEngineListener,"Trying to call "+e+" before calling subscribe().")},ru.prototype.handleCredentialChange=function(r){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:return t=!this.currentUser.isEqual(r),this.currentUser=r,t?(this.rejectOutstandingPendingWritesCallbacks("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.localStore.handleUserChange(r)]):[3,3];case 1:return n=e.sent(),this.sharedClientState.handleUserChange(r,n.removedBatchIds,n.addedBatchIds),[4,this.emitNewSnapsAndNotifyLocalStore(n.affectedDocuments)];case 2:e.sent(),e.label=3;case 3:return[4,this.remoteStore.handleCredentialChange()];case 4:return e.sent(),[2]}})})},ru.prototype.applyPrimaryState=function(c){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u=this;return m.__generator(this,function(e){switch(e.label){case 0:return!0!==c||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.remoteStore.applyPrimaryState(!0)]);case 1:return e.sent(),t=this.sharedClientState.getAllActiveQueryTargets(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(t.toArray())];case 2:for(n=e.sent(),r=0,i=n;r<i.length;r++)o=i[r],this.remoteStore.listen(o);return[3,7];case 3:return!1!==c||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,a=[],s=Promise.resolve(),A(this.queriesByTarget,function(e,t){u.sharedClientState.isLocalQueryTarget(e)?a.push(e):s=s.then(function(){return u.removeAndCleanupTarget(e),u.localStore.releaseTarget(e,!0)}),u.remoteStore.unlisten(e)}),[4,s]);case 4:return e.sent(),[4,this.synchronizeQueryViewsAndRaiseSnapshots(a)];case 5:return e.sent(),this.resetLimboDocuments(),[4,this.remoteStore.applyPrimaryState(!1)];case 6:e.sent(),e.label=7;case 7:return[2]}})})},ru.prototype.resetLimboDocuments=function(){var t=this;A(this.limboResolutionsByTarget,function(e){t.remoteStore.unlisten(e)}),this.limboDocumentRefs.removeAllReferences(),this.limboResolutionsByTarget=[],this.limboTargetsByKey=new Be(_e.comparator)},ru.prototype.synchronizeQueryViewsAndRaiseSnapshots=function(d){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,p;return m.__generator(this,function(e){switch(e.label){case 0:t=[],n=[],r=0,i=d,e.label=1;case 1:return r<i.length?(o=i[r],a=void 0,(s=this.queriesByTarget[o])&&0!==s.length?[4,this.localStore.releaseTarget(o,!0)]:[3,8]):[3,14];case 2:return e.sent(),[4,this.localStore.allocateTarget(s[0].toTarget())];case 3:a=e.sent(),u=0,c=s,e.label=4;case 4:return u<c.length?(l=c[u],v(!!(h=this.queryViewsByQuery.get(l)),"No query view found for "+l),[4,this.synchronizeViewAndComputeSnapshot(h)]):[3,7];case 5:(f=e.sent()).snapshot&&n.push(f.snapshot),e.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return v(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.localStore.getTarget(o)];case 9:return v(!!(p=e.sent()),"Target for id "+o+" not found"),[4,this.localStore.allocateTarget(p)];case 10:return a=e.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(p),o,!1)];case 11:e.sent(),e.label=12;case 12:t.push(a),e.label=13;case 13:return r++,[3,1];case 14:return this.syncEngineListener.onWatchChange(n),[2,t]}})})},ru.prototype.synthesizeTargetToQuery=function(e){return new _o(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,vo.First,e.startAt,e.endAt)},ru.prototype.getActiveClients=function(){return this.localStore.getActiveClients()},ru.prototype.applyTargetState=function(r,i,o){return m.__awaiter(this,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:if(this.isPrimary)return y(Zs,"Ignoring unexpected query state notification."),[2];if(!this.queriesByTarget[r])return[3,7];switch(i){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.localStore.getNewDocumentChanges()];case 2:return t=e.sent(),n=es.createSynthesizedRemoteEventForCurrentChange(r,"current"===i),[4,this.emitNewSnapsAndNotifyLocalStore(t,n)];case 3:return e.sent(),[3,7];case 4:return[4,this.localStore.releaseTarget(r,!0)];case 5:return e.sent(),this.removeAndCleanupTarget(r,o),[3,7];case 6:w("Unexpected target state: "+i),e.label=7;case 7:return[2]}})})},ru.prototype.applyActiveTargetsChange=function(h,f){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l=this;return m.__generator(this,function(e){switch(e.label){case 0:if(!this.isPrimary)return[2];t=0,n=h,e.label=1;case 1:return t<n.length?(c=n[t],v(!this.queriesByTarget[c],"Trying to add an already active target"),[4,this.localStore.getTarget(c)]):[3,6];case 2:return v(!!(r=e.sent()),"Query data for active target "+c+" not found"),[4,this.localStore.allocateTarget(r)];case 3:return i=e.sent(),[4,this.initializeViewAndComputeSnapshot(this.synthesizeTargetToQuery(r),i.targetId,!1)];case 4:e.sent(),this.remoteStore.listen(i),e.label=5;case 5:return t++,[3,1];case 6:o=function(t){return m.__generator(this,function(e){switch(e.label){case 0:return a.queriesByTarget[t]?[4,a.localStore.releaseTarget(t,!1).then(function(){l.remoteStore.unlisten(t),l.removeAndCleanupTarget(t)}).catch(qi)]:[2,"continue"];case 1:return e.sent(),[2]}})},a=this,s=0,u=f,e.label=7;case 7:return s<u.length?(c=u[s],[5,o(c)]):[3,10];case 8:e.sent(),e.label=9;case 9:return s++,[3,7];case 10:return[2]}})})},ru.prototype.enableNetwork=function(){return this.localStore.setNetworkEnabled(!0),this.remoteStore.enableNetwork()},ru.prototype.disableNetwork=function(){return this.localStore.setNetworkEnabled(!1),this.remoteStore.disableNetwork()},ru.prototype.getRemoteKeysForTarget=function(e){var t=this.limboResolutionsByTarget[e];if(t&&t.receivedDocument)return ut().add(t.key);var n=ut(),r=this.queriesByTarget[e];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var a=o[i],s=this.queryViewsByQuery.get(a);v(!!s,"No query view found for "+a),n=n.unionWith(s.view.syncedDocuments)}return n},ru);function ru(e,t,n,r){this.localStore=e,this.remoteStore=t,this.sharedClientState=n,this.currentUser=r,this.syncEngineListener=null,this.queryViewsByQuery=new Cr(function(e){return e.canonicalId()}),this.queriesByTarget={},this.limboTargetsByKey=new Be(_e.comparator),this.limboResolutionsByTarget={},this.limboDocumentRefs=new Ri,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=jt.forSyncEngine(),this.isPrimary=void 0,this.onlineState=Pa.Unknown}var iu=(ou.prototype.isAuthenticated=function(){return null!=this.uid},ou.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},ou.prototype.isEqual=function(e){return e.uid===this.uid},ou.UNAUTHENTICATED=new ou(null),ou.GOOGLE_CREDENTIALS=new ou("google-credentials-uid"),ou.FIRST_PARTY=new ou("first-party-uid"),ou);function ou(e){this.uid=e}var au="firestore_clients";function su(e,t){return v(-1===t.indexOf("_"),"Client key cannot contain '_', but was '"+t+"'"),au+"_"+e+"_"+t}var uu="firestore_mutations";function cu(e,t,n){var r=uu+"_"+e+"_"+n;return t.isAuthenticated()&&(r+="_"+t.uid),r}var lu="firestore_targets";function hu(e,t){return lu+"_"+e+"_"+t}var fu="firestore_online_state";var pu="firestore_sequence_number";var du="SharedClientState",mu=(yu.fromWebStorageEntry=function(e,t,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new S(r.error.code,r.error.message)),i?new yu(e,t,r.state,o):(c(du,"Failed to parse mutation state for ID '"+t+"': "+n),null)},yu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},yu);function yu(e,t,n,r){this.user=e,this.batchId=t,this.state=n,v(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}var vu=(gu.fromWebStorageEntry=function(e,t){var n=JSON.parse(t),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new S(n.error.code,n.error.message)),r?new gu(e,n.state,i):(c(du,"Failed to parse target state for ID '"+e+"': "+t),null)},gu.prototype.toWebStorageJSON=function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)},gu);function gu(e,t,n){this.targetId=e,this.state=t,v(void 0!==(this.error=n)==("rejected"===t),"QueryTargetMetadata must contain an error iff state is 'rejected'")}var bu=(wu.fromWebStorageEntry=function(e,t){for(var n=JSON.parse(t),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=lt(),o=0;r&&o<n.activeTargetIds.length;++o)r=yo(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new wu(e,i):(c(du,"Failed to parse client data for instance '"+e+"': "+t),null)},wu);function wu(e,t){this.clientId=e,this.activeTargetIds=t}var _u=(Eu.fromWebStorageEntry=function(e){var t=JSON.parse(e);return"object"==typeof t&&t.onlineState in Pa&&"string"==typeof t.clientId?new Eu(t.clientId,Pa[t.onlineState]):(c(du,"Failed to parse online state: "+e),null)},Eu);function Eu(e,t){this.clientId=e,this.onlineState=t}var Tu=(Su.prototype.addQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.add(e)},Su.prototype.removeQueryTarget=function(e){this.activeTargetIds=this.activeTargetIds.delete(e)},Su.prototype.toWebStorageJSON=function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)},Su);function Su(){this.activeTargetIds=lt()}var Cu=(Iu.isAvailable=function(e){return!(!e.window||null==e.window.localStorage)},Iu.prototype.start=function(){return m.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f=this;return m.__generator(this,function(e){switch(e.label){case 0:return v(!this.started,"WebStorageSharedClientState already started"),v(null!==this.syncEngine,"syncEngine property must be set before calling start()"),v(null!==this.onlineStateHandler,"onlineStateHandler property must be set before calling start()"),[4,this.syncEngine.getActiveClients()];case 1:for(t=e.sent(),n=0,r=t;n<r.length;n++)(i=r[n])!==this.localClientId&&(o=this.getItem(su(this.persistenceKey,i)))&&(a=bu.fromWebStorageEntry(i,o))&&(this.activeClients[a.clientId]=a);for(this.persistClientState(),(s=this.storage.getItem(this.onlineStateKey))&&(u=this.fromWebStorageOnlineState(s))&&this.handleOnlineStateEvent(u),c=0,l=this.earlyEvents;c<l.length;c++)h=l[c],this.handleWebStorageEvent(h);return this.earlyEvents=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.started=!0,[2]}})})},Iu.prototype.writeSequenceNumber=function(e){this.setItem(this.sequenceNumberKey,JSON.stringify(e))},Iu.prototype.getAllActiveQueryTargets=function(){var n=lt();return O(this.activeClients,function(e,t){n=n.unionWith(t.activeTargetIds)}),n},Iu.prototype.isActiveQueryTarget=function(e){for(var t in this.activeClients)if(this.activeClients.hasOwnProperty(t)&&this.activeClients[t].activeTargetIds.has(e))return!0;return!1},Iu.prototype.addPendingMutation=function(e){this.persistMutationState(e,"pending")},Iu.prototype.updateMutationState=function(e,t,n){this.persistMutationState(e,t,n),this.removeMutationState(e)},Iu.prototype.addLocalQueryTarget=function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(hu(this.persistenceKey,e));if(n){var r=vu.fromWebStorageEntry(e,n);r&&(t=r.state)}}return this.localClientState.addQueryTarget(e),this.persistClientState(),t},Iu.prototype.removeLocalQueryTarget=function(e){this.localClientState.removeQueryTarget(e),this.persistClientState()},Iu.prototype.isLocalQueryTarget=function(e){return this.localClientState.activeTargetIds.has(e)},Iu.prototype.clearQueryState=function(e){this.removeItem(hu(this.persistenceKey,e))},Iu.prototype.updateQueryState=function(e,t,n){this.persistQueryTargetState(e,t,n)},Iu.prototype.handleUserChange=function(e,t,n){var r=this;t.forEach(function(e){r.removeMutationState(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})},Iu.prototype.setOnlineState=function(e){this.persistOnlineState(e)},Iu.prototype.shutdown=function(){this.started&&(this.platform.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)},Iu.prototype.getItem=function(e){var t=this.storage.getItem(e);return y(du,"READ",e,t),t},Iu.prototype.setItem=function(e,t){y(du,"SET",e,t),this.storage.setItem(e,t)},Iu.prototype.removeItem=function(e){y(du,"REMOVE",e),this.storage.removeItem(e)},Iu.prototype.handleWebStorageEvent=function(s){var e=this;if(s.storageArea===this.storage){if(y(du,"EVENT",s.key,s.newValue),s.key===this.localClientStorageKey)return void c("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.queue.enqueueAndForget(function(){return m.__awaiter(e,void 0,void 0,function(){var t,n,r,i,o,a;return m.__generator(this,function(e){if(!this.started)return this.earlyEvents.push(s),[2];if(null===s.key)return[2];if(this.clientStateKeyRe.test(s.key)){if(null==s.newValue)return n=this.fromWebStorageClientStateKey(s.key),[2,this.handleClientStateEvent(n,null)];if(t=this.fromWebStorageClientState(s.key,s.newValue))return[2,this.handleClientStateEvent(t.clientId,t)]}else if(this.mutationBatchKeyRe.test(s.key)){if(null!==s.newValue&&(r=this.fromWebStorageMutationMetadata(s.key,s.newValue)))return[2,this.handleMutationBatchEvent(r)]}else if(this.queryTargetKeyRe.test(s.key)){if(null!==s.newValue&&(i=this.fromWebStorageQueryTargetMetadata(s.key,s.newValue)))return[2,this.handleQueryTargetEvent(i)]}else if(s.key===this.onlineStateKey){if(null!==s.newValue&&(o=this.fromWebStorageOnlineState(s.newValue)))return[2,this.handleOnlineStateEvent(o)]}else s.key===this.sequenceNumberKey&&(v(!!this.sequenceNumberHandler,"Missing sequenceNumberHandler"),(a=function(e){var t=le.INVALID;if(null!=e)try{var n=JSON.parse(e);v("number"==typeof n,"Found non-numeric sequence number"),t=n}catch(e){c(du,"Failed to read sequence number from WebStorage",e)}return t}(s.newValue))!==le.INVALID&&this.sequenceNumberHandler(a));return[2]})})})}},Object.defineProperty(Iu.prototype,"localClientState",{get:function(){return this.activeClients[this.localClientId]},enumerable:!0,configurable:!0}),Iu.prototype.persistClientState=function(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())},Iu.prototype.persistMutationState=function(e,t,n){var r=new mu(this.currentUser,e,t,n),i=cu(this.persistenceKey,this.currentUser,e);this.setItem(i,r.toWebStorageJSON())},Iu.prototype.removeMutationState=function(e){var t=cu(this.persistenceKey,this.currentUser,e);this.removeItem(t)},Iu.prototype.persistOnlineState=function(e){var t={clientId:this.localClientId,onlineState:Pa[e]};this.storage.setItem(this.onlineStateKey,JSON.stringify(t))},Iu.prototype.persistQueryTargetState=function(e,t,n){var r=hu(this.persistenceKey,e),i=new vu(e,t,n);this.setItem(r,i.toWebStorageJSON())},Iu.prototype.fromWebStorageClientStateKey=function(e){var t=this.clientStateKeyRe.exec(e);return t?t[1]:null},Iu.prototype.fromWebStorageClientState=function(e,t){var n=this.fromWebStorageClientStateKey(e);return v(null!==n,"Cannot parse client state key '"+e+"'"),bu.fromWebStorageEntry(n,t)},Iu.prototype.fromWebStorageMutationMetadata=function(e,t){var n=this.mutationBatchKeyRe.exec(e);v(null!==n,"Cannot parse mutation batch key '"+e+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return mu.fromWebStorageEntry(new iu(i),r,t)},Iu.prototype.fromWebStorageQueryTargetMetadata=function(e,t){var n=this.queryTargetKeyRe.exec(e);v(null!==n,"Cannot parse query target key '"+e+"'");var r=Number(n[1]);return vu.fromWebStorageEntry(r,t)},Iu.prototype.fromWebStorageOnlineState=function(e){return _u.fromWebStorageEntry(e)},Iu.prototype.handleMutationBatchEvent=function(t){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return t.user.uid!==this.currentUser.uid?(y(du,"Ignoring mutation for non-active user "+t.user.uid),[2]):[2,this.syncEngine.applyBatchState(t.batchId,t.state,t.error)]})})},Iu.prototype.handleQueryTargetEvent=function(e){return this.syncEngine.applyTargetState(e.targetId,e.state,e.error)},Iu.prototype.handleClientStateEvent=function(e,t){var n=this,r=this.getAllActiveQueryTargets();t?this.activeClients[e]=t:delete this.activeClients[e];var i=this.getAllActiveQueryTargets(),o=[],a=[];return i.forEach(function(t){return m.__awaiter(n,void 0,void 0,function(){return m.__generator(this,function(e){return r.has(t)||o.push(t),[2]})})}),r.forEach(function(t){return m.__awaiter(n,void 0,void 0,function(){return m.__generator(this,function(e){return i.has(t)||a.push(t),[2]})})}),this.syncEngine.applyActiveTargetsChange(o,a)},Iu.prototype.handleOnlineStateEvent=function(e){this.activeClients[e.clientId]&&this.onlineStateHandler(e.onlineState)},Iu);function Iu(e,t,n,r,i){if(this.queue=e,this.platform=t,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.activeClients={},this.storageListener=this.handleWebStorageEvent.bind(this),this.started=!1,this.earlyEvents=[],!Iu.isAvailable(this.platform))throw new S(T.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.localClientStorageKey=su(this.persistenceKey,this.localClientId),this.sequenceNumberKey=function(e){return pu+"_"+e}(this.persistenceKey),this.activeClients[this.localClientId]=new Tu,this.clientStateKeyRe=new RegExp("^"+au+"_"+o+"_([^_]*)$"),this.mutationBatchKeyRe=new RegExp("^"+uu+"_"+o+"_(\\d+)(?:_(.*))?$"),this.queryTargetKeyRe=new RegExp("^"+lu+"_"+o+"_(\\d+)$"),this.onlineStateKey=function(e){return fu+"_"+e}(this.persistenceKey),this.platform.window.addEventListener("storage",this.storageListener)}var ku=(Nu.prototype.addPendingMutation=function(e){},Nu.prototype.updateMutationState=function(e,t,n){},Nu.prototype.addLocalQueryTarget=function(e){return this.localState.addQueryTarget(e),this.queryState[e]||"not-current"},Nu.prototype.updateQueryState=function(e,t,n){this.queryState[e]=t},Nu.prototype.removeLocalQueryTarget=function(e){this.localState.removeQueryTarget(e)},Nu.prototype.isLocalQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Nu.prototype.clearQueryState=function(e){delete this.queryState[e]},Nu.prototype.getAllActiveQueryTargets=function(){return this.localState.activeTargetIds},Nu.prototype.isActiveQueryTarget=function(e){return this.localState.activeTargetIds.has(e)},Nu.prototype.start=function(){return this.localState=new Tu,Promise.resolve()},Nu.prototype.handleUserChange=function(e,t,n){},Nu.prototype.setOnlineState=function(e){},Nu.prototype.shutdown=function(){},Nu.prototype.writeSequenceNumber=function(e){},Nu);function Nu(){this.localState=new Tu,this.queryState={},this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null}var Au="FirestoreClient",Ou=(Du.prototype.lruParams=function(){return Hi.withCacheSize(this.cacheSizeBytes)},Du);function Du(e,t){this.cacheSizeBytes=e,this.synchronizeTabs=t}var Pu=function(){},xu=(Ru.prototype.start=function(e){var n=this;this.verifyNotTerminated();var r=new Ce,i=new Ce,o=!1;return this.credentials.setChangeListener(function(t){o?n.asyncQueue.enqueueAndForget(function(){return n.handleCredentialChange(t)}):(o=!0,n.initializePersistence(e,i,t).then(function(e){return n.initializeRest(t,e)}).then(r.resolve,r.reject))}),this.asyncQueue.enqueueAndForget(function(){return r.promise}),i.promise},Ru.prototype.enableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.enableNetwork()})},Ru.prototype.initializePersistence=function(e,t,n){var r=this;return e instanceof Ou?this.startIndexedDbPersistence(n,e).then(function(e){return t.resolve(),e}).catch(function(e){if(t.reject(e),!r.canFallback(e))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.startMemoryPersistence()}):(t.resolve(),this.startMemoryPersistence())},Ru.prototype.canFallback=function(e){return e instanceof S?e.code===T.FAILED_PRECONDITION||e.code===T.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code},Ru.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new S(T.FAILED_PRECONDITION,"The client has already been terminated.")},Ru.prototype.startIndexedDbPersistence=function(r,i){var e=this,o=ro.buildStoragePrefix(this.databaseInfo),a=new Us(this.databaseInfo.databaseId,{useProto3Json:!0});return Promise.resolve().then(function(){return m.__awaiter(e,void 0,void 0,function(){var t,n;return m.__generator(this,function(e){switch(e.label){case 0:if(i.synchronizeTabs&&!Cu.isAvailable(this.platform))throw new S(T.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return t=i.lruParams(),this.sharedClientState=i.synchronizeTabs?new Cu(this.asyncQueue,this.platform,o,this.clientId,r):new ku,[4,ro.createIndexedDbPersistence({allowTabSynchronization:i.synchronizeTabs,persistenceKey:o,clientId:this.clientId,platform:this.platform,queue:this.asyncQueue,serializer:a,lruParams:t,sequenceNumberSyncer:this.sharedClientState})];case 1:return n=e.sent(),[2,(this.persistence=n).referenceDelegate.garbageCollector]}})})})},Ru.prototype.startMemoryPersistence=function(){return this.persistence=ua.createEagerPersistence(this.clientId),this.sharedClientState=new ku,Promise.resolve(null)},Ru.prototype.initializeRest=function(c,l){var e=this;return y(Au,"Initializing. user=",c.uid),this.platform.loadConnection(this.databaseInfo).then(function(u){return m.__awaiter(e,void 0,void 0,function(){var t,n,r,i,o,a,s=this;return m.__generator(this,function(e){switch(e.label){case 0:return t=new Jo,this.localStore=new ji(this.persistence,t,c),[4,this.localStore.start()];case 1:return e.sent(),l&&(this.lruScheduler=new Gi(l,this.asyncQueue,this.localStore)),n=this.platform.newConnectivityMonitor(),r=this.platform.newSerializer(this.databaseInfo.databaseId),i=new Oa(this.asyncQueue,u,this.credentials,r),o=function(e){return s.syncEngine.applyOnlineStateChange(e,Ra.RemoteStore)},a=function(e){return s.syncEngine.applyOnlineStateChange(e,Ra.SharedClientState)},this.remoteStore=new ys(this.localStore,i,this.asyncQueue,o,n),this.syncEngine=new nu(this.localStore,this.remoteStore,this.sharedClientState,c),this.sharedClientState.onlineStateHandler=a,this.remoteStore.syncEngine=this.syncEngine,this.sharedClientState.syncEngine=this.syncEngine,this.eventMgr=new qs(this.syncEngine),[4,this.sharedClientState.start()];case 2:return e.sent(),[4,this.remoteStore.start()];case 3:return e.sent(),[4,this.persistence.setPrimaryStateListener(function(t){return m.__awaiter(s,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.syncEngine.applyPrimaryState(t)];case 1:return e.sent(),this.lruScheduler&&(t&&!this.lruScheduler.started?this.lruScheduler.start():t||this.lruScheduler.stop()),[2]}})})})];case 4:return e.sent(),[4,this.persistence.setDatabaseDeletedListener(function(){return m.__awaiter(s,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.terminate()];case 1:return e.sent(),[2]}})})})];case 5:return e.sent(),[2]}})})})},Ru.prototype.handleCredentialChange=function(e){return this.asyncQueue.verifyOperationInProgress(),y(Au,"Credential Changed. Current user: "+e.uid),this.syncEngine.handleCredentialChange(e)},Ru.prototype.disableNetwork=function(){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return e.syncEngine.disableNetwork()})},Ru.prototype.terminate=function(){var e=this;return this.asyncQueue.enqueueAndInitiateShutdown(function(){return m.__awaiter(e,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.lruScheduler&&this.lruScheduler.stop(),[4,this.remoteStore.shutdown()];case 1:return e.sent(),[4,this.sharedClientState.shutdown()];case 2:return e.sent(),[4,this.persistence.shutdown()];case 3:return e.sent(),this.credentials.removeChangeListener(),[2]}})})})},Ru.prototype.waitForPendingWrites=function(){var e=this;this.verifyNotTerminated();var t=new Ce;return this.asyncQueue.enqueueAndForget(function(){return e.syncEngine.registerPendingWritesCallback(t)}),t.promise},Ru.prototype.listen=function(e,t,n){var r=this;this.verifyNotTerminated();var i=new Ws(e,t,n);return this.asyncQueue.enqueueAndForget(function(){return r.eventMgr.listen(i)}),i},Ru.prototype.unlisten=function(e){var t=this;this.clientTerminated||this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.unlisten(e)})},Ru.prototype.getDocumentFromLocalCache=function(e){var t=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return t.localStore.readDocument(e)}).then(function(e){if(e instanceof vr)return e;if(e instanceof wr)return null;throw new S(T.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},Ru.prototype.getDocumentsFromLocalCache=function(i){var e=this;return this.verifyNotTerminated(),this.asyncQueue.enqueue(function(){return m.__awaiter(e,void 0,void 0,function(){var t,n,r;return m.__generator(this,function(e){switch(e.label){case 0:return[4,this.localStore.executeQuery(i,!0)];case 1:return t=e.sent(),n=new Ys(i,t.remoteKeys),r=n.computeDocChanges(t.documents),[2,n.applyChanges(r,!1).snapshot]}})})})},Ru.prototype.write=function(e){var t=this;this.verifyNotTerminated();var n=new Ce;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.write(e,n)}),n.promise},Ru.prototype.databaseId=function(){return this.databaseInfo.databaseId},Ru.prototype.addSnapshotsInSyncListener=function(e){var t=this;this.verifyNotTerminated(),this.asyncQueue.enqueueAndForget(function(){return t.eventMgr.addSnapshotsInSyncListener(e),Promise.resolve()})},Ru.prototype.removeSnapshotsInSyncListener=function(e){this.clientTerminated||this.eventMgr.removeSnapshotsInSyncListener(e)},Object.defineProperty(Ru.prototype,"clientTerminated",{get:function(){return this.asyncQueue.isShuttingDown},enumerable:!0,configurable:!0}),Ru.prototype.transaction=function(e){var t=this;this.verifyNotTerminated();var n=new Ce;return this.asyncQueue.enqueueAndForget(function(){return t.syncEngine.runTransaction(t.asyncQueue,e,n),Promise.resolve()}),n.promise},Ru);function Ru(e,t,n,r){this.platform=e,this.databaseInfo=t,this.credentials=n,this.asyncQueue=r,this.clientId=$.newId()}var Mu=(Lu.prototype.next=function(e){this.scheduleEvent(this.observer.next,e)},Lu.prototype.error=function(e){this.scheduleEvent(this.observer.error,e)},Lu.prototype.mute=function(){this.muted=!0},Lu.prototype.scheduleEvent=function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)},Lu);function Lu(e){this.observer=e,this.muted=!1}var Fu=(Uu.documentId=function(){return Uu._DOCUMENT_ID},Uu.prototype.isEqual=function(e){if(!(e instanceof Uu))throw Q("isEqual","FieldPath",1,e);return this._internalPath.isEqual(e._internalPath)},Uu._DOCUMENT_ID=new Uu(be.keyField().canonicalString()),Uu);function Uu(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e,t,n,r){if(!(t instanceof Array)||t.length<r)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() requires its "+n+" argument to be an array with at least "+X(r,"element")+".")}("FieldPath",e,"fieldNames",1);for(var n=0;n<e.length;++n)if(L("FieldPath","string",n,e[n]),0===e[n].length)throw new S(T.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new be(e)}var ju=new RegExp("[~\\*/\\[\\]]");var Vu=function(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+e},qu=(Bu.prototype.getToken=function(){return Promise.resolve(null)},Bu.prototype.invalidateToken=function(){},Bu.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),(this.changeListener=e)(iu.UNAUTHENTICATED)},Bu.prototype.removeChangeListener=function(){v(null!==this.changeListener,"removeChangeListener() when no listener registered"),this.changeListener=null},Bu);function Bu(){this.changeListener=null}var Wu=(zu.prototype.getToken=function(){var t=this;v(null!=this.tokenListener,"getToken cannot be called after listener removed.");var n=this.tokenCounter,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(function(e){if(t.tokenCounter!==n)throw new S(T.ABORTED,"getToken aborted due to token change.");return e?(v("string"==typeof e.accessToken,"Invalid tokenData returned from getToken():"+e),new Vu(e.accessToken,t.currentUser)):null}):Promise.resolve(null)},zu.prototype.invalidateToken=function(){this.forceRefresh=!0},zu.prototype.setChangeListener=function(e){v(!this.changeListener,"Can only call setChangeListener() once."),this.changeListener=e,this.receivedInitialUser&&e(this.currentUser)},zu.prototype.removeChangeListener=function(){v(null!=this.tokenListener,"removeChangeListener() called twice"),v(null!==this.changeListener,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=null,this.changeListener=null},zu.prototype.getUser=function(){var e=this.auth&&this.auth.getUid();return v(null===e||"string"==typeof e,"Received invalid UID: "+e),new iu(e)},zu);function zu(e){var t=this;this.tokenListener=null,this.currentUser=iu.UNAUTHENTICATED,this.receivedInitialUser=!1,this.tokenCounter=0,this.changeListener=null,this.forceRefresh=!1,this.tokenListener=function(){t.tokenCounter++,t.currentUser=t.getUser(),t.receivedInitialUser=!0,t.changeListener&&t.changeListener(t.currentUser)},this.tokenCounter=0,this.auth=e.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.tokenListener):(this.tokenListener(null),e.get().then(function(e){t.auth=e,t.tokenListener&&t.auth.addAuthTokenListener(t.tokenListener)},function(){}))}var Ku=(Object.defineProperty(Hu.prototype,"authHeaders",{get:function(){var e={"X-Goog-AuthUser":this.sessionIndex},t=this.gapi.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),e},enumerable:!0,configurable:!0}),Hu);function Hu(e,t){this.gapi=e,this.sessionIndex=t,this.type="FirstParty",this.user=iu.FIRST_PARTY}var Qu=(Gu.prototype.getToken=function(){return Promise.resolve(new Ku(this.gapi,this.sessionIndex))},Gu.prototype.setChangeListener=function(e){e(iu.FIRST_PARTY)},Gu.prototype.removeChangeListener=function(){},Gu.prototype.invalidateToken=function(){},Gu);function Gu(e,t){this.gapi=e,this.sessionIndex=t}function Yu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=t;r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e,["next","error","complete"])}var Xu=($u.delete=function(){return P("FieldValue.delete",arguments),Zu.instance},$u.serverTimestamp=function(){return P("FieldValue.serverTimestamp",arguments),nc.instance},$u.arrayUnion=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayUnion",arguments,1),new oc(e)},$u.arrayRemove=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return R("FieldValue.arrayRemove",arguments,1),new uc(e)},$u.increment=function(e){return L("FieldValue.increment","number",1,e),x("FieldValue.increment",arguments,1),new hc(e)},$u.prototype.isEqual=function(e){return this===e},$u);function $u(e){this._methodName=e}var Ju,Zu=(Ju=Xu,m.__extends(ec,Ju),ec.instance=new ec,ec);function ec(){return Ju.call(this,"FieldValue.delete")||this}var tc,nc=(tc=Xu,m.__extends(rc,tc),rc.instance=new rc,rc);function rc(){return tc.call(this,"FieldValue.serverTimestamp")||this}var ic,oc=(ic=Xu,m.__extends(ac,ic),ac);function ac(e){var t=ic.call(this,"FieldValue.arrayUnion")||this;return t._elements=e,t}var sc,uc=(sc=Xu,m.__extends(cc,sc),cc);function cc(e){var t=sc.call(this,"FieldValue.arrayRemove")||this;return t._elements=e,t}var lc,hc=(lc=Xu,m.__extends(fc,lc),fc);function fc(e){var t=lc.call(this,"FieldValue.increment")||this;return t._operand=e,t}var pc=I(Xu,"Use FieldValue.<field>() instead."),dc=/^__.*__$/,mc=(yc.prototype.toMutations=function(e,t){var n=[];return null!==this.fieldMask?n.push(new cn(e,this.data,this.fieldMask,t)):n.push(new an(e,this.data,t)),0<this.fieldTransforms.length&&n.push(new fn(e,this.fieldTransforms)),n},yc);function yc(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}var vc,gc,bc=(wc.prototype.toMutations=function(e,t){var n=[new cn(e,this.data,this.fieldMask,t)];return 0<this.fieldTransforms.length&&n.push(new fn(e,this.fieldTransforms)),n},wc);function wc(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}function _c(e){switch(e){case vc.Set:case vc.MergeSet:case vc.Update:return!0;case vc.Argument:case vc.ArrayArgument:return!1;default:throw w("Unexpected case for UserDataSource: "+e)}}(gc=vc=vc||{})[gc.Set=0]="Set",gc[gc.Update=1]="Update",gc[gc.MergeSet=2]="MergeSet",gc[gc.Argument=3]="Argument",gc[gc.ArrayArgument=4]="ArrayArgument";var Ec=(Tc.prototype.childContextForField=function(e){var t=null==this.path?null:this.path.child(e),n=new Tc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePathSegment(e),n},Tc.prototype.childContextForFieldPath=function(e){var t=null==this.path?null:this.path.child(e),n=new Tc(this.dataSource,this.methodName,t,!1,this.fieldTransforms,this.fieldMask);return n.validatePath(),n},Tc.prototype.childContextForArray=function(e){return new Tc(this.dataSource,this.methodName,null,!0,this.fieldTransforms,this.fieldMask)},Tc.prototype.createError=function(e){var t=null===this.path||this.path.isEmpty()?"":" (found in field "+this.path.toString()+")";return new S(T.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+e+t)},Tc.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},Tc.prototype.validatePath=function(){if(null!==this.path)for(var e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))},Tc.prototype.validatePathSegment=function(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(_c(this.dataSource)&&dc.test(e))throw this.createError('Document fields cannot begin and end with "__"')},Tc);function Tc(e,t,n,r,i,o){this.dataSource=e,this.methodName=t,this.path=n,this.arrayElement=r,void 0===i&&this.validatePath(),this.arrayElement=void 0!==r&&r,this.fieldTransforms=i||[],this.fieldMask=o||[]}var Sc=function(e,t){this.databaseId=e,this.key=t},Cc=(Ic.prototype.parseSetData=function(e,t){var n=new Ec(vc.Set,e,be.EMPTY_PATH);Nc("Data must be an object, but it was:",n,t);var r=this.parseData(t,n);return new mc(r,null,n.fieldTransforms)},Ic.prototype.parseMergeData=function(e,t,n){var r=new Ec(vc.MergeSet,e,be.EMPTY_PATH);Nc("Data must be an object, but it was:",r,t);var i,o,a=this.parseData(t,r);if(n){for(var s=new Xe(be.comparator),u=0,c=n;u<c.length;u++){var l=c[u],h=void 0;if(l instanceof Fu)h=l._internalPath;else{if("string"!=typeof l)throw w("Expected stringOrFieldPath to be a string or a FieldPath");h=Oc(e,l)}if(!r.contains(h))throw new S(T.INVALID_ARGUMENT,"Field '"+h+"' is specified in your field mask but missing from your input data.");s=s.add(h)}i=Qt.fromSet(s),o=r.fieldTransforms.filter(function(e){return i.covers(e.field)})}else i=Qt.fromArray(r.fieldMask),o=r.fieldTransforms;return new mc(a,i,o)},Ic.prototype.parseUpdateData=function(o,e){var a=this,s=new Ec(vc.Update,o,be.EMPTY_PATH);Nc("Data must be an object, but it was:",s,e);var u=new Xe(be.comparator),c=cr.EMPTY;O(e,function(e,t){var n=Oc(o,e),r=s.childContextForFieldPath(n);if((t=a.runPreConverter(t,r))instanceof Zu)u=u.add(n);else{var i=a.parseData(t,r);null!=i&&(u=u.add(n),c=c.set(n,i))}});var t=Qt.fromSet(u);return new bc(c,t,s.fieldTransforms)},Ic.prototype.parseUpdateVarargs=function(e,t,n,r){var i=new Ec(vc.Update,e,be.EMPTY_PATH),o=[Ac(e,t)],a=[n];if(r.length%2!=0)throw new S(T.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var s=0;s<r.length;s+=2)o.push(Ac(e,r[s])),a.push(r[s+1]);var u=new Xe(be.comparator),c=cr.EMPTY;for(s=0;s<o.length;++s){var l=o[s],h=i.childContextForFieldPath(l),f=this.runPreConverter(a[s],h);if(f instanceof Zu)u=u.add(l);else{var p=this.parseData(f,h);null!=p&&(u=u.add(l),c=c.set(l,p))}}var d=Qt.fromSet(u);return new bc(c,d,i.fieldTransforms)},Ic.prototype.parseQueryValue=function(e,t,n){void 0===n&&(n=!1);var r=new Ec(n?vc.ArrayArgument:vc.Argument,e,be.EMPTY_PATH),i=this.parseData(t,r);return v(null!=i,"Parsed data should not be null."),v(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},Ic.prototype.runPreConverter=function(e,t){try{return this.preConverter(e)}catch(e){var n=Dc(e);throw t.createError(n)}},Ic.prototype.parseData=function(e,t){if(kc(e=this.runPreConverter(e,t)))return Nc("Unsupported field value:",t,e),this.parseObject(e,t);if(e instanceof Xu)return this.parseSentinelFieldValue(e,t),null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.arrayElement&&t.dataSource!==vc.ArrayArgument)throw t.createError("Nested arrays are not supported");return this.parseArray(e,t)}return this.parseScalarValue(e,t)},Ic.prototype.parseObject=function(e,r){var i=this,o=new Be(Z);return D(e)?r.path&&0<r.path.length&&r.fieldMask.push(r.path):O(e,function(e,t){var n=i.parseData(t,r.childContextForField(e));null!=n&&(o=o.insert(e,n))}),new cr(o)},Ic.prototype.parseArray=function(e,t){for(var n=[],r=0,i=0,o=e;i<o.length;i++){var a=o[i],s=this.parseData(a,t.childContextForArray(r));null==s&&(s=An.INSTANCE),n.push(s),r++}return new fr(n)},Ic.prototype.parseSentinelFieldValue=function(e,t){if(!_c(t.dataSource))throw t.createError(e._methodName+"() can only be used with update() and set()");if(null===t.path)throw t.createError(e._methodName+"() is not currently supported inside arrays");if(e instanceof Zu){if(t.dataSource!==vc.MergeSet)throw t.dataSource===vc.Update?(v(0<t.path.length,"FieldValue.delete() at the top level should have already been handled."),t.createError("FieldValue.delete() can only appear at the top level of your update data")):t.createError("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");t.fieldMask.push(t.path)}else if(e instanceof nc)t.fieldTransforms.push(new Yt(t.path,ws.instance));else if(e instanceof oc){var n=this.parseArrayTransformElements(e._methodName,e._elements),r=new Es(n);t.fieldTransforms.push(new Yt(t.path,r))}else if(e instanceof uc){n=this.parseArrayTransformElements(e._methodName,e._elements);var i=new Ss(n);t.fieldTransforms.push(new Yt(t.path,i))}else if(e instanceof hc){var o=this.parseQueryValue("FieldValue.increment",e._operand),a=new Is(o);t.fieldTransforms.push(new Yt(t.path,a))}else w("Unknown FieldValue type: "+e)},Ic.prototype.parseScalarValue=function(e,t){if(null===e)return An.INSTANCE;if("number"==typeof e)return yo(e)?new jn(e):new Bn(e);if("boolean"==typeof e)return Pn.of(e);if("string"==typeof e)return new Kn(e);if(e instanceof Date)return new Gn(Ue.fromDate(e));if(e instanceof Ue)return new Gn(new Ue(e.seconds,1e3*Math.floor(e.nanoseconds/1e3)));if(e instanceof gs)return new ar(e);if(e instanceof ie)return new er(e);if(e instanceof Sc)return new rr(e.databaseId,e.key);throw t.createError("Unsupported field value: "+z(e))},Ic.prototype.parseArrayTransformElements=function(r,e){var i=this;return e.map(function(e,t){var n=new Ec(vc.Argument,r,be.EMPTY_PATH);return i.parseData(e,n.childContextForArray(t))})},Ic);function Ic(e){this.preConverter=e}function kc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ue||e instanceof gs||e instanceof ie||e instanceof Sc||e instanceof Xu)}function Nc(e,t,n){if(!kc(n)||!W(n)){var r=z(n);throw"an object"===r?t.createError(e+" a custom object"):t.createError(e+" "+r)}}function Ac(e,t){if(t instanceof Fu)return t._internalPath;if("string"==typeof t)return Oc(e,t);throw new S(T.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Oc(t,e){try{return function(t){if(0<=t.search(ju))throw new S(T.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Fu.bind.apply(Fu,m.__spreadArrays([void 0],t.split("."))))}catch(e){throw new S(T.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e)._internalPath}catch(e){var n=Dc(e);throw new S(T.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. "+n)}}function Dc(e){return e instanceof Error?e.message:e.toString()}var Pc=Hi.COLLECTION_DISABLED,xc=(Rc.prototype.isEqual=function(e){return this.host===e.host&&this.ssl===e.ssl&&this.timestampsInSnapshots===e.timestampsInSnapshots&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.forceLongPolling===e.forceLongPolling},Rc);function Rc(e){if(void 0===e.host){if(void 0!==e.ssl)throw new S(T.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else U("settings","non-empty string","host",e.host),this.host=e.host,j("settings","boolean","ssl",e.ssl),this.ssl=N(e.ssl,!0);if(H("settings",e,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),j("settings","object","credentials",e.credentials),this.credentials=e.credentials,j("settings","boolean","timestampsInSnapshots",e.timestampsInSnapshots),!0===e.timestampsInSnapshots?c("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===e.timestampsInSnapshots&&c("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=N(e.timestampsInSnapshots,!0),j("settings","number","cacheSizeBytes",e.cacheSizeBytes),void 0===e.cacheSizeBytes)this.cacheSizeBytes=Hi.DEFAULT_CACHE_SIZE_BYTES;else{if(e.cacheSizeBytes!==Pc&&e.cacheSizeBytes<Hi.MINIMUM_CACHE_SIZE_BYTES)throw new S(T.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Hi.MINIMUM_CACHE_SIZE_BYTES);this.cacheSizeBytes=e.cacheSizeBytes}j("settings","boolean","experimentalForceLongPolling",e.experimentalForceLongPolling),this.forceLongPolling=void 0!==e.experimentalForceLongPolling&&e.experimentalForceLongPolling}var Mc=(Lc.prototype.settings=function(e){if(x("Firestore.settings",arguments,1),L("Firestore.settings","object",1,e),k(e,"persistence"))throw new S(T.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var t=new xc(e);if(this._firestoreClient&&!this._settings.isEqual(t))throw new S(T.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this._settings=t).credentials&&(this._credentials=function(e){if(!e)return new qu;switch(e.type){case"gapi":var t=e.client;return v(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new Qu(t,e.sessionIndex||"0");case"provider":return e.client;default:throw new S(T.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Lc.prototype.enableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.enableNetwork()},Lc.prototype.disableNetwork=function(){return this.ensureClientConfigured(),this._firestoreClient.disableNetwork()},Lc.prototype.enablePersistence=function(e){if(this._firestoreClient)throw new S(T.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var t=!1;return e&&(void 0!==e.experimentalTabSynchronization&&c("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),t=N(void 0!==e.synchronizeTabs?e.synchronizeTabs:e.experimentalTabSynchronization,!1)),this.configureClient(new Ou(this._settings.cacheSizeBytes,t))},Lc.prototype.clearPersistence=function(){var e=this,n=ro.buildStoragePrefix(this.makeDatabaseInfo()),r=new Ce;return this._queue.enqueueAndForgetEvenAfterShutdown(function(){return m.__awaiter(e,void 0,void 0,function(){var t;return m.__generator(this,function(e){switch(e.label){case 0:if(e.trys.push([0,2,,3]),void 0!==this._firestoreClient&&!this._firestoreClient.clientTerminated)throw new S(T.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,ro.clearPersistence(n)];case 1:return e.sent(),r.resolve(),[3,3];case 2:return t=e.sent(),r.reject(t),[3,3];case 3:return[2]}})})}),r.promise},Lc.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(Lc.prototype,"_isTerminated",{get:function(){return this.ensureClientConfigured(),this._firestoreClient.clientTerminated},enumerable:!0,configurable:!0}),Lc.prototype.waitForPendingWrites=function(){return this.ensureClientConfigured(),this._firestoreClient.waitForPendingWrites()},Lc.prototype.onSnapshotsInSync=function(e){if(this.ensureClientConfigured(),Yu(e))return this.onSnapshotsInSyncInternal(e);L("Firestore.onSnapshotsInSync","function",1,e);var t={next:e};return this.onSnapshotsInSyncInternal(t)},Lc.prototype.onSnapshotsInSyncInternal=function(e){var t=this,n=new Mu({next:function(){e.next&&e.next()},error:function(e){throw w("Uncaught Error in onSnapshotsInSync")}});return this._firestoreClient.addSnapshotsInSyncListener(n),function(){n.mute(),t._firestoreClient.removeSnapshotsInSyncListener(n)}},Lc.prototype.ensureClientConfigured=function(){return this._firestoreClient||this.configureClient(new Pu),this._firestoreClient},Lc.prototype.makeDatabaseInfo=function(){return new se(this._databaseId,this._persistenceKey,this._settings.host,this._settings.ssl,this._settings.forceLongPolling)},Lc.prototype.configureClient=function(e){v(!!this._settings.host,"FirestoreSettings.host is not set"),v(!this._firestoreClient,"configureClient() called multiple times");var t=this.makeDatabaseInfo();return this._firestoreClient=new xu(g.getPlatform(),t,this._credentials,this._queue),this._firestoreClient.start(e)},Lc.prototype.createDataConverter=function(r){return new Cc(function(e){if(e instanceof qc){var t=r,n=e.firestore._databaseId;if(!n.isEqual(t))throw new S(T.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+t.projectId+"/"+t.database);return new Sc(r,e._key)}return e})},Lc.databaseIdFromApp=function(e){var t=e.options;if(!k(t,"projectId"))throw new S(T.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=t.projectId;if(!n||"string"!=typeof n)throw new S(T.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new ue(n)},Object.defineProperty(Lc.prototype,"app",{get:function(){if(!this._firebaseApp)throw new S(T.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._firebaseApp},enumerable:!0,configurable:!0}),Lc.prototype.collection=function(e){return x("Firestore.collection",arguments,1),L("Firestore.collection","non-empty string",1,e),this.ensureClientConfigured(),new tl(me.fromString(e),this)},Lc.prototype.doc=function(e){return x("Firestore.doc",arguments,1),L("Firestore.doc","non-empty string",1,e),this.ensureClientConfigured(),qc.forPath(me.fromString(e),this)},Lc.prototype.collectionGroup=function(e){if(x("Firestore.collectionGroup",arguments,1),L("Firestore.collectionGroup","non-empty string",1,e),0<=e.indexOf("/"))throw new S(T.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.ensureClientConfigured(),new Xc(new _o(me.EMPTY_PATH,e),this)},Lc.prototype.runTransaction=function(t){var n=this;return x("Firestore.runTransaction",arguments,1),L("Firestore.runTransaction","function",1,t),this.ensureClientConfigured().transaction(function(e){return t(new Fc(n,e))})},Lc.prototype.batch=function(){return this.ensureClientConfigured(),new jc(this)},Object.defineProperty(Lc,"logLevel",{get:function(){switch(d()){case f.DEBUG:return"debug";case f.ERROR:return"error";case f.SILENT:return"silent";default:return w("Unknown log level: "+d())}},enumerable:!0,configurable:!0}),Lc.setLogLevel=function(e){switch(x("Firestore.setLogLevel",arguments,1),L("Firestore.setLogLevel","non-empty string",1,e),e){case"debug":u(f.DEBUG);break;case"error":u(f.ERROR);break;case"silent":u(f.SILENT);break;default:throw new S(T.INVALID_ARGUMENT,"Invalid log level: "+e)}},Lc.prototype._areTimestampsInSnapshotsEnabled=function(){return this._settings.timestampsInSnapshots},Lc);function Lc(e,t){var n=this;if(this._firebaseApp=null,this._queue=new Ne,this.INTERNAL={delete:function(){return m.__awaiter(n,void 0,void 0,function(){return m.__generator(this,function(e){switch(e.label){case 0:return this.ensureClientConfigured(),[4,this._firestoreClient.terminate()];case 1:return e.sent(),[2]}})})}},"object"==typeof e.options){var r=e;this._firebaseApp=r,this._databaseId=Lc.databaseIdFromApp(r),this._persistenceKey=r.name,this._credentials=new Wu(t)}else{var i=e;if(!i.projectId)throw new S(T.INVALID_ARGUMENT,"Must provide projectId");this._databaseId=new ue(i.projectId,i.database),this._persistenceKey="[DEFAULT]",this._credentials=new qu}this._settings=new xc({}),this._dataConverter=this.createDataConverter(this._databaseId)}var Fc=(Uc.prototype.get=function(e){var n=this;x("Transaction.get",arguments,1);var r=al("Transaction.get",e,this._firestore);return this._transaction.lookup([r._key]).then(function(e){if(!e||1!==e.length)return w("Mismatch in docs returned from document lookup.");var t=e[0];if(t instanceof wr)return new Kc(n._firestore,r._key,null,!1,!1,r._converter);if(t instanceof vr)return new Kc(n._firestore,r._key,t,!1,!1,r._converter);throw w("BatchGetDocumentsRequest returned unexpected document type: "+t.constructor.name)})},Uc.prototype.set=function(e,t,n){M("Transaction.set",arguments,2,3);var r=al("Transaction.set",e,this._firestore);n=rl("Transaction.set",n);var i=sl(r._converter,t,"Transaction.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._transaction.set(r._key,s),this},Uc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return i="string"==typeof t||t instanceof Fu?(R("Transaction.update",arguments,3),r=al("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("Transaction.update",t,n,o)):(x("Transaction.update",arguments,2),r=al("Transaction.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("Transaction.update",t)),this._transaction.update(r._key,i),this},Uc.prototype.delete=function(e){x("Transaction.delete",arguments,1);var t=al("Transaction.delete",e,this._firestore);return this._transaction.delete(t._key),this},Uc);function Uc(e,t){this._firestore=e,this._transaction=t}var jc=(Vc.prototype.set=function(e,t,n){M("WriteBatch.set",arguments,2,3),this.verifyNotCommitted();var r=al("WriteBatch.set",e,this._firestore);n=rl("WriteBatch.set",n);var i=sl(r._converter,t,"WriteBatch.set"),o=i[0],a=i[1],s=n.merge||n.mergeFields?this._firestore._dataConverter.parseMergeData(a,o,n.mergeFields):this._firestore._dataConverter.parseSetData(a,o);return this._mutations=this._mutations.concat(s.toMutations(r._key,en.NONE)),this},Vc.prototype.update=function(e,t,n){for(var r,i,o=[],a=3;a<arguments.length;a++)o[a-3]=arguments[a];return this.verifyNotCommitted(),i="string"==typeof t||t instanceof Fu?(R("WriteBatch.update",arguments,3),r=al("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateVarargs("WriteBatch.update",t,n,o)):(x("WriteBatch.update",arguments,2),r=al("WriteBatch.update",e,this._firestore),this._firestore._dataConverter.parseUpdateData("WriteBatch.update",t)),this._mutations=this._mutations.concat(i.toMutations(r._key,en.exists(!0))),this},Vc.prototype.delete=function(e){x("WriteBatch.delete",arguments,1),this.verifyNotCommitted();var t=al("WriteBatch.delete",e,this._firestore);return this._mutations=this._mutations.concat(new mn(t._key,en.NONE)),this},Vc.prototype.commit=function(){return m.__awaiter(this,void 0,void 0,function(){return m.__generator(this,function(e){return this.verifyNotCommitted(),this._committed=!0,0<this._mutations.length?[2,this._firestore.ensureClientConfigured().write(this._mutations)]:[2]})})},Vc.prototype.verifyNotCommitted=function(){if(this._committed)throw new S(T.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},Vc);function Vc(e){this._firestore=e,this._mutations=[],this._committed=!1}var qc=(Bc.forPath=function(e,t,n){if(e.length%2!=0)throw new S(T.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new Bc(new _e(e),t,n)},Object.defineProperty(Bc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Bc.prototype,"parent",{get:function(){return new tl(this._key.path.popLast(),this.firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(Bc.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!0,configurable:!0}),Bc.prototype.collection=function(e){if(x("DocumentReference.collection",arguments,1),L("DocumentReference.collection","non-empty string",1,e),!e)throw new S(T.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var t=me.fromString(e);return new tl(this._key.path.child(t),this.firestore)},Bc.prototype.isEqual=function(e){if(!(e instanceof Bc))throw Q("isEqual","DocumentReference",1,e);return this.firestore===e.firestore&&this._key.isEqual(e._key)&&this._converter===e._converter},Bc.prototype.set=function(e,t){M("DocumentReference.set",arguments,1,2),t=rl("DocumentReference.set",t);var n=sl(this._converter,e,"DocumentReference.set"),r=n[0],i=n[1],o=t.merge||t.mergeFields?this.firestore._dataConverter.parseMergeData(i,r,t.mergeFields):this.firestore._dataConverter.parseSetData(i,r);return this._firestoreClient.write(o.toMutations(this._key,en.NONE))},Bc.prototype.update=function(e,t){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof e||e instanceof Fu?(R("DocumentReference.update",arguments,2),this.firestore._dataConverter.parseUpdateVarargs("DocumentReference.update",e,t,r)):(x("DocumentReference.update",arguments,1),this.firestore._dataConverter.parseUpdateData("DocumentReference.update",e)),this._firestoreClient.write(n.toMutations(this._key,en.exists(!0)))},Bc.prototype.delete=function(){return x("DocumentReference.delete",arguments,0),this._firestoreClient.write([new mn(this._key,en.NONE)])},Bc.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];M("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof e[i]||Yu(e[i])||(H("DocumentReference.onSnapshot",r=e[i],["includeMetadataChanges"]),j("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=Yu(e[i])?e[i]:(L("DocumentReference.onSnapshot","function",i,e[i]),F("DocumentReference.onSnapshot","function",i+1,e[i+1]),F("DocumentReference.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.onSnapshotInternal(o,n)},Bc.prototype.onSnapshotInternal=function(e,n){var r=this,t=function(e){console.error("Uncaught Error in onSnapshot:",e)};n.error&&(t=n.error.bind(n));var i=new Mu({next:function(e){if(n.next){v(e.docs.size<=1,"Too many documents returned on a document query");var t=e.docs.get(r._key);n.next(new Kc(r.firestore,r._key,t,e.fromCache,e.hasPendingWrites,r._converter))}},error:t}),o=this._firestoreClient.listen(_o.atPath(this._key.path),i,e);return function(){i.mute(),r._firestoreClient.unlisten(o)}},Bc.prototype.get=function(n){var r=this;return M("DocumentReference.get",arguments,0,1),ol("DocumentReference.get",n),new Promise(function(t,e){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentFromLocalCache(r._key).then(function(e){t(new Kc(r.firestore,r._key,e,!0,e instanceof vr&&e.hasLocalMutations,r._converter))},e):r.getViaSnapshotListener(t,e,n)})},Bc.prototype.getViaSnapshotListener=function(t,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){i(),!e.exists&&e.metadata.fromCache?n(new S(T.UNAVAILABLE,"Failed to get document because the client is offline.")):e.exists&&e.metadata.fromCache&&r&&"server"===r.source?n(new S(T.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):t(e)},error:n})},Bc.prototype.withConverter=function(e){return new Bc(this._key,this.firestore,e)},Bc);function Bc(e,t,n){this._key=e,this.firestore=t,this._converter=n,this._firestoreClient=this.firestore.ensureClientConfigured()}var Wc=(zc.prototype.isEqual=function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache},zc);function zc(e,t){this.hasPendingWrites=e,this.fromCache=t}var Kc=(Hc.prototype.data=function(e){if(M("DocumentSnapshot.data",arguments,0,1),e=il("DocumentSnapshot.data",e),this._document){if(this._converter){var t=new Gc(this._firestore,this._key,this._document,this._fromCache,this._hasPendingWrites);return this._converter.fromFirestore(t,e)}return this.toJSObject(this._document.data(),Sn.fromSnapshotOptions(e,this._firestore._areTimestampsInSnapshotsEnabled()))}},Hc.prototype.get=function(e,t){if(M("DocumentSnapshot.get",arguments,1,2),t=il("DocumentSnapshot.get",t),this._document){var n=this._document.data().field(Ac("DocumentSnapshot.get",e));if(null!==n)return this.toJSValue(n,Sn.fromSnapshotOptions(t,this._firestore._areTimestampsInSnapshotsEnabled()))}},Object.defineProperty(Hc.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"ref",{get:function(){return new qc(this._key,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"exists",{get:function(){return null!==this._document},enumerable:!0,configurable:!0}),Object.defineProperty(Hc.prototype,"metadata",{get:function(){return new Wc(this._hasPendingWrites,this._fromCache)},enumerable:!0,configurable:!0}),Hc.prototype.isEqual=function(e){if(!(e instanceof Hc))throw Q("isEqual","DocumentSnapshot",1,e);return this._firestore===e._firestore&&this._fromCache===e._fromCache&&this._key.isEqual(e._key)&&(null===this._document?null===e._document:this._document.isEqual(e._document))&&this._converter===e._converter},Hc.prototype.toJSObject=function(e,n){var r=this,i={};return e.forEach(function(e,t){i[e]=r.toJSValue(t,n)}),i},Hc.prototype.toJSValue=function(e,t){if(e instanceof cr)return this.toJSObject(e,t);if(e instanceof fr)return this.toJSArray(e,t);if(e instanceof rr){var n=e.value(t),r=this._firestore.ensureClientConfigured().databaseId();return e.databaseId.isEqual(r)||c("Document "+this._key.path+" contains a document reference within a different database ("+e.databaseId.projectId+"/"+e.databaseId.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new qc(n,this._firestore,this._converter)}return e.value(t)},Hc.prototype.toJSArray=function(e,t){var n=this;return e.internalValue.map(function(e){return n.toJSValue(e,t)})},Hc);function Hc(e,t,n,r,i,o){this._firestore=e,this._key=t,this._document=n,this._fromCache=r,this._hasPendingWrites=i,this._converter=o}var Qc,Gc=(Qc=Kc,m.__extends(Yc,Qc),Yc.prototype.data=function(e){var t=Qc.prototype.data.call(this,e);return v(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t},Yc);function Yc(){return null!==Qc&&Qc.apply(this,arguments)||this}var Xc=($c.prototype.where=function(e,t,n){var r;x("Query.where",arguments,3),K("Query.where",3,n),function(e,t,n,r){if(!t.some(function(e){return e===r}))throw new S(T.INVALID_ARGUMENT,"Invalid value "+z(r)+" provided to function "+e+"() for its "+Y(n)+" argument. Acceptable values: "+t.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,t);var i=Ac("Query.where",e),o=So.fromString(t);if(i.isKeyField()){if(o===So.ARRAY_CONTAINS||o===So.ARRAY_CONTAINS_ANY)throw new S(T.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===So.IN){this.validateDisjunctiveFilterElements(n,o);for(var a=[],s=0,u=n;s<u.length;s++){var c=u[s];a.push(this.parseDocumentIdValue(c))}r=new fr(a)}else r=this.parseDocumentIdValue(n)}else o!==So.IN&&o!==So.ARRAY_CONTAINS_ANY||this.validateDisjunctiveFilterElements(n,o),r=this.firestore._dataConverter.parseQueryValue("Query.where",n,o===So.IN);var l=ko.create(i,o,r);return this.validateNewFilter(l),new $c(this._query.addFilter(l),this.firestore,this._converter)},$c.prototype.orderBy=function(e,t){var n;if(M("Query.orderBy",arguments,1,2),F("Query.orderBy","non-empty string",2,t),void 0===t||"asc"===t)n=zo.ASCENDING;else{if("desc"!==t)throw new S(T.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+t+"', expected 'asc' or 'desc'.");n=zo.DESCENDING}if(null!==this._query.startAt)throw new S(T.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this._query.endAt)throw new S(T.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Ac("Query.orderBy",e),i=new Go(r,n);return this.validateNewOrderBy(i),new $c(this._query.addOrderBy(i),this.firestore,this._converter)},$c.prototype.limit=function(e){return x("Query.limit",arguments,1),L("Query.limit","number",1,e),G("Query.limit",1,e),new $c(this._query.withLimitToFirst(e),this.firestore,this._converter)},$c.prototype.limitToLast=function(e){return x("Query.limitToLast",arguments,1),L("Query.limitToLast","number",1,e),G("Query.limitToLast",1,e),new $c(this._query.withLimitToLast(e),this.firestore,this._converter)},$c.prototype.startAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];R("Query.startAt",arguments,1);var r=this.boundFromDocOrFields("Query.startAt",e,t,!0);return new $c(this._query.withStartAt(r),this.firestore,this._converter)},$c.prototype.startAfter=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];R("Query.startAfter",arguments,1);var r=this.boundFromDocOrFields("Query.startAfter",e,t,!1);return new $c(this._query.withStartAt(r),this.firestore,this._converter)},$c.prototype.endBefore=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];R("Query.endBefore",arguments,1);var r=this.boundFromDocOrFields("Query.endBefore",e,t,!0);return new $c(this._query.withEndAt(r),this.firestore,this._converter)},$c.prototype.endAt=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];R("Query.endAt",arguments,1);var r=this.boundFromDocOrFields("Query.endAt",e,t,!1);return new $c(this._query.withEndAt(r),this.firestore,this._converter)},$c.prototype.isEqual=function(e){if(!(e instanceof $c))throw Q("isEqual","Query",1,e);return this.firestore===e.firestore&&this._query.isEqual(e._query)},$c.prototype.withConverter=function(e){return new $c(this._query,this.firestore,e)},$c.prototype.boundFromDocOrFields=function(e,t,n,r){if(K(e,1,t),t instanceof Kc){if(0<n.length)throw new S(T.INVALID_ARGUMENT,"Too many arguments provided to "+e+"().");var i=t;if(!i.exists)throw new S(T.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+e+"().");return this.boundFromDocument(e,i._document,r)}var o=[t].concat(n);return this.boundFromFields(e,o,r)},$c.prototype.boundFromDocument=function(e,t,n){for(var r=[],i=0,o=this._query.orderBy;i<o.length;i++){var a=o[i];if(a.field.isKeyField())r.push(new rr(this.firestore._databaseId,t.key));else{var s=t.field(a.field);if(s instanceof $n)throw new S(T.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===s){var u=a.field.canonicalString();throw new S(T.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(s)}}return new Ho(r,n)},$c.prototype.boundFromFields=function(e,t,n){var r=this._query.explicitOrderBy;if(t.length>r.length)throw new S(T.INVALID_ARGUMENT,"Too many arguments provided to "+e+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<t.length;o++){var a=t[o];if(r[o].field.isKeyField()){if("string"!=typeof a)throw new S(T.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+e+"(), but got a "+typeof a);if(!this._query.isCollectionGroupQuery()&&-1!==a.indexOf("/"))throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+e+"() must be a plain document ID, but '"+a+"' contains a slash.");var s=this._query.path.child(me.fromString(a));if(!_e.isDocumentKey(s))throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+e+"() must result in a valid document path, but '"+s+"' is not because it contains an odd number of segments.");var u=new _e(s);i.push(new rr(this.firestore._databaseId,u))}else{var c=this.firestore._dataConverter.parseQueryValue(e,a);i.push(c)}}return new Ho(i,n)},$c.prototype.onSnapshot=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];M("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof e[i]||Yu(e[i])||(H("Query.onSnapshot",r=e[i],["includeMetadataChanges"]),j("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Yu(e[i])?e[i]:(L("Query.onSnapshot","function",i,e[i]),F("Query.onSnapshot","function",i+1,e[i+1]),F("Query.onSnapshot","function",i+2,e[i+2]),{next:e[i],error:e[i+1],complete:e[i+2]}),this.validateHasExplicitOrderByForLimitToLast(this._query),this.onSnapshotInternal(r,n)},$c.prototype.onSnapshotInternal=function(e,t){var n=this,r=function(e){console.error("Uncaught Error in onSnapshot:",e)};t.error&&(r=t.error.bind(t));var i=new Mu({next:function(e){t.next&&t.next(new Jc(n.firestore,n._query,e,n._converter))},error:r}),o=this.firestore.ensureClientConfigured(),a=o.listen(this._query,i,e);return function(){i.mute(),o.unlisten(a)}},$c.prototype.validateHasExplicitOrderByForLimitToLast=function(e){if(e.hasLimitToLast()&&0===e.explicitOrderBy.length)throw new S(T.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},$c.prototype.get=function(n){var r=this;return M("Query.get",arguments,0,1),ol("Query.get",n),this.validateHasExplicitOrderByForLimitToLast(this._query),new Promise(function(t,e){n&&"cache"===n.source?r.firestore.ensureClientConfigured().getDocumentsFromLocalCache(r._query).then(function(e){t(new Jc(r.firestore,r._query,e,r._converter))},e):r.getViaSnapshotListener(t,e,n)})},$c.prototype.getViaSnapshotListener=function(t,n,r){var i=this.onSnapshotInternal({includeMetadataChanges:!0,waitForSyncWhenOnline:!0},{next:function(e){i(),e.metadata.fromCache&&r&&"server"===r.source?n(new S(T.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):t(e)},error:n})},$c.prototype.parseDocumentIdValue=function(e){if("string"==typeof e){if(""===e)throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this._query.isCollectionGroupQuery()&&-1!==e.indexOf("/"))throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+e+"' contains a '/' character.");var t=this._query.path.child(me.fromString(e));if(!_e.isDocumentKey(t))throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+t+"' is not because it has an odd number of segments ("+t.length+").");return new rr(this.firestore._databaseId,new _e(t))}if(e instanceof qc){var n=e;return new rr(this.firestore._databaseId,n._key)}throw new S(T.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+z(e)+".")},$c.prototype.validateDisjunctiveFilterElements=function(e,t){if(!Array.isArray(e)||0===e.length)throw new S(T.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+t.toString()+"' filters.");if(10<e.length)throw new S(T.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=e.indexOf(null))throw new S(T.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'null' in the value array.");if(0<e.filter(function(e){return Number.isNaN(e)}).length)throw new S(T.INVALID_ARGUMENT,"Invalid Query. '"+t.toString()+"' filters cannot contain 'NaN' in the value array.")},$c.prototype.validateNewFilter=function(e){if(e instanceof ko){var t=[So.ARRAY_CONTAINS,So.ARRAY_CONTAINS_ANY],n=[So.IN,So.ARRAY_CONTAINS_ANY],r=0<=t.indexOf(e.op),i=0<=n.indexOf(e.op);if(e.isInequality()){var o=this._query.getInequalityFilterField();if(null!==o&&!o.isEqual(e.field))throw new S(T.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+e.field.toString()+"'");var a=this._query.getFirstOrderByField();null!==a&&this.validateOrderByAndInequalityMatch(e.field,a)}else if(i||r){var s=null;if(i&&(s=this._query.findFilterOperator(n)),null===s&&r&&(s=this._query.findFilterOperator(t)),null!=s)throw s===e.op?new S(T.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new S(T.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+s.toString()+"' filters.")}}},$c.prototype.validateNewOrderBy=function(e){if(null===this._query.getFirstOrderByField()){var t=this._query.getInequalityFilterField();null!==t&&this.validateOrderByAndInequalityMatch(t,e.field)}},$c.prototype.validateOrderByAndInequalityMatch=function(e,t){if(!t.isEqual(e))throw new S(T.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+t.toString()+"' instead.")},$c);function $c(e,t,n){this._query=e,this.firestore=t,this._converter=n}var Jc=(Object.defineProperty(Zc.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!0,configurable:!0}),Object.defineProperty(Zc.prototype,"empty",{get:function(){return this._snapshot.docs.isEmpty()},enumerable:!0,configurable:!0}),Object.defineProperty(Zc.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!0,configurable:!0}),Zc.prototype.forEach=function(t,n){var r=this;M("QuerySnapshot.forEach",arguments,1,2),L("QuerySnapshot.forEach","function",1,t),this._snapshot.docs.forEach(function(e){t.call(n,r.convertToDocumentImpl(e))})},Object.defineProperty(Zc.prototype,"query",{get:function(){return new Xc(this._originalQuery,this._firestore,this._converter)},enumerable:!0,configurable:!0}),Zc.prototype.docChanges=function(e){e&&(H("QuerySnapshot.docChanges",e,["includeMetadataChanges"]),j("QuerySnapshot.docChanges","boolean","includeMetadataChanges",e.includeMetadataChanges));var t=!(!e||!e.includeMetadataChanges);if(t&&this._snapshot.excludesMetadataChanges)throw new S(T.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,t,o,a){if(o.oldDocs.isEmpty()){var n,r=0;return o.docChanges.map(function(e){var t=new Gc(i,e.doc.key,e.doc,o.fromCache,o.mutatedKeys.has(e.doc.key),a);return v(e.type===za.Added,"Invalid event type for first snapshot"),v(!n||o.query.docComparator(n,e.doc)<0,"Got added events in wrong order"),n=e.doc,{type:"added",doc:t,oldIndex:-1,newIndex:r++}})}var s=o.oldDocs;return o.docChanges.filter(function(e){return t||e.type!==za.Metadata}).map(function(e){var t=new Gc(i,e.doc.key,e.doc,o.fromCache,o.mutatedKeys.has(e.doc.key),a),n=-1,r=-1;return e.type!==za.Added&&(v(0<=(n=s.indexOf(e.doc.key)),"Index for document not found"),s=s.delete(e.doc.key)),e.type!==za.Removed&&(r=(s=s.add(e.doc)).indexOf(e.doc.key)),{type:function(e){switch(e){case za.Added:return"added";case za.Modified:case za.Metadata:return"modified";case za.Removed:return"removed";default:return w("Unknown change type: "+e)}}(e.type),doc:t,oldIndex:n,newIndex:r}})}(this._firestore,t,this._snapshot,this._converter),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges},Zc.prototype.isEqual=function(e){if(!(e instanceof Zc))throw Q("isEqual","QuerySnapshot",1,e);return this._firestore===e._firestore&&this._originalQuery.isEqual(e._originalQuery)&&this._snapshot.isEqual(e._snapshot)&&this._converter===e._converter},Zc.prototype.convertToDocumentImpl=function(e){return new Gc(this._firestore,e.key,e,this.metadata.fromCache,this._snapshot.mutatedKeys.has(e.key),this._converter)},Zc);function Zc(e,t,n,r){this._firestore=e,this._originalQuery=t,this._snapshot=n,this._converter=r,this._cachedChanges=null,this._cachedChangesIncludeMetadataChanges=null,this.metadata=new Wc(n.hasPendingWrites,n.fromCache)}m.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(e){try{Object.defineProperty(Jc.prototype.docChanges,e,{get:function(){return function(){throw new S(T.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(e){}});var el,tl=(el=Xc,m.__extends(nl,el),Object.defineProperty(nl.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!0,configurable:!0}),Object.defineProperty(nl.prototype,"parent",{get:function(){var e=this._query.path.popLast();return e.isEmpty()?null:new qc(new _e(e),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(nl.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!0,configurable:!0}),nl.prototype.doc=function(e){if(M("CollectionReference.doc",arguments,0,1),0===arguments.length&&(e=$.newId()),L("CollectionReference.doc","non-empty string",1,e),""===e)throw new S(T.INVALID_ARGUMENT,"Document path must be a non-empty string");var t=me.fromString(e);return qc.forPath(this._query.path.child(t),this.firestore,this._converter)},nl.prototype.add=function(e){x("CollectionReference.add",arguments,1),L("CollectionReference.add","object",1,e);var t=this.doc();return t.set(e).then(function(){return t})},nl.prototype.withConverter=function(e){return new nl(this._path,this.firestore,e)},nl);function nl(e,t,n){var r=el.call(this,_o.atPath(e),t,n)||this;if((r._path=e).length%2!=1)throw new S(T.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+e.canonicalString()+" has "+e.length);return r}function rl(e,t){if(void 0===t)return{merge:!1};if(H(e,t,["merge","mergeFields"]),j(e,"boolean","merge",t.merge),V(e,"mergeFields","a string or a FieldPath",t.mergeFields,function(e){return"string"==typeof e||e instanceof Fu}),void 0!==t.mergeFields&&void 0!==t.merge)throw new S(T.INVALID_ARGUMENT,"Invalid options passed to function "+e+'(): You cannot specify both "merge" and "mergeFields".');return t}function il(e,t){return void 0===t?{}:(H(e,t,["serverTimestamps"]),q(e,0,"serverTimestamps",t.serverTimestamps,["estimate","previous","none"]),t)}function ol(e,t){F(e,"object",1,t),t&&(H(e,t,["source"]),q(e,0,"source",t.source,["default","server","cache"]))}function al(e,t,n){if(t instanceof qc){if(t.firestore!==n)throw new S(T.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}throw Q(e,"DocumentReference",1,t)}function sl(e,t,n){var r;return e?(r=e.toFirestore(t),n="toFirestore() in "+n):r=t,[r,n]}var ul=I(Mc,"Use firebase.firestore() instead."),cl=I(Fc,"Use firebase.firestore().runTransaction() instead."),ll=I(jc,"Use firebase.firestore().batch() instead."),hl=I(qc,"Use firebase.firestore().doc() instead."),fl=I(Kc),pl=I(Gc),dl=I(Xc),ml=I(Jc),yl=I(tl,"Use firebase.firestore().collection() instead."),vl={Firestore:ul,GeoPoint:gs,Timestamp:Ue,Blob:ae,Transaction:cl,WriteBatch:ll,DocumentReference:hl,DocumentSnapshot:fl,Query:dl,QueryDocumentSnapshot:pl,QuerySnapshot:ml,CollectionReference:yl,FieldPath:Fu,FieldValue:pc,setLogLevel:Mc.setLogLevel,CACHE_SIZE_UNLIMITED:Pc};function gl(e){e.INTERNAL.registerComponent(new i.Component("firestore",function(e){var t=e.getProvider("app").getImmediate();return new Mc(t,e.getProvider("auth-internal"))},"PUBLIC").setServiceProps(function(e){v(e&&"object"==typeof e,"shallowCopy() expects object parameter.");var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}(vl)))}var bl=(wl.prototype.addCallback=function(e){},wl.prototype.shutdown=function(){},wl);function wl(){}var _l="ConnectivityMonitor",El=(Tl.prototype.addCallback=function(e){this.callbacks.push(e)},Tl.prototype.shutdown=function(){window.removeEventListener("online",this.networkAvailableListener),window.removeEventListener("offline",this.networkUnavailableListener)},Tl.prototype.configureNetworkMonitoring=function(){window.addEventListener("online",this.networkAvailableListener),window.addEventListener("offline",this.networkUnavailableListener)},Tl.prototype.onNetworkAvailable=function(){y(_l,"Network connectivity changed: AVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(0)},Tl.prototype.onNetworkUnavailable=function(){y(_l,"Network connectivity changed: UNAVAILABLE");for(var e=0,t=this.callbacks;e<t.length;e++)(0,t[e])(1)},Tl.isAvailable=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Tl);function Tl(){var e=this;this.networkAvailableListener=function(){return e.onNetworkAvailable()},this.networkUnavailableListener=function(){return e.onNetworkUnavailable()},this.callbacks=[],this.configureNetworkMonitoring()}var Sl=(Cl.prototype.onOpen=function(e){v(!this.wrappedOnOpen,"Called onOpen on stream twice!"),this.wrappedOnOpen=e},Cl.prototype.onClose=function(e){v(!this.wrappedOnClose,"Called onClose on stream twice!"),this.wrappedOnClose=e},Cl.prototype.onMessage=function(e){v(!this.wrappedOnMessage,"Called onMessage on stream twice!"),this.wrappedOnMessage=e},Cl.prototype.close=function(){this.closeFn()},Cl.prototype.send=function(e){this.sendFn(e)},Cl.prototype.callOnOpen=function(){v(void 0!==this.wrappedOnOpen,"Cannot call onOpen because no callback was set"),this.wrappedOnOpen()},Cl.prototype.callOnClose=function(e){v(void 0!==this.wrappedOnClose,"Cannot call onClose because no callback was set"),this.wrappedOnClose(e)},Cl.prototype.callOnMessage=function(e){v(void 0!==this.wrappedOnMessage,"Cannot call onMessage because no callback was set"),this.wrappedOnMessage(e)},Cl);function Cl(e){this.sendFn=e.sendFn,this.closeFn=e.closeFn}var Il="Connection",kl={BatchGetDocuments:"batchGet",Commit:"commit"},Nl="gl-js/ fire/"+a,Al=(Ol.prototype.modifyHeadersForRequest=function(e,t){if(t)for(var n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n]);e["X-Goog-Api-Client"]=Nl},Ol.prototype.invokeRPC=function(s,r,u){var c=this,l=this.makeUrl(s);return new Promise(function(i,o){var a=new p.XhrIo;a.listenOnce(p.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case p.ErrorCode.NO_ERROR:var e=a.getResponseJson();y(Il,"XHR received:",JSON.stringify(e)),i(e);break;case p.ErrorCode.TIMEOUT:y(Il,'RPC "'+s+'" timed out'),o(new S(T.DEADLINE_EXCEEDED,"Request time out"));break;case p.ErrorCode.HTTP_ERROR:var t=a.getStatus();if(y(Il,'RPC "'+s+'" failed with status:',t,"response text:",a.getResponseText()),0<t){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=function(e){var t=e.toLowerCase().replace("_","-");return 0<=Object.values(T).indexOf(t)?t:T.UNKNOWN}(n.status);o(new S(r,n.message))}else o(new S(T.UNKNOWN,"Server responded with status "+a.getStatus()))}else y(Il,'RPC "'+s+'" failed'),o(new S(T.UNAVAILABLE,"Connection failed."));break;default:w('RPC "'+s+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{y(Il,'RPC "'+s+'" completed.')}});var e=m.__assign({},r);delete e.database;var t=JSON.stringify(e);y(Il,"XHR sending: ",l+" "+t);var n={"Content-Type":"text/plain"};c.modifyHeadersForRequest(n,u),a.send(l,"POST",t,n,15)})},Ol.prototype.invokeStreamingRPC=function(e,t,n){return this.invokeRPC(e,t,n)},Ol.prototype.openStream=function(e,t){var n=[this.baseUrl,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=p.createWebChannelTransport(),i={backgroundChannelTest:!0,httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.modifyHeadersForRequest(i.initMessageHeaders,t),h.isReactNative()||h.isElectron()||h.isIE()||h.isUWP()||h.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function a(e,t){u.listen(e,function(e){try{t(e)}catch(e){setTimeout(function(){throw e},0)}})}y(Il,"Creating WebChannel: "+o+" "+i);var u=r.createWebChannel(o,i),s=!1,c=!1,l=new Sl({sendFn:function(e){c?y(Il,"Not sending because WebChannel is closed:",e):(s||(y(Il,"Opening WebChannel transport."),u.open(),s=!0),y(Il,"WebChannel sending:",e),u.send(e))},closeFn:function(){return u.close()}});return a(p.WebChannel.EventType.OPEN,function(){c||y(Il,"WebChannel transport opened.")}),a(p.WebChannel.EventType.CLOSE,function(){c||(c=!0,y(Il,"WebChannel transport closed"),l.callOnClose())}),a(p.WebChannel.EventType.ERROR,function(e){c||(c=!0,y(Il,"WebChannel transport errored:",e),l.callOnClose(new S(T.UNAVAILABLE,"The operation could not be completed")))}),a(p.WebChannel.EventType.MESSAGE,function(e){var t;if(!c){var n=e.data[0];v(!!n,"Got a webchannel message without data.");var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){y(Il,"WebChannel received error:",i);var o=i.status,a=function(e){var t=Ua[e];if(void 0!==t)return Wa(t)}(o),s=i.message;void 0===a&&(a=T.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),c=!0,l.callOnClose(new S(a,s)),u.close()}else y(Il,"WebChannel received:",n),l.callOnMessage(n)}}),setTimeout(function(){l.callOnOpen()},0),l},Ol.prototype.makeUrl=function(e){var t=kl[e];return v(void 0!==t,"Unknown REST mapping for: "+e),this.baseUrl+"/v1/projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents:"+t},Ol);function Ol(e){this.databaseId=e.databaseId;var t=e.ssl?"https":"http";this.baseUrl=t+"://"+e.host,this.forceLongPolling=e.forceLongPolling}var Dl=(Object.defineProperty(Pl.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(Pl.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),Pl.prototype.loadConnection=function(e){return Promise.resolve(new Al(e))},Pl.prototype.newConnectivityMonitor=function(){return El.isAvailable()?new El:new bl},Pl.prototype.newSerializer=function(e){return new Us(e,{useProto3Json:!0})},Pl.prototype.formatJSON=function(e){return JSON.stringify(e)},Pl.prototype.atob=function(e){return atob(e)},Pl.prototype.btoa=function(e){return btoa(e)},Pl);function Pl(){this.emptyByteString="",this.base64Available="undefined"!=typeof atob}g.setPlatform(new Dl);function xl(e){gl(e),e.registerVersion("@firebase/firestore","1.10.0")}xl(r),Rl.registerFirestore=xl}).call(this,Ml(43))},,function(e,t,n){var r=n(58),i=n(59),o=n(60);e.exports=function(e){return r(e)||i(e)||o()}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function r(i){return function(e){var n=e.dispatch,r=e.getState;return function(t){return function(e){return"function"==typeof e?e(n,r,i):t(e)}}}}var i=r();i.withExtraArgument=r,t.a=i},function(e,t,n){"use strict";var r;t.__esModule=!0,t.default=void 0;var i=(0,((r=n(71))&&r.__esModule?r:{default:r}).default)("local");t.default=i},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(1);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=function(){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return l(u(t=function(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?u(e):t}(this,(e=s(o)).call.apply(e,[this].concat(r)))),"state",{bootstrapped:!1}),l(u(t),"_unsubscribe",void 0),l(u(t),"handlePersistorState",function(){t.props.persistor.getState().bootstrapped&&(t.props.onBeforeLift?Promise.resolve(t.props.onBeforeLift()).finally(function(){return t.setState({bootstrapped:!0})}):t.setState({bootstrapped:!0}),t._unsubscribe&&t._unsubscribe())}),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(o,r["PureComponent"]),function(e,t,n){t&&i(e.prototype,t),n&&i(e,n)}(o,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),o}();l(o,"defaultProps",{children:null,loading:null})},function(e,t,n){"use strict";var r,i=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r;n(77),n(78),n(44),n(80),n(81),n(82),n(83),n(84),n(85);i.registerVersion("firebase","7.8.0","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion("firebase","7.8.0"),e.exports=i},function(n,e,t){"use strict";(function(e){var t="__global_unique_id__";n.exports=function(){return e[t]=(e[t]||0)+1}}).call(this,t(27))},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),i=function(e){return Object(r.a)({tag:"svg",attr:{version:"1.2",baseProfile:"tiny",viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M12 5c3.859.001 7 3.142 7 7.001 0 3.858-3.141 6.998-7 6.999-3.859 0-7-3.14-7-6.999s3.141-7 7-7.001m0-2c-4.971.001-9 4.03-9 9.001 0 4.97 4.029 8.999 9 8.999 4.97-.001 9-4.03 9-8.999 0-4.971-4.029-9-9-9.001zM16.182 7.819c-.129-.128-.315-.178-.491-.127l-5.951 1.706c-.166.048-.295.177-.342.343l-1.707 5.951c-.051.175-.002.363.127.491.095.095.223.146.354.146l.138-.02 5.95-1.708c.165-.047.295-.177.342-.343l1.707-5.949c.05-.173.002-.361-.127-.49zm-7.282 7.282l1.383-4.817 3.434 3.435-4.817 1.382z"}}]}]})(e)};i.displayName="TiCompass"},,,,function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n.apply(this,arguments)}e.exports=n},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},,function(e,t,n){"use strict";var l=n(42),r="function"==typeof Symbol&&Symbol.for,h=r?Symbol.for("react.element"):60103,c=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,a=r?Symbol.for("react.profiler"):60114,s=r?Symbol.for("react.provider"):60109,u=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.forward_ref"):60112,p=r?Symbol.for("react.suspense"):60113;r&&Symbol.for("react.suspense_list");var d=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116;r&&Symbol.for("react.fundamental"),r&&Symbol.for("react.responder"),r&&Symbol.for("react.scope");var y="function"==typeof Symbol&&Symbol.iterator;function v(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b={};function w(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}function _(){}function E(e,t,n){this.props=e,this.context=t,this.refs=b,this.updater=n||g}w.prototype.isReactComponent={},w.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(v(85));this.updater.enqueueSetState(this,e,t,"setState")},w.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=w.prototype;var T=E.prototype=new _;T.constructor=E,l(T,w.prototype),T.isPureReactComponent=!0;var S={current:null},C={current:null},I=Object.prototype.hasOwnProperty,k={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)I.call(t,r)&&!k.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:h,type:e,key:o,ref:a,props:i,_owner:C.current}}function A(e){return"object"==typeof e&&null!==e&&e.$$typeof===h}var O=/\/+/g,D=[];function P(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function x(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,D.length<10&&D.push(e)}function R(e,t,n){return null==e?0:function e(t,n,r,i){var o=typeof t;"undefined"!==o&&"boolean"!==o||(t=null);var a=!1;if(null===t)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case h:case c:a=!0}}if(a)return r(i,t,""===n?"."+M(t,0):n),1;if(a=0,n=""===n?".":n+":",Array.isArray(t))for(var s=0;s<t.length;s++){var u=n+M(o=t[s],s);a+=e(o,u,r,i)}else if("function"==typeof(u=null===t||"object"!=typeof t?null:"function"==typeof(u=y&&t[y]||t["@@iterator"])?u:null))for(t=u.call(t),s=0;!(o=t.next()).done;)a+=e(o=o.value,u=n+M(o,s++),r,i);else if("object"===o)throw r=""+t,Error(v(31,"[object Object]"===r?"object with keys {"+Object.keys(t).join(", ")+"}":r,""));return a}(e,"",t,n)}function M(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}(e.key):t.toString(36)}function L(e,t){e.func.call(e.context,t,e.count++)}function F(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?U(e,r,n,function(e){return e}):null!=e&&(A(e)&&(e=function(e,t){return{$$typeof:h,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(e,i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(O,"$&/")+"/")+n)),r.push(e))}function U(e,t,n,r,i){var o="";null!=n&&(o=(""+n).replace(O,"$&/")+"/"),R(e,F,t=P(t,o,r,i)),x(t)}function j(){var e=S.current;if(null===e)throw Error(v(321));return e}var V={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return U(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;R(e,L,t=P(null,null,t,n)),x(t)},count:function(e){return R(e,function(){return null},null)},toArray:function(e){var t=[];return U(e,t,null,function(e){return e}),t},only:function(e){if(!A(e))throw Error(v(143));return e}},createRef:function(){return{current:null}},Component:w,PureComponent:E,createContext:function(e,t){return void 0===t&&(t=null),(e={$$typeof:u,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:f,render:e}},lazy:function(e){return{$$typeof:m,_ctor:e,_status:-1,_result:null}},memo:function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},useCallback:function(e,t){return j().useCallback(e,t)},useContext:function(e,t){return j().useContext(e,t)},useEffect:function(e,t){return j().useEffect(e,t)},useImperativeHandle:function(e,t,n){return j().useImperativeHandle(e,t,n)},useDebugValue:function(){},useLayoutEffect:function(e,t){return j().useLayoutEffect(e,t)},useMemo:function(e,t){return j().useMemo(e,t)},useReducer:function(e,t,n){return j().useReducer(e,t,n)},useRef:function(e){return j().useRef(e)},useState:function(e){return j().useState(e)},Fragment:i,Profiler:a,StrictMode:o,Suspense:p,createElement:N,cloneElement:function(e,t,n){if(null==e)throw Error(v(267,e));var r=l({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=C.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)I.call(t,u)&&!k.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:h,type:e.type,key:i,ref:o,props:r,_owner:a}},createFactory:function(e){var t=N.bind(null,e);return t.type=e,t},isValidElement:A,version:"16.11.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentDispatcher:S,ReactCurrentBatchConfig:{suspense:null},ReactCurrentOwner:C,IsSomeRendererActing:{current:!1},assign:l}},q=V;e.exports=q.default||q},function(e,t,n){"use strict";var r=n(1),m=n(42),o=n(64);function R(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!r)throw Error(R(227));var c=null,l={};function i(){if(c)for(var e in l){var t=l[e],n=c.indexOf(e);if(!(-1<n))throw Error(R(96,e));if(!f[n]){if(!t.extractEvents)throw Error(R(97,e));for(var r in n=(f[n]=t).eventTypes){var i=void 0,o=n[r],a=t,s=r;if(p.hasOwnProperty(s))throw Error(R(99,s));var u=(p[s]=o).phasedRegistrationNames;if(u){for(i in u)u.hasOwnProperty(i)&&h(u[i],a,s);i=!0}else i=!!o.registrationName&&(h(o.registrationName,a,s),!0);if(!i)throw Error(R(98,r,e))}}}}function h(e,t,n){if(y[e])throw Error(R(100,e));y[e]=t,s[e]=t.eventTypes[n].dependencies}var f=[],p={},y={},s={};var d=!1,v=null,g=!1,b=null,w={onError:function(e){d=!0,v=e}};function _(e,t,n,r,i,o,a,s,u){d=!1,v=null,function(e,t,n,r,i,o,a,s,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(e){this.onError(e)}}.apply(w,arguments)}var a=null,u=null,E=null;function T(e,t,n){var r=e.type||"unknown-event";e.currentTarget=E(n),function(e,t,n,r,i,o,a,s,u){if(_.apply(this,arguments),d){if(!d)throw Error(R(198));var c=v;d=!1,v=null,g||(g=!0,b=c)}}(r,t,void 0,e),e.currentTarget=null}function S(e,t){if(null==t)throw Error(R(30));return null==e?t:Array.isArray(e)?(Array.isArray(t)?e.push.apply(e,t):e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function C(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}var I=null;function k(e){if(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t))for(var r=0;r<t.length&&!e.isPropagationStopped();r++)T(e,t[r],n[r]);else t&&T(e,t,n);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function N(e){if(null!==e&&(I=S(I,e)),e=I,I=null,e){if(C(e,k),I)throw Error(R(95));if(g)throw e=b,g=!1,b=null,e}}var A={injectEventPluginOrder:function(e){if(c)throw Error(R(101));c=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var r=e[t];if(!l.hasOwnProperty(t)||l[t]!==r){if(l[t])throw Error(R(102,t));l[t]=r,n=!0}}n&&i()}};function O(e,t){var n=e.stateNode;if(!n)return null;var r=a(n);if(!r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(R(231,t,typeof n));return n}var D=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;D.hasOwnProperty("ReactCurrentDispatcher")||(D.ReactCurrentDispatcher={current:null}),D.hasOwnProperty("ReactCurrentBatchConfig")||(D.ReactCurrentBatchConfig={suspense:null});var P=/^(.*)[\\\/]/,x="function"==typeof Symbol&&Symbol.for,M=x?Symbol.for("react.element"):60103,L=x?Symbol.for("react.portal"):60106,F=x?Symbol.for("react.fragment"):60107,U=x?Symbol.for("react.strict_mode"):60108,j=x?Symbol.for("react.profiler"):60114,V=x?Symbol.for("react.provider"):60109,q=x?Symbol.for("react.context"):60110,B=x?Symbol.for("react.concurrent_mode"):60111,W=x?Symbol.for("react.forward_ref"):60112,z=x?Symbol.for("react.suspense"):60113,K=x?Symbol.for("react.suspense_list"):60120,H=x?Symbol.for("react.memo"):60115,Q=x?Symbol.for("react.lazy"):60116;x&&Symbol.for("react.fundamental"),x&&Symbol.for("react.responder"),x&&Symbol.for("react.scope");var G="function"==typeof Symbol&&Symbol.iterator;function Y(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=G&&e[G]||e["@@iterator"])?e:null}function X(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case F:return"Fragment";case L:return"Portal";case j:return"Profiler";case U:return"StrictMode";case z:return"Suspense";case K:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case q:return"Context.Consumer";case V:return"Context.Provider";case W:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case H:return X(e.type);case Q:if(e=1===e._status?e._result:null)return X(e)}return null}function $(e){var t="";do{e:switch(e.tag){case 3:case 4:case 6:case 7:case 10:case 9:var n="";break e;default:var r=e._debugOwner,i=e._debugSource,o=X(e.type);n=null,r&&(n=X(r.type)),r=o,o="",i?o=" (at "+i.fileName.replace(P,"")+":"+i.lineNumber+")":n&&(o=" (created by "+n+")"),n="\n    in "+(r||"Unknown")+o}t+=n,e=e.return}while(e);return t}var J=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Z=null,ee=null,te=null;function ne(e){if(e=u(e)){if("function"!=typeof Z)throw Error(R(280));var t=a(e.stateNode);Z(e.stateNode,e.type,t)}}function re(e){ee?te?te.push(e):te=[e]:ee=e}function ie(){if(ee){var e=ee,t=te;if(te=ee=null,ne(e),t)for(e=0;e<t.length;e++)ne(t[e])}}function oe(e,t){return e(t)}function ae(e,t,n,r){return e(t,n,r)}function se(){}var ue=oe,ce=!1,le=!1;function he(){null===ee&&null===te||(se(),ie())}new Map;var fe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,pe=Object.prototype.hasOwnProperty,de={},me={};function ye(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||t<1}return!1}function ve(e,t,n,r,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o}var ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ge[e]=new ve(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ge[t]=new ve(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){ge[e]=new ve(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ge[e]=new ve(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ge[e]=new ve(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){ge[e]=new ve(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){ge[e]=new ve(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){ge[e]=new ve(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){ge[e]=new ve(e,5,!1,e.toLowerCase(),null,!1)});var be=/[\-:]([a-z])/g;function we(e){return e[1].toUpperCase()}function _e(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Ee(e,t,n,r){var i=ge.hasOwnProperty(t)?ge[t]:null;(null!==i?0!==i.type:r||(!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1]))&&(ye(t,n,i,r)&&(n=null),r||null===i?function(e){return!!pe.call(me,e)||!pe.call(de,e)&&(fe.test(e)?me[e]=!0:!(de[e]=!0))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function Te(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Se(e){e._valueTracker||(e._valueTracker=function(e){var t=Te(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Ce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Te(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ie(e,t){var n=t.checked;return m({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function ke(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=_e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Ne(e,t){null!=(t=t.checked)&&Ee(e,"checked",t,!1)}function Ae(e,t){Ne(e,t);var n=_e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?De(e,t.type,n):t.hasOwnProperty("defaultValue")&&De(e,t.type,_e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Oe(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function De(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Pe(e,t){return e=m({children:void 0},t),(t=function(e){var t="";return r.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(t.children))&&(e.children=t),e}function xe(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+_e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(R(91));return m({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var n=t.value;if(null==n){if(n=t.defaultValue,null!=(t=t.children)){if(null!=n)throw Error(R(92));if(Array.isArray(t)){if(!(t.length<=1))throw Error(R(93));t=t[0]}n=t}null==n&&(n="")}e._wrapperState={initialValue:_e(n)}}function Le(e,t){var n=_e(t.value),r=_e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function Fe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(be,we);ge[t]=new ve(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){ge[e]=new ve(e,1,!1,e.toLowerCase(),null,!1)}),ge.xlinkHref=new ve("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){ge[e]=new ve(e,1,!1,e.toLowerCase(),null,!0)});var Ue={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ve(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?je(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var qe,Be,We=(Be=function(e,t){if(e.namespaceURI!==Ue.svg||"innerHTML"in e)e.innerHTML=t;else{for((qe=qe||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qe.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return Be(e,t)})}:Be);function ze(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ke(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var He={animationend:Ke("Animation","AnimationEnd"),animationiteration:Ke("Animation","AnimationIteration"),animationstart:Ke("Animation","AnimationStart"),transitionend:Ke("Transition","TransitionEnd")},Qe={},Ge={};function Ye(e){if(Qe[e])return Qe[e];if(!He[e])return e;var t,n=He[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ge)return Qe[e]=n[t];return e}J&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete He.animationend.animation,delete He.animationiteration.animation,delete He.animationstart.animation),"TransitionEvent"in window||delete He.transitionend.transition);var Xe=Ye("animationend"),$e=Ye("animationiteration"),Je=Ye("animationstart"),Ze=Ye("transitionend"),et="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");function tt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else for(e=t;0!=(1026&(t=e).effectTag)&&(n=t.return),e=t.return;);return 3===t.tag?n:null}function nt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function rt(e){if(tt(e)!==e)throw Error(R(188))}function it(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=tt(e)))throw Error(R(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null!==o){if(i.child===o.child){for(o=i.child;o;){if(o===n)return rt(i),e;if(o===r)return rt(i),t;o=o.sibling}throw Error(R(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(R(189))}}if(n.alternate!==r)throw Error(R(190))}else{if(null===(r=i.return))break;n=r}}if(3!==n.tag)throw Error(R(188));return n.stateNode.current===n?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t=(t.child.return=t).child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}var ot,at,st,ut=!1,ct=[],lt=null,ht=null,ft=null,pt=new Map,dt=new Map,mt=[],yt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),vt="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" ");function gt(e,t,n,r){return{blockedOn:e,topLevelType:t,eventSystemFlags:32|n,nativeEvent:r}}function bt(e,t){switch(e){case"focus":case"blur":lt=null;break;case"dragenter":case"dragleave":ht=null;break;case"mouseover":case"mouseout":ft=null;break;case"pointerover":case"pointerout":pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":dt.delete(t.pointerId)}}function wt(e,t,n,r,i){return null===e||e.nativeEvent!==i?(e=gt(t,n,r,i),null===t||null!==(t=fr(t))&&at(t)):e.eventSystemFlags|=r,e}function _t(e){var t=hr(e.target);if(null!==t){var n=tt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=nt(n)))return e.blockedOn=t,void o.unstable_runWithPriority(e.priority,function(){st(n)})}else if(3===t&&n.stateNode.hydrate)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Et(e){if(null!==e.blockedOn)return!1;var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);if(null===t)return!0;var n=fr(t);return null!==n&&at(n),e.blockedOn=t,!1}function Tt(e,t,n){Et(e)&&n.delete(t)}function St(){for(ut=!1;0<ct.length;){var e=ct[0];if(null!==e.blockedOn){null!==(e=fr(e.blockedOn))&&ot(e);break}var t=On(e.topLevelType,e.eventSystemFlags,e.nativeEvent);null!==t?e.blockedOn=t:ct.shift()}null!==lt&&Et(lt)&&(lt=null),null!==ht&&Et(ht)&&(ht=null),null!==ft&&Et(ft)&&(ft=null),pt.forEach(Tt),dt.forEach(Tt)}function Ct(e,t){e.blockedOn===t&&(e.blockedOn=null,ut||(ut=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,St)))}function It(t){function e(e){return Ct(e,t)}if(0<ct.length){Ct(ct[0],t);for(var n=1;n<ct.length;n++){var r=ct[n];r.blockedOn===t&&(r.blockedOn=null)}}for(null!==lt&&Ct(lt,t),null!==ht&&Ct(ht,t),null!==ft&&Ct(ft,t),pt.forEach(e),dt.forEach(e),n=0;n<mt.length;n++)(r=mt[n]).blockedOn===t&&(r.blockedOn=null);for(;0<mt.length&&null===(n=mt[0]).blockedOn;)_t(n),null===n.blockedOn&&mt.shift()}function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Nt(e){for(;(e=e.return)&&5!==e.tag;);return e||null}function At(e,t,n){(t=O(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function Ot(e){if(e&&e.dispatchConfig.phasedRegistrationNames){for(var t=e._targetInst,n=[];t;)n.push(t),t=Nt(t);for(t=n.length;0<t--;)At(n[t],"captured",e);for(t=0;t<n.length;t++)At(n[t],"bubbled",e)}}function Dt(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=O(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=S(n._dispatchListeners,t),n._dispatchInstances=S(n._dispatchInstances,e))}function Pt(e){e&&e.dispatchConfig.registrationName&&Dt(e._targetInst,null,e)}function xt(e){C(e,Ot)}function Rt(){return!0}function Mt(){return!1}function Lt(e,t,n,r){for(var i in this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Rt:Mt,this.isPropagationStopped=Mt,this}function Ft(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function Ut(e){if(!(e instanceof this))throw Error(R(279));e.destructor(),this.eventPool.length<10&&this.eventPool.push(e)}function jt(e){e.eventPool=[],e.getPooled=Ft,e.release=Ut}m(Lt.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Rt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Rt)},persist:function(){this.isPersistent=Rt},isPersistent:Mt,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null,this.isPropagationStopped=this.isDefaultPrevented=Mt,this._dispatchInstances=this._dispatchListeners=null}}),Lt.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null},Lt.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return m(i,n.prototype),((n.prototype=i).constructor=n).Interface=m({},r.Interface,e),n.extend=r.extend,jt(n),n},jt(Lt);var Vt=Lt.extend({animationName:null,elapsedTime:null,pseudoElement:null}),qt=Lt.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Bt=Lt.extend({view:null,detail:null}),Wt=Bt.extend({relatedTarget:null});function zt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}var Kt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Qt[e])&&!!t[e]}function Yt(){return Gt}for(var Xt=Bt.extend({key:function(e){if(e.key){var t=Kt[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=zt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Ht[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Yt,charCode:function(e){return"keypress"===e.type?zt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?zt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),$t=0,Jt=0,Zt=!1,en=!1,tn=Bt.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Yt,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},movementX:function(e){if("movementX"in e)return e.movementX;var t=$t;return $t=e.screenX,Zt?"mousemove"===e.type?e.screenX-t:0:(Zt=!0,0)},movementY:function(e){if("movementY"in e)return e.movementY;var t=Jt;return Jt=e.screenY,en?"mousemove"===e.type?e.screenY-t:0:(en=!0,0)}}),nn=tn.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),rn=tn.extend({dataTransfer:null}),on=Bt.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Yt}),an=Lt.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),sn=tn.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),un=[["blur","blur",0],["cancel","cancel",0],["click","click",0],["close","close",0],["contextmenu","contextMenu",0],["copy","copy",0],["cut","cut",0],["auxclick","auxClick",0],["dblclick","doubleClick",0],["dragend","dragEnd",0],["dragstart","dragStart",0],["drop","drop",0],["focus","focus",0],["input","input",0],["invalid","invalid",0],["keydown","keyDown",0],["keypress","keyPress",0],["keyup","keyUp",0],["mousedown","mouseDown",0],["mouseup","mouseUp",0],["paste","paste",0],["pause","pause",0],["play","play",0],["pointercancel","pointerCancel",0],["pointerdown","pointerDown",0],["pointerup","pointerUp",0],["ratechange","rateChange",0],["reset","reset",0],["seeked","seeked",0],["submit","submit",0],["touchcancel","touchCancel",0],["touchend","touchEnd",0],["touchstart","touchStart",0],["volumechange","volumeChange",0],["drag","drag",1],["dragenter","dragEnter",1],["dragexit","dragExit",1],["dragleave","dragLeave",1],["dragover","dragOver",1],["mousemove","mouseMove",1],["mouseout","mouseOut",1],["mouseover","mouseOver",1],["pointermove","pointerMove",1],["pointerout","pointerOut",1],["pointerover","pointerOver",1],["scroll","scroll",1],["toggle","toggle",1],["touchmove","touchMove",1],["wheel","wheel",1],["abort","abort",2],[Xe,"animationEnd",2],[$e,"animationIteration",2],[Je,"animationStart",2],["canplay","canPlay",2],["canplaythrough","canPlayThrough",2],["durationchange","durationChange",2],["emptied","emptied",2],["encrypted","encrypted",2],["ended","ended",2],["error","error",2],["gotpointercapture","gotPointerCapture",2],["load","load",2],["loadeddata","loadedData",2],["loadedmetadata","loadedMetadata",2],["loadstart","loadStart",2],["lostpointercapture","lostPointerCapture",2],["playing","playing",2],["progress","progress",2],["seeking","seeking",2],["stalled","stalled",2],["suspend","suspend",2],["timeupdate","timeUpdate",2],[Ze,"transitionEnd",2],["waiting","waiting",2]],cn={},ln={},hn=0;hn<un.length;hn++){var fn=un[hn],pn=fn[0],dn=fn[1],mn=fn[2],yn="on"+(dn[0].toUpperCase()+dn.slice(1)),vn={phasedRegistrationNames:{bubbled:yn,captured:yn+"Capture"},dependencies:[pn],eventPriority:mn};cn[dn]=vn,ln[pn]=vn}var gn={eventTypes:cn,getEventPriority:function(e){return void 0!==(e=ln[e])?e.eventPriority:2},extractEvents:function(e,t,n,r){var i=ln[e];if(!i)return null;switch(e){case"keypress":if(0===zt(n))return null;case"keydown":case"keyup":e=Xt;break;case"blur":case"focus":e=Wt;break;case"click":if(2===n.button)return null;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":e=tn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":e=rn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":e=on;break;case Xe:case $e:case Je:e=Vt;break;case Ze:e=an;break;case"scroll":e=Bt;break;case"wheel":e=sn;break;case"copy":case"cut":case"paste":e=qt;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":e=nn;break;default:e=Lt}return xt(t=e.getPooled(i,t,n,r)),t}},bn=o.unstable_UserBlockingPriority,wn=o.unstable_runWithPriority,_n=gn.getEventPriority,En=10,Tn=[];function Sn(e){var t=e.targetInst,n=t;do{if(!n){e.ancestors.push(n);break}var r=n;if(3===r.tag)r=r.stateNode.containerInfo;else{for(;r.return;)r=r.return;r=3!==r.tag?null:r.stateNode.containerInfo}if(!r)break;5!==(t=n.tag)&&6!==t||e.ancestors.push(n),n=hr(r)}while(n);for(n=0;n<e.ancestors.length;n++){t=e.ancestors[n];var i=kt(e.nativeEvent);r=e.topLevelType;for(var o=e.nativeEvent,a=e.eventSystemFlags,s=null,u=0;u<f.length;u++){var c=f[u];(c=c&&c.extractEvents(r,t,o,i,a))&&(s=S(s,c))}N(s)}}var Cn=!0;function In(e,t){kn(t,e,!1)}function kn(e,t,n){switch(_n(t)){case 0:var r=function(e,t,n){ce||se();var r=An,i=ce;ce=!0;try{ae(r,e,t,n)}finally{(ce=i)||he()}}.bind(null,t,1);break;case 1:r=function(e,t,n){wn(bn,An.bind(null,e,t,n))}.bind(null,t,1);break;default:r=An.bind(null,t,1)}n?e.addEventListener(t,r,!0):e.addEventListener(t,r,!1)}function Nn(e,t,n,r){if(Tn.length){var i=Tn.pop();i.topLevelType=e,i.eventSystemFlags=t,i.nativeEvent=n,i.targetInst=r,e=i}else e={topLevelType:e,eventSystemFlags:t,nativeEvent:n,targetInst:r,ancestors:[]};try{if(t=Sn,n=e,le)t(n,void 0);else{le=!0;try{ue(t,n,void 0)}finally{le=!1,he()}}}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,Tn.length<En&&Tn.push(e)}}function An(e,t,n){if(Cn)if(0<ct.length&&-1<yt.indexOf(e))e=gt(null,e,t,n),ct.push(e);else{var r=On(e,t,n);null===r?bt(e,n):-1<yt.indexOf(e)?(e=gt(r,e,t,n),ct.push(e)):function(e,t,n,r){switch(t){case"focus":return lt=wt(lt,e,t,n,r),!0;case"dragenter":return ht=wt(ht,e,t,n,r),!0;case"mouseover":return ft=wt(ft,e,t,n,r),!0;case"pointerover":var i=r.pointerId;return pt.set(i,wt(pt.get(i)||null,e,t,n,r)),!0;case"gotpointercapture":return i=r.pointerId,dt.set(i,wt(dt.get(i)||null,e,t,n,r)),!0}return!1}(r,e,t,n)||(bt(e,n),Nn(e,t,n,null))}}function On(e,t,n){var r=kt(n);if(null!==(r=hr(r))){var i=tt(r);if(null===i)r=null;else{var o=i.tag;if(13===o){if(null!==(r=nt(i)))return r;r=null}else if(3===o){if(i.stateNode.hydrate)return 3===i.tag?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null)}}return Nn(e,t,n,r),null}function Dn(e){if(!J)return!1;var t=(e="on"+e)in document;return t||((t=document.createElement("div")).setAttribute(e,"return;"),t="function"==typeof t[e]),t}var Pn=new("function"==typeof WeakMap?WeakMap:Map);function xn(e){var t=Pn.get(e);return void 0===t&&(t=new Set,Pn.set(e,t)),t}function Rn(e,t,n){if(!n.has(e)){switch(e){case"scroll":kn(t,"scroll",!0);break;case"focus":case"blur":kn(t,"focus",!0),kn(t,"blur",!0),n.add("blur"),n.add("focus");break;case"cancel":case"close":Dn(e)&&kn(t,e,!0);break;case"invalid":case"submit":case"reset":break;default:-1===et.indexOf(e)&&In(e,t)}n.add(e)}}var Mn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ln=["Webkit","ms","Moz","O"];function Fn(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||Mn.hasOwnProperty(e)&&Mn[e]?(""+t).trim():t+"px"}function Un(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=Fn(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(Mn).forEach(function(t){Ln.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Mn[e]=Mn[t]})});var jn=m({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vn(e,t){if(t){if(jn[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(R(137,e,""));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(R(60));if(!("object"==typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML))throw Error(R(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(R(62,""))}}function qn(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Bn(e,t){var n=xn(e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument);t=s[t];for(var r=0;r<t.length;r++)Rn(t[r],e,n)}function Wn(){}function zn(t){if(void 0===(t=t||("undefined"!=typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Kn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Hn(e,t){var n,r=Kn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&t<=n)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Kn(r)}}function Qn(){for(var e=window,t=zn();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch(e){n=!1}if(!n)break;t=zn((e=t.contentWindow).document)}return t}function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var Yn="$",Xn="/$",$n="$?",Jn="$!",Zn=null,er=null;function tr(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function nr(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rr="function"==typeof setTimeout?setTimeout:void 0,ir="function"==typeof clearTimeout?clearTimeout:void 0;function or(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function ar(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Yn||n===Jn||n===$n){if(0===t)return e;t--}else n===Xn&&t++}e=e.previousSibling}return null}var sr=Math.random().toString(36).slice(2),ur="__reactInternalInstance$"+sr,cr="__reactEventHandlers$"+sr,lr="__reactContainere$"+sr;function hr(e){var t=e[ur];if(t)return t;for(var n=e.parentNode;n;){if(t=n[lr]||n[ur]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ar(e);null!==e;){if(n=e[ur])return n;e=ar(e)}return t}n=(e=n).parentNode}return null}function fr(e){return!(e=e[ur]||e[lr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function pr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(R(33))}function dr(e){return e[cr]||null}var mr=null,yr=null,vr=null;function gr(){if(vr)return vr;var e,t,n=yr,r=n.length,i="value"in mr?mr.value:mr.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return vr=i.slice(e,1<t?1-t:void 0)}var br=Lt.extend({data:null}),wr=Lt.extend({data:null}),_r=[9,13,27,32],Er=J&&"CompositionEvent"in window,Tr=null;J&&"documentMode"in document&&(Tr=document.documentMode);var Sr=J&&"TextEvent"in window&&!Tr,Cr=J&&(!Er||Tr&&8<Tr&&Tr<=11),Ir=String.fromCharCode(32),kr={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},Nr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==_r.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"blur":return!0;default:return!1}}function Or(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Dr=!1;var Pr={eventTypes:kr,extractEvents:function(e,t,n,r){var i;if(Er)e:{switch(e){case"compositionstart":var o=kr.compositionStart;break e;case"compositionend":o=kr.compositionEnd;break e;case"compositionupdate":o=kr.compositionUpdate;break e}o=void 0}else Dr?Ar(e,n)&&(o=kr.compositionEnd):"keydown"===e&&229===n.keyCode&&(o=kr.compositionStart);return i=o?(Cr&&"ko"!==n.locale&&(Dr||o!==kr.compositionStart?o===kr.compositionEnd&&Dr&&(i=gr()):(yr="value"in(mr=r)?mr.value:mr.textContent,Dr=!0)),o=br.getPooled(o,t,n,r),i?o.data=i:null!==(i=Or(n))&&(o.data=i),xt(o),o):null,(e=Sr?function(e,t){switch(e){case"compositionend":return Or(t);case"keypress":return 32!==t.which?null:(Nr=!0,Ir);case"textInput":return(e=t.data)===Ir&&Nr?null:e;default:return null}}(e,n):function(e,t){if(Dr)return"compositionend"===e||!Er&&Ar(e,t)?(e=gr(),vr=yr=mr=null,Dr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cr&&"ko"!==t.locale?null:t.data;default:return null}}(e,n))?((t=wr.getPooled(kr.beforeInput,t,n,r)).data=e,xt(t)):t=null,null===i?t:null===t?i:[i,t]}},xr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!xr[e.type]:"textarea"===t}var Mr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}};function Lr(e,t,n){return(e=Lt.getPooled(Mr.change,e,t,n)).type="change",re(n),xt(e),e}var Fr=null,Ur=null;function jr(e){N(e)}function Vr(e){if(Ce(pr(e)))return e}function qr(e,t){if("change"===e)return t}var Br=!1;function Wr(){Fr&&(Fr.detachEvent("onpropertychange",zr),Ur=Fr=null)}function zr(e){if("value"===e.propertyName&&Vr(Ur))if(e=Lr(Ur,e,kt(e)),ce)N(e);else{ce=!0;try{oe(jr,e)}finally{ce=!1,he()}}}function Kr(e,t,n){"focus"===e?(Wr(),Ur=n,(Fr=t).attachEvent("onpropertychange",zr)):"blur"===e&&Wr()}function Hr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Vr(Ur)}function Qr(e,t){if("click"===e)return Vr(t)}function Gr(e,t){if("input"===e||"change"===e)return Vr(t)}J&&(Br=Dn("input")&&(!document.documentMode||9<document.documentMode));var Yr,Xr={eventTypes:Mr,_isInputEventSupported:Br,extractEvents:function(e,t,n,r){var i=t?pr(t):window,o=i.nodeName&&i.nodeName.toLowerCase();if("select"===o||"input"===o&&"file"===i.type)var a=qr;else if(Rr(i))if(Br)a=Gr;else{a=Hr;var s=Kr}else!(o=i.nodeName)||"input"!==o.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=Qr);if(a=a&&a(e,t))return Lr(a,n,r);s&&s(e,i,t),"blur"===e&&(e=i._wrapperState)&&e.controlled&&"number"===i.type&&De(i,"number",i.value)}},$r={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout","pointerover"]}},Jr={eventTypes:$r,extractEvents:function(e,t,n,r,i){var o="mouseover"===e||"pointerover"===e,a="mouseout"===e||"pointerout"===e;if(o&&0==(32&i)&&(n.relatedTarget||n.fromElement)||!a&&!o)return null;if(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,a?(a=t,null!==(t=(t=n.relatedTarget||n.toElement)?hr(t):null)&&(t!==(o=tt(t))||5!==t.tag&&6!==t.tag)&&(t=null)):a=null,a===t)return null;if("mouseout"===e||"mouseover"===e)var s=tn,u=$r.mouseLeave,c=$r.mouseEnter,l="mouse";else"pointerout"!==e&&"pointerover"!==e||(s=nn,u=$r.pointerLeave,c=$r.pointerEnter,l="pointer");if(e=null==a?i:pr(a),i=null==t?i:pr(t),(u=s.getPooled(u,a,n,r)).type=l+"leave",u.target=e,u.relatedTarget=i,(r=s.getPooled(c,t,n,r)).type=l+"enter",r.target=i,r.relatedTarget=e,l=t,(s=a)&&l)e:{for(e=l,a=0,t=c=s;t;t=Nt(t))a++;for(t=0,i=e;i;i=Nt(i))t++;for(;0<a-t;)c=Nt(c),a--;for(;0<t-a;)e=Nt(e),t--;for(;a--;){if(c===e||c===e.alternate)break e;c=Nt(c),e=Nt(e)}c=null}else c=null;for(e=c,c=[];s&&s!==e&&(null===(a=s.alternate)||a!==e);)c.push(s),s=Nt(s);for(s=[];l&&l!==e&&(null===(a=l.alternate)||a!==e);)s.push(l),l=Nt(l);for(l=0;l<c.length;l++)Dt(c[l],"bubbled",u);for(l=s.length;0<l--;)Dt(s[l],"captured",r);return n===Yr?(Yr=null,[u]):(Yr=n,[u,r])}};var Zr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},ei=Object.prototype.hasOwnProperty;function ti(e,t){if(Zr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++)if(!ei.call(t,n[r])||!Zr(e[n[r]],t[n[r]]))return!1;return!0}var ni=J&&"documentMode"in document&&document.documentMode<=11,ri={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},ii=null,oi=null,ai=null,si=!1;function ui(e,t){var n=t.window===t?t.document:9===t.nodeType?t:t.ownerDocument;return si||null==ii||ii!==zn(n)?null:(n="selectionStart"in(n=ii)&&Gn(n)?{start:n.selectionStart,end:n.selectionEnd}:{anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},ai&&ti(ai,n)?null:(ai=n,(e=Lt.getPooled(ri.select,oi,e,t)).type="select",e.target=ii,xt(e),e))}var ci={eventTypes:ri,extractEvents:function(e,t,n,r){var i,o=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!o)){e:{o=xn(o),i=s.onSelect;for(var a=0;a<i.length;a++)if(!o.has(i[a])){o=!1;break e}o=!0}i=!o}if(i)return null;switch(o=t?pr(t):window,e){case"focus":!Rr(o)&&"true"!==o.contentEditable||(ii=o,oi=t,ai=null);break;case"blur":ai=oi=ii=null;break;case"mousedown":si=!0;break;case"contextmenu":case"mouseup":case"dragend":return si=!1,ui(n,r);case"selectionchange":if(ni)break;case"keydown":case"keyup":return ui(n,r)}return null}};A.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),a=dr,u=fr,E=pr,A.injectEventPluginsByName({SimpleEventPlugin:gn,EnterLeaveEventPlugin:Jr,ChangeEventPlugin:Xr,SelectEventPlugin:ci,BeforeInputEventPlugin:Pr}),new Set;var li=[],hi=-1;function fi(e){hi<0||(e.current=li[hi],li[hi]=null,hi--)}function pi(e,t){li[++hi]=e.current,e.current=t}var di={},mi={current:di},yi={current:!1},vi=di;function gi(e,t){var n=e.type.contextTypes;if(!n)return di;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function bi(e){return null!=(e=e.childContextTypes)}function wi(){fi(yi),fi(mi)}function _i(){fi(yi),fi(mi)}function Ei(e,t,n){if(mi.current!==di)throw Error(R(168));pi(mi,t),pi(yi,n)}function Ti(e,t,n){var r=e.stateNode;if(e=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in e))throw Error(R(108,X(t)||"Unknown",i));return m({},n,{},r)}function Si(e){var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||di,vi=mi.current,pi(mi,t),pi(yi,yi.current),!0}function Ci(e,t,n){var r=e.stateNode;if(!r)throw Error(R(169));n?(t=Ti(e,t,vi),r.__reactInternalMemoizedMergedChildContext=t,fi(yi),fi(mi),pi(mi,t)):fi(yi),pi(yi,n)}var Ii=o.unstable_runWithPriority,ki=o.unstable_scheduleCallback,Ni=o.unstable_cancelCallback,Ai=o.unstable_shouldYield,Oi=o.unstable_requestPaint,Di=o.unstable_now,Pi=o.unstable_getCurrentPriorityLevel,xi=o.unstable_ImmediatePriority,Ri=o.unstable_UserBlockingPriority,Mi=o.unstable_NormalPriority,Li=o.unstable_LowPriority,Fi=o.unstable_IdlePriority,Ui={},ji=void 0!==Oi?Oi:function(){},Vi=null,qi=null,Bi=!1,Wi=Di(),zi=Wi<1e4?Di:function(){return Di()-Wi};function Ki(){switch(Pi()){case xi:return 99;case Ri:return 98;case Mi:return 97;case Li:return 96;case Fi:return 95;default:throw Error(R(332))}}function Hi(e){switch(e){case 99:return xi;case 98:return Ri;case 97:return Mi;case 96:return Li;case 95:return Fi;default:throw Error(R(332))}}function Qi(e,t){return e=Hi(e),Ii(e,t)}function Gi(e,t,n){return e=Hi(e),ki(e,t,n)}function Yi(e){return null===Vi?(Vi=[e],qi=ki(xi,$i)):Vi.push(e),Ui}function Xi(){if(null!==qi){var e=qi;qi=null,Ni(e)}$i()}function $i(){if(!Bi&&null!==Vi){Bi=!0;var t=0;try{var n=Vi;Qi(99,function(){for(;t<n.length;t++)for(var e=n[t];null!==(e=e(!0)););}),Vi=null}catch(e){throw null!==Vi&&(Vi=Vi.slice(t+1)),ki(xi,Xi),e}finally{Bi=!1}}}var Ji=3;function Zi(e,t,n){return 1073741821-(1+((1073741821-e+t/10)/(n/=10)|0))*n}function eo(e,t){if(e&&e.defaultProps)for(var n in t=m({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}var to={current:null},no=null,ro=null,io=null;function oo(){io=ro=no=null}function ao(e,t){var n=e.type._context;pi(to,n._currentValue),n._currentValue=t}function so(e){var t=to.current;fi(to),e.type._context._currentValue=t}function uo(e,t){for(;null!==e;){var n=e.alternate;if(e.childExpirationTime<t)e.childExpirationTime=t,null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t);else{if(!(null!==n&&n.childExpirationTime<t))break;n.childExpirationTime=t}e=e.return}}function co(e,t){io=ro=null,null!==(e=(no=e).dependencies)&&null!==e.firstContext&&(e.expirationTime>=t&&(za=!0),e.firstContext=null)}function lo(e,t){if(io!==e&&!1!==t&&0!==t)if("number"==typeof t&&1073741823!==t||(io=e,t=1073741823),t={context:e,observedBits:t,next:null},null===ro){if(null===no)throw Error(R(308));ro=t,no.dependencies={expirationTime:0,firstContext:t,responders:null}}else ro=ro.next=t;return e._currentValue}var ho=!1;function fo(e){return{baseState:e,firstUpdate:null,lastUpdate:null,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function po(e){return{baseState:e.baseState,firstUpdate:e.firstUpdate,lastUpdate:e.lastUpdate,firstCapturedUpdate:null,lastCapturedUpdate:null,firstEffect:null,lastEffect:null,firstCapturedEffect:null,lastCapturedEffect:null}}function mo(e,t){return{expirationTime:e,suspenseConfig:t,tag:0,payload:null,callback:null,next:null,nextEffect:null}}function yo(e,t){null===e.lastUpdate?e.firstUpdate=e.lastUpdate=t:(e.lastUpdate.next=t,e.lastUpdate=t)}function vo(e,t){var n=e.alternate;if(null===n){var r=e.updateQueue,i=null;null===r&&(r=e.updateQueue=fo(e.memoizedState))}else r=e.updateQueue,i=n.updateQueue,null===r?null===i?(r=e.updateQueue=fo(e.memoizedState),i=n.updateQueue=fo(n.memoizedState)):r=e.updateQueue=po(i):null===i&&(i=n.updateQueue=po(r));null===i||r===i?yo(r,t):null===r.lastUpdate||null===i.lastUpdate?(yo(r,t),yo(i,t)):(yo(r,t),i.lastUpdate=t)}function go(e,t){var n=e.updateQueue;null===(n=null===n?e.updateQueue=fo(e.memoizedState):bo(e,n)).lastCapturedUpdate?n.firstCapturedUpdate=n.lastCapturedUpdate=t:(n.lastCapturedUpdate.next=t,n.lastCapturedUpdate=t)}function bo(e,t){var n=e.alternate;return null!==n&&t===n.updateQueue&&(t=e.updateQueue=po(t)),t}function wo(e,t,n,r,i,o){switch(n.tag){case 1:return"function"==typeof(e=n.payload)?e.call(o,r,i):e;case 3:e.effectTag=-4097&e.effectTag|64;case 0:if(null==(i="function"==typeof(e=n.payload)?e.call(o,r,i):e))break;return m({},r,i);case 2:ho=!0}return r}function _o(e,t,n,r,i){ho=!1;for(var o=(t=bo(e,t)).baseState,a=null,s=0,u=t.firstUpdate,c=o;null!==u;){var l=u.expirationTime;l<i?(null===a&&(a=u,o=c),s<l&&(s=l)):(Cu(l,u.suspenseConfig),c=wo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastEffect?t.firstEffect=t.lastEffect=u:(t.lastEffect.nextEffect=u,t.lastEffect=u))),u=u.next}for(l=null,u=t.firstCapturedUpdate;null!==u;){var h=u.expirationTime;h<i?(null===l&&(l=u,null===a&&(o=c)),s<h&&(s=h)):(c=wo(e,0,u,c,n,r),null!==u.callback&&(e.effectTag|=32,(u.nextEffect=null)===t.lastCapturedEffect?t.firstCapturedEffect=t.lastCapturedEffect=u:(t.lastCapturedEffect.nextEffect=u,t.lastCapturedEffect=u))),u=u.next}null===a&&(t.lastUpdate=null),null===l?t.lastCapturedUpdate=null:e.effectTag|=32,null===a&&null===l&&(o=c),t.baseState=o,t.firstUpdate=a,t.firstCapturedUpdate=l,Iu(s),e.expirationTime=s,e.memoizedState=c}function Eo(e,t,n){null!==t.firstCapturedUpdate&&(null!==t.lastUpdate&&(t.lastUpdate.next=t.firstCapturedUpdate,t.lastUpdate=t.lastCapturedUpdate),t.firstCapturedUpdate=t.lastCapturedUpdate=null),To(t.firstEffect,n),t.firstEffect=t.lastEffect=null,To(t.firstCapturedEffect,n),t.firstCapturedEffect=t.lastCapturedEffect=null}function To(e,t){for(;null!==e;){var n=e.callback;if(null!==n){e.callback=null;var r=t;if("function"!=typeof n)throw Error(R(191,n));n.call(r)}e=e.nextEffect}}var So=D.ReactCurrentBatchConfig,Co=(new r.Component).refs;function Io(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:m({},t,n),e.memoizedState=n,null!==(r=e.updateQueue)&&0===e.expirationTime&&(r.baseState=n)}var ko={isMounted:function(e){return!!(e=e._reactInternalFiber)&&tt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternalFiber;var r=pu(),i=So.suspense;(i=mo(r=du(r,e,i),i)).payload=t,null!=n&&(i.callback=n),vo(e,i),mu(e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternalFiber;var r=pu(),i=So.suspense;(i=mo(r=du(r,e,i),i)).tag=1,i.payload=t,null!=n&&(i.callback=n),vo(e,i),mu(e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternalFiber;var n=pu(),r=So.suspense;(r=mo(n=du(n,e,r),r)).tag=2,null!=t&&(r.callback=t),vo(e,r),mu(e,n)}};function No(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!ti(n,r)||!ti(i,o))}function Ao(e,t,n){var r=!1,i=di,o=t.contextType;return t=new t(n,o="object"==typeof o&&null!==o?lo(o):(i=bi(t)?vi:mi.current,(r=null!=(r=t.contextTypes))?gi(e,i):di)),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ko,(e.stateNode=t)._reactInternalFiber=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Oo(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ko.enqueueReplaceState(t,t.state,null)}function Do(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Co;var o=t.contextType;"object"==typeof o&&null!==o?i.context=lo(o):(o=bi(t)?vi:mi.current,i.context=gi(e,o)),null!==(o=e.updateQueue)&&(_o(e,o,n,i,r),i.state=e.memoizedState),"function"==typeof(o=t.getDerivedStateFromProps)&&(Io(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ko.enqueueReplaceState(i,i.state,null),null!==(o=e.updateQueue)&&(_o(e,o,n,i,r),i.state=e.memoizedState)),"function"==typeof i.componentDidMount&&(e.effectTag|=4)}var Po=Array.isArray;function xo(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(R(309));var r=n.stateNode}if(!r)throw Error(R(147,e));var i=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===i?t.ref:((t=function(e){var t=r.refs;t===Co&&(t=r.refs={}),null===e?delete t[i]:t[i]=e})._stringRef=i,t)}if("string"!=typeof e)throw Error(R(284));if(!n._owner)throw Error(R(290,e))}return e}function Ro(e,t){if("textarea"!==e.type)throw Error(R(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,""))}function Mo(h){function f(e,t){if(h){var n=e.lastEffect;null!==n?(n.nextEffect=t,e.lastEffect=t):e.firstEffect=e.lastEffect=t,t.nextEffect=null,t.effectTag=8}}function p(e,t){if(!h)return null;for(;null!==t;)f(e,t),t=t.sibling;return null}function d(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=zu(e,t)).index=0,e.sibling=null,e}function m(e,t,n){return e.index=n,h?null!==(n=e.alternate)?(n=n.index)<t?(e.effectTag=2,t):n:(e.effectTag=2,t):t}function s(e){return h&&null===e.alternate&&(e.effectTag=2),e}function o(e,t,n,r){return null===t||6!==t.tag?(t=Qu(n,e.mode,r)).return=e:(t=a(t,n)).return=e,t}function u(e,t,n,r){return null!==t&&t.elementType===n.type?(r=a(t,n.props)).ref=xo(e,t,n):(r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=Gu(n,e.mode,r)).return=e:(t=a(t,n.children||[])).return=e,t}function l(e,t,n,r,i){return null===t||7!==t.tag?(t=Hu(n,e.mode,r,i)).return=e:(t=a(t,n)).return=e,t}function y(e,t,n){if("string"==typeof t||"number"==typeof t)return(t=Qu(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case M:return(n=Ku(t.type,t.key,t.props,null,e.mode,n)).ref=xo(e,null,t),n.return=e,n;case L:return(t=Gu(t,e.mode,n)).return=e,t}if(Po(t)||Y(t))return(t=Hu(t,e.mode,n,null)).return=e,t;Ro(e,t)}return null}function v(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n||"number"==typeof n)return null!==i?null:o(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case M:return n.key===i?n.type===F?l(e,t,n.props.children,r,i):u(e,t,n,r):null;case L:return n.key===i?c(e,t,n,r):null}if(Po(n)||Y(n))return null!==i?null:l(e,t,n,r,null);Ro(e,n)}return null}function g(e,t,n,r,i){if("string"==typeof r||"number"==typeof r)return o(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case M:return e=e.get(null===r.key?n:r.key)||null,r.type===F?l(t,e,r.props.children,i,r.key):u(t,e,r,i);case L:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i)}if(Po(r)||Y(r))return l(t,e=e.get(n)||null,r,i,null);Ro(t,r)}return null}return function(e,t,n,r){var i="object"==typeof n&&null!==n&&n.type===F&&null===n.key;i&&(n=n.props.children);var o="object"==typeof n&&null!==n;if(o)switch(n.$$typeof){case M:e:{for(o=n.key,i=t;null!==i;){if(i.key===o){if(7===i.tag?n.type===F:i.elementType===n.type){p(e,i.sibling),(t=a(i,n.type===F?n.props.children:n.props)).ref=xo(e,i,n),t.return=e,e=t;break e}p(e,i);break}f(e,i),i=i.sibling}e=n.type===F?((t=Hu(n.props.children,e.mode,r,n.key)).return=e,t):((r=Ku(n.type,n.key,n.props,null,e.mode,r)).ref=xo(e,t,n),r.return=e,r)}return s(e);case L:e:{for(i=n.key;null!==t;){if(t.key===i){if(4===t.tag&&t.stateNode.containerInfo===n.containerInfo&&t.stateNode.implementation===n.implementation){p(e,t.sibling),(t=a(t,n.children||[])).return=e,e=t;break e}p(e,t);break}f(e,t),t=t.sibling}(t=Gu(n,e.mode,r)).return=e,e=t}return s(e)}if("string"==typeof n||"number"==typeof n)return n=""+n,s(e=((t=null!==t&&6===t.tag?(p(e,t.sibling),a(t,n)):(p(e,t),Qu(n,e.mode,r))).return=e,t));if(Po(n))return function(t,e,n,r){for(var i=null,o=null,a=e,s=e=0,u=null;null!==a&&s<n.length;s++){a.index>s?(u=a,a=null):u=a.sibling;var c=v(t,a,n[s],r);if(null===c){null===a&&(a=u);break}h&&a&&null===c.alternate&&f(t,a),e=m(c,e,s),null===o?i=c:o.sibling=c,o=c,a=u}if(s===n.length)return p(t,a),i;if(null===a){for(;s<n.length;s++)null!==(a=y(t,n[s],r))&&(e=m(a,e,s),null===o?i=a:o.sibling=a,o=a);return i}for(a=d(t,a);s<n.length;s++)null!==(u=g(a,t,s,n[s],r))&&(h&&null!==u.alternate&&a.delete(null===u.key?s:u.key),e=m(u,e,s),null===o?i=u:o.sibling=u,o=u);return h&&a.forEach(function(e){return f(t,e)}),i}(e,t,n,r);if(Y(n))return function(t,e,n,r){var i=Y(n);if("function"!=typeof i)throw Error(R(150));if(null==(n=i.call(n)))throw Error(R(151));for(var o=i=null,a=e,s=e=0,u=null,c=n.next();null!==a&&!c.done;s++,c=n.next()){a.index>s?(u=a,a=null):u=a.sibling;var l=v(t,a,c.value,r);if(null===l){null===a&&(a=u);break}h&&a&&null===l.alternate&&f(t,a),e=m(l,e,s),null===o?i=l:o.sibling=l,o=l,a=u}if(c.done)return p(t,a),i;if(null===a){for(;!c.done;s++,c=n.next())null!==(c=y(t,c.value,r))&&(e=m(c,e,s),null===o?i=c:o.sibling=c,o=c);return i}for(a=d(t,a);!c.done;s++,c=n.next())null!==(c=g(a,t,s,c.value,r))&&(h&&null!==c.alternate&&a.delete(null===c.key?s:c.key),e=m(c,e,s),null===o?i=c:o.sibling=c,o=c);return h&&a.forEach(function(e){return f(t,e)}),i}(e,t,n,r);if(o&&Ro(e,n),void 0===n&&!i)switch(e.tag){case 1:case 0:throw e=e.type,Error(R(152,e.displayName||e.name||"Component"))}return p(e,t)}}var Lo=Mo(!0),Fo=Mo(!1),Uo={},jo={current:Uo},Vo={current:Uo},qo={current:Uo};function Bo(e){if(e===Uo)throw Error(R(174));return e}function Wo(e,t){pi(qo,t),pi(Vo,e),pi(jo,Uo);var n=t.nodeType;switch(n){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ve(null,"");break;default:t=Ve(t=(n=8===n?t.parentNode:t).namespaceURI||null,n=n.tagName)}fi(jo),pi(jo,t)}function zo(){fi(jo),fi(Vo),fi(qo)}function Ko(e){Bo(qo.current);var t=Bo(jo.current),n=Ve(t,e.type);t!==n&&(pi(Vo,e),pi(jo,n))}function Ho(e){Vo.current===e&&(fi(jo),fi(Vo))}var Qo={current:0};function Go(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||n.data===$n||n.data===Jn))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!=(64&t.effectTag))return t}else if(null!==t.child){t=(t.child.return=t).child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function Yo(e,t){return{responder:e,props:t}}var Xo=D.ReactCurrentDispatcher,$o=D.ReactCurrentBatchConfig,Jo=0,Zo=null,ea=null,ta=null,na=null,ra=null,ia=null,oa=0,aa=null,sa=0,ua=!1,ca=null,la=0;function ha(){throw Error(R(321))}function fa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Zr(e[n],t[n]))return!1;return!0}function pa(e,t,n,r,i,o){if(Jo=o,Zo=t,ta=null!==e?e.memoizedState:null,Xo.current=null===ta?Pa:xa,t=n(r,i),ua){for(;ua=!1,la+=1,ta=null!==e?e.memoizedState:null,ia=na,aa=ra=ea=null,Xo.current=xa,t=n(r,i),ua;);ca=null,la=0}if(Xo.current=Da,(e=Zo).memoizedState=na,e.expirationTime=oa,e.updateQueue=aa,e.effectTag|=sa,e=null!==ea&&null!==ea.next,ia=ra=na=ta=ea=Zo=null,aa=null,sa=oa=Jo=0,e)throw Error(R(300));return t}function da(){Xo.current=Da,ia=ra=na=ta=ea=Zo=null,ua=!1,ca=aa=null,la=sa=oa=Jo=0}function ma(){var e={memoizedState:null,baseState:null,queue:null,baseUpdate:null,next:null};return null===ra?na=ra=e:ra=ra.next=e,ra}function ya(){if(null!==ia)ia=(ra=ia).next,ta=null!==(ea=ta)?ea.next:null;else{if(null===ta)throw Error(R(310));var e={memoizedState:(ea=ta).memoizedState,baseState:ea.baseState,queue:ea.queue,baseUpdate:ea.baseUpdate,next:null};ra=null===ra?na=e:ra.next=e,ta=ea.next}return ra}function va(e,t){return"function"==typeof t?t(e):t}function ga(e){var t=ya(),n=t.queue;if(null===n)throw Error(R(311));if(n.lastRenderedReducer=e,0<la){var r=n.dispatch;if(null!==ca){var i=ca.get(n);if(void 0!==i){ca.delete(n);for(var o=t.memoizedState;o=e(o,i.action),null!==(i=i.next););return Zr(o,t.memoizedState)||(za=!0),t.memoizedState=o,t.baseUpdate===n.last&&(t.baseState=o),[n.lastRenderedState=o,r]}}return[t.memoizedState,r]}r=n.last;var a=t.baseUpdate;if(o=t.baseState,null!==(r=null!==a?(null!==r&&(r.next=null),a.next):null!==r?r.next:null)){var s=i=null,u=r,c=!1;do{var l=u.expirationTime;l<Jo?(c||(c=!0,s=a,i=o),oa<l&&Iu(oa=l)):(Cu(l,u.suspenseConfig),o=u.eagerReducer===e?u.eagerState:e(o,u.action)),u=(a=u).next}while(null!==u&&u!==r);c||(s=a,i=o),Zr(o,t.memoizedState)||(za=!0),t.memoizedState=o,t.baseUpdate=s,t.baseState=i,n.lastRenderedState=o}return[t.memoizedState,n.dispatch]}function ba(e){var t=ma();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={last:null,dispatch:null,lastRenderedReducer:va,lastRenderedState:e}).dispatch=Oa.bind(null,Zo,e),[t.memoizedState,e]}function wa(e){return ga(va)}function _a(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===aa?(aa={lastEffect:null}).lastEffect=e.next=e:null===(t=aa.lastEffect)?aa.lastEffect=e.next=e:(n=t.next,(t.next=e).next=n,aa.lastEffect=e),e}function Ea(e,t,n,r){var i=ma();sa|=e,i.memoizedState=_a(t,n,void 0,void 0===r?null:r)}function Ta(e,t,n,r){var i=ya();r=void 0===r?null:r;var o=void 0;if(null!==ea){var a=ea.memoizedState;if(o=a.destroy,null!==r&&fa(r,a.deps))return void _a(0,n,o,r)}sa|=e,i.memoizedState=_a(t,n,o,r)}function Sa(e,t){return Ea(516,192,e,t)}function Ca(e,t){return Ta(516,192,e,t)}function Ia(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ka(){}function Na(e,t){return ma().memoizedState=[e,void 0===t?null:t],e}function Aa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Oa(e,t,n){if(!(la<25))throw Error(R(301));var r=e.alternate;if(e===Zo||null!==r&&r===Zo)if(ua=!0,e={expirationTime:Jo,suspenseConfig:null,action:n,eagerReducer:null,eagerState:null,next:null},null===ca&&(ca=new Map),void 0===(n=ca.get(t)))ca.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}else{var i=pu(),o=So.suspense;o={expirationTime:i=du(i,e,o),suspenseConfig:o,action:n,eagerReducer:null,eagerState:null,next:null};var a=t.last;if(null===a)o.next=o;else{var s=a.next;null!==s&&(o.next=s),a.next=o}if(t.last=o,0===e.expirationTime&&(null===r||0===r.expirationTime)&&null!==(r=t.lastRenderedReducer))try{var u=t.lastRenderedState,c=r(u,n);if(o.eagerReducer=r,o.eagerState=c,Zr(c,u))return}catch(e){}mu(e,i)}}var Da={readContext:lo,useCallback:ha,useContext:ha,useEffect:ha,useImperativeHandle:ha,useLayoutEffect:ha,useMemo:ha,useReducer:ha,useRef:ha,useState:ha,useDebugValue:ha,useResponder:ha,useDeferredValue:ha,useTransition:ha},Pa={readContext:lo,useCallback:Na,useContext:lo,useEffect:Sa,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ea(4,36,Ia.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ea(4,36,e,t)},useMemo:function(e,t){var n=ma();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ma();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e=(e=r.queue={last:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Oa.bind(null,Zo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ma().memoizedState=e},useState:ba,useDebugValue:ka,useResponder:Yo,useDeferredValue:function(t,n){var e=ba(t),r=e[0],i=e[1];return Sa(function(){o.unstable_next(function(){var e=$o.suspense;$o.suspense=void 0===n?null:n;try{i(t)}finally{$o.suspense=e}})},[t,n]),r},useTransition:function(n){var e=ba(!1),t=e[0],r=e[1];return[Na(function(t){r(!0),o.unstable_next(function(){var e=$o.suspense;$o.suspense=void 0===n?null:n;try{r(!1),t()}finally{$o.suspense=e}})},[n,t]),t]}},xa={readContext:lo,useCallback:Aa,useContext:lo,useEffect:Ca,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Ta(4,36,Ia.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ta(4,36,e,t)},useMemo:function(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&fa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)},useReducer:ga,useRef:function(){return ya().memoizedState},useState:wa,useDebugValue:ka,useResponder:Yo,useDeferredValue:function(t,n){var e=wa(),r=e[0],i=e[1];return Ca(function(){o.unstable_next(function(){var e=$o.suspense;$o.suspense=void 0===n?null:n;try{i(t)}finally{$o.suspense=e}})},[t,n]),r},useTransition:function(n){var e=wa(),t=e[0],r=e[1];return[Aa(function(t){r(!0),o.unstable_next(function(){var e=$o.suspense;$o.suspense=void 0===n?null:n;try{r(!1),t()}finally{$o.suspense=e}})},[n,t]),t]}},Ra=null,Ma=null,La=!1;function Fa(e,t){var n=Bu(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function Ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function ja(e){if(La){var t=Ma;if(t){var n=t;if(!Ua(e,t)){if(!(t=or(n.nextSibling))||!Ua(e,t))return e.effectTag=-1025&e.effectTag|2,La=!1,void(Ra=e);Fa(Ra,n)}Ra=e,Ma=or(t.firstChild)}else e.effectTag=-1025&e.effectTag|2,La=!1,Ra=e}}function Va(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Ra=e}function qa(e){if(e!==Ra)return!1;if(!La)return Va(e),!(La=!0);var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!nr(t,e.memoizedProps))for(t=Ma;t;)Fa(e,t),t=or(t.nextSibling);if(Va(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(R(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if(n===Xn){if(0===t){Ma=or(e.nextSibling);break e}t--}else n!==Yn&&n!==Jn&&n!==$n||t++}e=e.nextSibling}Ma=null}}else Ma=Ra?or(e.stateNode.nextSibling):null;return!0}function Ba(){Ma=Ra=null,La=!1}var Wa=D.ReactCurrentOwner,za=!1;function Ka(e,t,n,r){t.child=null===e?Fo(t,null,n,r):Lo(t,e.child,n,r)}function Ha(e,t,n,r,i){n=n.render;var o=t.ref;return co(t,i),r=pa(e,t,n,r,o,i),null===e||za?(t.effectTag|=1,Ka(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),cs(e,t,i))}function Qa(e,t,n,r,i,o){if(null!==e)return a=e.child,i<o&&(i=a.memoizedProps,(n=null!==(n=n.compare)?n:ti)(i,r)&&e.ref===t.ref)?cs(e,t,o):(t.effectTag|=1,(e=zu(a,r)).ref=t.ref,(e.return=t).child=e);var a=n.type;return"function"!=typeof a||Wu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ku(n.type,null,r,null,t.mode,o)).ref=t.ref,(e.return=t).child=e):(t.tag=15,t.type=a,Ga(e,t,a,r,i,o))}function Ga(e,t,n,r,i,o){return null!==e&&ti(e.memoizedProps,r)&&e.ref===t.ref&&(za=!1,i<o)?cs(e,t,o):Xa(e,t,n,r,o)}function Ya(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function Xa(e,t,n,r,i){var o=bi(n)?vi:mi.current;return o=gi(t,o),co(t,i),n=pa(e,t,n,r,o,i),null===e||za?(t.effectTag|=1,Ka(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.effectTag&=-517,e.expirationTime<=i&&(e.expirationTime=0),cs(e,t,i))}function $a(e,t,n,r,i){if(bi(n)){var o=!0;Si(t)}else o=!1;if(co(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),Ao(t,n,r),Do(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var u=a.context,c=n.contextType;c="object"==typeof c&&null!==c?lo(c):gi(t,c=bi(n)?vi:mi.current);var l=n.getDerivedStateFromProps,h="function"==typeof l||"function"==typeof a.getSnapshotBeforeUpdate;h||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||s===r&&u===c||Oo(t,a,r,c),ho=!1;var f=t.memoizedState;u=a.state=f;var p=t.updateQueue;null!==p&&(_o(t,p,r,a,i),u=t.memoizedState),r=s!==r||f!==u||yi.current||ho?("function"==typeof l&&(Io(t,n,l,r),u=t.memoizedState),(s=ho||No(t,n,s,r,f,u,c))?(h||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.effectTag|=4)):("function"==typeof a.componentDidMount&&(t.effectTag|=4),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,s):("function"==typeof a.componentDidMount&&(t.effectTag|=4),!1)}else a=t.stateNode,s=t.memoizedProps,a.props=t.type===t.elementType?s:eo(t.type,s),u=a.context,c="object"==typeof(c=n.contextType)&&null!==c?lo(c):gi(t,c=bi(n)?vi:mi.current),(h="function"==typeof(l=n.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s===r&&u===c||Oo(t,a,r,c)),ho=!1,u=t.memoizedState,f=a.state=u,null!==(p=t.updateQueue)&&(_o(t,p,r,a,i),f=t.memoizedState),r=s!==r||u!==f||yi.current||ho?("function"==typeof l&&(Io(t,n,l,r),f=t.memoizedState),(l=ho||No(t,n,s,r,u,f,c))?(h||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,c),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,c)),"function"==typeof a.componentDidUpdate&&(t.effectTag|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.effectTag|=256)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=c,l):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&u===e.memoizedState||(t.effectTag|=256),!1);return Ja(e,t,n,r,o,i)}function Ja(e,t,n,r,i,o){Ya(e,t);var a=0!=(64&t.effectTag);if(!r&&!a)return i&&Ci(t,n,!1),cs(e,t,o);r=t.stateNode,Wa.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.effectTag|=1,null!==e&&a?(t.child=Lo(t,e.child,null,o),t.child=Lo(t,null,s,o)):Ka(e,t,s,o),t.memoizedState=r.state,i&&Ci(t,n,!0),t.child}function Za(e){var t=e.stateNode;t.pendingContext?Ei(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ei(0,t.context,!1),Wo(e,t.containerInfo)}var es,ts,ns,rs,is={dehydrated:null,retryTime:0};function os(e,t,n){var r,i=t.mode,o=t.pendingProps,a=Qo.current,s=!1;if((r=0!=(64&t.effectTag))||(r=0!=(2&a)&&(null===e||null!==e.memoizedState)),r?(s=!0,t.effectTag&=-65):null!==e&&null===e.memoizedState||void 0===o.fallback||!0===o.unstable_avoidThisFallback||(a|=1),pi(Qo,1&a),null===e){if(void 0!==o.fallback&&ja(t),s){if(s=o.fallback,0==(2&((o=Hu(null,i,0,null)).return=t).mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Hu(s,i,n,null)).return=t,o.sibling=n,t.memoizedState=is,t.child=o,n}return i=o.children,t.memoizedState=null,t.child=Fo(t,null,i,n)}if(null!==e.memoizedState){if(i=(e=e.child).sibling,s){if(o=o.fallback,0==(2&((n=zu(e,e.pendingProps)).return=t).mode)&&(s=null!==t.memoizedState?t.child.child:t.child)!==e.child)for(n.child=s;null!==s;)s.return=n,s=s.sibling;return(i=zu(i,o,i.expirationTime)).return=t,n.sibling=i,n.childExpirationTime=0,t.memoizedState=is,t.child=n,i}return n=Lo(t,e.child,o.children,n),t.memoizedState=null,t.child=n}if(e=e.child,s){if(s=o.fallback,(o=Hu(null,i,0,null)).return=t,null!==(o.child=e)&&(e.return=o),0==(2&t.mode))for(e=null!==t.memoizedState?t.child.child:t.child,o.child=e;null!==e;)e.return=o,e=e.sibling;return(n=Hu(s,i,n,null)).return=t,(o.sibling=n).effectTag|=2,o.childExpirationTime=0,t.memoizedState=is,t.child=o,n}return t.memoizedState=null,t.child=Lo(t,e,o.children,n)}function as(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t),uo(e.return,t)}function ss(e,t,n,r,i,o){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,last:r,tail:n,tailExpiration:0,tailMode:i,lastEffect:o}:(a.isBackwards=t,a.rendering=null,a.last=r,a.tail=n,a.tailExpiration=0,a.tailMode=i,a.lastEffect=o)}function us(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Ka(e,t,r.children,n),0!=(2&(r=Qo.current)))r=1&r|2,t.effectTag|=64;else{if(null!==e&&0!=(64&e.effectTag))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&as(e,n);else if(19===e.tag)as(e,n);else if(null!==e.child){e=(e.child.return=e).child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pi(Qo,r),0==(2&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===Go(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ss(t,!1,i,n,o,t.lastEffect);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===Go(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ss(t,!0,n,null,o,t.lastEffect);break;case"together":ss(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function cs(e,t,n){null!==e&&(t.dependencies=e.dependencies);var r=t.expirationTime;if(0!==r&&Iu(r),t.childExpirationTime<n)return null;if(null!==e&&t.child!==e.child)throw Error(R(153));if(null!==t.child){for(n=zu(e=t.child,e.pendingProps,e.expirationTime),(t.child=n).return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=zu(e,e.pendingProps,e.expirationTime)).return=t;n.sibling=null}return t.child}function ls(e){e.effectTag|=4}function hs(e,t){switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fs(e){switch(e.tag){case 1:bi(e.type)&&wi();var t=e.effectTag;return 4096&t?(e.effectTag=-4097&t|64,e):null;case 3:if(zo(),_i(),0!=(64&(t=e.effectTag)))throw Error(R(285));return e.effectTag=-4097&t|64,e;case 5:return Ho(e),null;case 13:return fi(Qo),4096&(t=e.effectTag)?(e.effectTag=-4097&t|64,e):null;case 19:return fi(Qo),null;case 4:return zo(),null;case 10:return so(e),null;default:return null}}function ps(e,t){return{value:e,source:t,stack:$(t)}}es=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n=(n.child.return=n).child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ts=function(){},ns=function(e,t,n,r,i){var o=e.memoizedProps;if(o!==r){var a,s,u=t.stateNode;switch(Bo(jo.current),e=null,n){case"input":o=Ie(u,o),r=Ie(u,r),e=[];break;case"option":o=Pe(u,o),r=Pe(u,r),e=[];break;case"select":o=m({},o,{value:void 0}),r=m({},r,{value:void 0}),e=[];break;case"textarea":o=Re(u,o),r=Re(u,r),e=[];break;default:"function"!=typeof o.onClick&&"function"==typeof r.onClick&&(u.onclick=Wn)}for(a in Vn(n,r),n=null,o)if(!r.hasOwnProperty(a)&&o.hasOwnProperty(a)&&null!=o[a])if("style"===a)for(s in u=o[a])u.hasOwnProperty(s)&&((n=n||{})[s]="");else"dangerouslySetInnerHTML"!==a&&"children"!==a&&"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(y.hasOwnProperty(a)?e=e||[]:(e=e||[]).push(a,null));for(a in r){var c=r[a];if(u=null!=o?o[a]:void 0,r.hasOwnProperty(a)&&c!==u&&(null!=c||null!=u))if("style"===a)if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||((n=n||{})[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&((n=n||{})[s]=c[s])}else n||(e=e||[]).push(a,n),n=c;else"dangerouslySetInnerHTML"===a?(c=c?c.__html:void 0,u=u?u.__html:void 0,null!=c&&u!==c&&(e=e||[]).push(a,""+c)):"children"===a?u===c||"string"!=typeof c&&"number"!=typeof c||(e=e||[]).push(a,""+c):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&(y.hasOwnProperty(a)?(null!=c&&Bn(i,a),e||u===c||(e=[])):(e=e||[]).push(a,c))}n&&(e=e||[]).push("style",n),i=e,(t.updateQueue=i)&&ls(t)}},rs=function(e,t,n,r){n!==r&&ls(t)};var ds="function"==typeof WeakSet?WeakSet:Set;function ms(e,t){var n=t.source,r=t.stack;null===r&&null!==n&&(r=$(n)),null!==n&&X(n.type),t=t.value,null!==e&&1===e.tag&&X(e.type);try{console.error(t)}catch(e){setTimeout(function(){throw e})}}function ys(t){var e=t.ref;if(null!==e)if("function"==typeof e)try{e(null)}catch(e){Fu(t,e)}else e.current=null}function vs(e,t){switch(t.tag){case 0:case 11:case 15:gs(2,0,t);break;case 1:if(256&t.effectTag&&null!==e){var n=e.memoizedProps,r=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?n:eo(t.type,n),r),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}function gs(e,t,n){if(null!==(n=null!==(n=n.updateQueue)?n.lastEffect:null)){var r=n=n.next;do{if(0!=(r.tag&e)){var i=r.destroy;(r.destroy=void 0)!==i&&i()}0!=(r.tag&t)&&(i=r.create,r.destroy=i()),r=r.next}while(r!==n)}}function bs(e,r,t){switch("function"==typeof Vu&&Vu(r),r.tag){case 0:case 11:case 14:case 15:if(null!==(e=r.updateQueue)&&null!==(e=e.lastEffect)){var i=e.next;Qi(97<t?97:t,function(){var e=i;do{var t=e.destroy;if(void 0!==t){var n=r;try{t()}catch(e){Fu(n,e)}}e=e.next}while(e!==i)})}break;case 1:ys(r),"function"==typeof(t=r.stateNode).componentWillUnmount&&function(t,e){try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(e){Fu(t,e)}}(r,t);break;case 5:ys(r);break;case 4:Ts(e,r,t)}}function ws(e){var t=e.alternate;e.return=null,e.child=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.alternate=null,e.firstEffect=null,e.lastEffect=null,e.pendingProps=null,(e.memoizedProps=null)!==t&&ws(t)}function _s(e){return 5===e.tag||3===e.tag||4===e.tag}function Es(e){e:{for(var t=e.return;null!==t;){if(_s(t)){var n=t;break e}t=t.return}throw Error(R(160))}switch(t=n.stateNode,n.tag){case 5:var r=!1;break;case 3:case 4:t=t.containerInfo,r=!0;break;default:throw Error(R(161))}16&n.effectTag&&(ze(t,""),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||_s(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n=(n.child.return=n).child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var i=e;;){var o=5===i.tag||6===i.tag;if(o){var a=o?i.stateNode:i.stateNode.instance;if(n)if(r){var s=a;a=n,8===(o=t).nodeType?o.parentNode.insertBefore(s,a):o.insertBefore(s,a)}else t.insertBefore(a,n);else r?(8===(s=t).nodeType?(o=s.parentNode).insertBefore(a,s):(o=s).appendChild(a),null!=(s=s._reactRootContainer)||null!==o.onclick||(o.onclick=Wn)):t.appendChild(a)}else if(4!==i.tag&&null!==i.child){i=(i.child.return=i).child;continue}if(i===e)break;for(;null===i.sibling;){if(null===i.return||i.return===e)return;i=i.return}i.sibling.return=i.return,i=i.sibling}}function Ts(e,t,n){for(var r,i,o=t,a=!1;;){if(!a){a=o.return;e:for(;;){if(null===a)throw Error(R(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===o.tag||6===o.tag){e:for(var s=e,u=o,c=n,l=u;;)if(bs(s,l,c),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break;for(;null===l.sibling;){if(null===l.return||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=r,u=o.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):r.removeChild(o.stateNode)}else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o=(o.child.return=o).child;continue}}else if(bs(e,o,n),null!==o.child){o=(o.child.return=o).child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(a=!1)}o.sibling.return=o.return,o=o.sibling}}function Ss(e,t){switch(t.tag){case 0:case 11:case 14:case 15:gs(4,8,t);break;case 1:break;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps,i=null!==e?e.memoizedProps:r;e=t.type;var o=t.updateQueue;if((t.updateQueue=null)!==o){for(n[cr]=r,"input"===e&&"radio"===r.type&&null!=r.name&&Ne(n,r),qn(e,i),t=qn(e,r),i=0;i<o.length;i+=2){var a=o[i],s=o[i+1];"style"===a?Un(n,s):"dangerouslySetInnerHTML"===a?We(n,s):"children"===a?ze(n,s):Ee(n,a,s,t)}switch(e){case"input":Ae(n,r);break;case"textarea":Le(n,r);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!r.multiple,null!=(e=r.value)?xe(n,!!r.multiple,e,!1):t!==!!r.multiple&&(null!=r.defaultValue?xe(n,!!r.multiple,r.defaultValue,!0):xe(n,!!r.multiple,r.multiple?[]:"",!1))}}}break;case 6:if(null===t.stateNode)throw Error(R(162));t.stateNode.nodeValue=t.memoizedProps;break;case 3:(t=t.stateNode).hydrate&&(t.hydrate=!1,It(t.containerInfo));break;case 12:break;case 13:if(null===(n=t).memoizedState?r=!1:(r=!0,n=t.child,eu=zi()),null!==n)e:for(e=n;;){if(5===e.tag)o=e.stateNode,r?"function"==typeof(o=o.style).setProperty?o.setProperty("display","none","important"):o.display="none":(o=e.stateNode,i=null!=(i=e.memoizedProps.style)&&i.hasOwnProperty("display")?i.display:null,o.style.display=Fn("display",i));else if(6===e.tag)e.stateNode.nodeValue=r?"":e.memoizedProps;else{if(13===e.tag&&null!==e.memoizedState&&null===e.memoizedState.dehydrated){(o=e.child.sibling).return=e,e=o;continue}if(null!==e.child){e=(e.child.return=e).child;continue}}if(e===n)break e;for(;null===e.sibling;){if(null===e.return||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}Cs(t);break;case 19:Cs(t);break;case 17:case 20:case 21:break;default:throw Error(R(163))}}function Cs(n){var e=n.updateQueue;if(null!==e){n.updateQueue=null;var r=n.stateNode;null===r&&(r=n.stateNode=new ds),e.forEach(function(e){var t=function(e,t){var n=e.stateNode;null!==n&&n.delete(t),(t=0)===t&&(t=du(t=pu(),e,null)),null!==(e=yu(e,t))&&gu(e)}.bind(null,n,e);r.has(e)||(r.add(e),e.then(t,t))})}}var Is="function"==typeof WeakMap?WeakMap:Map;function ks(e,t,n){(n=mo(n,null)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ru||(ru=!0,iu=r),ms(e,t)},n}function Ns(t,n,e){(e=mo(e,null)).tag=3;var r=t.type.getDerivedStateFromError;if("function"==typeof r){var i=n.value;e.payload=function(){return ms(t,n),r(i)}}var o=t.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(e.callback=function(){"function"!=typeof r&&(null===ou?ou=new Set([this]):ou.add(this),ms(t,n));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})}),e}var As,Os=Math.ceil,Ds=D.ReactCurrentDispatcher,Ps=D.ReactCurrentOwner,xs=0,Rs=8,Ms=16,Ls=32,Fs=0,Us=1,js=2,Vs=3,qs=4,Bs=5,Ws=xs,zs=null,Ks=null,Hs=0,Qs=Fs,Gs=null,Ys=1073741823,Xs=1073741823,$s=null,Js=0,Zs=!1,eu=0,tu=500,nu=null,ru=!1,iu=null,ou=null,au=!1,su=null,uu=90,cu=null,lu=0,hu=null,fu=0;function pu(){return(Ws&(Ms|Ls))!==xs?1073741821-(zi()/10|0):0!==fu?fu:fu=1073741821-(zi()/10|0)}function du(e,t,n){if(0==(2&(t=t.mode)))return 1073741823;var r=Ki();if(0==(4&t))return 99===r?1073741823:1073741822;if((Ws&Ms)!==xs)return Hs;if(null!==n)e=Zi(e,0|n.timeoutMs||5e3,250);else switch(r){case 99:e=1073741823;break;case 98:e=Zi(e,150,100);break;case 97:case 96:e=Zi(e,5e3,250);break;case 95:e=2;break;default:throw Error(R(326))}return null!==zs&&e===Hs&&--e,e}function mu(e,t){if(50<lu)throw lu=0,hu=null,Error(R(185));if(null!==(e=yu(e,t))){var n=Ki();1073741823===t?(Ws&Rs)!==xs&&(Ws&(Ms|Ls))===xs?bu(e):(gu(e),Ws===xs&&Xi()):gu(e),(4&Ws)===xs||98!==n&&99!==n||(null===cu?cu=new Map([[e,t]]):(void 0===(n=cu.get(e))||t<n)&&cu.set(e,t))}}function yu(e,t){e.expirationTime<t&&(e.expirationTime=t);var n=e.alternate;null!==n&&n.expirationTime<t&&(n.expirationTime=t);var r=e.return,i=null;if(null===r&&3===e.tag)i=e.stateNode;else for(;null!==r;){if(n=r.alternate,r.childExpirationTime<t&&(r.childExpirationTime=t),null!==n&&n.childExpirationTime<t&&(n.childExpirationTime=t),null===r.return&&3===r.tag){i=r.stateNode;break}r=r.return}return null!==i&&(zs===i&&(Iu(t),Qs===qs&&$u(i,Hs)),Ju(i,t)),i}function vu(e){var t=e.lastExpiredTime;return 0!==t?t:Xu(e,t=e.firstPendingTime)?(t=e.lastPingedTime,(e=e.nextKnownPendingLevel)<t?t:e):t}function gu(e){if(0!==e.lastExpiredTime)e.callbackExpirationTime=1073741823,e.callbackPriority=99,e.callbackNode=Yi(bu.bind(null,e));else{var t=vu(e),n=e.callbackNode;if(0===t)null!==n&&(e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90);else{var r=pu();if(r=1073741823===t?99:1===t||2===t?95:(r=10*(1073741821-t)-10*(1073741821-r))<=0?99:r<=250?98:r<=5250?97:95,null!==n){var i=e.callbackPriority;if(e.callbackExpirationTime===t&&r<=i)return;n!==Ui&&Ni(n)}e.callbackExpirationTime=t,e.callbackPriority=r,t=1073741823===t?Yi(bu.bind(null,e)):Gi(r,function e(t,n){fu=0;if(n)return n=pu(),Zu(t,n),gu(t),null;var r=vu(t);if(0!==r){if(n=t.callbackNode,(Ws&(Ms|Ls))!==xs)throw Error(R(327));if(Ru(),t===zs&&r===Hs||Eu(t,r),null!==Ks){var i=Ws;Ws|=Ms;for(var o=Su();;)try{Nu();break}catch(e){Tu(t,e)}if(oo(),Ws=i,Ds.current=o,Qs===Us)throw n=Gs,Eu(t,r),$u(t,r),gu(t),n;if(null===Ks)switch(o=t.finishedWork=t.current.alternate,t.finishedExpirationTime=r,i=Qs,zs=null,i){case Fs:case Us:throw Error(R(345));case js:Zu(t,2<r?2:r);break;case Vs:if($u(t,r),i=t.lastSuspendedTime,r===i&&(t.nextKnownPendingLevel=Du(o)),1073741823===Ys&&10<(o=eu+tu-zi())){if(Zs){var a=t.lastPingedTime;if(0===a||r<=a){t.lastPingedTime=r,Eu(t,r);break}}if(0!==(a=vu(t))&&a!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}t.timeoutHandle=rr(Pu.bind(null,t),o);break}Pu(t);break;case qs:if($u(t,r),i=t.lastSuspendedTime,r===i&&(t.nextKnownPendingLevel=Du(o)),Zs&&(0===(o=t.lastPingedTime)||r<=o)){t.lastPingedTime=r,Eu(t,r);break}if(0!==(o=vu(t))&&o!==r)break;if(0!==i&&i!==r){t.lastPingedTime=i;break}if(1073741823!==Xs?i=10*(1073741821-Xs)-zi():1073741823===Ys?i=0:(i=10*(1073741821-Ys)-5e3,o=zi(),r=10*(1073741821-r)-o,(i=o-i)<0&&(i=0),i=(i<120?120:i<480?480:i<1080?1080:i<1920?1920:i<3e3?3e3:i<4320?4320:1960*Os(i/1960))-i,r<i&&(i=r)),10<i){t.timeoutHandle=rr(Pu.bind(null,t),i);break}Pu(t);break;case Bs:if(1073741823!==Ys&&null!==$s){a=Ys;var s=$s;if(10<(i=(i=0|s.busyMinDurationMs)<=0?0:(o=0|s.busyDelayMs,(a=zi()-(10*(1073741821-a)-(0|s.timeoutMs||5e3)))<=o?0:o+i-a))){$u(t,r),t.timeoutHandle=rr(Pu.bind(null,t),i);break}}Pu(t);break;default:throw Error(R(329))}if(gu(t),t.callbackNode===n)return e.bind(null,t)}}return null}.bind(null,e),{timeout:10*(1073741821-t)-zi()}),e.callbackNode=t}}}function bu(t){var e=t.lastExpiredTime;if(e=0!==e?e:1073741823,t.finishedExpirationTime===e)Pu(t);else{if((Ws&(Ms|Ls))!==xs)throw Error(R(327));if(Ru(),t===zs&&e===Hs||Eu(t,e),null!==Ks){var n=Ws;Ws|=Ms;for(var r=Su();;)try{ku();break}catch(e){Tu(t,e)}if(oo(),Ws=n,Ds.current=r,Qs===Us)throw n=Gs,Eu(t,e),$u(t,e),gu(t),n;if(null!==Ks)throw Error(R(261));t.finishedWork=t.current.alternate,t.finishedExpirationTime=e,zs=null,Pu(t),gu(t)}}return null}function wu(e,t){var n=Ws;Ws|=1;try{return e(t)}finally{(Ws=n)===xs&&Xi()}}function _u(e,t){var n=Ws;Ws&=-2,Ws|=Rs;try{return e(t)}finally{(Ws=n)===xs&&Xi()}}function Eu(e,t){e.finishedWork=null,e.finishedExpirationTime=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ir(n)),null!==Ks)for(n=Ks.return;null!==n;){var r=n;switch(r.tag){case 1:var i=r.type.childContextTypes;null!=i&&wi();break;case 3:zo(),_i();break;case 5:Ho(r);break;case 4:zo();break;case 13:case 19:fi(Qo);break;case 10:so(r)}n=n.return}Ks=zu((zs=e).current,null),Hs=t,Qs=Fs,Xs=Ys=1073741823,$s=Gs=null,Js=0,Zs=!1}function Tu(e,t){for(;;){try{if(oo(),da(),null===Ks||null===Ks.return)return Qs=Us,Gs=t,null;e:{var n=e,r=Ks.return,i=Ks,o=t;if(t=Hs,i.effectTag|=2048,i.firstEffect=i.lastEffect=null,null!==o&&"object"==typeof o&&"function"==typeof o.then){var a=o,s=0!=(1&Qo.current),u=r;do{var c;if(c=13===u.tag){var l=u.memoizedState;if(null!==l)c=null!==l.dehydrated;else{var h=u.memoizedProps;c=void 0!==h.fallback&&(!0!==h.unstable_avoidThisFallback||!s)}}if(c){var f=u.updateQueue;if(null===f){var p=new Set;p.add(a),u.updateQueue=p}else f.add(a);if(0==(2&u.mode)){if(u.effectTag|=64,i.effectTag&=-2981,1===i.tag)if(null===i.alternate)i.tag=17;else{var d=mo(1073741823,null);d.tag=2,vo(i,d)}i.expirationTime=1073741823;break e}o=void 0,i=t;var m=n.pingCache;if(null===m?(m=n.pingCache=new Is,o=new Set,m.set(a,o)):void 0===(o=m.get(a))&&(o=new Set,m.set(a,o)),!o.has(i)){o.add(i);var y=Uu.bind(null,n,a,i);a.then(y,y)}u.effectTag|=4096,u.expirationTime=t;break e}u=u.return}while(null!==u);o=Error((X(i.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+$(i))}Qs!==Bs&&(Qs=js),o=ps(o,i),u=r;do{switch(u.tag){case 3:a=o,u.effectTag|=4096,u.expirationTime=t,go(u,ks(u,a,t));break e;case 1:a=o;var v=u.type,g=u.stateNode;if(0==(64&u.effectTag)&&("function"==typeof v.getDerivedStateFromError||null!==g&&"function"==typeof g.componentDidCatch&&(null===ou||!ou.has(g)))){u.effectTag|=4096,u.expirationTime=t,go(u,Ns(u,a,t));break e}}u=u.return}while(null!==u)}Ks=Ou(Ks)}catch(e){t=e;continue}break}}function Su(){var e=Ds.current;return Ds.current=Da,null===e?Da:e}function Cu(e,t){e<Ys&&2<e&&(Ys=e),null!==t&&e<Xs&&2<e&&(Xs=e,$s=t)}function Iu(e){Js<e&&(Js=e)}function ku(){for(;null!==Ks;)Ks=Au(Ks)}function Nu(){for(;null!==Ks&&!Ai();)Ks=Au(Ks)}function Au(e){var t=As(e.alternate,e,Hs);return e.memoizedProps=e.pendingProps,null===t&&(t=Ou(e)),Ps.current=null,t}function Ou(e){Ks=e;do{var t=Ks.alternate;if(e=Ks.return,0==(2048&Ks.effectTag)){e:{var n=t,r=Hs,i=(t=Ks).pendingProps;switch(t.tag){case 2:case 16:break;case 15:case 0:break;case 1:bi(t.type)&&wi();break;case 3:zo(),_i(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==n&&null!==n.child||!qa(t)||ls(t),ts(t);break;case 5:Ho(t),r=Bo(qo.current);var o=t.type;if(null!==n&&null!=t.stateNode)ns(n,t,o,i,r),n.ref!==t.ref&&(t.effectTag|=128);else if(i){var a=Bo(jo.current);if(qa(t)){var s=(i=t).stateNode;n=i.type;var u=i.memoizedProps,c=r;switch(s[ur]=i,s[cr]=u,o=void 0,r=s,n){case"iframe":case"object":case"embed":In("load",r);break;case"video":case"audio":for(s=0;s<et.length;s++)In(et[s],r);break;case"source":In("error",r);break;case"img":case"image":case"link":In("error",r),In("load",r);break;case"form":In("reset",r),In("submit",r);break;case"details":In("toggle",r);break;case"input":ke(r,u),In("invalid",r),Bn(c,"onChange");break;case"select":r._wrapperState={wasMultiple:!!u.multiple},In("invalid",r),Bn(c,"onChange");break;case"textarea":Me(r,u),In("invalid",r),Bn(c,"onChange")}for(o in Vn(n,u),s=null,u)u.hasOwnProperty(o)&&(a=u[o],"children"===o?"string"==typeof a?r.textContent!==a&&(s=["children",a]):"number"==typeof a&&r.textContent!==""+a&&(s=["children",""+a]):y.hasOwnProperty(o)&&null!=a&&Bn(c,o));switch(n){case"input":Se(r),Oe(r,u,!0);break;case"textarea":Se(r),Fe(r);break;case"select":case"option":break;default:"function"==typeof u.onClick&&(r.onclick=Wn)}o=s,i.updateQueue=o,(i=null!==o)&&ls(t)}else{n=t,c=o,u=i,s=9===r.nodeType?r:r.ownerDocument,a===Ue.html&&(a=je(c)),a===Ue.html?"script"===c?((u=s.createElement("div")).innerHTML="<script><\/script>",s=u.removeChild(u.firstChild)):"string"==typeof u.is?s=s.createElement(c,{is:u.is}):(s=s.createElement(c),"select"===c&&(c=s,u.multiple?c.multiple=!0:u.size&&(c.size=u.size))):s=s.createElementNS(a,c),(u=s)[ur]=n,u[cr]=i,es(u,t,!1,!1),t.stateNode=u;var l=r,h=qn(c=o,n=i);switch(c){case"iframe":case"object":case"embed":In("load",u),r=n;break;case"video":case"audio":for(r=0;r<et.length;r++)In(et[r],u);r=n;break;case"source":In("error",u),r=n;break;case"img":case"image":case"link":In("error",u),In("load",u),r=n;break;case"form":In("reset",u),In("submit",u),r=n;break;case"details":In("toggle",u),r=n;break;case"input":ke(u,n),r=Ie(u,n),In("invalid",u),Bn(l,"onChange");break;case"option":r=Pe(u,n);break;case"select":u._wrapperState={wasMultiple:!!n.multiple},r=m({},n,{value:void 0}),In("invalid",u),Bn(l,"onChange");break;case"textarea":Me(u,n),r=Re(u,n),In("invalid",u),Bn(l,"onChange");break;default:r=n}Vn(c,r),s=void 0,a=c;var f=u,p=r;for(s in p)if(p.hasOwnProperty(s)){var d=p[s];"style"===s?Un(f,d):"dangerouslySetInnerHTML"===s?null!=(d=d?d.__html:void 0)&&We(f,d):"children"===s?"string"==typeof d?"textarea"===a&&""===d||ze(f,d):"number"==typeof d&&ze(f,""+d):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(y.hasOwnProperty(s)?null!=d&&Bn(l,s):null!=d&&Ee(f,s,d,h))}switch(c){case"input":Se(u),Oe(u,n,!1);break;case"textarea":Se(u),Fe(u);break;case"option":null!=n.value&&u.setAttribute("value",""+_e(n.value));break;case"select":(r=u).multiple=!!n.multiple,null!=(u=n.value)?xe(r,!!n.multiple,u,!1):null!=n.defaultValue&&xe(r,!!n.multiple,n.defaultValue,!0);break;default:"function"==typeof r.onClick&&(u.onclick=Wn)}(i=tr(o,i))&&ls(t)}null!==t.ref&&(t.effectTag|=128)}else if(null===t.stateNode)throw Error(R(166));break;case 6:if(n&&null!=t.stateNode)rs(n,t,n.memoizedProps,i);else{if("string"!=typeof i&&null===t.stateNode)throw Error(R(166));r=Bo(qo.current),Bo(jo.current),qa(t)?(o=(i=t).stateNode,r=i.memoizedProps,o[ur]=i,(i=o.nodeValue!==r)&&ls(t)):(o=t,(i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[ur]=o,t.stateNode=i)}break;case 11:break;case 13:if(fi(Qo),i=t.memoizedState,0!=(64&t.effectTag)){t.expirationTime=r;break e}i=null!==i,o=!1,null===n?void 0!==t.memoizedProps.fallback&&qa(t):(o=null!==(r=n.memoizedState),i||null===r||null!==(r=n.child.sibling)&&(null!==(u=t.firstEffect)?(t.firstEffect=r).nextEffect=u:(t.firstEffect=t.lastEffect=r,r.nextEffect=null),r.effectTag=8)),i&&!o&&0!=(2&t.mode)&&(null===n&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!=(1&Qo.current)?Qs===Fs&&(Qs=Vs):(Qs!==Fs&&Qs!==Vs||(Qs=qs),0!==Js&&null!==zs&&($u(zs,Hs),Ju(zs,Js)))),(i||o)&&(t.effectTag|=4);break;case 7:case 8:case 12:break;case 4:zo(),ts(t);break;case 10:so(t);break;case 9:case 14:break;case 17:bi(t.type)&&wi();break;case 19:if(fi(Qo),null===(i=t.memoizedState))break;if(o=0!=(64&t.effectTag),null===(u=i.rendering)){if(o)hs(i,!1);else if(Qs!==Fs||null!==n&&0!=(64&n.effectTag))for(n=t.child;null!==n;){if(null!==(u=Go(n))){for(t.effectTag|=64,hs(i,!1),null!==(o=u.updateQueue)&&(t.updateQueue=o,t.effectTag|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,o=t.child;null!==o;)n=i,(r=o).effectTag&=2,r.nextEffect=null,r.firstEffect=null,(r.lastEffect=null)===(u=r.alternate)?(r.childExpirationTime=0,r.expirationTime=n,r.child=null,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null):(r.childExpirationTime=u.childExpirationTime,r.expirationTime=u.expirationTime,r.child=u.child,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,n=u.dependencies,r.dependencies=null===n?null:{expirationTime:n.expirationTime,firstContext:n.firstContext,responders:n.responders}),o=o.sibling;pi(Qo,1&Qo.current|2),t=t.child;break e}n=n.sibling}}else{if(!o)if(null!==(n=Go(u))){if(t.effectTag|=64,o=!0,null!==(r=n.updateQueue)&&(t.updateQueue=r,t.effectTag|=4),hs(i,!0),null===i.tail&&"hidden"===i.tailMode){null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null);break}}else zi()>i.tailExpiration&&1<r&&(t.effectTag|=64,hs(i,!(o=!0)),t.expirationTime=t.childExpirationTime=r-1);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=i.last)?r.sibling=u:t.child=u,i.last=u)}if(null===i.tail)break;0===i.tailExpiration&&(i.tailExpiration=zi()+500),r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,r.sibling=null,i=Qo.current,pi(Qo,i=o?1&i|2:1&i),t=r;break e;case 20:case 21:break;default:throw Error(R(156,t.tag))}t=null}if(i=Ks,1===Hs||1!==i.childExpirationTime){for(o=0,r=i.child;null!==r;)o<(n=r.expirationTime)&&(o=n),o<(u=r.childExpirationTime)&&(o=u),r=r.sibling;i.childExpirationTime=o}if(null!==t)return t;null!==e&&0==(2048&e.effectTag)&&(null===e.firstEffect&&(e.firstEffect=Ks.firstEffect),null!==Ks.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=Ks.firstEffect),e.lastEffect=Ks.lastEffect),1<Ks.effectTag&&(null!==e.lastEffect?e.lastEffect.nextEffect=Ks:e.firstEffect=Ks,e.lastEffect=Ks))}else{if(null!==(t=fs(Ks)))return t.effectTag&=2047,t;null!==e&&(e.firstEffect=e.lastEffect=null,e.effectTag|=2048)}if(null!==(t=Ks.sibling))return t;Ks=e}while(null!==Ks);return Qs===Fs&&(Qs=Bs),null}function Du(e){var t=e.expirationTime;return(e=e.childExpirationTime)<t?t:e}function Pu(e){var t=Ki();return Qi(99,function(e,t){if(Ru(),(Ws&(Ms|Ls))!==xs)throw Error(R(327));var n=e.finishedWork,r=e.finishedExpirationTime;if(null===n)return null;if(e.finishedWork=null,e.finishedExpirationTime=0,n===e.current)throw Error(R(177));e.callbackNode=null,e.callbackExpirationTime=0,e.callbackPriority=90,e.nextKnownPendingLevel=0;var i=Du(n);if(e.firstPendingTime=i,r<=e.lastSuspendedTime?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:r<=e.firstSuspendedTime&&(e.firstSuspendedTime=r-1),r<=e.lastPingedTime&&(e.lastPingedTime=0),r<=e.lastExpiredTime&&(e.lastExpiredTime=0),e===zs&&(Ks=zs=null,Hs=0),i=1<n.effectTag?null!==n.lastEffect?(n.lastEffect.nextEffect=n,n.firstEffect):n:n.firstEffect,null!==i){var o=Ws;Ws|=Ls,Ps.current=null,Zn=Cn;var a=Qn();if(Gn(a)){if("selectionStart"in a)var s={start:a.selectionStart,end:a.selectionEnd};else e:{var u=(s=(s=a.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(u&&0!==u.rangeCount){s=u.anchorNode;var c=u.anchorOffset,l=u.focusNode;u=u.focusOffset;try{s.nodeType,l.nodeType}catch(e){s=null;break e}var h=0,f=-1,p=-1,d=0,m=0,y=a,v=null;t:for(;;){for(var g;y!==s||0!==c&&3!==y.nodeType||(f=h+c),y!==l||0!==u&&3!==y.nodeType||(p=h+u),3===y.nodeType&&(h+=y.nodeValue.length),null!==(g=y.firstChild);)v=y,y=g;for(;;){if(y===a)break t;if(v===s&&++d===c&&(f=h),v===l&&++m===u&&(p=h),null!==(g=y.nextSibling))break;v=(y=v).parentNode}y=g}s=-1===f||-1===p?null:{start:f,end:p}}else s=null}s=s||{start:0,end:0}}else s=null;Cn=!(er={focusedElem:a,selectionRange:s}),nu=i;do{try{xu()}catch(e){if(null===nu)throw Error(R(330));Fu(nu,e),nu=nu.nextEffect}}while(null!==nu);nu=i;do{try{for(a=e,s=t;null!==nu;){var b=nu.effectTag;if(16&b&&ze(nu.stateNode,""),128&b){var w=nu.alternate;if(null!==w){var _=w.ref;null!==_&&("function"==typeof _?_(null):_.current=null)}}switch(1038&b){case 2:Es(nu),nu.effectTag&=-3;break;case 6:Es(nu),nu.effectTag&=-3,Ss(nu.alternate,nu);break;case 1024:nu.effectTag&=-1025;break;case 1028:nu.effectTag&=-1025,Ss(nu.alternate,nu);break;case 4:Ss(nu.alternate,nu);break;case 8:Ts(a,c=nu,s),ws(c)}nu=nu.nextEffect}}catch(e){if(null===nu)throw Error(R(330));Fu(nu,e),nu=nu.nextEffect}}while(null!==nu);if(_=er,w=Qn(),b=_.focusedElem,s=_.selectionRange,w!==b&&b&&b.ownerDocument&&function e(t,n){return!(!t||!n)&&(t===n||(!t||3!==t.nodeType)&&(n&&3===n.nodeType?e(t,n.parentNode):"contains"in t?t.contains(n):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(n))))}(b.ownerDocument.documentElement,b)){null!==s&&Gn(b)&&(w=s.start,void 0===(_=s.end)&&(_=w),"selectionStart"in b?(b.selectionStart=w,b.selectionEnd=Math.min(_,b.value.length)):(_=(w=b.ownerDocument||document)&&w.defaultView||window).getSelection&&(_=_.getSelection(),c=b.textContent.length,a=Math.min(s.start,c),s=void 0===s.end?a:Math.min(s.end,c),!_.extend&&s<a&&(c=s,s=a,a=c),c=Hn(b,a),l=Hn(b,s),c&&l&&(1!==_.rangeCount||_.anchorNode!==c.node||_.anchorOffset!==c.offset||_.focusNode!==l.node||_.focusOffset!==l.offset)&&((w=w.createRange()).setStart(c.node,c.offset),_.removeAllRanges(),s<a?(_.addRange(w),_.extend(l.node,l.offset)):(w.setEnd(l.node,l.offset),_.addRange(w))))),w=[];for(_=b;_=_.parentNode;)1===_.nodeType&&w.push({element:_,left:_.scrollLeft,top:_.scrollTop});for("function"==typeof b.focus&&b.focus(),b=0;b<w.length;b++)(_=w[b]).element.scrollLeft=_.left,_.element.scrollTop=_.top}Cn=!!Zn,Zn=er=null,e.current=n,nu=i;do{try{for(b=r;null!==nu;){var E=nu.effectTag;if(36&E){var T=nu.alternate;switch(_=b,(w=nu).tag){case 0:case 11:case 15:gs(16,32,w);break;case 1:var S=w.stateNode;if(4&w.effectTag)if(null===T)S.componentDidMount();else{var C=w.elementType===w.type?T.memoizedProps:eo(w.type,T.memoizedProps);S.componentDidUpdate(C,T.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var I=w.updateQueue;null!==I&&Eo(0,I,S);break;case 3:var k=w.updateQueue;if(null!==k){if((a=null)!==w.child)switch(w.child.tag){case 5:a=w.child.stateNode;break;case 1:a=w.child.stateNode}Eo(0,k,a)}break;case 5:var N=w.stateNode;null===T&&4&w.effectTag&&tr(w.type,w.memoizedProps)&&N.focus();break;case 6:case 4:case 12:break;case 13:if(null===w.memoizedState){var A=w.alternate;if(null!==A){var O=A.memoizedState;if(null!==O){var D=O.dehydrated;null!==D&&It(D)}}}break;case 19:case 17:case 20:case 21:break;default:throw Error(R(163))}}if(128&E){w=void 0;var P=nu.ref;if(null!==P){var x=nu.stateNode;switch(nu.tag){case 5:w=x;break;default:w=x}"function"==typeof P?P(w):P.current=w}}nu=nu.nextEffect}}catch(e){if(null===nu)throw Error(R(330));Fu(nu,e),nu=nu.nextEffect}}while(null!==nu);nu=null,ji(),Ws=o}else e.current=n;if(au)au=!1,su=e,uu=t;else for(nu=i;null!==nu;)t=nu.nextEffect,nu.nextEffect=null,nu=t;if(0===(t=e.firstPendingTime)&&(ou=null),1073741823===t?e===hu?lu++:(lu=0,hu=e):lu=0,"function"==typeof ju&&ju(n.stateNode,r),gu(e),ru)throw ru=!1,e=iu,iu=null,e;return(Ws&Rs)!==xs||Xi(),null}.bind(null,e,t)),null}function xu(){for(;null!==nu;){var e=nu.effectTag;0!=(256&e)&&vs(nu.alternate,nu),0==(512&e)||au||(au=!0,Gi(97,function(){return Ru(),null})),nu=nu.nextEffect}}function Ru(){if(90!==uu){var e=97<uu?97:uu;return uu=90,Qi(e,Mu)}}function Mu(){if(null===su)return!1;var t=su;if(su=null,(Ws&(Ms|Ls))!==xs)throw Error(R(331));var e=Ws;for(Ws|=Ls,t=t.current.firstEffect;null!==t;){try{var n=t;if(0!=(512&n.effectTag))switch(n.tag){case 0:case 11:case 15:gs(128,0,n),gs(0,64,n)}}catch(e){if(null===t)throw Error(R(330));Fu(t,e)}n=t.nextEffect,t.nextEffect=null,t=n}return Ws=e,Xi(),!0}function Lu(e,t,n){vo(e,t=ks(e,t=ps(n,t),1073741823)),null!==(e=yu(e,1073741823))&&gu(e)}function Fu(e,t){if(3===e.tag)Lu(e,e,t);else for(var n=e.return;null!==n;){if(3===n.tag){Lu(n,e,t);break}if(1===n.tag){var r=n.stateNode;if("function"==typeof n.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===ou||!ou.has(r))){vo(n,e=Ns(n,e=ps(t,e),1073741823)),null!==(n=yu(n,1073741823))&&gu(n);break}}n=n.return}}function Uu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),zs===e&&Hs===n?Qs===qs||Qs===Vs&&1073741823===Ys&&zi()-eu<tu?Eu(e,Hs):Zs=!0:Xu(e,n)&&(0!==(t=e.lastPingedTime)&&t<n||(e.lastPingedTime=n,e.finishedExpirationTime===n&&(e.finishedExpirationTime=0,e.finishedWork=null),gu(e)))}As=function(e,t,n){var r=t.expirationTime;if(null!==e){var i=t.pendingProps;if(e.memoizedProps!==i||yi.current)za=!0;else{if(r<n){switch(za=!1,t.tag){case 3:Za(t),Ba();break;case 5:if(Ko(t),4&t.mode&&1!==n&&i.hidden)return t.expirationTime=t.childExpirationTime=1,null;break;case 1:bi(t.type)&&Si(t);break;case 4:Wo(t,t.stateNode.containerInfo);break;case 10:ao(t,t.memoizedProps.value);break;case 13:if(null!==t.memoizedState)return 0!==(r=t.child.childExpirationTime)&&n<=r?os(e,t,n):(pi(Qo,1&Qo.current),null!==(t=cs(e,t,n))?t.sibling:null);pi(Qo,1&Qo.current);break;case 19:if(r=t.childExpirationTime>=n,0!=(64&e.effectTag)){if(r)return us(e,t,n);t.effectTag|=64}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null),pi(Qo,Qo.current),!r)return null}return cs(e,t,n)}za=!1}}else za=!1;switch(t.expirationTime=0,t.tag){case 2:if(r=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,i=gi(t,mi.current),co(t,n),i=pa(null,t,r,e,i,n),t.effectTag|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof){if(t.tag=1,da(),bi(r)){var o=!0;Si(t)}else o=!1;t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null;var a=r.getDerivedStateFromProps;"function"==typeof a&&Io(t,r,a,e),i.updater=ko,Do((t.stateNode=i)._reactInternalFiber=t,r,e,n),t=Ja(null,t,r,!0,o,n)}else t.tag=0,Ka(null,t,i,n),t=t.child;return t;case 16:if(i=t.elementType,null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),e=t.pendingProps,function(t){if(-1===t._status){t._status=0;var e=t._ctor;e=e(),(t._result=e).then(function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)},function(e){0===t._status&&(t._status=2,t._result=e)})}}(i),1!==i._status)throw i._result;switch(i=i._result,t.type=i,o=t.tag=function(e){if("function"==typeof e)return Wu(e)?1:0;if(null!=e){if((e=e.$$typeof)===W)return 11;if(e===H)return 14}return 2}(i),e=eo(i,e),o){case 0:t=Xa(null,t,i,e,n);break;case 1:t=$a(null,t,i,e,n);break;case 11:t=Ha(null,t,i,e,n);break;case 14:t=Qa(null,t,i,eo(i.type,e),r,n);break;default:throw Error(R(306,i,""))}return t;case 0:return r=t.type,i=t.pendingProps,Xa(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 1:return r=t.type,i=t.pendingProps,$a(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 3:if(Za(t),null===(r=t.updateQueue))throw Error(R(282));if(i=null!==(i=t.memoizedState)?i.element:null,_o(t,r,t.pendingProps,null,n),(r=t.memoizedState.element)===i)Ba(),t=cs(e,t,n);else{if((i=t.stateNode.hydrate)&&(Ma=or(t.stateNode.containerInfo.firstChild),Ra=t,i=La=!0),i)for(n=Fo(t,null,r,n),t.child=n;n;)n.effectTag=-3&n.effectTag|1024,n=n.sibling;else Ka(e,t,r,n),Ba();t=t.child}return t;case 5:return Ko(t),null===e&&ja(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,nr(r,i)?a=null:null!==o&&nr(r,o)&&(t.effectTag|=16),Ya(e,t),t=4&t.mode&&1!==n&&i.hidden?(t.expirationTime=t.childExpirationTime=1,null):(Ka(e,t,a,n),t.child);case 6:return null===e&&ja(t),null;case 13:return os(e,t,n);case 4:return Wo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Lo(t,null,r,n):Ka(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,Ha(e,t,r,i=t.elementType===r?i:eo(r,i),n);case 7:return Ka(e,t,t.pendingProps,n),t.child;case 8:case 12:return Ka(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,ao(t,o=i.value),null!==a){var s=a.value;if(0===(o=Zr(s,o)?0:0|("function"==typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823))){if(a.children===i.children&&!yi.current){t=cs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var u=s.dependencies;if(null!==u){a=s.child;for(var c=u.firstContext;null!==c;){if(c.context===r&&0!=(c.observedBits&o)){1===s.tag&&((c=mo(n,null)).tag=2,vo(s,c)),s.expirationTime<n&&(s.expirationTime=n),null!==(c=s.alternate)&&c.expirationTime<n&&(c.expirationTime=n),uo(s.return,n),u.expirationTime<n&&(u.expirationTime=n);break}c=c.next}}else a=10===s.tag&&s.type===t.type?null:s.child;if(null!==a)a.return=s;else for(a=s;null!==a;){if(a===t){a=null;break}if(null!==(s=a.sibling)){s.return=a.return,a=s;break}a=a.return}s=a}}Ka(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=(o=t.pendingProps).children,co(t,n),r=r(i=lo(i,o.unstable_observedBits)),t.effectTag|=1,Ka(e,t,r,n),t.child;case 14:return o=eo(i=t.type,t.pendingProps),Qa(e,t,i,o=eo(i.type,o),r,n);case 15:return Ga(e,t,t.type,t.pendingProps,r,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:eo(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.effectTag|=2),t.tag=1,bi(r)?(e=!0,Si(t)):e=!1,co(t,n),Ao(t,r,i),Do(t,r,i,n),Ja(null,t,r,!0,e,n);case 19:return us(e,t,n)}throw Error(R(156,t.tag))};var ju=null,Vu=null;function qu(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childExpirationTime=this.expirationTime=0,this.alternate=null}function Bu(e,t,n,r){return new qu(e,t,n,r)}function Wu(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zu(e,t){var n=e.alternate;return null===n?((n=Bu(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,(n.alternate=e).alternate=n):(n.pendingProps=t,n.effectTag=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childExpirationTime=e.childExpirationTime,n.expirationTime=e.expirationTime,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{expirationTime:t.expirationTime,firstContext:t.firstContext,responders:t.responders},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ku(e,t,n,r,i,o){var a=2;if("function"==typeof(r=e))Wu(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case F:return Hu(n.children,i,o,t);case B:a=8,i|=7;break;case U:a=8,i|=1;break;case j:return(e=Bu(12,n,t,8|i)).elementType=j,e.type=j,e.expirationTime=o,e;case z:return(e=Bu(13,n,t,i)).type=z,e.elementType=z,e.expirationTime=o,e;case K:return(e=Bu(19,n,t,i)).elementType=K,e.expirationTime=o,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case V:a=10;break e;case q:a=9;break e;case W:a=11;break e;case H:a=14;break e;case Q:a=16,r=null;break e}throw Error(R(130,null==e?e:typeof e,""))}return(t=Bu(a,n,t,i)).elementType=e,t.type=r,t.expirationTime=o,t}function Hu(e,t,n,r){return(e=Bu(7,e,r,t)).expirationTime=n,e}function Qu(e,t,n){return(e=Bu(6,e,null,t)).expirationTime=n,e}function Gu(e,t,n){return(t=Bu(4,null!==e.children?e.children:[],e.key,t)).expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yu(e,t,n){this.tag=t,this.current=null,this.containerInfo=e,this.pingCache=this.pendingChildren=null,this.finishedExpirationTime=0,this.finishedWork=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=90,this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Xu(e,t){var n=e.firstSuspendedTime;return e=e.lastSuspendedTime,0!==n&&t<=n&&e<=t}function $u(e,t){var n=e.firstSuspendedTime,r=e.lastSuspendedTime;n<t&&(e.firstSuspendedTime=t),(t<r||0===n)&&(e.lastSuspendedTime=t),t<=e.lastPingedTime&&(e.lastPingedTime=0),t<=e.lastExpiredTime&&(e.lastExpiredTime=0)}function Ju(e,t){t>e.firstPendingTime&&(e.firstPendingTime=t);var n=e.firstSuspendedTime;0!==n&&(n<=t?e.firstSuspendedTime=e.lastSuspendedTime=e.nextKnownPendingLevel=0:t>=e.lastSuspendedTime&&(e.lastSuspendedTime=t+1),t>e.nextKnownPendingLevel&&(e.nextKnownPendingLevel=t))}function Zu(e,t){var n=e.lastExpiredTime;(0===n||t<n)&&(e.lastExpiredTime=t)}function ec(e,t,n,r){var i=t.current,o=pu(),a=So.suspense;o=du(o,i,a);e:if(n){t:{if(tt(n=n._reactInternalFiber)!==n||1!==n.tag)throw Error(R(170));var s=n;do{switch(s.tag){case 3:s=s.stateNode.context;break t;case 1:if(bi(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break t}}s=s.return}while(null!==s);throw Error(R(171))}if(1===n.tag){var u=n.type;if(bi(u)){n=Ti(n,u,s);break e}}n=s}else n=di;return null===t.context?t.context=n:t.pendingContext=n,(t=mo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vo(i,t),mu(i,o),o}function tc(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function nc(e,t){null!==(e=e.memoizedState)&&null!==e.dehydrated&&e.retryTime<t&&(e.retryTime=t)}function rc(e,t){nc(e,t),(e=e.alternate)&&nc(e,t)}function ic(e,t,n){var r=new Yu(e,t,n=null!=n&&!0===n.hydrate),i=Bu(3,null,null,2===t?7:1===t?3:0);(r.current=i).stateNode=r,e[lr]=r.current,n&&0!==t&&function(t){var n=xn(t);yt.forEach(function(e){Rn(e,t,n)}),vt.forEach(function(e){Rn(e,t,n)})}(9===e.nodeType?e:e.ownerDocument),this._internalRoot=r}function oc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ac(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"==typeof i){var s=i;i=function(){var e=tc(a);s.call(e)}}ec(t,a,e,i)}else{if(o=n._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ic(e,0,t?{hydrate:!0}:void 0)}(n,r),a=o._internalRoot,"function"==typeof i){var u=i;i=function(){var e=tc(a);u.call(e)}}_u(function(){ec(t,a,e,i)})}return tc(a)}function sc(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!oc(t))throw Error(R(200));return function(e,t,n,r){var i=3<arguments.length&&void 0!==r?r:null;return{$$typeof:L,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)}ot=function(e){if(13===e.tag){var t=Zi(pu(),150,100);mu(e,t),rc(e,t)}},at=function(e){if(13===e.tag){pu();var t=Ji++;mu(e,t),rc(e,t)}},st=function(e){if(13===e.tag){var t=pu();mu(e,t=du(t,e,null)),rc(e,t)}},Z=function(e,t,n){switch(t){case"input":if(Ae(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=dr(r);if(!i)throw Error(R(90));Ce(r),Ae(r,i)}}}break;case"textarea":Le(e,n);break;case"select":null!=(t=n.value)&&xe(e,!!n.multiple,t,!1)}},ic.prototype.render=function(e,t){ec(e,this._internalRoot,null,void 0===t?null:t)},ic.prototype.unmount=function(e){ec(null,this._internalRoot,null,void 0===e?null:e)},ae=function(e,t,n,r){var i=Ws;Ws|=4;try{return Qi(98,e.bind(null,t,n,r))}finally{(Ws=i)===xs&&Xi()}},se=function(){(Ws&(1|Ms|Ls))===xs&&(function(){if(null!==cu){var e=cu;cu=null,e.forEach(function(e,t){Zu(t,e),gu(t)}),Xi()}}(),Ru())};var uc,cc,lc={createPortal:sc,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(void 0!==t)return e=null===(e=it(t))?null:e.stateNode;if("function"==typeof e.render)throw Error(R(188));throw Error(R(268,Object.keys(e)))},hydrate:function(e,t,n){if(!oc(t))throw Error(R(200));return ac(null,e,t,!0,n)},render:function(e,t,n){if(!oc(t))throw Error(R(200));return ac(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,r){if(!oc(n))throw Error(R(200));if(null==e||void 0===e._reactInternalFiber)throw Error(R(38));return ac(e,t,n,!1,r)},unmountComponentAtNode:function(e){if(!oc(e))throw Error(R(40));return!!e._reactRootContainer&&(_u(function(){ac(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return sc.apply(void 0,arguments)},unstable_batchedUpdates:oe=wu,flushSync:function(e,t){if((Ws&(Ms|Ls))!==xs)throw Error(R(187));var n=Ws;Ws|=1;try{return Qi(99,e.bind(null,t))}finally{Ws=n,Xi()}},__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{Events:[fr,pr,dr,A.injectEventPluginsByName,p,xt,function(e){C(e,Pt)},re,ie,An,N,Ru,{current:!(ue=function(e,t){var n=Ws;Ws|=2;try{return e(t)}finally{(Ws=n)===xs&&Xi()}})}]}};cc=(uc={findFiberByHostInstance:hr,bundleType:0,version:"16.11.0",rendererPackageName:"react-dom"}).findFiberByHostInstance,function(e){if("undefined"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return;try{var n=t.inject(e);ju=function(e){try{t.onCommitFiberRoot(n,e,void 0,64==(64&e.current.effectTag))}catch(e){}},Vu=function(e){try{t.onCommitFiberUnmount(n,e)}catch(e){}}}catch(e){}}(m({},uc,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:D.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=it(e))?null:e.stateNode},findFiberByHostInstance:function(e){return cc?cc(e):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}));var hc=lc;e.exports=hc.default||hc},function(e,t,n){"use strict";e.exports=n(65)},function(e,s,t){"use strict";var o,u,c,l,n;if(Object.defineProperty(s,"__esModule",{value:!0}),"undefined"==typeof window||"function"!=typeof MessageChannel){var r=null,i=null,a=function(){if(null!==r)try{var e=s.unstable_now();r(!0,e),r=null}catch(e){throw setTimeout(a,0),e}},h=Date.now();s.unstable_now=function(){return Date.now()-h},o=function(e){null!==r?setTimeout(o,0,e):(r=e,setTimeout(a,0))},u=function(e,t){i=setTimeout(e,t)},c=function(){clearTimeout(i)},l=function(){return!1},n=s.unstable_forceFrameRate=function(){}}else{var f=window.performance,p=window.Date,d=window.setTimeout,m=window.clearTimeout,y=window.requestAnimationFrame,v=window.cancelAnimationFrame;if("undefined"!=typeof console&&("function"!=typeof y&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),"function"!=typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills")),"object"==typeof f&&"function"==typeof f.now)s.unstable_now=function(){return f.now()};else{var g=p.now();s.unstable_now=function(){return p.now()-g}}var b=!1,w=null,_=-1,E=5,T=0;l=function(){return s.unstable_now()>=T},n=function(){},s.unstable_forceFrameRate=function(e){e<0||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):E=0<e?Math.floor(1e3/e):33.33};var S=new MessageChannel,C=S.port2;S.port1.onmessage=function(){if(null!==w){var e=s.unstable_now();T=e+E;try{w(!0,e)?C.postMessage(null):(b=!1,w=null)}catch(e){throw C.postMessage(null),e}}else b=!1},o=function(e){w=e,b||(b=!0,C.postMessage(null))},u=function(e,t){_=d(function(){e(s.unstable_now())},t)},c=function(){m(_),_=-1}}function I(e,t){var n=e.length;e.push(t);e:for(;;){var r=Math.floor((n-1)/2),i=e[r];if(!(void 0!==i&&0<A(i,t)))break e;e[r]=t,e[n]=i,n=r}}function k(e){return void 0===(e=e[0])?null:e}function N(e){var t=e[0];if(void 0===t)return null;var n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length;r<i;){var o=2*(r+1)-1,a=e[o],s=1+o,u=e[s];if(void 0!==a&&A(a,n)<0)r=void 0!==u&&A(u,a)<0?(e[r]=u,e[s]=n,s):(e[r]=a,e[o]=n,o);else{if(!(void 0!==u&&A(u,n)<0))break e;e[r]=u,e[s]=n,r=s}}}return t}function A(e,t){var n=e.sortIndex-t.sortIndex;return 0!=n?n:e.id-t.id}var O=[],D=[],P=1,x=null,R=3,M=!1,L=!1,F=!1;function U(e){for(var t=k(D);null!==t;){if(null===t.callback)N(D);else{if(!(t.startTime<=e))break;N(D),t.sortIndex=t.expirationTime,I(O,t)}t=k(D)}}function j(e){if(F=!1,U(e),!L)if(null!==k(O))L=!0,o(V);else{var t=k(D);null!==t&&u(j,t.startTime-e)}}function V(e,t){L=!1,F&&(F=!1,c()),M=!0;var n=R;try{for(U(t),x=k(O);null!==x&&(!(x.expirationTime>t)||e&&!l());){var r=x.callback;if(null!==r){x.callback=null,R=x.priorityLevel;var i=r(x.expirationTime<=t);t=s.unstable_now(),"function"==typeof i?x.callback=i:x===k(O)&&N(O),U(t)}else N(O);x=k(O)}if(null!==x)var o=!0;else{var a=k(D);null!==a&&u(j,a.startTime-t),o=!1}return o}finally{x=null,R=n,M=!1}}function q(e){switch(e){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1e4;default:return 5e3}}var B=n;s.unstable_ImmediatePriority=1,s.unstable_UserBlockingPriority=2,s.unstable_NormalPriority=3,s.unstable_IdlePriority=5,s.unstable_LowPriority=4,s.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=R;R=e;try{return t()}finally{R=n}},s.unstable_next=function(e){switch(R){case 1:case 2:case 3:var t=3;break;default:t=R}var n=R;R=t;try{return e()}finally{R=n}},s.unstable_scheduleCallback=function(e,t,n){var r=s.unstable_now();if("object"==typeof n&&null!==n){var i=n.delay;i="number"==typeof i&&0<i?r+i:r,n="number"==typeof n.timeout?n.timeout:q(e)}else n=q(e),i=r;return e={id:P++,callback:t,priorityLevel:e,startTime:i,expirationTime:n=i+n,sortIndex:-1},r<i?(e.sortIndex=i,I(D,e),null===k(O)&&e===k(D)&&(F?c():F=!0,u(j,i-r))):(e.sortIndex=n,I(O,e),L||M||(L=!0,o(V))),e},s.unstable_cancelCallback=function(e){e.callback=null},s.unstable_wrapCallback=function(t){var n=R;return function(){var e=R;R=n;try{return t.apply(this,arguments)}finally{R=e}}},s.unstable_getCurrentPriorityLevel=function(){return R},s.unstable_shouldYield=function(){var e=s.unstable_now();U(e);var t=k(O);return t!==x&&null!==x&&null!==t&&null!==t.callback&&t.startTime<=e&&t.expirationTime<x.expirationTime||l()},s.unstable_requestPaint=B,s.unstable_continueExecution=function(){L||M||(L=!0,o(V))},s.unstable_pauseExecution=function(){},s.unstable_getFirstCallbackNode=function(){return k(O)},s.unstable_Profiling=null},function(e,t,n){"use strict";var s=n(67);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,i,o){if(o!==s){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}var n={array:e.isRequired=e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return n.PropTypes=n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,i=r?Symbol.for("react.element"):60103,o=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,s=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,h=r?Symbol.for("react.async_mode"):60111,f=r?Symbol.for("react.concurrent_mode"):60111,p=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,m=r?Symbol.for("react.suspense_list"):60120,y=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,w=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case a:case u:case s:case d:return e;default:switch(e=e&&e.$$typeof){case l:case p:case c:return e;default:return t}}case v:case y:case o:return t}}}function E(e){return _(e)===f}t.typeOf=_,t.AsyncMode=h,t.ConcurrentMode=f,t.ContextConsumer=l,t.ContextProvider=c,t.Element=i,t.ForwardRef=p,t.Fragment=a,t.Lazy=v,t.Memo=y,t.Portal=o,t.Profiler=u,t.StrictMode=s,t.Suspense=d,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===f||e===u||e===s||e===d||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===y||e.$$typeof===c||e.$$typeof===l||e.$$typeof===p||e.$$typeof===g||e.$$typeof===b||e.$$typeof===w)},t.isAsyncMode=function(e){return E(e)||_(e)===h},t.isConcurrentMode=E,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},t.isForwardRef=function(e){return _(e)===p},t.isFragment=function(e){return _(e)===a},t.isLazy=function(e){return _(e)===v},t.isMemo=function(e){return _(e)===y},t.isPortal=function(e){return _(e)===o},t.isProfiler=function(e){return _(e)===u},t.isStrictMode=function(e){return _(e)===s},t.isSuspense=function(e){return _(e)===d}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){(function(P){!function(e){"use strict";function t(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function n(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function y(e,t,n){y.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function v(e,t){v.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function g(e,t){g.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function b(e,t,n){b.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function w(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r),e}function _(e){var t="undefined"==typeof e?"undefined":I(e);return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":"function"==typeof e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function E(r,i,o,a,e,t,s){e=e||[],s=s||[];var u=e.slice(0);if("undefined"!=typeof t){if(a){if("function"==typeof a&&a(u,t))return;if("object"===("undefined"==typeof a?"undefined":I(a))){if(a.prefilter&&a.prefilter(u,t))return;if(a.normalize){var n=a.normalize(u,t,r,i);n&&(r=n[0],i=n[1])}}}u.push(t)}"regexp"===_(r)&&"regexp"===_(i)&&(r=r.toString(),i=i.toString());var c="undefined"==typeof r?"undefined":I(r),l="undefined"==typeof i?"undefined":I(i),h="undefined"!==c||s&&s[s.length-1].lhs&&s[s.length-1].lhs.hasOwnProperty(t),f="undefined"!==l||s&&s[s.length-1].rhs&&s[s.length-1].rhs.hasOwnProperty(t);if(!h&&f)o(new v(u,i));else if(!f&&h)o(new g(u,r));else if(_(r)!==_(i))o(new y(u,r,i));else if("date"===_(r)&&r-i!==0)o(new y(u,r,i));else if("object"===c&&null!==r&&null!==i)if(s.filter(function(e){return e.lhs===r}).length)r!==i&&o(new y(u,r,i));else{if(s.push({lhs:r,rhs:i}),Array.isArray(r)){var p;r.length;for(p=0;p<r.length;p++)p>=i.length?o(new b(u,p,new g(void 0,r[p]))):E(r[p],i[p],o,a,u,p,s);for(;p<i.length;)o(new b(u,p,new v(void 0,i[p++])))}else{var d=Object.keys(r),m=Object.keys(i);d.forEach(function(e,t){var n=m.indexOf(e);n>=0?(E(r[e],i[e],o,a,u,e,s),m=w(m,n)):E(r[e],void 0,o,a,u,e,s)}),m.forEach(function(e){E(void 0,i[e],o,a,u,e,s)})}s.length=s.length-1}else r!==i&&("number"===c&&isNaN(r)&&isNaN(i)||o(new y(u,r,i)))}function o(e,t,n,r){return r=r||[],E(e,t,function(e){e&&r.push(e)},n),r.length?r:void 0}function a(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":a(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":a(e[t],n.index,n.item);break;case"D":e=w(e,t);break;case"E":case"N":e[t]=n.rhs}return e}function i(e,t,n){if(e&&t&&n&&n.kind){for(var r=e,i=-1,o=n.path?n.path.length-1:0;++i<o;)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]="number"==typeof n.path[i]?[]:{}),r=r[n.path[i]];switch(n.kind){case"A":a(n.path?r[n.path[i]]:r,n.index,n.item);break;case"D":delete r[n.path[i]];break;case"E":case"N":r[n.path[i]]=n.rhs}}}function s(e,t,n){if(n.path&&n.path.length){var r,i=e[t],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":s(i[n.path[r]],n.index,n.item);break;case"D":i[n.path[r]]=n.lhs;break;case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":s(e[t],n.index,n.item);break;case"D":e[t]=n.lhs;break;case"E":e[t]=n.lhs;break;case"N":e=w(e,t)}return e}function r(e,t,n){if(e&&t&&n&&n.kind){var r,i,o=e;for(i=n.path.length-1,r=0;r<i;r++)"undefined"==typeof o[n.path[r]]&&(o[n.path[r]]={}),o=o[n.path[r]];switch(n.kind){case"A":s(o[n.path[r]],n.index,n.item);break;case"D":o[n.path[r]]=n.lhs;break;case"E":o[n.path[r]]=n.lhs;break;case"N":delete o[n.path[r]]}}}function u(t,n,r){if(t&&n){var e=function(e){r&&!r(t,n,e)||i(t,n,e)};E(t,n,e)}}function c(e){return"color: "+A[e].color+"; font-weight: bold"}function l(e){var t=e.kind,n=e.path,r=e.lhs,i=e.rhs,o=e.index,a=e.item;switch(t){case"E":return[n.join("."),r,"→",i];case"N":return[n.join("."),i];case"D":return[n.join(".")];case"A":return[n.join(".")+"["+o+"]",a];default:return[]}}function R(e,t,r,n){var i=o(e,t);try{n?r.groupCollapsed("diff"):r.group("diff")}catch(e){r.log("diff")}i?i.forEach(function(e){var t=e.kind,n=l(e);r.log.apply(r,["%c "+A[t].text,c(t)].concat(k(n)))}):r.log("—— no diff ——");try{r.groupEnd()}catch(e){r.log("—— diff end —— ")}}function M(e,t,n,r){switch("undefined"==typeof e?"undefined":I(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,k(n)):e[r];case"function":return e(t);default:return e}}function h(e){var i=e.timestamp,o=e.duration;return function(e,t,n){var r=["action"];return r.push("%c"+String(e.type)),i&&r.push("%c@ "+t),o&&r.push("%c(in "+n.toFixed(2)+" ms)"),r.join(" ")}}function p(S,C){var I=C.logger,k=C.actionTransformer,e=C.titleFormatter,N=void 0===e?h(C):e,A=C.collapsed,O=C.colors,D=C.level,P=C.diff,x="undefined"==typeof C.titleFormatter;S.forEach(function(e,t){var n=e.started,r=e.startedTime,i=e.action,o=e.prevState,a=e.error,s=e.took,u=e.nextState,c=S[t+1];c&&(u=c.prevState,s=c.started-n);var l=k(i),h="function"==typeof A?A(function(){return u},i,e):A,f=L(r),p=O.title?"color: "+O.title(l)+";":"",d=["color: gray; font-weight: lighter;"];d.push(p),C.timestamp&&d.push("color: gray; font-weight: lighter;"),C.duration&&d.push("color: gray; font-weight: lighter;");var m=N(l,f,s);try{h?O.title&&x?I.groupCollapsed.apply(I,["%c "+m].concat(d)):I.groupCollapsed(m):O.title&&x?I.group.apply(I,["%c "+m].concat(d)):I.group(m)}catch(e){I.log(m)}var y=M(D,l,[o],"prevState"),v=M(D,l,[l],"action"),g=M(D,l,[a,o],"error"),b=M(D,l,[u],"nextState");if(y)if(O.prevState){var w="color: "+O.prevState(o)+"; font-weight: bold";I[y]("%c prev state",w,o)}else I[y]("prev state",o);if(v)if(O.action){var _="color: "+O.action(l)+"; font-weight: bold";I[v]("%c action    ",_,l)}else I[v]("action    ",l);if(a&&g)if(O.error){var E="color: "+O.error(a,o)+"; font-weight: bold;";I[g]("%c error     ",E,a)}else I[g]("error     ",a);if(b)if(O.nextState){var T="color: "+O.nextState(u)+"; font-weight: bold";I[b]("%c next state",T,u)}else I[b]("next state",u);P&&R(o,u,I,h);try{I.groupEnd()}catch(e){I.log("—— log end ——")}})}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Object.assign({},O,e),t=a.logger,s=a.stateTransformer,u=a.errorTransformer,c=a.predicate,l=a.logErrors,h=a.diffPredicate;if("undefined"==typeof t)return function(){return function(t){return function(e){return t(e)}}};if(e.getState&&e.dispatch)return console.error("[redux-logger] redux-logger not installed. Make sure to pass logger instance as middleware:\n// Logger with default options\nimport { logger } from 'redux-logger'\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n// Or you can create your own logger with custom options http://bit.ly/redux-logger-options\nimport createLogger from 'redux-logger'\nconst logger = createLogger({\n  // ...options\n});\nconst store = createStore(\n  reducer,\n  applyMiddleware(logger)\n)\n"),function(){return function(t){return function(e){return t(e)}}};var f=[];return function(e){var o=e.getState;return function(i){return function(e){if("function"==typeof c&&!c(o,e))return i(e);var t={};f.push(t),t.started=C.now(),t.startedTime=new Date,t.prevState=s(o()),t.action=e;var n=void 0;if(l)try{n=i(e)}catch(e){t.error=u(e)}else n=i(e);t.took=C.now()-t.started,t.nextState=s(o());var r=a.diff&&"function"==typeof h?h(o,e):a.diff;if(p(f,Object.assign({},a,{diff:r})),f.length=0,t.error)throw t.error;return n}}}}var d,m,T=function(e,t){return new Array(t+1).join(e)},S=function(e,t){return T("0",t-e.toString().length)+e},L=function(e){return S(e.getHours(),2)+":"+S(e.getMinutes(),2)+":"+S(e.getSeconds(),2)+"."+S(e.getMilliseconds(),3)},C="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date,I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},N=[];d="object"===("undefined"==typeof P?"undefined":I(P))&&P?P:"undefined"!=typeof window?window:{},(m=d.DeepDiff)&&N.push(function(){"undefined"!=typeof m&&d.DeepDiff===o&&(d.DeepDiff=m,m=void 0)}),t(y,n),t(v,n),t(g,n),t(b,n),Object.defineProperties(o,{diff:{value:o,enumerable:!0},observableDiff:{value:E,enumerable:!0},applyDiff:{value:u,enumerable:!0},applyChange:{value:i,enumerable:!0},revertChange:{value:r,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof m},enumerable:!0},noConflict:{value:function(){return N&&(N.forEach(function(e){e()}),N=null),o},enumerable:!0}});var A={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}},O={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,n=e.getState;return"function"==typeof t||"function"==typeof n?f()({dispatch:t,getState:n}):void console.error("\n[redux-logger v3] BREAKING CHANGE\n[redux-logger v3] Since 3.0.0 redux-logger exports by default logger with default settings.\n[redux-logger v3] Change\n[redux-logger v3] import createLogger from 'redux-logger'\n[redux-logger v3] to\n[redux-logger v3] import { createLogger } from 'redux-logger'\n")};e.defaults=O,e.createLogger=f,e.logger=D,e.default=D,Object.defineProperty(e,"__esModule",{value:!0})}(t)}).call(this,n(27))},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e){var i=(0,o.default)(e);return{getItem:function(n){return new Promise(function(e,t){e(i.getItem(n))})},setItem:function(n,r){return new Promise(function(e,t){e(i.setItem(n,r))})},removeItem:function(n){return new Promise(function(e,t){e(i.removeItem(n))})}}};var r,o=(r=n(72))&&r.__esModule?r:{default:r}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(){}t.__esModule=!0,t.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":r(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(e){return!1}return!0}(t)?self[t]:o};var o={getItem:i,setItem:i,removeItem:i}},,function(t,e){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(e){return n(e)}:t.exports=r=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},r(e)}t.exports=r},function(n,e){function r(e,t){return n.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(e,t)}n.exports=r},,function(e,t,n){"use strict";n.r(t),function(ph){var e=n(4),dh=n.n(e);(function(){var e,o="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){e!=Array.prototype&&e!=Object.prototype&&(e[t]=n.value)},a="undefined"!=typeof window&&window===this?this:void 0!==ph&&null!=ph?ph:this;function c(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):{next:function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}(e)}}!function(e,t){if(t){var n=a;e=e.split(".");for(var r=0;r<e.length-1;r++){var i=e[r];i in n||(n[i]={}),n=n[i]}(t=t(r=n[e=e[e.length-1]]))!=r&&null!=t&&o(n,e,{configurable:!0,writable:!0,value:t})}}("Promise",function(e){function s(e){this.b=0,this.c=void 0,this.a=[];var t=this.f();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}}function t(){this.a=null}function u(t){return t instanceof s?t:new s(function(e){e(t)})}if(e)return e;t.prototype.b=function(e){if(null==this.a){this.a=[];var t=this;this.c(function(){t.g()})}this.a.push(e)};var n=a.setTimeout;t.prototype.c=function(e){n(e,0)},t.prototype.g=function(){for(;this.a&&this.a.length;){var e=this.a;this.a=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.f(e)}}}this.a=null},t.prototype.f=function(e){this.c(function(){throw e})},s.prototype.f=function(){function e(t){return function(e){r||(r=!0,t.call(n,e))}}var n=this,r=!1;return{resolve:e(this.m),reject:e(this.g)}},s.prototype.m=function(e){if(e===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.o(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.u(e):this.h(e)}},s.prototype.u=function(e){var t=void 0;try{t=e.then}catch(e){return void this.g(e)}"function"==typeof t?this.v(t,e):this.h(e)},s.prototype.g=function(e){this.i(2,e)},s.prototype.h=function(e){this.i(1,e)},s.prototype.i=function(e,t){if(0!=this.b)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.b);this.b=e,this.c=t,this.l()},s.prototype.l=function(){if(null!=this.a){for(var e=0;e<this.a.length;++e)i.b(this.a[e]);this.a=null}};var i=new t;return s.prototype.o=function(e){var t=this.f();e.La(t.resolve,t.reject)},s.prototype.v=function(e,t){var n=this.f();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},s.prototype.then=function(e,t){function n(t,e){return"function"==typeof t?function(e){try{r(t(e))}catch(e){i(e)}}:e}var r,i,o=new s(function(e,t){r=e,i=t});return this.La(n(e,r),n(t,i)),o},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.La=function(e,t){function n(){switch(r.b){case 1:e(r.c);break;case 2:t(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=u,s.reject=function(n){return new s(function(e,t){t(n)})},s.race=function(i){return new s(function(e,t){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).La(e,t)})},s.all=function(e){var o=c(e),a=o.next();return a.done?u([]):new s(function(n,e){function t(t){return function(e){r[t]=e,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(a.value).La(t(r.length-1),e),!(a=o.next()).done;);})},s});var u=u||{},h=this||self;function l(e){return"string"==typeof e}function n(e){return"boolean"==typeof e}var f=/^[\w+/_-]+[=]{0,2}$/,p=null;function s(){}function r(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function i(e){return null===e}function d(e){return"array"==r(e)}function m(e){var t=r(e);return"array"==t||"object"==t&&"number"==typeof e.length}function y(e){return"function"==r(e)}function v(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),b=0;function w(e,t,n){return e.call.apply(e.bind,arguments)}function _(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function E(e,t,n){return(E=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?w:_).apply(null,arguments)}function T(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var S=Date.now||function(){return+new Date};function t(e,o){function t(){}t.prototype=o.prototype,e.qb=o.prototype,e.prototype=new t,(e.prototype.constructor=e).gd=function(e,t,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[t].apply(e,r)}}function C(e){if(!e)return!1;try{return!!e.$goog_Thenable}catch(e){return!1}}function I(e){if(Error.captureStackTrace)Error.captureStackTrace(this,I);else{var t=Error().stack;t&&(this.stack=t)}e&&(this.message=String(e))}function k(e,t){for(var n="",r=(e=e.split("%s")).length-1,i=0;i<r;i++)n+=e[i]+(i<t.length?t[i]:"%s");I.call(this,n+e[r])}function N(e,t){throw new k("Failure"+(e?": "+e:""),Array.prototype.slice.call(arguments,1))}function A(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function O(e,t){e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}function D(){this.b=this.a=null}t(I,Error),I.prototype.name="CustomError",t(k,I),k.prototype.name="AssertionError",A.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var P=new A(function(){return new x},function(e){e.reset()});function x(){this.next=this.b=this.a=null}function R(e,t){e:{try{var n=e&&e.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||h).Element&&r.Location){var i=r;break e}}catch(e){}i=null}if(i&&void 0!==i[t]&&(!e||!(e instanceof i[t])&&(e instanceof i.Location||e instanceof i.Element))){if(v(e))try{var o=e.constructor.displayName||e.constructor.name||Object.prototype.toString.call(e)}catch(e){o="<object could not be stringified>"}else o=void 0===e?"undefined":null===e?"null":typeof e;N("Argument is not a %s (or a non-Element, non-Location mock); got: %s",t,o)}}D.prototype.add=function(e,t){var n=P.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},x.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null},x.prototype.reset=function(){this.next=this.b=this.a=null};var M=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(l(e))return l(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},L=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=l(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};var F=Array.prototype.map?function(e,t){return Array.prototype.map.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=Array(n),i=l(e)?e.split(""):e,o=0;o<n;o++)o in i&&(r[o]=t.call(void 0,i[o],o,e));return r},U=Array.prototype.some?function(e,t){return Array.prototype.some.call(e,t,void 0)}:function(e,t){for(var n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e))return!0;return!1};function j(e,t){return 0<=M(e,t)}function V(e,t){var n;return(n=0<=(t=M(e,t)))&&Array.prototype.splice.call(e,t,1),n}function q(n,r){!function(e,t){for(var n=l(e)?e.split(""):e,r=e.length-1;0<=r;--r)r in n&&t.call(void 0,n[r],r,e)}(n,function(e,t){r.call(void 0,e,t,n)&&1==Array.prototype.splice.call(n,t,1).length&&0})}function B(e){return Array.prototype.concat.apply([],arguments)}function W(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function z(e,t){for(var n in e)t.call(void 0,e[n],n,e)}function K(e){for(var t in e)return!1;return!0}function H(e){var t,n={};for(t in e)n[t]=e[t];return n}var Q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function G(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<Q.length;o++)n=Q[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Y(e,t){this.a=e===J&&t||"",this.b=$}function X(e){return e instanceof Y&&e.constructor===Y&&e.b===$?e.a:(N("expected object of type Const, got '"+e+"'"),"type_error:Const")}Y.prototype.qa=!0,Y.prototype.pa=function(){return this.a},Y.prototype.toString=function(){return"Const{"+this.a+"}"};var $={},J={},Z=new Y(J,"");function ee(){this.a="",this.b=oe}function te(e){return e instanceof ee&&e.constructor===ee&&e.b===oe?e.a:(N("expected object of type TrustedResourceUrl, got '"+e+"' of type "+r(e)),"type_error:TrustedResourceUrl")}function ne(e,n){var r=X(e);if(!ie.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return ae(e=r.replace(re,function(e,t){if(!Object.prototype.hasOwnProperty.call(n,t))throw Error('Found marker, "'+t+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(e=n[t])instanceof Y?X(e):encodeURIComponent(String(e))}))}ee.prototype.qa=!0,ee.prototype.pa=function(){return this.a.toString()},ee.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var re=/%{(\w+)}/g,ie=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,oe={};function ae(e){var t=new ee;return t.a=e,t}var se=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]},ue=/&/g,ce=/</g,le=/>/g,he=/"/g,fe=/'/g,pe=/\x00/g,de=/[\x00&<>"']/;function me(e,t){return-1!=e.indexOf(t)}function ye(e,t){return e<t?-1:t<e?1:0}function ve(){this.a="",this.b=Ee}function ge(e){return e instanceof ve&&e.constructor===ve&&e.b===Ee?e.a:(N("expected object of type SafeUrl, got '"+e+"' of type "+r(e)),"type_error:SafeUrl")}ve.prototype.qa=!0,ve.prototype.pa=function(){return this.a.toString()},ve.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var be=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function we(e){return e instanceof ve?e:(e="object"==typeof e&&e.qa?e.pa():String(e),be.test(e)||(e="about:invalid#zClosurez"),Te(e))}var _e,Ee={};function Te(e){var t=new ve;return t.a=e,t}Te("about:blank");e:{var Se=h.navigator;if(Se){var Ce=Se.userAgent;if(Ce){_e=Ce;break e}}_e=""}function Ie(e){return me(_e,e)}function ke(){this.a="",this.b=Ae}function Ne(e){return e instanceof ke&&e.constructor===ke&&e.b===Ae?e.a:(N("expected object of type SafeHtml, got '"+e+"' of type "+r(e)),"type_error:SafeHtml")}ke.prototype.qa=!0,ke.prototype.pa=function(){return this.a.toString()},ke.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ae={};function Oe(e){var t=new ke;return t.a=e,t}Oe("<!DOCTYPE html>");var De,Pe,xe=Oe("");function Re(e,t){for(var n=e.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Me(e){return de.test(e)&&(-1!=e.indexOf("&")&&(e=e.replace(ue,"&amp;")),-1!=e.indexOf("<")&&(e=e.replace(ce,"&lt;")),-1!=e.indexOf(">")&&(e=e.replace(le,"&gt;")),-1!=e.indexOf('"')&&(e=e.replace(he,"&quot;")),-1!=e.indexOf("'")&&(e=e.replace(fe,"&#39;")),-1!=e.indexOf("\0")&&(e=e.replace(pe,"&#0;"))),e}function Le(e){h.setTimeout(function(){throw e},0)}function Fe(){var e=h.MessageChannel;if(void 0===e&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!Ie("Presto")&&(e=function(){var e=document.createElement("IFRAME");e.style.display="none",function(e){var t=ae(X(Z));R(e,"HTMLIFrameElement"),e.src=te(t).toString()}(e),document.documentElement.appendChild(e);var t=e.contentWindow;(e=t.document).open(),e.write(Ne(xe)),e.close();var n="callImmediate"+Math.random(),r="file:"==t.location.protocol?"*":t.location.protocol+"//"+t.location.host;e=E(function(e){"*"!=r&&e.origin!=r||e.data!=n||this.port1.onmessage()},this),t.addEventListener("message",e,!1),this.port1={},this.port2={postMessage:function(){t.postMessage(n,r)}}}),void 0===e||Ie("Trident")||Ie("MSIE"))return"undefined"!=typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(e){var t=document.createElement("SCRIPT");t.onreadystatechange=function(){t.onreadystatechange=null,t.parentNode.removeChild(t),t=null,e(),e=null},document.documentElement.appendChild(t)}:function(e){h.setTimeout(e,0)};var t=new e,n={},r=n;return t.port1.onmessage=function(){if(void 0!==n.next){var e=(n=n.next).yb;n.yb=null,e()}},function(e){r.next={yb:e},r=r.next,t.port2.postMessage(0)}}function Ue(e,t){Pe||function(){if(h.Promise&&h.Promise.resolve){var e=h.Promise.resolve(void 0);Pe=function(){e.then(qe)}}else Pe=function(){var e=qe;!y(h.setImmediate)||h.Window&&h.Window.prototype&&!Ie("Edge")&&h.Window.prototype.setImmediate==h.setImmediate?(De=De||Fe())(e):h.setImmediate(e)}}(),je||(Pe(),je=!0),Ve.add(e,t)}Oe("<br>");var je=!1,Ve=new D;function qe(){for(var e;n=t=void 0,n=null,(t=Ve).a&&(n=t.a,t.a=t.a.next,t.a||(t.b=null),n.next=null),e=n;){try{e.a.call(e.b)}catch(e){Le(e)}O(P,e)}var t,n;je=!1}function Be(e,t){if(this.a=We,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,e!=s)try{var n=this;e.call(t,function(e){tt(n,ze,e)},function(e){if(!(e instanceof ut))try{if(e instanceof Error)throw e;throw Error("Promise rejected.")}catch(e){}tt(n,Ke,e)})}catch(e){tt(this,Ke,e)}}var We=0,ze=2,Ke=3;function He(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}He.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Qe=new A(function(){return new He},function(e){e.reset()});function Ge(e,t,n){var r=Qe.get();return r.g=e,r.b=t,r.f=n,r}function Ye(e){if(e instanceof Be)return e;var t=new Be(s);return tt(t,ze,e),t}function Xe(n){return new Be(function(e,t){t(n)})}function $e(e,t,n){nt(e,t,n,null)||Ue(T(t,e))}function Je(n){return new Be(function(r){var i=n.length,o=[];if(i)for(var e=function(e,t,n){i--,o[e]=t?{Gb:!0,value:n}:{Gb:!1,reason:n},0==i&&r(o)},t=0;t<n.length;t++)$e(n[t],T(e,t,!0),T(e,t,!1));else r(o)})}function Ze(e,t){e.b||e.a!=ze&&e.a!=Ke||rt(e),e.f?e.f.next=t:e.b=t,e.f=t}function et(e,i,o,a){var t=Ge(null,null,null);return t.a=new Be(function(n,r){t.g=i?function(e){try{var t=i.call(a,e);n(t)}catch(e){r(e)}}:n,t.b=o?function(e){try{var t=o.call(a,e);void 0===t&&e instanceof ut?r(e):n(t)}catch(e){r(e)}}:r}),Ze(t.a.c=e,t),t.a}function tt(e,t,n){e.a==We&&(e===n&&(t=Ke,n=new TypeError("Promise cannot resolve to itself")),e.a=1,nt(n,e.Oc,e.Pc,e)||(e.i=n,e.a=t,e.c=null,rt(e),t!=Ke||n instanceof ut||function(e,t){e.g=!0,Ue(function(){e.g&&st.call(null,t)})}(e,n)))}function nt(e,t,n,r){if(e instanceof Be)return Ze(e,Ge(t||s,n||null,r)),!0;if(C(e))return e.then(t,n,r),!0;if(v(e))try{var i=e.then;if(y(i))return function(e,t,n,r,i){function o(e){a||(a=!0,r.call(i,e))}var a=!1;try{t.call(e,function(e){a||(a=!0,n.call(i,e))},o)}catch(e){o(e)}}(e,i,t,n,r),!0}catch(e){return n.call(r,e),!0}return!1}function rt(e){e.h||(e.h=!0,Ue(e.Zb,e))}function it(e){var t=null;return e.b&&(t=e.b,e.b=t.next,t.next=null),e.b||(e.f=null),t}function ot(e,t,n,r){if(n==Ke&&t.b&&!t.c)for(;e&&e.g;e=e.c)e.g=!1;if(t.a)t.a.c=null,at(t,n,r);else try{t.c?t.g.call(t.f):at(t,n,r)}catch(e){st.call(null,e)}O(Qe,t)}function at(e,t,n){t==ze?e.g.call(e.f,n):e.b&&e.b.call(e.f,n)}Be.prototype.then=function(e,t,n){return et(this,y(e)?e:null,y(t)?t:null,n)},Be.prototype.$goog_Thenable=!0,(e=Be.prototype).ka=function(e,t){return(e=Ge(e,e,t)).c=!0,Ze(this,e),this},e.s=function(e,t){return et(this,null,e,t)},e.cancel=function(e){this.a==We&&Ue(function(){!function e(t,n){if(t.a==We)if(t.c){var r=t.c;if(r.b){for(var i=0,o=null,a=null,s=r.b;s&&(s.c||(i++,s.a==t&&(o=s),!(o&&1<i)));s=s.next)o||(a=s);o&&(r.a==We&&1==i?e(r,n):(a?((i=a).next==r.f&&(r.f=i),i.next=i.next.next):it(r),ot(r,o,Ke,n)))}t.c=null}else tt(t,Ke,n)}(this,new ut(e))},this)},e.Oc=function(e){this.a=We,tt(this,ze,e)},e.Pc=function(e){this.a=We,tt(this,Ke,e)},e.Zb=function(){for(var e;e=it(this);)ot(this,e,this.a,this.i);this.h=!1};var st=Le;function ut(e){I.call(this,e)}function ct(){0!=lt&&(ht[this[g]||(this[g]=++b)]=this),this.va=this.va,this.la=this.la}t(ut,I);var lt=0,ht={};function ft(e){if(!e.va&&(e.va=!0,e.za(),0!=lt)){var t=e[g]||(e[g]=++b);if(0!=lt&&e.la&&0<e.la.length)throw Error(e+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ht[t]}}function pt(e){return pt[" "](e),e}ct.prototype.va=!(ut.prototype.name="cancel"),ct.prototype.za=function(){if(this.la)for(;this.la.length;)this.la.shift()()},pt[" "]=s;var dt,mt,yt=Ie("Opera"),vt=Ie("Trident")||Ie("MSIE"),gt=Ie("Edge"),bt=gt||vt,wt=Ie("Gecko")&&!(me(_e.toLowerCase(),"webkit")&&!Ie("Edge"))&&!(Ie("Trident")||Ie("MSIE"))&&!Ie("Edge"),_t=me(_e.toLowerCase(),"webkit")&&!Ie("Edge");function Et(){var e=h.document;return e?e.documentMode:void 0}e:{var Tt="",St=(mt=_e,wt?/rv:([^\);]+)(\)|;)/.exec(mt):gt?/Edge\/([\d\.]+)/.exec(mt):vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(mt):_t?/WebKit\/(\S+)/.exec(mt):yt?/(?:Version)[ \/]?(\S+)/.exec(mt):void 0);if(St&&(Tt=St?St[1]:""),vt){var Ct=Et();if(null!=Ct&&Ct>parseFloat(Tt)){dt=String(Ct);break e}}dt=Tt}var It,kt={};function Nt(s){return function(e,t){var n=kt;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(s,function(){for(var e=0,t=se(String(dt)).split("."),n=se(String(s)).split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=ye(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||ye(0==o[2].length,0==a[2].length)||ye(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}It=h.document&&vt?Et():void 0;var At=Object.freeze||function(e){return e},Ot=!vt||9<=Number(It),Dt=vt&&!Nt("9"),Pt=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",s,t),h.removeEventListener("test",s,t)}catch(e){}return e}();function xt(e,t){this.type=e,this.b=this.target=t,this.Mb=!0}function Rt(e,t){if(xt.call(this,e?e.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.b=t,t=e.relatedTarget){if(wt){e:{try{pt(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=l(e.pointerType)?e.pointerType:Mt[e.pointerType]||"",(this.a=e).defaultPrevented&&this.preventDefault()}}xt.prototype.preventDefault=function(){this.Mb=!1},t(Rt,xt);var Mt=At({2:"touch",3:"pen",4:"mouse"});Rt.prototype.preventDefault=function(){Rt.qb.preventDefault.call(this);var e=this.a;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,Dt)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}},Rt.prototype.f=function(){return this.a};var Lt="closure_listenable_"+(1e6*Math.random()|0),Ft=0;function Ut(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.Pa=i,this.key=++Ft,this.ta=this.Ka=!1}function jt(e){e.ta=!0,e.listener=null,e.proxy=null,e.src=null,e.Pa=null}function Vt(e){this.src=e,this.a={},this.b=0}function qt(e,t){var n=t.type;n in e.a&&V(e.a[n],t)&&(jt(t),0==e.a[n].length&&(delete e.a[n],e.b--))}function Bt(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ta&&o.listener==t&&o.capture==!!n&&o.Pa==r)return i}return-1}Vt.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=Bt(e,t,r,i);return-1<a?(t=e[a],n||(t.Ka=!1)):((t=new Ut(t,this.src,o,!!r,i)).Ka=n,e.push(t)),t};var Wt="closure_lm_"+(1e6*Math.random()|0),zt={};function Kt(e,t,n,r,i){if(r&&r.once)Qt(e,t,n,r,i);else if(d(t))for(var o=0;o<t.length;o++)Kt(e,t[o],n,r,i);else n=nn(n),e&&e[Lt]?on(e,t,n,v(r)?!!r.capture:!!r,i):Ht(e,t,n,!1,r,i)}function Ht(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=en(e);if(s||(e[Wt]=s=new Vt(e)),!(n=s.add(t,n,r,a,o)).proxy){if(r=function(){var t=Zt,n=Ot?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)Pt||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Xt(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}0}}function Qt(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Qt(e,t[o],n,r,i);else n=nn(n),e&&e[Lt]?an(e,t,n,v(r)?!!r.capture:!!r,i):Ht(e,t,n,!0,r,i)}function Gt(e,t,n,r,i){if(d(t))for(var o=0;o<t.length;o++)Gt(e,t[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=nn(n),e&&e[Lt]?(e=e.u,(t=String(t).toString())in e.a&&(-1<(n=Bt(o=e.a[t],n,r,i))&&(jt(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.a[t],e.b--)))):(e=e&&en(e))&&(t=e.a[t.toString()],e=-1,t&&(e=Bt(t,n,r,i)),(n=-1<e?t[e]:null)&&Yt(n))}function Yt(e){if("number"!=typeof e&&e&&!e.ta){var t=e.src;if(t&&t[Lt])qt(t.u,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Xt(n),r):t.addListener&&t.removeListener&&t.removeListener(r),0,(n=en(t))?(qt(n,e),0==n.b&&(n.src=null,t[Wt]=null)):jt(e)}}}function Xt(e){return e in zt?zt[e]:zt[e]="on"+e}function $t(e,t,n,r){var i=!0;if((e=en(e))&&(t=e.a[t.toString()]))for(t=t.concat(),e=0;e<t.length;e++){var o=t[e];o&&o.capture==n&&!o.ta&&(o=Jt(o,r),i=i&&!1!==o)}return i}function Jt(e,t){var n=e.listener,r=e.Pa||e.src;return e.Ka&&Yt(e),n.call(r,t)}function Zt(e,t){if(e.ta)return!0;if(Ot)return Jt(e,new Rt(t,this));if(!t)e:{t=["window","event"];for(var n=h,r=0;r<t.length;r++)if(null==(n=n[t[r]])){t=null;break e}t=n}if(t=new Rt(r=t,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){e:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break e}catch(e){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=t.b;i;i=i.parentNode)r.push(i);for(e=e.type,i=r.length-1;0<=i;i--){t.b=r[i];var o=$t(r[i],e,!0,t);n=n&&o}for(i=0;i<r.length;i++)t.b=r[i],o=$t(r[i],e,!1,t),n=n&&o}return n}function en(e){return(e=e[Wt])instanceof Vt?e:null}var tn="__closure_events_fn_"+(1e9*Math.random()>>>0);function nn(t){return y(t)?t:(t[tn]||(t[tn]=function(e){return t.handleEvent(e)}),t[tn])}function rn(){ct.call(this),this.u=new Vt(this),(this.Sb=this).Xa=null}function on(e,t,n,r,i){e.u.add(String(t),n,!1,r,i)}function an(e,t,n,r,i){e.u.add(String(t),n,!0,r,i)}function sn(e,t,n,r){if(!(t=e.u.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ta&&a.capture==n){var s=a.listener,u=a.Pa||a.src;a.Ka&&qt(e.u,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Mb}function un(e,t,n){if(y(e))n&&(e=E(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=E(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function cn(n){var r=null;return new Be(function(e,t){-1==(r=un(function(){e(void 0)},n))&&t(Error("Failed to schedule timer."))}).s(function(e){throw h.clearTimeout(r),e})}function ln(e){if(e.U&&"function"==typeof e.U)return e.U();if(l(e))return e.split("");if(m(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}function hn(e){if(e.X&&"function"==typeof e.X)return e.X();if(!e.U||"function"!=typeof e.U){if(m(e)||l(e)){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}function fn(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof fn)for(n=e.X(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function pn(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];dn(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)dn(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function dn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t(rn,ct),rn.prototype[Lt]=!0,rn.prototype.addEventListener=function(e,t,n,r){Kt(this,e,t,n,r)},rn.prototype.removeEventListener=function(e,t,n,r){Gt(this,e,t,n,r)},rn.prototype.dispatchEvent=function(e){var t,n=this.Xa;if(n)for(t=[];n;n=n.Xa)t.push(n);n=this.Sb;var r=e.type||e;if(l(e))e=new xt(e,n);else if(e instanceof xt)e.target=e.target||n;else{var i=e;G(e=new xt(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.b=t[o];i=sn(a,r,!0,e)&&i}if(i=sn(a=e.b=n,r,!0,e)&&i,i=sn(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=sn(a=e.b=t[o],r,!1,e)&&i;return i},rn.prototype.za=function(){if(rn.qb.za.call(this),this.u){var e,t=this.u;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)0,jt(n[r]);delete t.a[e],t.b--}}this.Xa=null},(e=fn.prototype).U=function(){pn(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},e.X=function(){return pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(e,t){return dn(this.b,e)?this.b[e]:t},e.set=function(e,t){dn(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},e.forEach=function(e,t){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var mn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function yn(e,t){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,e instanceof yn?(this.h=void 0!==t?t:e.h,vn(this,e.f),this.i=e.i,this.b=e.b,gn(this,e.l),this.c=e.c,bn(this,Un(e.a)),this.g=e.g):e&&(n=String(e).match(mn))?(this.h=!!t,vn(this,n[1]||"",!0),this.i=Sn(n[2]||""),this.b=Sn(n[3]||"",!0),gn(this,n[4]),this.c=Sn(n[5]||"",!0),bn(this,n[6]||"",!0),this.g=Sn(n[7]||"")):(this.h=!!t,this.a=new Pn(null,this.h))}function vn(e,t,n){e.f=n?Sn(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function gn(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.l=t}else e.l=null}function bn(e,t,n){t instanceof Pn?(e.a=t,function(e,t){t&&!e.f&&(xn(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Mn(this,t),Fn(this,n,e))},e)),e.f=t}(e.a,e.h)):(n||(t=Cn(t,On)),e.a=new Pn(t,e.h))}function wn(e,t,n){e.a.set(t,n)}function _n(e,t){return e.a.get(t)}function En(e){return e instanceof yn?new yn(e):new yn(e,void 0)}function Tn(e,t){var n=new yn(null,void 0);return vn(n,"https"),e&&(n.b=e),t&&(n.c=t),n}function Sn(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Cn(e,t,n){return l(e)?(e=encodeURI(e).replace(t,In),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function In(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yn.prototype.toString=function(){var e=[],t=this.f;t&&e.push(Cn(t,kn,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.i)&&e.push(Cn(t,kn,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&e.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(Cn(n,"/"==n.charAt(0)?An:Nn,!0))),(n=this.a.toString())&&e.push("?",n),(n=this.g)&&e.push("#",Cn(n,Dn)),e.join("")},yn.prototype.resolve=function(e){var t=new yn(this),n=!!e.f;n?vn(t,e.f):n=!!e.i,n?t.i=e.i:n=!!e.b,n?t.b=e.b:n=null!=e.l;var r=e.c;if(n)gn(t,e.l);else if(n=!!e.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=t.c.lastIndexOf("/");-1!=i&&(r=t.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(me(i,"./")||me(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.c=r:n=""!==e.a.toString(),n?bn(t,Un(e.a)):n=!!e.g,n&&(t.g=e.g),t};var kn=/[#\/\?@]/g,Nn=/[#\?:]/g,An=/[#\?]/g,On=/[#\?@]/g,Dn=/#/g;function Pn(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function xn(n){n.a||(n.a=new fn,n.b=0,n.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Rn(e){var t=hn(e);if(void 0===t)throw Error("Keys are undefined");var n=new Pn(null,void 0);e=ln(e);for(var r=0;r<t.length;r++){var i=t[r],o=e[r];d(o)?Fn(n,i,o):n.add(i,o)}return n}function Mn(e,t){xn(e),t=jn(e,t),dn(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,dn((e=e.a).b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&pn(e)))}function Ln(e,t){return xn(e),t=jn(e,t),dn(e.a.b,t)}function Fn(e,t,n){Mn(e,t),0<n.length&&(e.c=null,e.a.set(jn(e,t),W(n)),e.b+=n.length)}function Un(e){var t=new Pn;return t.c=e.c,e.a&&(t.a=new fn(e.a),t.b=e.b),t}function jn(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}(e=Pn.prototype).add=function(e,t){xn(this),this.c=null,e=jn(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(n,r){xn(this),this.a.forEach(function(e,t){L(e,function(e){n.call(r,e,t,this)},this)},this)},e.X=function(){xn(this);for(var e=this.a.U(),t=this.a.X(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},e.U=function(e){xn(this);var t=[];if(l(e))Ln(this,e)&&(t=B(t,this.a.get(jn(this,e))));else{e=this.a.U();for(var n=0;n<e.length;n++)t=B(t,e[n])}return t},e.set=function(e,t){return xn(this),this.c=null,Ln(this,e=jn(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},e.get=function(e,t){return e&&0<(e=this.U(e)).length?String(e[0]):t},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.X(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.U(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")};var Vn=!vt||9<=Number(It);function qn(e){var t=document;return l(e)?t.getElementById(e):e}function Bn(n,e){z(e,function(e,t){e&&"object"==typeof e&&e.qa&&(e=e.pa()),"style"==t?n.style.cssText=e:"class"==t?n.className=e:"for"==t?n.htmlFor=e:Wn.hasOwnProperty(t)?n.setAttribute(Wn[t],e):0==t.lastIndexOf("aria-",0)||0==t.lastIndexOf("data-",0)?n.setAttribute(t,e):n[t]=e})}var Wn={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function zn(e,t,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!Vn&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Me(a.name),'"'),a.type){o.push(' type="',Me(a.type),'"');var s={};G(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=i.createElement(o),a&&(l(a)?o.className=a:d(a)?o.className=a.join(" "):Bn(o,a)),2<r.length&&function(t,n,e){function r(e){e&&n.appendChild(l(e)?t.createTextNode(e):e)}for(var i=2;i<e.length;i++){var o=e[i];!m(o)||v(o)&&0<o.nodeType?r(o):L(Kn(o)?W(o):o,r)}}(i,o,r),o}function Kn(e){if(e&&"number"==typeof e.length){if(v(e))return"function"==typeof e.item||"string"==typeof e.item;if(y(e))return"function"==typeof e.item}return!1}function Hn(e){var t=[];return function e(t,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(d(n)){var i=n;n=i.length,r.push("[");for(var o="",a=0;a<n;a++)r.push(o),e(t,i[a],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(a=n[i])&&(r.push(o),Xn(i,r),r.push(":"),e(t,a,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Xn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Qn,e,t),t.join("")}function Qn(){}var Gn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Yn=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Xn(e,t){t.push('"',e.replace(Yn,function(e){var t=Gn[e];return t||(t="\\u"+(65536|e.charCodeAt(0)).toString(16).substr(1),Gn[e]=t),t}),'"')}function $n(){var e=yr();return vt&&!!It&&11==It||/Edge\/\d+/.test(e)}function Jn(){return h.window&&h.window.location.href||self&&self.location&&self.location.href||""}function Zn(e,t){t=t||h.window;var n="about:blank";e&&(n=ge(we(e)).toString()),t.location.href=n}function er(e){return!!((e=(e||yr()).toLowerCase()).match(/android/)||e.match(/webos/)||e.match(/iphone|ipad|ipod/)||e.match(/blackberry/)||e.match(/windows phone/)||e.match(/iemobile/))}function tr(e){e=e||h.window;try{e.close()}catch(e){}}function nr(e,t,n){var r=Math.floor(1e9*Math.random()).toString();t=t||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-t)/2;for(a in t={width:t,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(t.target=r,me(n,"crios/")&&(t.target="_blank")),pr(yr())==hr&&(e=e||"http://localhost",t.scrollbars=!0),n=e||"",(e=t)||(e={}),r=window,t=n instanceof ve?n:we(void 0!==n.href?n.href:String(n)),n=e.target||n.target,i=[],e)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+e[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(e[a]?1:0))}var a=i.join(",");if((Ie("iPhone")&&!Ie("iPod")&&!Ie("iPad")||Ie("iPad")||Ie("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(R(a=r.document.createElement("A"),"HTMLAnchorElement"),t instanceof ve||t instanceof ve||(t="object"==typeof t&&t.qa?t.pa():String(t),be.test(t)||(t="about:invalid#zClosurez"),t=Te(t)),a.href=ge(t),a.setAttribute("target",n),e.noreferrer&&a.setAttribute("rel","noreferrer"),(e=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(e),a={}):e.noreferrer?(a=r.open("",n,a),e=ge(t).toString(),a&&(bt&&me(e,";")&&(e="'"+e.replace(/'/g,"%27")+"'"),a.opener=null,e=Oe('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Me(e)+'">'),a.document.write(Ne(e)),a.document.close())):(a=r.open(ge(t).toString(),n,a))&&e.noopener&&(a.opener=null),a)try{a.focus()}catch(e){}return a}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var t=null;return new Be(function(e){"complete"==h.document.readyState?e():(t=function(){e()},Qt(window,"load",t))}).s(function(e){throw Gt(window,"load",t),e})}function ar(e){return e=e||yr(),!("file:"!==_r()&&"ionic:"!==_r()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function sr(){var e=h.window;try{return!(!e||e==e.top)}catch(e){return!1}}function ur(){return void 0!==h.WorkerGlobalScope&&"function"==typeof h.importScripts}function cr(){return dh.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":dh.a.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function lr(){var e=cr();return"ReactNative"===e||"Node"===e}var hr="Firefox",fr="Chrome";function pr(e){var t=e.toLowerCase();return me(t,"opera/")||me(t,"opr/")||me(t,"opios/")?"Opera":me(t,"iemobile")?"IEMobile":me(t,"msie")||me(t,"trident/")?"IE":me(t,"edge/")?"Edge":me(t,"firefox/")?hr:me(t,"silk/")?"Silk":me(t,"blackberry")?"Blackberry":me(t,"webos")?"Webos":!me(t,"safari/")||me(t,"chrome/")||me(t,"crios/")||me(t,"android")?!me(t,"chrome/")&&!me(t,"crios/")||me(t,"edge/")?me(t,"android")?"Android":(e=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==e.length?e[1]:"Other":fr:"Safari"}var dr={Wc:"FirebaseCore-web",Yc:"FirebaseUI-web"};function mr(e,t){t=t||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<t.length;n++)void 0!==i[t[n]]&&(delete i[t[n]],r.push(t[n]));return r.sort(),(t=r).length||(t=["FirebaseCore-web"]),"Browser"===(r=cr())?r=pr(i=yr()):"Worker"===r&&(r=pr(i=yr())+"-"+r),r+"/JsCore/"+e+"/"+t.join(",")}function yr(){return h.navigator&&h.navigator.userAgent||""}function vr(e,t){e=e.split("."),t=t||h;for(var n=0;n<e.length&&"object"==typeof t&&null!=t;n++)t=t[e[n]];return n!=e.length&&(t=void 0),t}function gr(){try{var e=h.localStorage,t=Ir();if(e)return e.setItem(t,"1"),e.removeItem(t),!$n()||!!h.indexedDB}catch(e){return ur()&&!!h.indexedDB}return!1}function br(){return(wr()||"chrome-extension:"===_r()||ar())&&!lr()&&gr()&&!ur()}function wr(){return"http:"===_r()||"https:"===_r()}function _r(){return h.location&&h.location.protocol||null}function Er(e){return!er(e=e||yr())&&pr(e)!=hr}function Tr(e){return void 0===e?null:Hn(e)}function Sr(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&null!==e[t]&&void 0!==e[t]&&(n[t]=e[t]);return n}function Cr(e){if(null!==e)return JSON.parse(e)}function Ir(e){return e||Math.floor(1e9*Math.random()).toString()}function kr(e){return"Safari"!=pr(e=e||yr())&&!e.toLowerCase().match(/iphone|ipad|ipod/)}function Nr(){var e=h.___jsl;if(e&&e.H)for(var t in e.H)if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=e.H[t].L.concat(),e.CP)for(var n=0;n<e.CP.length;n++)e.CP[n]=null}function Ar(e,t){if(t<e)throw Error("Short delay should be less than long delay!");this.a=e,this.c=t,e=yr(),t=cr(),this.b=er(e)||"ReactNative"===t}function Or(){var e=h.document;return!e||void 0===e.visibilityState||"visible"==e.visibilityState}function Dr(e){try{var t=new Date(parseInt(e,10));if(!isNaN(t.getTime())&&!/[^0-9]/.test(e))return t.toUTCString()}catch(e){}return null}function Pr(){return!(!vr("fireauth.oauthhelper",h)&&!vr("fireauth.iframe",h))}Ar.prototype.get=function(){var e=h.navigator;return!e||"boolean"!=typeof e.onLine||!wr()&&"chrome-extension:"!==_r()&&void 0===e.connection||e.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Rr={};function Mr(e){Rr[e]||(Rr[e]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e))}try{var Lr={};Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Lr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Lr.abcd}catch(e){xr=!1}function Fr(e,t,n){xr?Object.defineProperty(e,t,{configurable:!0,enumerable:!0,value:n}):e[t]=n}function Ur(e,t){if(t)for(var n in t)t.hasOwnProperty(n)&&Fr(e,n,t[n])}function jr(e){var t={};return Ur(t,e),t}function Vr(e){var t=e;if("object"==typeof e&&null!=e)for(var n in t="length"in e?[]:{},e)Fr(t,n,Vr(e[n]));return t}function qr(e){var t={},n=e[Wr],r=e[zr];if(!(e=e[Kr])||e!=Br&&!n)throw Error("Invalid provider user info!");t[Qr]=r||null,t[Hr]=n||null,Fr(this,Yr,e),Fr(this,Gr,Vr(t))}var Br="EMAIL_SIGNIN",Wr="email",zr="newEmail",Kr="requestType",Hr="email",Qr="fromEmail",Gr="data",Yr="operation";function Xr(e,t){this.code=Jr+e,this.message=t||Zr[e]||""}function $r(e){var t=e&&e.code;return t?new Xr(t.substring(Jr.length),e.message):null}t(Xr,Error),Xr.prototype.A=function(){return{code:this.code,message:this.message}},Xr.prototype.toJSON=function(){return this.A()};var Jr="auth/",Zr={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."};function ei(e){var t=_n(e=En(e),ti)||null,n=_n(e,ni)||null,r=_n(e,oi)||null;if(r=r&&si[r]||null,!t||!n||!r)throw new Xr("argument-error",ti+", "+ni+"and "+oi+" are required in a valid action code URL.");Ur(this,{apiKey:t,operation:r,code:n,continueUrl:_n(e,ri)||null,languageCode:_n(e,ii)||null,tenantId:_n(e,ai)||null})}var ti="apiKey",ni="oobCode",ri="continueUrl",ii="languageCode",oi="mode",ai="tenantId",si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",signIn:Br,verifyEmail:"VERIFY_EMAIL"};function ui(e){try{return new ei(e)}catch(e){return null}}function ci(e){var t=e[di];if(void 0===t)throw new Xr("missing-continue-uri");if("string"!=typeof t||"string"==typeof t&&!t.length)throw new Xr("invalid-continue-uri");this.h=t,this.b=this.a=null,this.g=!1;var n=e[li];if(n&&"object"==typeof n){t=n[vi];var r=n[mi];if(n=n[yi],"string"==typeof t&&t.length){if(this.a=t,void 0!==r&&"boolean"!=typeof r)throw new Xr("argument-error",mi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new Xr("argument-error",yi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==t)throw new Xr("argument-error",vi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new Xr("missing-android-pkg-name")}}else if(void 0!==n)throw new Xr("argument-error",li+" property must be a non null object when specified.");if(this.f=null,(t=e[pi])&&"object"==typeof t){if("string"==typeof(t=t[gi])&&t.length)this.f=t;else if(void 0!==t)throw new Xr("argument-error",gi+" property must be a non empty string when specified.")}else if(void 0!==t)throw new Xr("argument-error",pi+" property must be a non null object when specified.");if(void 0!==(t=e[fi])&&"boolean"!=typeof t)throw new Xr("argument-error",fi+" property must be a boolean when specified.");if(this.c=!!t,void 0!==(e=e[hi])&&("string"!=typeof e||"string"==typeof e&&!e.length))throw new Xr("argument-error",hi+" property must be a non empty string when specified.");this.i=e||null}var li="android",hi="dynamicLinkDomain",fi="handleCodeInApp",pi="iOS",di="url",mi="installApp",yi="minimumVersion",vi="packageName",gi="bundleId";function bi(e){var t={};for(var n in t.continueUrl=e.h,t.canHandleCodeInApp=e.c,(t.androidPackageName=e.a)&&(t.androidMinimumVersion=e.b,t.androidInstallApp=e.g),t.iOSBundleId=e.f,t.dynamicLinkDomain=e.i,t)null===t[n]&&delete t[n];return t}var wi=null,_i=null;function Ei(e){var t="";return function(r,e){function t(e){for(;i<r.length;){var t=r.charAt(i++),n=_i[t];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(t))throw Error("Unknown base64 encoding at char: "+t)}return e}!function(){if(!wi){wi={},_i={};for(var e=0;e<65;e++)wi[e]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(e),62<=(_i[wi[e]]=e)&&(_i["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.".charAt(e)]=e)}}();for(var i=0;;){var n=t(-1),o=t(0),a=t(64),s=t(64);if(64===s&&-1===n)break;e(n<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(e,function(e){t+=String.fromCharCode(e)}),t}function Ti(e){this.f=e.sub,S(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.c=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Si(e){return(e=Ci(e))&&e.sub&&e.iss&&e.aud&&e.exp?new Ti(e):null}function Ci(e){if(!e)return null;if(3!=(e=e.split(".")).length)return null;for(var t=(4-(e=e[1]).length%4)%4,n=0;n<t;n++)e+=".";try{return JSON.parse(Ei(e))}catch(e){}return null}Ti.prototype.R=function(){return this.c},Ti.prototype.g=function(){return this.b};var Ii,ki={bd:{cb:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://securetoken.googleapis.com/v1/token",id:"p"},dd:{cb:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",ib:"https://staging-securetoken.sandbox.googleapis.com/v1/token",id:"s"},ed:{cb:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",ib:"https://test-securetoken.sandbox.googleapis.com/v1/token",id:"t"}};function Ni(e){for(var t in ki)if(ki[t].id===e)return{firebaseEndpoint:(e=ki[t]).cb,secureTokenEndpoint:e.ib};return null}Ii=Ni("__EID__")?"__EID__":void 0;var Ai="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Oi=["client_id","response_type","scope","redirect_uri","state"],Di={Xc:{Ea:"locale",sa:700,ra:600,Fa:"facebook.com",Qa:Oi},Zc:{Ea:null,sa:500,ra:750,Fa:"github.com",Qa:Oi},$c:{Ea:"hl",sa:515,ra:680,Fa:"google.com",Qa:Oi},fd:{Ea:"lang",sa:485,ra:705,Fa:"twitter.com",Qa:Ai},Vc:{Ea:"locale",sa:600,ra:600,Fa:"apple.com",Qa:[]}};function Pi(e){for(var t in Di)if(Di[t].Fa==e)return Di[t];return null}function xi(e){var t={};t["facebook.com"]=Ui,t["google.com"]=Vi,t["github.com"]=ji,t["twitter.com"]=qi;var n=e&&e[Mi];try{if(n)return t[n]?new t[n](e):new Fi(e);if(void 0!==e[Ri])return new Li(e)}catch(e){}return null}var Ri="idToken",Mi="providerId";function Li(e){var t=e[Mi];if(!t&&e[Ri]){var n=Si(e[Ri]);n&&n.a&&(t=n.a)}if(!t)throw Error("Invalid additional user info!");"anonymous"!=t&&"custom"!=t||(t=null),n=!1,void 0!==e.isNewUser?n=!!e.isNewUser:"identitytoolkit#SignupNewUserResponse"===e.kind&&(n=!0),Fr(this,"providerId",t),Fr(this,"isNewUser",n)}function Fi(e){Li.call(this,e),Fr(this,"profile",Vr((e=Cr(e.rawUserInfo||"{}"))||{}))}function Ui(e){if(Fi.call(this,e),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function ji(e){if(Fi.call(this,e),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",this.profile&&this.profile.login||null)}function Vi(e){if(Fi.call(this,e),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function qi(e){if(Fi.call(this,e),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Fr(this,"username",e.screenName||null)}function Bi(e){var t=En(e),n=_n(t,"link"),r=_n(En(n),"link");return _n(En(t=_n(t,"deep_link_id")),"link")||t||r||n||e}function Wi(){}function zi(e,n){return e.then(function(e){if(e[xa]){var t=Si(e[xa]);if(!t||n!=t.f)throw new Xr("user-mismatch");return e}throw new Xr("user-mismatch")}).s(function(e){throw e&&e.code&&e.code==Jr+"user-not-found"?new Xr("user-mismatch"):e})}function Ki(e,t){if(!t)throw new Xr("internal-error","failed to construct a credential");this.a=t,Fr(this,"providerId",e),Fr(this,"signInMethod",e)}function Hi(e){return{pendingToken:e.a,requestUri:"http://localhost"}}function Qi(e){if(e&&e.providerId&&e.signInMethod&&0==e.providerId.indexOf("saml.")&&e.pendingToken)try{return new Ki(e.providerId,e.pendingToken)}catch(e){}return null}function Gi(e,t,n){if(this.a=null,t.idToken||t.accessToken)t.idToken&&Fr(this,"idToken",t.idToken),t.accessToken&&Fr(this,"accessToken",t.accessToken),t.nonce&&!t.pendingToken&&Fr(this,"nonce",t.nonce),t.pendingToken&&(this.a=t.pendingToken);else{if(!t.oauthToken||!t.oauthTokenSecret)throw new Xr("internal-error","failed to construct a credential");Fr(this,"accessToken",t.oauthToken),Fr(this,"secret",t.oauthTokenSecret)}Fr(this,"providerId",e),Fr(this,"signInMethod",n)}function Yi(e){var t={};return e.idToken&&(t.id_token=e.idToken),e.accessToken&&(t.access_token=e.accessToken),e.secret&&(t.oauth_token_secret=e.secret),t.providerId=e.providerId,e.nonce&&!e.a&&(t.nonce=e.nonce),t={postBody:Rn(t).toString(),requestUri:"http://localhost"},e.a&&(delete t.postBody,t.pendingToken=e.a),t}function Xi(e){if(e&&e.providerId&&e.signInMethod){var t={idToken:e.oauthIdToken,accessToken:e.oauthTokenSecret?null:e.oauthAccessToken,oauthTokenSecret:e.oauthTokenSecret,oauthToken:e.oauthTokenSecret&&e.oauthAccessToken,nonce:e.nonce,pendingToken:e.pendingToken};try{return new Gi(e.providerId,t,e.signInMethod)}catch(e){}}return null}function $i(e,t){this.Fc=t||[],Ur(this,{providerId:e,isOAuthProvider:!0}),this.zb={},this.eb=(Pi(e)||{}).Ea||null,this.bb=null}function Ji(e){if("string"!=typeof e||0!=e.indexOf("saml."))throw new Xr("argument-error",'SAML provider IDs must be prefixed with "saml."');$i.call(this,e,[])}function Zi(e){$i.call(this,e,Oi),this.a=[]}function eo(){Zi.call(this,"facebook.com")}function to(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new eo).credential({accessToken:t})}function no(){Zi.call(this,"github.com")}function ro(e){if(!e)throw new Xr("argument-error","credential failed: expected 1 argument (the OAuth access token).");var t=e;return v(e)&&(t=e.accessToken),(new no).credential({accessToken:t})}function io(){Zi.call(this,"google.com"),this.ya("profile")}function oo(e,t){var n=e;return v(e)&&(n=e.idToken,t=e.accessToken),(new io).credential({idToken:n,accessToken:t})}function ao(){$i.call(this,"twitter.com",Ai)}function so(e,t){var n=e;if(v(n)||(n={oauthToken:e,oauthTokenSecret:t}),!n.oauthToken||!n.oauthTokenSecret)throw new Xr("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new Gi("twitter.com",n,"twitter.com")}function uo(e,t,n){this.a=e,this.c=t,Fr(this,"providerId","password"),Fr(this,"signInMethod",n===lo.EMAIL_LINK_SIGN_IN_METHOD?lo.EMAIL_LINK_SIGN_IN_METHOD:lo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function co(e){return e&&e.email&&e.password?new uo(e.email,e.password,e.signInMethod):null}function lo(){Ur(this,{providerId:"password",isOAuthProvider:!1})}function ho(e,t){if(!(t=fo(t)))throw new Xr("argument-error","Invalid email link!");return new uo(e,t.code,lo.EMAIL_LINK_SIGN_IN_METHOD)}function fo(e){return(e=ui(e=Bi(e)))&&e.operation===Br?e:null}function po(e){if(!(e.Va&&e.Ua||e.Ha&&e.ba))throw new Xr("internal-error");this.a=e,Fr(this,"providerId","phone"),Fr(this,"signInMethod","phone")}function mo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var n={};return L(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(e){t[e]&&(n[e]=t[e])}),new po(n)}return null}function yo(e){return e.a.Ha&&e.a.ba?{temporaryProof:e.a.Ha,phoneNumber:e.a.ba}:{sessionInfo:e.a.Va,code:e.a.Ua}}function vo(e){try{this.a=e||dh.a.auth()}catch(e){throw new Xr("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Ur(this,{providerId:"phone",isOAuthProvider:!1})}function go(e,t){if(!e)throw new Xr("missing-verification-id");if(!t)throw new Xr("missing-verification-code");return new po({Va:e,Ua:t})}function bo(e){if(e.temporaryProof&&e.phoneNumber)return new po({Ha:e.temporaryProof,ba:e.phoneNumber});var t=e&&e.providerId;if(!t||"password"===t)return null;var n=e&&e.oauthAccessToken,r=e&&e.oauthTokenSecret,i=e&&e.nonce,o=e&&e.oauthIdToken,a=e&&e.pendingToken;try{switch(t){case"google.com":return oo(o,n);case"facebook.com":return to(n);case"github.com":return ro(n);case"twitter.com":return so(n,r);default:return n||r||o||a?a?0==t.indexOf("saml.")?new Ki(t,a):new Gi(t,{pendingToken:a,idToken:e.oauthIdToken,accessToken:e.oauthAccessToken},t):new Zi(t).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(e){return null}}function wo(e){if(!e.isOAuthProvider)throw new Xr("invalid-oauth-provider")}function _o(e,t,n,r,i,o,a){if(this.c=e,this.b=t||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new Xr("invalid-auth-event");if(this.g&&this.a)throw new Xr("invalid-auth-event");if(this.g&&!this.f)throw new Xr("invalid-auth-event")}function Eo(e){return(e=e||{}).type?new _o(e.type,e.eventId,e.urlResponse,e.sessionId,e.error&&$r(e.error),e.postBody,e.tenantId):null}function To(){this.b=null,this.a=[]}t(Fi,Li),t(Ui,Fi),t(ji,Fi),t(Vi,Fi),t(qi,Fi),Ki.prototype.na=function(e){return $a(e,Hi(this))},Ki.prototype.b=function(e,t){var n=Hi(this);return n.idToken=t,Ja(e,n)},Ki.prototype.f=function(e,t){return zi(Za(e,Hi(this)),t)},Ki.prototype.A=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},Gi.prototype.na=function(e){return $a(e,Yi(this))},Gi.prototype.b=function(e,t){var n=Yi(this);return n.idToken=t,Ja(e,n)},Gi.prototype.f=function(e,t){return zi(Za(e,Yi(this)),t)},Gi.prototype.A=function(){var e={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(e.oauthIdToken=this.idToken),this.accessToken&&(e.oauthAccessToken=this.accessToken),this.secret&&(e.oauthTokenSecret=this.secret),this.nonce&&(e.nonce=this.nonce),this.a&&(e.pendingToken=this.a),e},$i.prototype.Ga=function(e){return this.zb=H(e),this},t(Ji,$i),t(Zi,$i),Zi.prototype.ya=function(e){return j(this.a,e)||this.a.push(e),this},Zi.prototype.Hb=function(){return W(this.a)},Zi.prototype.credential=function(e,t){var n;if(!(n=v(e)?{idToken:e.idToken||null,accessToken:e.accessToken||null,nonce:e.rawNonce||null}:{idToken:e||null,accessToken:t||null}).idToken&&!n.accessToken)throw new Xr("argument-error","credential failed: must provide the ID token and/or the access token.");return new Gi(this.providerId,n,this.providerId)},t(eo,Zi),Fr(eo,"PROVIDER_ID","facebook.com"),Fr(eo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),t(no,Zi),Fr(no,"PROVIDER_ID","github.com"),Fr(no,"GITHUB_SIGN_IN_METHOD","github.com"),t(io,Zi),Fr(io,"PROVIDER_ID","google.com"),Fr(io,"GOOGLE_SIGN_IN_METHOD","google.com"),t(ao,$i),Fr(ao,"PROVIDER_ID","twitter.com"),Fr(ao,"TWITTER_SIGN_IN_METHOD","twitter.com"),uo.prototype.na=function(e){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Ns(e,ss,{email:this.a,oobCode:this.c}):Ns(e,Ss,{email:this.a,password:this.c})},uo.prototype.b=function(e,t){return this.signInMethod==lo.EMAIL_LINK_SIGN_IN_METHOD?Ns(e,us,{idToken:t,email:this.a,oobCode:this.c}):Ns(e,gs,{idToken:t,email:this.a,password:this.c})},uo.prototype.f=function(e,t){return zi(this.na(e),t)},uo.prototype.A=function(){return{email:this.a,password:this.c,signInMethod:this.signInMethod}},Ur(lo,{PROVIDER_ID:"password"}),Ur(lo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Ur(lo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),po.prototype.na=function(e){return e.Wa(yo(this))},po.prototype.b=function(e,t){var n=yo(this);return n.idToken=t,Ns(e,Is,n)},po.prototype.f=function(e,t){var n=yo(this);return n.operation="REAUTH",zi(e=Ns(e,ks,n),t)},po.prototype.A=function(){var e={providerId:"phone"};return this.a.Va&&(e.verificationId=this.a.Va),this.a.Ua&&(e.verificationCode=this.a.Ua),this.a.Ha&&(e.temporaryProof=this.a.Ha),this.a.ba&&(e.phoneNumber=this.a.ba),e},vo.prototype.Wa=function(t,n){var r=this.a.b;return Ye(n.verify()).then(function(e){if(!l(e))throw new Xr("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":return function(e,t){return Ns(e,ys,t)}(r,{phoneNumber:t,recaptchaToken:e}).then(function(e){return"function"==typeof n.reset&&n.reset(),e},function(e){throw"function"==typeof n.reset&&n.reset(),e});default:throw new Xr("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Ur(vo,{PROVIDER_ID:"phone"}),Ur(vo,{PHONE_SIGN_IN_METHOD:"phone"}),_o.prototype.getUid=function(){var e=[];return e.push(this.c),this.b&&e.push(this.b),this.f&&e.push(this.f),this.h&&e.push(this.h),e.join("-")},_o.prototype.R=function(){return this.h},_o.prototype.A=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.A()}};var So,Co=null;function Io(e){var t="unauthorized-domain",n=void 0,r=En(e);e=r.b,"chrome-extension"==(r=r.f)?n=Re("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):"http"==r||"https"==r?n=Re("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",e):t="operation-not-supported-in-this-environment",Xr.call(this,t,n)}function ko(e,t,n){Xr.call(this,e,n),(e=t||{}).Ab&&Fr(this,"email",e.Ab),e.ba&&Fr(this,"phoneNumber",e.ba),e.credential&&Fr(this,"credential",e.credential),e.Qb&&Fr(this,"tenantId",e.Qb)}function No(e){if(e.code){var t=e.code||"";0==t.indexOf(Jr)&&(t=t.substring(Jr.length));var n={credential:bo(e),Qb:e.tenantId};if(e.email)n.Ab=e.email;else if(e.phoneNumber)n.ba=e.phoneNumber;else if(!n.credential)return new Xr(t,e.message||void 0);return new ko(t,n,e.message)}return null}function Ao(){}function Oo(e){return e.c||(e.c=e.b())}function Do(){}function Po(e){if(e.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return e.f;for(var t=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<t.length;n++){var r=t[n];try{return new ActiveXObject(r),e.f=r}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function xo(){}function Ro(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=E(this.fc,this),this.a.onerror=E(this.Ib,this),this.a.onprogress=E(this.gc,this),this.a.ontimeout=E(this.kc,this)}function Mo(e,t){e.readyState=t,e.onreadystatechange&&e.onreadystatechange()}function Lo(e,t,n){this.reset(e,t,n,void 0,void 0)}t(Io,Xr),t(ko,Xr),ko.prototype.A=function(){var e={code:this.code,message:this.message};this.email&&(e.email=this.email),this.phoneNumber&&(e.phoneNumber=this.phoneNumber),this.tenantId&&(e.tenantId=this.tenantId);var t=this.credential&&this.credential.A();return t&&G(e,t),e},ko.prototype.toJSON=function(){return this.A()},Ao.prototype.c=null,t(Do,Ao),Do.prototype.a=function(){var e=Po(this);return e?new ActiveXObject(e):new XMLHttpRequest},Do.prototype.b=function(){var e={};return Po(this)&&(e[0]=!0,e[1]=!0),e},So=new Do,t(xo,Ao),xo.prototype.a=function(){var e=new XMLHttpRequest;if("withCredentials"in e)return e;if("undefined"!=typeof XDomainRequest)return new Ro;throw Error("Unsupported browser")},xo.prototype.b=function(){return{}},(e=Ro.prototype).open=function(e,t,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(e,t)},e.send=function(e){if(e){if("string"!=typeof e)throw Error("Only string data is supported");this.a.send(e)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(e){return"content-type"==e.toLowerCase()?this.a.contentType:""},e.fc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Mo(this,4)},e.Ib=function(){this.status=500,this.response=this.responseText="",Mo(this,4)},e.kc=function(){this.Ib()},e.gc=function(){this.status=200,Mo(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Lo.prototype.a=null;function Fo(e){this.f=e,this.b=this.c=this.a=null}function Uo(e,t){this.name=e,this.value=t}Lo.prototype.reset=function(e,t,n,r,i){"number"==typeof i||0,r||S(),delete this.a},Uo.prototype.toString=function(){return this.name};var jo=new Uo("SEVERE",1e3),Vo=new Uo("WARNING",900),qo=new Uo("CONFIG",700),Bo=new Uo("FINE",500);Fo.prototype.log=function(e,t,n){if(e.value>=function e(t){return t.c?t.c:t.a?e(t.a):(N("Root logger has no level set."),null)}(this).value)for(y(t)&&(t=t()),e=new Lo(e,String(t),this.f),n&&(e.a=n),n=this;n;)n=n.a};var Wo,zo={},Ko=null;function Ho(e){var t;if(Ko||(Ko=new Fo(""),(zo[""]=Ko).c=qo),!(t=zo[e])){t=new Fo(e);var n=e.lastIndexOf("."),r=e.substr(n+1);(n=Ho(e.substr(0,n))).b||(n.b={}),(n.b[r]=t).a=n,zo[e]=t}return t}function Qo(e,t){e&&e.log(Bo,t,void 0)}function Go(e){this.f=e}function Yo(e){rn.call(this),this.o=e,this.readyState=Xo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=Ho("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}t(Go,Ao),Go.prototype.a=function(){return new Yo(this.f)},Go.prototype.b=(Wo={},function(){return Wo}),t(Yo,rn);var Xo=0;function $o(e){e.c.read().then(e.ec.bind(e)).catch(e.Oa.bind(e))}function Jo(e,t){t&&e.f&&(e.status=e.f.status,e.statusText=e.f.statusText),e.readyState=4,e.f=null,e.c=null,e.l=null,Zo(e)}function Zo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function ea(e){rn.call(this),this.headers=new fn,this.B=e||null,this.c=!1,this.w=this.a=null,this.h=this.O=this.l="",this.f=this.J=this.i=this.I=!1,this.g=0,this.o=null,this.m=ta,this.v=this.P=!1}(e=Yo.prototype).open=function(e,t){if(this.readyState!=Xo)throw this.abort(),Error("Error reopening a connection");this.m=e,this.g=t,this.readyState=1,Zo(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var t={headers:this.i,method:this.m,credentials:void 0,cache:void 0};e&&(t.body=e),this.o.fetch(new Request(this.g,t)).then(this.jc.bind(this),this.Oa.bind(this))},e.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,Jo(this,!1)),this.readyState=Xo},e.jc=function(e){this.a&&(this.f=e,this.b||(this.b=e.headers,this.readyState=2,Zo(this)),this.a&&(this.readyState=3,Zo(this),this.a&&("arraybuffer"===this.responseType?e.arrayBuffer().then(this.hc.bind(this),this.Oa.bind(this)):void 0!==h.ReadableStream&&"body"in e?(this.response=this.responseText="",this.c=e.body.getReader(),this.l=new TextDecoder,$o(this)):e.text().then(this.ic.bind(this),this.Oa.bind(this)))))},e.ec=function(e){if(this.a){var t=this.l.decode(e.value?e.value:new Uint8Array(0),{stream:!e.done});t&&(this.response=this.responseText+=t),e.done?Jo(this,!0):Zo(this),3==this.readyState&&$o(this)}},e.ic=function(e){this.a&&(this.response=this.responseText=e,Jo(this,!0))},e.hc=function(e){this.a&&(this.response=e,Jo(this,!0))},e.Oa=function(e){var t=this.h;t&&t.log(Vo,"Failed to fetch url "+this.g,e instanceof Error?e:Error(e)),this.a&&Jo(this,!0)},e.setRequestHeader=function(e,t){this.i.append(e,t)},e.getResponseHeader=function(e){return this.b?this.b.get(e.toLowerCase())||"":((e=this.h)&&e.log(Vo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var e=this.h;return e&&e.log(Vo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}e=[];for(var t=this.b.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},t(ea,rn);var ta="";ea.prototype.b=Ho("goog.net.XhrIo");var na=/^https?$/i,ra=["POST","PUT"];function ia(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.O=n,t.I=!1,t.c=!0,t.a=t.B?t.B.a():So.a(),t.w=t.B?Oo(t.B):Oo(So),t.a.onreadystatechange=E(t.Lb,t);try{Qo(t.b,pa(t,"Opening Xhr")),t.J=!0,t.a.open(n,String(e),!0),t.J=!1}catch(e){return Qo(t.b,pa(t,"Error opening Xhr: "+e.message)),void aa(t,e)}e=r||"";var o=new fn(t.headers);i&&function(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(m(e)||l(e))L(e,t,void 0);else for(var n=hn(e),r=ln(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}(i,function(e,t){o.set(t,e)}),i=function(e){e:{for(var t=oa,n=e.length,r=l(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:l(e)?e.charAt(t):e[t]}(o.X()),r=h.FormData&&e instanceof h.FormData,!j(ra,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(e,t){this.a.setRequestHeader(t,e)},t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.P&&(t.a.withCredentials=t.P);try{la(t),0<t.g&&(t.v=function(e){return vt&&Nt(9)&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(t.a),Qo(t.b,pa(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.v)),t.v?(t.a.timeout=t.g,t.a.ontimeout=E(t.Ia,t)):t.o=un(t.Ia,t.g,t)),Qo(t.b,pa(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){Qo(t.b,pa(t,"Send error: "+e.message)),aa(t,e)}}function oa(e){return"content-type"==e.toLowerCase()}function aa(e,t){e.c=!1,e.a&&(e.f=!0,e.a.abort(),e.f=!1),e.h=t,sa(e),ca(e)}function sa(e){e.I||(e.I=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function ua(t){if(t.c&&void 0!==u)if(t.w[1]&&4==ha(t)&&2==fa(t))Qo(t.b,pa(t,"Local request error detected and ignored"));else if(t.i&&4==ha(t))un(t.Lb,0,t);else if(t.dispatchEvent("readystatechange"),4==ha(t)){Qo(t.b,pa(t,"Request complete")),t.c=!1;try{var e,n=fa(t);e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(mn)[1]||null;if(!o&&h.self&&h.self.location){var a=h.self.location.protocol;o=a.substr(0,a.length-1)}i=!na.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var s=2<ha(t)?t.a.statusText:""}catch(e){Qo(t.b,"Can not get status: "+e.message),s=""}t.h=s+" ["+fa(t)+"]",sa(t)}}finally{ca(t)}}}function ca(t,e){if(t.a){la(t);var n=t.a,r=t.w[0]?s:null;t.a=null,t.w=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(jo,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function la(e){e.a&&e.v&&(e.a.ontimeout=null),e.o&&(h.clearTimeout(e.o),e.o=null)}function ha(e){return e.a?e.a.readyState:0}function fa(e){try{return 2<ha(e)?e.a.status:-1}catch(e){return-1}}function pa(e,t){return t+" ["+e.O+" "+e.l+" "+fa(e)+"]"}function da(e){var t=Ca;this.g=[],this.v=t,this.o=e||null,this.f=this.a=!1,this.c=void 0,this.u=this.w=this.i=!1,this.h=0,this.b=null,this.l=0}function ma(e,t,n){e.a=!0,e.c=n,e.f=!t,ba(e)}function ya(e){if(e.a){if(!e.u)throw new wa(e);e.u=!1}}function va(e,t,n,r){e.g.push([t,n,r]),e.a&&ba(e)}function ga(e){return U(e.g,function(e){return y(e[1])})}function ba(t){if(t.h&&t.a&&ga(t)){var n=t.h,r=Ta[n];r&&(h.clearTimeout(r.a),delete Ta[n]),t.h=0}t.b&&(t.b.l--,delete t.b),n=t.c;for(var e=r=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var s=o.call(i||t.o,n);void 0!==s&&(t.f=t.f&&(s==n||s instanceof Error),t.c=n=s),(C(n)||"function"==typeof h.Promise&&n instanceof h.Promise)&&(e=!0,t.i=!0)}catch(e){n=e,t.f=!0,ga(t)||(r=!0)}}t.c=n,e&&(s=E(t.m,t,!0),e=E(t.m,t,!1),n instanceof da?(va(n,s,e),n.w=!0):n.then(s,e)),r&&(n=new Ea(n),Ta[n.a]=n,t.h=n.a)}function wa(){I.call(this)}function _a(){I.call(this)}function Ea(e){this.a=h.setTimeout(E(this.c,this),0),this.b=e}(e=ea.prototype).Ia=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",Qo(this.b,pa(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(Qo(this.b,pa(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),ca(this))},e.za=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),ca(this,!0)),ea.qb.za.call(this)},e.Lb=function(){this.va||(this.J||this.i||this.f?ua(this):this.yc())},e.yc=function(){ua(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var e=this.b;return e&&e.log(jo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return Qo(this.b,"Can not get response: "+e.message),null}},da.prototype.cancel=function(e){if(this.a)this.c instanceof da&&this.c.cancel();else{if(this.b){var t=this.b;delete this.b,e?t.cancel(e):(t.l--,t.l<=0&&t.cancel())}this.v?this.v.call(this.o,this):this.u=!0,this.a||(e=new _a(this),ya(this),ma(this,!1,e))}},da.prototype.m=function(e,t){this.i=!1,ma(this,e,t)},da.prototype.then=function(e,t,n){var r,i,o=new Be(function(e,t){r=e,i=t});return va(this,r,function(e){e instanceof _a?o.cancel():i(e)}),o.then(e,t,n)},da.prototype.$goog_Thenable=!0,t(wa,I),wa.prototype.message="Deferred has already fired",wa.prototype.name="AlreadyCalledError",t(_a,I),_a.prototype.message="Deferred was canceled",_a.prototype.name="CanceledError",Ea.prototype.c=function(){throw delete Ta[this.a],this.b};var Ta={};function Sa(e){var t={},n=t.document||document,r=te(e).toString(),i=document.createElement("SCRIPT"),o={Nb:i,Ia:void 0},a=new da(o),s=null,u=null!=t.timeout?t.timeout:5e3;return 0<u&&(s=window.setTimeout(function(){Ia(i,!0);var e=new Aa(Na,"Timeout reached for loading script "+r);ya(a),ma(a,!1,e)},u),o.Ia=s),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ia(i,t.hd||!1,s),ya(a),ma(a,!0,null))},i.onerror=function(){Ia(i,!0,s);var e=new Aa(ka,"Error while loading script "+r);ya(a),ma(a,!1,e)},G(o=t.attributes||{},{type:"text/javascript",charset:"UTF-8"}),Bn(i,o),function(e,t){R(e,"HTMLScriptElement"),e.src=te(t),null===p&&(p=(t=(t=h.document).querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&f.test(t)?t:""),(t=p)&&e.setAttribute("nonce",t)}(i,e),function(e){var t;return(t=(e||document).getElementsByTagName("HEAD"))&&0!=t.length?t[0]:e.documentElement}(n).appendChild(i),a}function Ca(){if(this&&this.Nb){var e=this.Nb;e&&"SCRIPT"==e.tagName&&Ia(e,!0,this.Ia)}}function Ia(e,t,n){null!=n&&h.clearTimeout(n),e.onload=s,e.onerror=s,e.onreadystatechange=s,t&&window.setTimeout(function(){e&&e.parentNode&&e.parentNode.removeChild(e)},0)}var ka=0,Na=1;function Aa(e,t){var n="Jsloader error (code #"+e+")";t&&(n+=": "+t),I.call(this,n),this.code=e}function Oa(e){this.f=e}function Da(e,t,n){if(this.c=e,e=t||{},this.l=e.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.u=e.secureTokenTimeout||Ra,this.g=H(e.secureTokenHeaders||Ma),this.h=e.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=e.firebaseTimeout||La,this.a=H(e.firebaseHeaders||Fa),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=h.XMLHttpRequest||n&&dh.a.INTERNAL.node&&dh.a.INTERNAL.node.XMLHttpRequest)&&!ur())throw new Xr("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new Go(self):lr()?this.f=new Oa(n):this.f=new xo,this.b=null}t(Aa,I),t(Oa,Ao),Oa.prototype.a=function(){return new this.f},Oa.prototype.b=function(){return{}};var Pa,xa="idToken",Ra=new Ar(3e4,6e4),Ma={"Content-Type":"application/x-www-form-urlencoded"},La=new Ar(3e4,6e4),Fa={"Content-Type":"application/json"};function Ua(e,t){t?e.a["X-Firebase-Locale"]=t:delete e.a["X-Firebase-Locale"]}function ja(e,t){t?(e.a["X-Client-Version"]=t,e.g["X-Client-Version"]=t):(delete e.a["X-Client-Version"],delete e.g["X-Client-Version"])}function Va(e,t,n,r,i,o,a){(e=function(){var e=yr();return!((e=pr(e)!=fr?null:(e=e.match(/\sChrome\/(\d+)/i))&&2==e.length?parseInt(e[1],10):null)&&e<30)&&(!vt||!It||9<It)}()||ur()?E(e.o,e):(Pa=Pa||new Be(function(e,t){!function(e,t){if(((window.gapi||{}).client||{}).request)e();else{h[Ba]=function(){((window.gapi||{}).client||{}).request?e():t(Error("CORS_UNSUPPORTED"))},function(e,t){va(e,null,t,void 0)}(Sa(ne(qa,{onload:Ba})),function(){t(Error("CORS_UNSUPPORTED"))})}}(e,t)}),E(e.m,e)))(t,n,r,i,o,a)}Da.prototype.R=function(){return this.b},Da.prototype.o=function(e,n,t,r,i,o){if(ur()&&(void 0===h.fetch||void 0===h.Headers||void 0===h.Request))throw new Xr("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new ea(this.f);if(o){a.g=Math.max(0,o);var s=setTimeout(function(){a.dispatchEvent("timeout")},o)}on(a,"complete",function(){s&&clearTimeout(s);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return Qo(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}n&&n(t)}),an(a,"ready",function(){s&&clearTimeout(s),ft(this)}),an(a,"timeout",function(){s&&clearTimeout(s),ft(this),n&&n(null)}),ia(a,e,t,r,i)};var qa=new Y(J,"https://apis.google.com/js/client.js?onload=%{onload}"),Ba="__fcb"+Math.floor(1e6*Math.random()).toString();function Wa(e){if(!l(e=e.email)||!ir.test(e))throw new Xr("invalid-email")}function za(e){"email"in e&&Wa(e)}function Ka(e){if(!e[xa])throw new Xr("internal-error")}function Ha(e){if(e.phoneNumber||e.temporaryProof){if(!e.phoneNumber||!e.temporaryProof)throw new Xr("internal-error")}else{if(!e.sessionInfo)throw new Xr("missing-verification-id");if(!e.code)throw new Xr("missing-verification-code")}}Da.prototype.m=function(e,n,r,i,o){var a=this;Pa.then(function(){window.gapi.client.setApiKey(a.c);var t=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:e,method:r,body:i,headers:o,authType:"none",callback:function(e){window.gapi.auth.setToken(t),n&&n(e)}})}).s(function(e){n&&n({error:{message:e&&e.message||"CORS_UNSUPPORTED"}})})},Da.prototype.ob=function(){return Ns(this,bs,{})},Da.prototype.rb=function(e,t){return Ns(this,vs,{idToken:e,email:t})},Da.prototype.sb=function(e,t){return Ns(this,gs,{idToken:e,password:t})};var Qa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function Ga(e){if(!e.requestUri||!e.sessionId&&!e.postBody&&!e.pendingToken)throw new Xr("internal-error")}function Ya(e,t){return t.oauthIdToken&&t.providerId&&0==t.providerId.indexOf("oidc.")&&!t.pendingToken&&(e.sessionId?t.nonce=e.sessionId:e.postBody&&(Ln(e=new Pn(e.postBody),"nonce")&&(t.nonce=e.get("nonce")))),t}function Xa(e){var t=null;if(e.needConfirmation?(e.code="account-exists-with-different-credential",t=No(e)):"FEDERATED_USER_ID_ALREADY_LINKED"==e.errorMessage?(e.code="credential-already-in-use",t=No(e)):"EMAIL_EXISTS"==e.errorMessage?(e.code="email-already-in-use",t=No(e)):e.errorMessage&&(t=As(e.errorMessage)),t)throw t;if(!e[xa])throw new Xr("internal-error")}function $a(e,t){return t.returnIdpCredential=!0,Ns(e,ws,t)}function Ja(e,t){return t.returnIdpCredential=!0,Ns(e,Es,t)}function Za(e,t){return t.returnIdpCredential=!0,t.autoCreate=!1,Ns(e,_s,t)}function es(e){if(!e.oobCode)throw new Xr("invalid-action-code")}(e=Da.prototype).tb=function(e,r){var i={idToken:e},o=[];return z(Qa,function(e,t){var n=r[t];null===n?o.push(e):t in r&&(i[t]=n)}),o.length&&(i.deleteAttribute=o),Ns(this,vs,i)},e.kb=function(e,t){return G(e={requestType:"PASSWORD_RESET",email:e},t),Ns(this,fs,e)},e.lb=function(e,t){return G(e={requestType:"EMAIL_SIGNIN",email:e},t),Ns(this,ls,e)},e.jb=function(e,t){return G(e={requestType:"VERIFY_EMAIL",idToken:e},t),Ns(this,hs,e)},e.Wa=function(e){return Ns(this,Cs,e)},e.ab=function(e,t){return Ns(this,ms,{oobCode:e,newPassword:t})},e.Ma=function(e){return Ns(this,ns,{oobCode:e})},e.Ya=function(e){return Ns(this,ts,{oobCode:e})};var ts={endpoint:"setAccountInfo",D:es,fa:"email",F:!0},ns={endpoint:"resetPassword",D:es,K:function(e){var t=e.requestType;if(!t||!e.email&&"EMAIL_SIGNIN"!=t)throw new Xr("internal-error")},F:!0},rs={endpoint:"signupNewUser",D:function(e){if(Wa(e),!e.password)throw new Xr("weak-password")},K:Ka,T:!0,F:!0},is={endpoint:"createAuthUri",F:!0},os={endpoint:"deleteAccount",V:["idToken"]},as={endpoint:"setAccountInfo",V:["idToken","deleteProvider"],D:function(e){if(!d(e.deleteProvider))throw new Xr("internal-error")}},ss={endpoint:"emailLinkSignin",V:["email","oobCode"],D:Wa,K:Ka,T:!0,F:!0},us={endpoint:"emailLinkSignin",V:["idToken","email","oobCode"],D:Wa,K:Ka,T:!0},cs={endpoint:"getAccountInfo"},ls={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("EMAIL_SIGNIN"!=e.requestType)throw new Xr("internal-error");Wa(e)},fa:"email",F:!0},hs={endpoint:"getOobConfirmationCode",V:["idToken","requestType"],D:function(e){if("VERIFY_EMAIL"!=e.requestType)throw new Xr("internal-error")},fa:"email",F:!0},fs={endpoint:"getOobConfirmationCode",V:["requestType"],D:function(e){if("PASSWORD_RESET"!=e.requestType)throw new Xr("internal-error");Wa(e)},fa:"email",F:!0},ps={wb:!0,endpoint:"getProjectConfig",Kb:"GET"},ds={wb:!0,endpoint:"getRecaptchaParam",Kb:"GET",K:function(e){if(!e.recaptchaSiteKey)throw new Xr("internal-error")}},ms={endpoint:"resetPassword",D:es,fa:"email",F:!0},ys={endpoint:"sendVerificationCode",V:["phoneNumber","recaptchaToken"],fa:"sessionInfo",F:!0},vs={endpoint:"setAccountInfo",V:["idToken"],D:za,T:!0},gs={endpoint:"setAccountInfo",V:["idToken"],D:function(e){if(za(e),!e.password)throw new Xr("weak-password")},K:Ka,T:!0},bs={endpoint:"signupNewUser",K:Ka,T:!0,F:!0},ws={endpoint:"verifyAssertion",D:Ga,Ra:Ya,K:Xa,T:!0,F:!0},_s={endpoint:"verifyAssertion",D:Ga,Ra:Ya,K:function(e){if(e.errorMessage&&"USER_NOT_FOUND"==e.errorMessage)throw new Xr("user-not-found");if(e.errorMessage)throw As(e.errorMessage);if(!e[xa])throw new Xr("internal-error")},T:!0,F:!0},Es={endpoint:"verifyAssertion",D:function(e){if(Ga(e),!e.idToken)throw new Xr("internal-error")},Ra:Ya,K:Xa,T:!0},Ts={endpoint:"verifyCustomToken",D:function(e){if(!e.token)throw new Xr("invalid-custom-token")},K:Ka,T:!0,F:!0},Ss={endpoint:"verifyPassword",D:function(e){if(Wa(e),!e.password)throw new Xr("wrong-password")},K:Ka,T:!0,F:!0},Cs={endpoint:"verifyPhoneNumber",D:Ha,K:Ka,F:!0},Is={endpoint:"verifyPhoneNumber",D:function(e){if(!e.idToken)throw new Xr("internal-error");Ha(e)},K:function(e){if(e.temporaryProof)throw e.code="credential-already-in-use",No(e);Ka(e)}},ks={Yb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",D:Ha,K:Ka,F:!0};function Ns(e,t,n){if(!function(e,t){if(!t||!t.length)return!0;if(!e)return!1;for(var n=0;n<t.length;n++){var r=e[t[n]];if(null==r||""===r)return!1}return!0}(n,t.V))return Xe(new Xr("internal-error"));var r,i=t.Kb||"POST";return Ye(n).then(t.D).then(function(){return t.T&&(n.returnSecureToken=!0),t.F&&e.b&&void 0===n.tenantId&&(n.tenantId=e.b),function(e,t,r,i,o,n){var a=En(e.h+t);wn(a,"key",e.c),n&&wn(a,"cb",S().toString());var s="GET"==r;if(s)for(var u in i)i.hasOwnProperty(u)&&wn(a,u,i[u]);return new Be(function(t,n){Va(e,a.toString(),function(e){e?e.error?n(Os(e,o||{})):t(e):n(new Xr("network-request-failed"))},r,s?void 0:Hn(Sr(i)),e.a,e.i.get())})}(e,t.endpoint,i,n,t.Yb,t.wb||!1)}).then(function(e){return r=e,t.Ra?t.Ra(n,r):r}).then(t.K).then(function(){if(!t.fa)return r;if(!(t.fa in r))throw new Xr("internal-error");return r[t.fa]})}function As(e){return Os({error:{errors:[{message:e}],code:400,message:e}})}function Os(e,t){var n=(e.error&&e.error.errors&&e.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new Xr(r[n]):null)return n;for(var i in n=e.error&&e.error.message||"",G(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation"},t||{}),t=(t=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<t.length?t[1]:void 0,r)if(0===n.indexOf(i))return new Xr(r[i],t);return!t&&e&&(t=Tr(e)),new Xr("internal-error",t)}function Ds(e){this.b=e,this.a=null,this.gb=function(o){return(Ms=Ms||new Be(function(e,t){function n(){Nr(),vr("gapi.load")("gapi.iframes",{callback:e,ontimeout:function(){Nr(),t(Error("Network Error"))},timeout:xs.get()})}if(vr("gapi.iframes.Iframe"))e();else if(vr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();h[r]=function(){vr("gapi.load")?n():t(Error("Network Error"))},Ye(Sa(r=ne(Ps,{onload:r}))).s(function(){t(Error("Network Error"))})}}).s(function(e){throw Ms=null,e})).then(function(){return new Be(function(r,i){vr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(e){function t(){clearTimeout(n),r()}o.a=e,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},Rs.get());e.ping(t).then(t,function(){i(Error("Network Error"))})})})})}(this)}var Ps=new Y(J,"https://apis.google.com/js/api.js?onload=%{onload}"),xs=new Ar(3e4,6e4),Rs=new Ar(5e3,15e3),Ms=null;function Ls(e,t,n){this.i=e,this.g=t,this.h=n,this.f=null,this.a=Tn(this.i,"/__/auth/iframe"),wn(this.a,"apiKey",this.g),wn(this.a,"appName",this.h),this.b=null,this.c=[]}function Fs(e,t,n,r,i){this.o=e,this.m=t,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function Us(e){try{return dh.a.app(e).auth().Ca()}catch(e){return[]}}function js(e,t,n,r,i){this.u=e,this.f=t,this.b=n,this.c=r||null,this.h=i||null,this.m=this.o=this.v=null,this.g=[],this.l=this.a=null}function Vs(e){var s=Jn();return function(e){return Ns(e,ps,{}).then(function(e){return e.authorizedDomains||[]})}(e).then(function(e){e:{var t=En(s),n=t.f;t=t.b;for(var r=0;r<e.length;r++){var i=e[r],o=t,a=n;if(o=0==i.indexOf("chrome-extension://")?En(i).b==o&&"chrome-extension"==a:("http"==a||"https"==a)&&(rr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){e=!0;break e}}e=!1}if(!e)throw new Io(Jn())})}function qs(i){return i.l||(i.l=or().then(function(){if(!i.o){var e=i.c,t=i.h,n=Us(i.b),r=new Ls(i.u,i.f,i.b);r.f=e,r.b=t,r.c=W(n||[]),i.o=r.toString()}i.i=new Ds(i.o),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(e,t){e.gb.then(function(){e.a.register("authEvent",t,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(e){var t={};if(e&&e.authEvent){var n=!1;for(e=Eo(e.authEvent),t=0;t<r.g.length;t++)n=r.g[t](e)||n;return(t={}).status=n?"ACK":"ERROR",Ye(t)}return t.status="ERROR",Ye(t)})}(i)})),i.l}function Bs(e){return e.m||(e.v=e.c?mr(e.c,Us(e.b)):null,e.m=new Da(e.f,Ni(e.h),e.v)),e.m}function Ws(e,t,n,r,i,o,a,s,u,c,l){return(e=new Fs(e,t,n,r,i)).l=o,e.g=a,e.i=s,e.b=H(u||null),e.f=c,e.nb(l).toString()}function zs(e){if(this.a=e||dh.a.INTERNAL.reactNative&&dh.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new Xr("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Ks(e){this.b=e,this.a={},this.f=E(this.c,this)}Ls.prototype.toString=function(){return this.f?wn(this.a,"v",this.f):Mn(this.a.a,"v"),this.b?wn(this.a,"eid",this.b):Mn(this.a.a,"eid"),this.c.length?wn(this.a,"fw",this.c.join(",")):Mn(this.a.a,"fw"),this.a.toString()},Fs.prototype.nb=function(e){return this.h=e,this},Fs.prototype.toString=function(){var e=Tn(this.o,"/__/auth/handler");if(wn(e,"apiKey",this.m),wn(e,"appName",this.c),wn(e,"authType",this.u),this.a.isOAuthProvider){var t=this.a;try{var n=dh.a.app(this.c).auth().ha()}catch(e){n=null}for(var r in t.bb=n,wn(e,"providerId",this.a.providerId),n=Sr((t=this.a).zb))n[r]=n[r].toString();r=t.Fc,n=H(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}t.eb&&t.bb&&!n[t.eb]&&(n[t.eb]=t.bb),K(n)||wn(e,"customParameters",Tr(n))}if("function"==typeof this.a.Hb&&((t=this.a.Hb()).length&&wn(e,"scopes",t.join(","))),this.l?wn(e,"redirectUrl",this.l):Mn(e.a,"redirectUrl"),this.g?wn(e,"eventId",this.g):Mn(e.a,"eventId"),this.i?wn(e,"v",this.i):Mn(e.a,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!_n(e,a)&&wn(e,a,this.b[a]);return this.h?wn(e,"tid",this.h):Mn(e.a,"tid"),this.f?wn(e,"eid",this.f):Mn(e.a,"eid"),(a=Us(this.c)).length&&wn(e,"fw",a.join(",")),e.toString()},(e=js.prototype).Fb=function(t,n,e){var r=new Xr("popup-closed-by-user"),i=new Xr("web-storage-unsupported"),o=this,a=!1;return this.ia().then(function(){(function(e){var t={type:"webStorageSupport"};return qs(e).then(function(){return function(t,n){return t.gb.then(function(){return new Be(function(e){t.a.send(n.type,n,e,vr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})})}(e.i,t)}).then(function(e){if(e&&e.length&&void 0!==e[0].webStorageSupport)return e[0].webStorageSupport;throw Error()})})(o).then(function(e){e||(t&&tr(t),n(i),a=!0)})}).s(function(){}).then(function(){if(!a)return function(n){return new Be(function(t){return function e(){cn(2e3).then(function(){if(n&&!n.closed)return e();t()})}()})}(t)}).then(function(){if(!a)return cn(e).then(function(){n(r)})})},e.Ob=function(){var e=yr();return!Er(e)&&!kr(e)},e.Jb=function(){return!1},e.Db=function(t,e,n,r,i,o,a,s){if(!t)return Xe(new Xr("popup-blocked"));if(a&&!Er())return this.ia().s(function(e){tr(t),i(e)}),r(),Ye();this.a||(this.a=Vs(Bs(this)));var u=this;return this.a.then(function(){var e=u.ia().s(function(e){throw tr(t),i(e),e});return r(),e}).then(function(){wo(n),a||Zn(Ws(u.u,u.f,u.b,e,n,null,o,u.c,void 0,u.h,s),t)}).s(function(e){throw"auth/network-request-failed"==e.code&&(u.a=null),e})},e.Eb=function(e,t,n,r){this.a||(this.a=Vs(Bs(this)));var i=this;return this.a.then(function(){wo(t),Zn(Ws(i.u,i.f,i.b,e,t,Jn(),n,i.c,void 0,i.h,r))}).s(function(e){throw"auth/network-request-failed"==e.code&&(i.a=null),e})},e.ia=function(){var e=this;return qs(this).then(function(){return e.i.gb}).s(function(){throw e.a=null,new Xr("network-request-failed")})},e.Rb=function(){return!0},e.Aa=function(e){this.g.push(e)},e.Na=function(t){q(this.g,function(e){return e==t})},(e=zs.prototype).get=function(e){return Ye(this.a.getItem(e)).then(function(e){return e&&Cr(e)})},e.set=function(e,t){return Ye(this.a.setItem(e,Tr(t)))},e.S=function(e){return Ye(this.a.removeItem(e))},e.$=function(){},e.ea=function(){};var Hs,Qs=[];function Gs(e,t,n){K(e.a)&&e.b.addEventListener("message",e.f),void 0===e.a[t]&&(e.a[t]=[]),e.a[t].push(n)}function Ys(e){this.a=e}function Xs(e){this.c=e,this.b=!1,this.a=[]}function $s(r,e,t,n){var i,o,a,s,u=t||{},c=null;if(r.b)return Xe(Error("connection_unavailable"));var l=n?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new Be(function(t,n){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout(function(){n(Error("unsupported_event"))},l),c={messageChannel:h,onMessage:o=function(e){e.data.eventId===i&&("ack"===e.data.status?(clearTimeout(a),s=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===e.data.status?(clearTimeout(s),void 0!==e.data.response?t(e.data.response):n(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),n(Error("invalid_response"))))}},r.a.push(c),h.port1.addEventListener("message",o),r.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):n(Error("connection_unavailable"))}).then(function(e){return Js(r,c),e}).s(function(e){throw Js(r,c),e})}function Js(e,t){if(t){var n=t.messageChannel,r=t.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),q(e.a,function(e){return e==t})}}function Zs(){if(!nu())throw new Xr("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=h.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var r=this;ur()&&self?(this.l=function(){var t=ur()?self:null;if(L(Qs,function(e){e.b==t&&(n=e)}),!n){var n=new Ks(t);Qs.push(n)}return n}(),Gs(this.l,"keyChanged",function(e,n){return su(r).then(function(t){return 0<t.length&&L(r.a,function(e){e(t)}),{keyProcessed:j(t,n.key)}})}),Gs(this.l,"ping",function(){return Ye(["keyChanged"])})):function(){var e=h.navigator;return e&&e.serviceWorker?Ye().then(function(){return e.serviceWorker.ready}).then(function(e){return e.active||null}).s(function(){return null}):Ye(null)}().then(function(e){(r.h=e)&&(r.g=new Xs(new Ys(e)),$s(r.g,"ping",null,!0).then(function(e){e[0].fulfilled&&j(e[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function eu(r){return new Be(function(t,n){var e=r.u.open("firebaseLocalStorageDb",1);e.onerror=function(e){try{e.preventDefault()}catch(e){}n(Error(e.target.error))},e.onupgradeneeded=function(e){e=e.target.result;try{e.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},e.onsuccess=function(e){(e=e.target.result).objectStoreNames.contains("firebaseLocalStorage")?t(e):function(r){return new Be(function(e,t){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){e()},n.onerror=function(e){t(Error(e.target.error))}})}(r).then(function(){return eu(r)}).then(function(e){t(e)}).s(function(e){n(e)})}})}function tu(e){return e.m||(e.m=eu(e)),e.m}function nu(){try{return!!h.indexedDB}catch(e){return!1}}function ru(e){return e.objectStore("firebaseLocalStorage")}function iu(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly")}function ou(e){return new Be(function(t,n){e.onsuccess=function(e){e&&e.target?t(e.target.result):t()},e.onerror=function(e){n(e.target.error)}})}function au(e,t){return e.g&&e.h&&function(){var e=h.navigator;return e&&e.serviceWorker&&e.serviceWorker.controller||null}()===e.h?$s(e.g,"keyChanged",{key:t},e.o).then(function(){}).s(function(){}):Ye()}function su(r){return tu(r).then(function(e){var i=ru(iu(e,!1));return i.getAll?ou(i.getAll()):new Be(function(t,n){var r=[],e=i.openCursor();e.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},e.onerror=function(e){n(e.target.error)}})}).then(function(e){var t={},n=[];if(0==r.b){for(n=0;n<e.length;n++)t[e[n].fbase_key]=e[n].value;n=function e(t,n){var r,i=[];for(r in t)r in n?typeof t[r]!=typeof n[r]?i.push(r):"object"==typeof t[r]&&null!=t[r]&&null!=n[r]?0<e(t[r],n[r]).length&&i.push(r):t[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in t||i.push(r);return i}(r.c,t),r.c=t}return n})}function uu(e){e.i&&e.i.cancel("STOP_EVENT"),e.f&&(clearTimeout(e.f),e.f=null)}function cu(e){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=e,this.b=Ye().then(function(){if(nu()){var t=Ir(),n="__sak"+t;return Hs=Hs||new Zs,(i=Hs).set(n,t).then(function(){return i.get(n)}).then(function(e){if(e!==t)throw Error("indexedDB not supported!");return i.S(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(e){return r.type=e.type,e.$(function(t){L(r.a,function(e){e(t)})}),e})}function lu(){this.a={},this.type="inMemory"}function hu(){if(!function(){var e="Node"==cr();if(!(e=fu()||e&&dh.a.INTERNAL.node&&dh.a.INTERNAL.node.localStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Xr("internal-error","The LocalStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=fu()||dh.a.INTERNAL.node.localStorage,this.type="localStorage"}function fu(){try{var e=h.localStorage,t=Ir();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function pu(){this.type="nullStorage"}function du(){if(!function(){var e="Node"==cr();if(!(e=mu()||e&&dh.a.INTERNAL.node&&dh.a.INTERNAL.node.sessionStorage))return!1;try{return e.setItem("__sak","1"),e.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==cr())throw new Xr("internal-error","The SessionStorage compatibility library was not found.");throw new Xr("web-storage-unsupported")}this.a=mu()||dh.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function mu(){try{var e=h.sessionStorage,t=Ir();return e&&(e.setItem(t,"1"),e.removeItem(t)),e}catch(e){return null}}function yu(){var e={};e.Browser=bu,e.Node=wu,e.ReactNative=_u,e.Worker=Eu,this.a=e[cr()]}Ks.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,e=this.a[r];if(e&&0<e.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var t=[];L(e,function(e){t.push(Ye().then(function(){return e(n.origin,n.data.data)}))}),Je(t).then(function(e){var t=[];L(e,function(e){t.push({fulfilled:e.Gb,value:e.value,reason:e.reason?e.reason.message:void 0})}),L(t,function(e){for(var t in e)void 0===e[t]&&delete e[t]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:t})})}},Ys.prototype.postMessage=function(e,t){this.a.postMessage(e,t)},Xs.prototype.close=function(){for(;0<this.a.length;)Js(this,this.a[0]);this.b=!0},(e=Zs.prototype).set=function(n,r){var i,o=!1,a=this;return tu(this).then(function(e){return ou((e=ru(iu(i=e,!0))).get(n))}).then(function(e){var t=ru(iu(i,!0));return e?(e.value=r,ou(t.put(e))):(a.b++,o=!0,(e={}).fbase_key=n,e.value=r,ou(t.add(e)))}).then(function(){return a.c[n]=r,au(a,n)}).ka(function(){o&&a.b--})},e.get=function(t){return tu(this).then(function(e){return ou(ru(iu(e,!1)).get(t))}).then(function(e){return e&&e.value})},e.S=function(t){var n=!1,r=this;return tu(this).then(function(e){return n=!0,r.b++,ou(ru(iu(e,!0)).delete(t))}).then(function(){return delete r.c[t],au(r,t)}).ka(function(){n&&r.b--})},e.$=function(e){0==this.a.length&&function(e){uu(e),function t(){e.f=setTimeout(function(){e.i=su(e).then(function(t){0<t.length&&L(e.a,function(e){e(t)})}).then(function(){t()}).s(function(e){"STOP_EVENT"!=e.message&&t()})},800)}()}(this),this.a.push(e)},e.ea=function(t){q(this.a,function(e){return e==t}),0==this.a.length&&uu(this)},(e=cu.prototype).get=function(t){return this.b.then(function(e){return e.get(t)})},e.set=function(t,n){return this.b.then(function(e){return e.set(t,n)})},e.S=function(t){return this.b.then(function(e){return e.S(t)})},e.$=function(e){this.a.push(e)},e.ea=function(t){q(this.a,function(e){return e==t})},(e=lu.prototype).get=function(e){return Ye(this.a[e])},e.set=function(e,t){return this.a[e]=t,Ye()},e.S=function(e){return delete this.a[e],Ye()},e.$=function(){},e.ea=function(){},(e=hu.prototype).get=function(e){var t=this;return Ye().then(function(){return Cr(t.a.getItem(e))})},e.set=function(t,n){var r=this;return Ye().then(function(){var e=Tr(n);null===e?r.S(t):r.a.setItem(t,e)})},e.S=function(e){var t=this;return Ye().then(function(){t.a.removeItem(e)})},e.$=function(e){h.window&&Kt(h.window,"storage",e)},e.ea=function(e){h.window&&Gt(h.window,"storage",e)},(e=pu.prototype).get=function(){return Ye(null)},e.set=function(){return Ye()},e.S=function(){return Ye()},e.$=function(){},e.ea=function(){},(e=du.prototype).get=function(e){var t=this;return Ye().then(function(){return Cr(t.a.getItem(e))})},e.set=function(t,n){var r=this;return Ye().then(function(){var e=Tr(n);null===e?r.S(t):r.a.setItem(t,e)})},e.S=function(e){var t=this;return Ye().then(function(){t.a.removeItem(e)})},e.$=function(){},e.ea=function(){};var vu,gu,bu={C:hu,Ta:du},wu={C:hu,Ta:du},_u={C:zs,Ta:pu},Eu={C:hu,Ta:pu},Tu={ad:"local",NONE:"none",cd:"session"};function Su(){var e=!(kr(yr())||!sr()),t=Er(),n=gr();this.m=e,this.h=t,this.l=n,this.a={},e=vu=vu||new yu;try{this.g=!$n()&&Pr()||!h.indexedDB?new e.a.C:new cu(ur()?new lu:new e.a.C)}catch(e){this.g=new lu,this.h=!0}try{this.i=new e.a.Ta}catch(e){this.i=new lu}this.u=new lu,this.f=E(this.Pb,this),this.b={}}function Cu(){return gu=gu||new Su}function Iu(e,t){switch(t){case"session":return e.i;case"none":return e.u;default:return e.g}}function ku(e,t){return"firebase:"+e.name+(t?":"+t:"")}function Nu(e,t,n){return n=ku(t,n),"local"==t.C&&(e.b[n]=null),Iu(e,t.C).S(n)}function Au(e){e.c&&(clearInterval(e.c),e.c=null)}function Ou(e){this.a=e,this.b=Cu()}(e=Su.prototype).get=function(e,t){return Iu(this,e.C).get(ku(e,t))},e.set=function(t,e,n){var r=ku(t,n),i=this,o=Iu(this,t.C);return o.set(r,e).then(function(){return o.get(r)}).then(function(e){"local"==t.C&&(i.b[r]=e)})},e.addListener=function(e,t,n){e=ku(e,t),this.l&&(this.b[e]=h.localStorage.getItem(e)),K(this.a)&&(Iu(this,"local").$(this.f),this.h||($n()||!Pr())&&h.indexedDB||!this.l||function(r){Au(r),r.c=setInterval(function(){for(var e in r.a){var t=h.localStorage.getItem(e),n=r.b[e];t!=n&&(r.b[e]=t,t=new Rt({type:"storage",key:e,target:window,oldValue:n,newValue:t,a:!0}),r.Pb(t))}},1e3)}(this)),this.a[e]||(this.a[e]=[]),this.a[e].push(n)},e.removeListener=function(e,t,n){e=ku(e,t),this.a[e]&&(q(this.a[e],function(e){return e==n}),0==this.a[e].length&&delete this.a[e]),K(this.a)&&(Iu(this,"local").ea(this.f),Au(this))},e.Pb=function(e){if(e&&e.f){var t=e.a.key;if(null==t)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=h.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.$a(n))}else if(0==t.indexOf("firebase:")&&this.a[t]){if(void 0!==e.a.a?Iu(this,"local").ea(this.f):Au(this),this.m)if(n=h.localStorage.getItem(t),(r=e.a.newValue)!==n)null!==r?h.localStorage.setItem(t,r):h.localStorage.removeItem(t);else if(this.b[t]===r&&void 0===e.a.a)return;var o=this;n=function(){void 0===e.a.a&&o.b[t]===h.localStorage.getItem(t)||(o.b[t]=h.localStorage.getItem(t),o.$a(t))},vt&&It&&10==It&&h.localStorage.getItem(t)!==e.a.newValue&&e.a.newValue!==e.a.oldValue?setTimeout(n,10):n()}}else L(e,E(this.$a,this))},e.$a=function(e){this.a[e]&&L(this.a[e],function(e){e()})};var Du,Pu={name:"authEvent",C:"local"};function xu(){this.a=Cu()}function Ru(e,t){this.b=Mu,this.f=h.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=e,this.h=t,this.l=h.Int32Array?new Int32Array(64):Array(64),void 0!==Du||(Du=h.Int32Array?new Int32Array(Bu):Bu),this.reset()}t(Ru,function(){this.b=-1});for(var Mu=64,Lu=Mu-1,Fu=[],Uu=0;Uu<Lu;Uu++)Fu[Uu]=0;var ju=B(128,Fu);function Vu(e){for(var t=e.f,n=e.l,r=0,i=0;i<t.length;)n[r++]=t[i]<<24|t[i+1]<<16|t[i+2]<<8|t[i+3],i=4*r;for(t=16;t<64;t++){i=0|n[t-15],r=0|n[t-2];var o=(0|n[t-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[t-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[t]=o+a|0}r=0|e.a[0],i=0|e.a[1];var s=0|e.a[2],u=0|e.a[3],c=0|e.a[4],l=0|e.a[5],h=0|e.a[6];for(o=0|e.a[7],t=0;t<64;t++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|Du[t])|0)+(0|n[t])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}e.a[0]=e.a[0]+r|0,e.a[1]=e.a[1]+i|0,e.a[2]=e.a[2]+s|0,e.a[3]=e.a[3]+u|0,e.a[4]=e.a[4]+c|0,e.a[5]=e.a[5]+l|0,e.a[6]=e.a[6]+h|0,e.a[7]=e.a[7]+o|0}function qu(e,t,n){void 0===n&&(n=t.length);var r=0,i=e.c;if(l(t))for(;r<n;)e.f[i++]=t.charCodeAt(r++),i==e.b&&(Vu(e),i=0);else{if(!m(t))throw Error("message must be string or array");for(;r<n;){var o=t[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");e.f[i++]=o,i==e.b&&(Vu(e),i=0)}}e.c=i,e.g+=n}Ru.prototype.reset=function(){this.g=this.c=0,this.a=h.Int32Array?new Int32Array(this.h):W(this.h)};var Bu=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Wu(){Ru.call(this,8,zu)}t(Wu,Ru);var zu=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ku(e,t,n,r,i){this.u=e,this.i=t,this.l=n,this.m=r||null,this.o=i||null,this.h=t+":"+n,this.v=new xu,this.g=new Ou(this.h),this.f=null,this.b=[],this.a=this.c=null}function Hu(e){return new Xr("invalid-cordova-configuration",e)}function Qu(e){var t=new Wu;qu(t,e),e=[];var n=8*t.g;t.c<56?qu(t,ju,56-t.c):qu(t,ju,t.b-(t.c-56));for(var r=63;56<=r;r--)t.f[r]=255&n,n/=256;for(Vu(t),r=n=0;r<t.i;r++)for(var i=24;0<=i;i-=8)e[n++]=t.a[r]>>i&255;return function(e){return F(e,function(e){return 1<(e=e.toString(16)).length?e:"0"+e}).join("")}(e)}function Gu(e,t){for(var n=0;n<e.b.length;n++)try{e.b[n](t)}catch(e){}}function Yu(r){return r.f||(r.f=r.ia().then(function(){return new Be(function(n){r.Aa(function e(t){return n(t),r.Na(e),!1}),function(i){function t(r){e=!0,n&&n.cancel(),Xu(i).then(function(e){var t=o;if(e&&r&&r.url){var n=null;-1!=(t=Bi(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=Cr(_n(n=En(t),"firebaseError")||null))?$r(n):null)?new _o(e.c,e.b,null,null,n,null,e.R()):new _o(e.c,e.b,t,e.f,null,null,e.R())),t=n||o}Gu(i,t)})}var o=new _o("unknown",null,null,null,new Xr("no-auth-event")),e=!1,n=cn(500).then(function(){return Xu(i).then(function(){e||Gu(i,o)})}),r=h.handleOpenURL;h.handleOpenURL=function(e){if(0==e.toLowerCase().indexOf(vr("BuildInfo.packageName",h).toLowerCase()+"://")&&t({url:e}),"function"==typeof r)try{r(e)}catch(e){console.error(e)}},Co=Co||new To,function(e){var n=Co;n.a.push(e),n.b||(n.b=function(e){for(var t=0;t<n.a.length;t++)n.a[t](e)},"function"==typeof(e=vr("universalLinks.subscribe",h))&&e(null,n.b))}(t)}(r)})})),r.f}function Xu(t){var n=null;return function(e){return e.b.get(Pu,e.a).then(function(e){return Eo(e)})}(t.g).then(function(e){return n=e,Nu((e=t.g).b,Pu,e.a)}).then(function(){return n})}function $u(e){this.a=e,this.b=Cu()}(e=Ku.prototype).ia=function(){return this.Da?this.Da:this.Da=(ar(void 0)?or().then(function(){return new Be(function(e,t){var n=h.document,r=setTimeout(function(){t(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),e()},!1)})}):Xe(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof vr("universalLinks.subscribe",h))throw Hu("cordova-universal-links-plugin-fix is not installed");if(void 0===vr("BuildInfo.packageName",h))throw Hu("cordova-plugin-buildinfo is not installed");if("function"!=typeof vr("cordova.plugins.browsertab.openUrl",h))throw Hu("cordova-plugin-browsertab is not installed");if("function"!=typeof vr("cordova.InAppBrowser.open",h))throw Hu("cordova-plugin-inappbrowser is not installed")},function(){throw new Xr("cordova-not-ready")})},e.Fb=function(e,t){return t(new Xr("operation-not-supported-in-this-environment")),Ye()},e.Db=function(){return Xe(new Xr("operation-not-supported-in-this-environment"))},e.Rb=function(){return!1},e.Ob=function(){return!0},e.Jb=function(){return!0},e.Eb=function(e,t,n,r){if(this.c)return Xe(new Xr("redirect-operation-pending"));var i=this,o=h.document,a=null,s=null,u=null,c=null;return this.c=Ye().then(function(){return wo(t),Yu(i)}).then(function(){return function(n,e,t,r,i){var o=function(){for(var e=20,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}(),a=new _o(e,r,null,o,new Xr("no-auth-event"),null,i),s=vr("BuildInfo.packageName",h);if("string"!=typeof s)throw new Xr("invalid-cordova-configuration");var u=vr("BuildInfo.displayName",h),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=s;else{if(!yr().toLowerCase().match(/android/))return Xe(new Xr("operation-not-supported-in-this-environment"));c.apn=s}u&&(c.appDisplayName=u),o=Qu(o),c.sessionId=o;var l=Ws(n.u,n.i,n.l,e,t,null,r,n.m,c,n.o,i);return n.ia().then(function(){var e=n.h;return n.v.a.set(Pu,a.A(),e)}).then(function(){var e=vr("cordova.plugins.browsertab.isAvailable",h);if("function"!=typeof e)throw new Xr("invalid-cordova-configuration");var t=null;e(function(e){if(e){if("function"!=typeof(t=vr("cordova.plugins.browsertab.openUrl",h)))throw new Xr("invalid-cordova-configuration");t(l)}else{if("function"!=typeof(t=vr("cordova.InAppBrowser.open",h)))throw new Xr("invalid-cordova-configuration");e=yr(),n.a=t(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,e,t,n,r)}).then(function(){return new Be(function(t,e){s=function(){var e=vr("cordova.plugins.browsertab.close",h);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Aa(s),u=function(){a=a||cn(2e3).then(function(){e(new Xr("redirect-cancelled-by-user"))})},c=function(){Or()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(e){return Xu(i).then(function(){throw e})})}).ka(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),a&&a.cancel(),s&&i.Na(s),i.c=null})},e.Aa=function(t){this.b.push(t),Yu(this).s(function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new _o("unknown",null,null,null,new Xr("no-auth-event")),t(e))})},e.Na=function(t){q(this.b,function(e){return e==t})};var Ju={name:"pendingRedirect",C:"session"};function Zu(e){return Nu(e.b,Ju,e.a)}function ec(e,t,n){this.i={},this.v=0,this.B=e,this.u=t,this.m=n,this.h=[],this.f=!1,this.l=E(this.o,this),this.b=new dc,this.w=new bc,this.g=new $u(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.w,this.c.linkViaPopup=this.w,this.c.reauthViaPopup=this.w,this.a=tc(this.B,this.u,this.m,Ii)}function tc(e,t,n,r){var i=dh.a.SDK_VERSION||null;return ar()?new Ku(e,t,n,i,r):new js(e,t,n,i,r)}function nc(t){t.f||(t.f=!0,t.a.Aa(t.l));var n=t.a;return t.a.ia().s(function(e){throw t.a==n&&t.reset(),e})}function rc(n){n.a.Ob()&&nc(n).s(function(e){var t=new _o("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));cc(e)&&n.o(t)}),n.a.Jb()||mc(n.b)}function ic(n,e){j(n.h,e)||n.h.push(e),n.f||function(e){return e.b.get(Ju,e.a).then(function(e){return"pending"==e})}(n.g).then(function(e){e?Zu(n.g).then(function(){nc(n).s(function(e){var t=new _o("unknown",null,null,null,new Xr("operation-not-supported-in-this-environment"));cc(e)&&n.o(t)})}):rc(n)}).s(function(){rc(n)})}function oc(e,t){q(e.h,function(e){return e==t})}ec.prototype.reset=function(){this.f=!1,this.a.Na(this.l),this.a=tc(this.B,this.u,this.m),this.i={}},ec.prototype.o=function(e){if(!e)throw new Xr("invalid-auth-event");if(6e5<=S()-this.v&&(this.i={},this.v=0),e&&e.getUid()&&this.i.hasOwnProperty(e.getUid()))return!1;for(var t=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.xb(e.c,e.b)){(t=this.c[e.c])&&(t.h(e,r),e&&(e.f||e.b)&&(this.i[e.getUid()]=!0,this.v=S())),t=!0;break}}return mc(this.b),t};var ac=new Ar(2e3,1e4),sc=new Ar(3e4,6e4);function uc(e,t,n,r,i,o,a){return e.a.Db(t,n,r,function(){e.f||(e.f=!0,e.a.Aa(e.l))},function(){e.reset()},i,o,a)}function cc(e){return!(!e||"auth/cordova-not-ready"!=e.code)}function lc(t,e,n,r,i){var o;return function(e){return e.b.set(Ju,"pending",e.a)}(t.g).then(function(){return t.a.Eb(e,n,r,i).s(function(e){if(cc(e))throw new Xr("operation-not-supported-in-this-environment");return o=e,Zu(t.g).then(function(){throw o})}).then(function(){return t.a.Rb()?new Be(function(){}):Zu(t.g).then(function(){return t.oa()}).then(function(){}).s(function(){})})})}function hc(e,t,n,r,i){return e.a.Fb(r,function(e){t.ja(n,null,e,i)},ac.get())}ec.prototype.oa=function(){return this.b.oa()};var fc={};function pc(e,t,n){var r=t+":"+n;return fc[r]||(fc[r]=new ec(e,t,n)),fc[r]}function dc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function mc(e){e.g||(e.g=!0,gc(e,!1,null,null))}function yc(e){e.g&&!e.i&&gc(e,!1,null,null)}function vc(e,t){if(e.b=function(){return Ye(t)},e.f.length)for(var n=0;n<e.f.length;n++)e.f[n](t)}function gc(e,t,n,r){t?r?function(e,t){if(e.b=function(){return Xe(t)},e.c.length)for(var n=0;n<e.c.length;n++)e.c[n](t)}(e,r):vc(e,n):vc(e,{user:null}),e.f=[],e.c=[]}function bc(){}function wc(){this.vb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.vb},set:function(e){this.vb=e},enumerable:!1})}function _c(e,t){this.a=t,Fr(this,"verificationId",e)}function Ec(e,t,n,r){return new vo(e).Wa(t,n).then(function(e){return new _c(e,r)})}function Tc(e){var t=Ci(e);if(!(t&&t.exp&&t.auth_time&&t.iat))throw new Xr("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Ur(this,{token:e,expirationTime:Dr(1e3*t.exp),authTime:Dr(1e3*t.auth_time),issuedAtTime:Dr(1e3*t.iat),signInProvider:t.firebase&&t.firebase.sign_in_provider?t.firebase.sign_in_provider:null,claims:t})}function Sc(e,t,n){if(this.h=e,this.i=t,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function Cc(e,t){return t?(e.a=e.c,e.g()):(t=e.a,e.a*=2,e.a>e.f&&(e.a=e.f),t)}function Ic(e){this.f=e,this.b=this.a=null,this.c=0}function kc(e,t){var n=t[xa],r=t.refreshToken;t=Nc(t.expiresIn),e.b=n,e.c=t,e.a=r}function Nc(e){return S()+1e3*parseInt(e,10)}function Ac(t,e){return function(e,r){return new Be(function(t,n){"refresh_token"==r.grant_type&&r.refresh_token||"authorization_code"==r.grant_type&&r.code?Va(e,e.l+"?key="+encodeURIComponent(e.c),function(e){e?e.error?n(Os(e)):e.access_token&&e.refresh_token?t(e):n(new Xr("internal-error")):n(new Xr("network-request-failed"))},"POST",Rn(r).toString(),e.g,e.u.get()):n(new Xr("internal-error"))})}(t.f,e).then(function(e){return t.b=e.access_token,t.c=Nc(e.expires_in),t.a=e.refresh_token,{accessToken:t.b,expirationTime:t.c,refreshToken:t.a}}).s(function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e})}function Oc(e,t){this.a=e||null,this.b=t||null,Ur(this,{lastSignInTime:Dr(t||null),creationTime:Dr(e||null)})}function Dc(e,t,n,r,i,o){Ur(this,{uid:e,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:t})}function Pc(e,t){for(var n in xt.call(this,e),t)this[n]=t[n]}function xc(e,t,n){this.I=[],this.l=e.apiKey,this.m=e.appName,this.o=e.authDomain||null,e=dh.a.SDK_VERSION?mr(dh.a.SDK_VERSION):null,this.a=new Da(this.l,Ni(Ii),e),this.b=new Ic(this.a),Vc(this,t[xa]),kc(this.b,t),Fr(this,"refreshToken",this.b.a),Wc(this,n||{}),rn.call(this),this.J=!1,this.o&&br()&&(this.i=pc(this.o,this.l,this.m)),this.O=[],this.h=null,this.w=function(t){return new Sc(function(){return t.G(!0)},function(e){return!(!e||"auth/network-request-failed"!=e.code)},function(){var e=t.b.c-S()-3e5;return 0<e?e:0})}(this),this.W=E(this.Ja,this);var r=this;this.ga=null,this.xa=function(e){r.ua(e.g)},this.Z=null,this.P=[],this.wa=function(e){Mc(r,e.c)},this.Y=null}function Rc(e,t){e.Z&&Gt(e.Z,"languageCodeChanged",e.xa),(e.Z=t)&&Kt(t,"languageCodeChanged",e.xa)}function Mc(e,t){e.P=t,ja(e.a,dh.a.SDK_VERSION?mr(dh.a.SDK_VERSION,e.P):null)}function Lc(e,t){e.Y&&Gt(e.Y,"frameworkChanged",e.wa),(e.Y=t)&&Kt(t,"frameworkChanged",e.wa)}function Fc(t){try{return dh.a.app(t.m).auth()}catch(e){throw new Xr("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Uc(e){e.B||e.w.b||(e.w.start(),Gt(e,"tokenChanged",e.W),Kt(e,"tokenChanged",e.W))}function jc(e){Gt(e,"tokenChanged",e.W),e.w.stop()}function Vc(e,t){e.ma=t,Fr(e,"_lat",t)}function qc(e){for(var t=[],n=0;n<e.O.length;n++)t.push(e.O[n](e));return Je(t).then(function(){return e})}function Bc(e){e.i&&!e.J&&(e.J=!0,ic(e.i,e))}function Wc(e,t){Ur(e,{uid:t.uid,displayName:t.displayName||null,photoURL:t.photoURL||null,email:t.email||null,emailVerified:t.emailVerified||!1,phoneNumber:t.phoneNumber||null,isAnonymous:t.isAnonymous||!1,tenantId:t.tenantId||null,metadata:new Oc(t.createdAt,t.lastLoginAt),providerData:[]}),e.a.b=e.tenantId}function zc(){}function Kc(e){return Ye().then(function(){if(e.B)throw new Xr("app-deleted")})}function Hc(e){return F(e.providerData,function(e){return e.providerId})}function Qc(e,t){t&&(Gc(e,t.providerId),e.providerData.push(t))}function Gc(e,t){q(e.providerData,function(e){return e.providerId==t})}function Yc(e,t,n){("uid"!=t||n)&&e.hasOwnProperty(t)&&Fr(e,t,n)}function Xc(t,e){t!=e&&(Ur(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Fr(t,"metadata",function(e){return new Oc(e.a,e.b)}(e.metadata)):Fr(t,"metadata",new Oc),L(e.providerData,function(e){Qc(t,e)}),function(e,t){e.b=t.b,e.a=t.a,e.c=t.c}(t.b,e.b),Fr(t,"refreshToken",t.b.a))}function $c(n){return n.G().then(function(e){var t=n.isAnonymous;return function(e,t){return Ns(e.a,cs,{idToken:t}).then(E(e.zc,e))}(n,e).then(function(){return t||Yc(n,"isAnonymous",!1),e})})}function Jc(e,t){t[xa]&&e.ma!=t[xa]&&(kc(e.b,t),e.dispatchEvent(new Pc("tokenChanged")),Vc(e,t[xa]),Yc(e,"refreshToken",e.b.a))}function Zc(e,t){return $c(e).then(function(){if(j(Hc(e),t))return qc(e).then(function(){throw new Xr("provider-already-linked")})})}function el(e,t,n){return jr({user:e,credential:bo(t),additionalUserInfo:t=xi(t),operationType:n})}function tl(e,t){return Jc(e,t),e.reload().then(function(){return e})}function nl(n,r,e,t,i){if(!br())return Xe(new Xr("operation-not-supported-in-this-environment"));if(n.h&&!i)return Xe(n.h);var o=Pi(e.providerId),a=Ir(n.uid+":::"),s=null;(!Er()||sr())&&n.o&&e.isOAuthProvider&&(s=Ws(n.o,n.l,n.m,r,e,null,a,dh.a.SDK_VERSION||null,null,null,n.tenantId));var u=nr(s,o&&o.sa,o&&o.ra);return t=t().then(function(){if(il(n),!i)return n.G().then(function(){})}).then(function(){return uc(n.i,u,r,e,a,!!s,n.tenantId)}).then(function(){return new Be(function(e,t){n.ja(r,null,new Xr("cancelled-popup-request"),n.g||null),n.f=e,n.v=t,n.g=a,n.c=hc(n.i,n,r,u,a)})}).then(function(e){return u&&tr(u),e?jr(e):null}).s(function(e){throw u&&tr(u),e}),ol(n,t,i)}function rl(t,e,n,r,i){if(!br())return Xe(new Xr("operation-not-supported-in-this-environment"));if(t.h&&!i)return Xe(t.h);var o=null,a=Ir(t.uid+":::");return r=r().then(function(){if(il(t),!i)return t.G().then(function(){})}).then(function(){return t.ca=a,qc(t)}).then(function(e){return t.da&&(e=(e=t.da).b.set(ul,t.A(),e.a)),e}).then(function(){return lc(t.i,e,n,a,t.tenantId)}).s(function(e){if(o=e,t.da)return cl(t.da);throw o}).then(function(){if(o)throw o}),ol(t,r,i)}function il(e){if(!e.i||!e.J){if(e.i&&!e.J)throw new Xr("internal-error");throw new Xr("auth-domain-config-required")}}function ol(e,t,n){var r=function(t,e,n){return t.h&&!n?(e.cancel(),Xe(t.h)):e.s(function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.h||t.dispatchEvent(new Pc("userInvalidated")),t.h=e),e})}(e,t,n);return e.I.push(r),r.ka(function(){V(e.I,r)}),r}function al(e){if(!e.apiKey)return null;var t={apiKey:e.apiKey,authDomain:e.authDomain,appName:e.appName},n={};if(!(e.stsTokenManager&&e.stsTokenManager.accessToken&&e.stsTokenManager.expirationTime))return null;n[xa]=e.stsTokenManager.accessToken,n.refreshToken=e.stsTokenManager.refreshToken||null,n.expiresIn=(e.stsTokenManager.expirationTime-S())/1e3;var r=new xc(t,n,e);return e.providerData&&L(e.providerData,function(e){e&&Qc(r,jr(e))}),e.redirectEventId&&(r.ca=e.redirectEventId),r}function sl(e){this.a=e,this.b=Cu()}dc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},dc.prototype.h=function(e,t){if(e){this.reset(),this.g=!0;var n=e.c,r=e.b,i=e.a&&"auth/web-storage-unsupported"==e.a.code,o=e.a&&"auth/operation-not-supported-in-this-environment"==e.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?e.a?(gc(this,!0,null,e.a),Ye()):t.Ba(n,r)?function(t,e,n){n=n.Ba(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.R(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then(function(e){gc(t,s,e,null)}).s(function(e){gc(t,s,null,e)})}(this,e,t):Xe(new Xr("invalid-auth-event")):(gc(this,!1,null,null),Ye())}else Xe(new Xr("invalid-auth-event"))},dc.prototype.oa=function(){var n=this;return new Be(function(e,t){n.b?n.b().then(e,t):(n.f.push(e),n.c.push(t),function(e){var t=new Xr("timeout");e.a&&e.a.cancel(),e.a=cn(sc.get()).then(function(){e.b||(e.g=!0,gc(e,!0,null,t))})}(n))})},bc.prototype.h=function(e,t){if(e){var n=e.c,r=e.b;e.a?(t.ja(e.c,null,e.a,e.b),Ye()):t.Ba(n,r)?function(e,t){var n=e.b,r=e.c;t.Ba(r,n)(e.g,e.f,e.R(),e.i).then(function(e){t.ja(r,e,null,n)}).s(function(e){t.ja(r,null,e,n)})}(e,t):Xe(new Xr("invalid-auth-event"))}else Xe(new Xr("invalid-auth-event"))},_c.prototype.confirm=function(e){return e=go(this.verificationId,e),this.a(e)},Sc.prototype.start=function(){this.a=this.c,function t(n,e){n.stop();n.b=cn(Cc(n,e)).then(function(){return t=h.document,n=null,Or()||!t?Ye():new Be(function(e){n=function(){Or()&&(t.removeEventListener("visibilitychange",n,!1),e())},t.addEventListener("visibilitychange",n,!1)}).s(function(e){throw t.removeEventListener("visibilitychange",n,!1),e});var t,n}).then(function(){return n.h()}).then(function(){t(n,!0)}).s(function(e){n.i(e)&&t(n,!1)})}(this,!0)},Sc.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},Ic.prototype.A=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b,expirationTime:this.c}},Ic.prototype.getToken=function(e){return e=!!e,this.b&&!this.a?Xe(new Xr("user-token-expired")):e||!this.b||S()>this.c-3e4?this.a?Ac(this,{grant_type:"refresh_token",refresh_token:this.a}):Ye(null):Ye({accessToken:this.b,expirationTime:this.c,refreshToken:this.a})},Oc.prototype.A=function(){return{lastLoginAt:this.b,createdAt:this.a}},t(Pc,xt),t(xc,rn),xc.prototype.ua=function(e){this.ga=e,Ua(this.a,e)},xc.prototype.ha=function(){return this.ga},xc.prototype.Ca=function(){return W(this.P)},xc.prototype.Ja=function(){this.w.b&&(this.w.stop(),this.w.start())},Fr(xc.prototype,"providerId","firebase"),(e=xc.prototype).reload=function(){var e=this;return ol(this,Kc(this).then(function(){return $c(e).then(function(){return qc(e)}).then(zc)}))},e.dc=function(e){return this.G(e).then(function(e){return new Tc(e)})},e.G=function(e){var t=this;return ol(this,Kc(this).then(function(){return t.b.getToken(e)}).then(function(e){if(!e)throw new Xr("internal-error");return e.accessToken!=t.ma&&(Vc(t,e.accessToken),t.dispatchEvent(new Pc("tokenChanged"))),Yc(t,"refreshToken",e.refreshToken),e.accessToken}))},e.zc=function(e){if(!(e=e.users)||!e.length)throw new Xr("internal-error");Wc(this,{uid:(e=e[0]).localId,displayName:e.displayName,photoURL:e.photoUrl,email:e.email,emailVerified:!!e.emailVerified,phoneNumber:e.phoneNumber,lastLoginAt:e.lastLoginAt,createdAt:e.createdAt,tenantId:e.tenantId});for(var t=function(e){return(e=e.providerUserInfo)&&e.length?F(e,function(e){return new Dc(e.rawId,e.providerId,e.email,e.displayName,e.photoUrl,e.phoneNumber)}):[]}(e),n=0;n<t.length;n++)Qc(this,t[n]);Yc(this,"isAnonymous",!(this.email&&e.passwordHash||this.providerData&&this.providerData.length))},e.Ac=function(e){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.hb(e)},e.hb=function(e){var t=this,n=null;return ol(this,e.f(this.a,this.uid).then(function(e){return Jc(t,e),n=el(t,e,"reauthenticate"),t.h=null,t.reload()}).then(function(){return n}),!0)},e.rc=function(e){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.fb(e)},e.fb=function(t){var n=this,r=null;return ol(this,Zc(this,t.providerId).then(function(){return n.G()}).then(function(e){return t.b(n.a,e)}).then(function(e){return r=el(n,e,"link"),tl(n,e)}).then(function(){return r}))},e.sc=function(e,t){var n=this;return ol(this,Zc(this,"phone").then(function(){return Ec(Fc(n),e,t,E(n.fb,n))}))},e.Bc=function(e,t){var n=this;return ol(this,Ye().then(function(){return Ec(Fc(n),e,t,E(n.hb,n))}),!0)},e.rb=function(t){var n=this;return ol(this,this.G().then(function(e){return n.a.rb(e,t)}).then(function(e){return Jc(n,e),n.reload()}))},e.Sc=function(t){var n=this;return ol(this,this.G().then(function(e){return t.b(n.a,e)}).then(function(e){return Jc(n,e),n.reload()}))},e.sb=function(t){var n=this;return ol(this,this.G().then(function(e){return n.a.sb(e,t)}).then(function(e){return Jc(n,e),n.reload()}))},e.tb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Kc(this);var n=this;return ol(this,this.G().then(function(e){return n.a.tb(e,{displayName:t.displayName,photoUrl:t.photoURL})}).then(function(e){return Jc(n,e),Yc(n,"displayName",e.displayName||null),Yc(n,"photoURL",e.photoUrl||null),L(n.providerData,function(e){"password"===e.providerId&&(Fr(e,"displayName",n.displayName),Fr(e,"photoURL",n.photoURL))}),qc(n)}).then(zc))},e.Qc=function(t){var n=this;return ol(this,$c(this).then(function(e){return j(Hc(n),t)?function(e,t,n){return Ns(e,as,{idToken:t,deleteProvider:n})}(n.a,e,[t]).then(function(e){var t={};return L(e.providerUserInfo||[],function(e){t[e.providerId]=!0}),L(Hc(n),function(e){t[e]||Gc(n,e)}),t[vo.PROVIDER_ID]||Fr(n,"phoneNumber",null),qc(n)}):qc(n).then(function(){throw new Xr("no-such-provider")})}))},e.delete=function(){var t=this;return ol(this,this.G().then(function(e){return Ns(t.a,os,{idToken:e})}).then(function(){t.dispatchEvent(new Pc("userDeleted"))})).then(function(){for(var e=0;e<t.I.length;e++)t.I[e].cancel("app-deleted");Rc(t,null),Lc(t,null),t.I=[],t.B=!0,jc(t),Fr(t,"refreshToken",null),t.i&&oc(t.i,t)})},e.xb=function(e,t){return!!("linkViaPopup"==e&&(this.g||null)==t&&this.f||"reauthViaPopup"==e&&(this.g||null)==t&&this.f||"linkViaRedirect"==e&&(this.ca||null)==t||"reauthViaRedirect"==e&&(this.ca||null)==t)},e.ja=function(e,t,n,r){"linkViaPopup"!=e&&"reauthViaPopup"!=e||r!=(this.g||null)||(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"linkViaPopup"==e&&t==(this.g||null)?E(this.Bb,this):"reauthViaPopup"==e&&t==(this.g||null)?E(this.Cb,this):"linkViaRedirect"==e&&(this.ca||null)==t?E(this.Bb,this):"reauthViaRedirect"==e&&(this.ca||null)==t?E(this.Cb,this):null},e.tc=function(e){var t=this;return nl(this,"linkViaPopup",e,function(){return Zc(t,e.providerId).then(function(){return qc(t)})},!1)},e.Cc=function(e){return nl(this,"reauthViaPopup",e,function(){return Ye()},!0)},e.uc=function(e){var t=this;return rl(this,"linkViaRedirect",e,function(){return Zc(t,e.providerId)},!1)},e.Dc=function(e){return rl(this,"reauthViaRedirect",e,function(){return Ye()},!0)},e.Bb=function(t,n,e,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return e=this.G().then(function(e){return Ja(i.a,{requestUri:t,postBody:r,sessionId:n,idToken:e})}).then(function(e){return o=el(i,e,"link"),tl(i,e)}).then(function(){return o}),ol(this,e)},e.Cb=function(e,t,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return ol(this,Ye().then(function(){return zi(Za(i.a,{requestUri:e,sessionId:t,postBody:r,tenantId:n}),i.uid)}).then(function(e){return o=el(i,e,"reauthenticate"),Jc(i,e),i.h=null,i.reload()}).then(function(){return o}),!0)},e.jb=function(t){var n=this,r=null;return ol(this,this.G().then(function(e){return r=e,void 0===t||K(t)?{}:bi(new ci(t))}).then(function(e){return n.a.jb(r,e)}).then(function(e){if(n.email!=e)return n.reload()}).then(function(){}))},e.toJSON=function(){return this.A()},e.A=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.A(),redirectEventId:this.ca||null};return this.metadata&&G(t,this.metadata.A()),L(this.providerData,function(e){t.providerData.push(function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}(e))}),t};var ul={name:"redirectUser",C:"session"};function cl(e){return Nu(e.b,ul,e.a)}function ll(e){this.a=e,this.b=Cu(),this.c=null,this.f=function(t){var n=pl("local"),r=pl("session"),i=pl("none");return function(n,r,i){var o=ku(r,i),a=Iu(n,r.C);return n.get(r,i).then(function(e){var t=null;try{t=Cr(h.localStorage.getItem(o))}catch(e){}if(t&&!e)return h.localStorage.removeItem(o),n.set(r,t,i);t&&e&&"localStorage"!=a.type&&h.localStorage.removeItem(o)})}(t.b,n,t.a).then(function(){return t.b.get(r,t.a)}).then(function(e){return e?r:t.b.get(i,t.a).then(function(e){return e?i:t.b.get(n,t.a).then(function(e){return e?n:t.b.get(fl,t.a).then(function(e){return e?pl(e):n})})})}).then(function(e){return t.c=e,hl(t,e.C)}).s(function(){t.c||(t.c=n)})}(this),this.b.addListener(pl("local"),this.a,E(this.g,this))}function hl(e,t){var n,r=[];for(n in Tu)Tu[n]!==t&&r.push(Nu(e.b,pl(Tu[n]),e.a));return r.push(Nu(e.b,fl,e.a)),function(s){return new Be(function(n,t){var r=s.length,i=[];if(r)for(var e=function(e,t){r--,i[e]=t,0==r&&n(i)},o=function(e){t(e)},a=0;a<s.length;a++)$e(s[a],T(e,a),o);else n(i)})}(r)}ll.prototype.g=function(){var t=this,n=pl("local");vl(this,function(){return Ye().then(function(){return t.c&&"local"!=t.c.C?t.b.get(n,t.a):null}).then(function(e){if(e)return hl(t,"local").then(function(){t.c=n})})})};var fl={name:"persistence",C:"session"};function pl(e){return{name:"authUser",C:e}}function dl(e,t){return vl(e,function(){return e.b.set(e.c,t.A(),e.a)})}function ml(e){return vl(e,function(){return Nu(e.b,e.c,e.a)})}function yl(e,t){return vl(e,function(){return e.b.get(e.c,e.a).then(function(e){return e&&t&&(e.authDomain=t),al(e||{})})})}function vl(e,t){return e.f=e.f.then(t,t),e.f}function gl(e){if(this.l=!1,Fr(this,"settings",new wc),Fr(this,"app",e),!Il(this).options||!Il(this).options.apiKey)throw new Xr("invalid-api-key");e=dh.a.SDK_VERSION?mr(dh.a.SDK_VERSION):null,this.b=new Da(Il(this).options&&Il(this).options.apiKey,Ni(Ii),e),this.O=[],this.m=[],this.J=[],this.Ub=dh.a.INTERNAL.createSubscribe(E(this.oc,this)),this.W=void 0,this.Vb=dh.a.INTERNAL.createSubscribe(E(this.pc,this)),Sl(this,null),this.h=new ll(Il(this).options.apiKey+":"+Il(this).name),this.w=new sl(Il(this).options.apiKey+":"+Il(this).name),this.Y=Ol(this,function(n){var e=Il(n).options.authDomain,t=function(t){var e=function(e,t){return e.b.get(ul,e.a).then(function(e){return e&&t&&(e.authDomain=t),al(e||{})})}(t.w,Il(t).options.authDomain).then(function(e){return(t.B=e)&&(e.da=t.w),cl(t.w)});return Ol(t,e)}(n).then(function(){return yl(n.h,e)}).then(function(t){return t?(t.da=n.w,n.B&&(n.B.ca||null)==(t.ca||null)?t:t.reload().then(function(){return dl(n.h,t).then(function(){return t})}).s(function(e){return"auth/network-request-failed"==e.code?t:ml(n.h)})):null}).then(function(e){Sl(n,e||null)});return Ol(n,t)}(this)),this.i=Ol(this,function(t){return t.Y.then(function(){return El(t)}).s(function(){}).then(function(){if(!t.l)return t.ma()}).s(function(){}).then(function(){if(!t.l){t.ga=!0;var e=t.h;e.b.addListener(pl("local"),e.a,t.ma)}})}(this)),this.ga=!1,this.ma=E(this.Nc,this),this.ub=E(this.aa,this),this.wa=E(this.bc,this),this.xa=E(this.mc,this),this.Ja=E(this.nc,this),this.a=null,function(t){var n=Il(t).options.authDomain,r=Il(t).options.apiKey;n&&br()&&(t.Tb=t.Y.then(function(){if(!t.l){if(t.a=pc(n,r,Il(t).name),ic(t.a,t),kl(t)&&Bc(kl(t)),t.B){Bc(t.B);var e=t.B;e.ua(t.ha()),Rc(e,t),Mc(e=t.B,t.I),Lc(e,t),t.B=null}return t.a}}))}(this),this.INTERNAL={},this.INTERNAL.delete=E(this.delete,this),this.INTERNAL.logFramework=E(this.vc,this),this.o=0,rn.call(this),function(e){Object.defineProperty(e,"lc",{get:function(){return this.ha()},set:function(e){this.ua(e)},enumerable:!1}),e.Z=null,Object.defineProperty(e,"ti",{get:function(){return this.R()},set:function(e){this.nb(e)},enumerable:!1}),e.P=null}(this),this.I=[]}function bl(e){xt.call(this,"languageCodeChanged"),this.g=e}function wl(e){xt.call(this,"frameworkChanged"),this.c=e}function _l(e){return e.Tb||Xe(new Xr("auth-domain-config-required"))}function El(e){if(!br())return Xe(new Xr("operation-not-supported-in-this-environment"));var t=_l(e).then(function(){return e.a.oa()}).then(function(e){return e?jr(e):null});return Ol(e,t)}function Tl(t,e){var n={};return n.apiKey=Il(t).options.apiKey,n.authDomain=Il(t).options.authDomain,n.appName=Il(t).name,t.Y.then(function(){return function(e,t,n,r){var i=new xc(e,t);return n&&(i.da=n),r&&Mc(i,r),i.reload().then(function(){return i})}(n,e,t.w,t.Ca())}).then(function(e){return kl(t)&&e.uid==kl(t).uid?Xc(kl(t),e):(Sl(t,e),Bc(e)),t.aa(e)}).then(function(){Al(t)})}function Sl(e,t){kl(e)&&(function(e,t){q(e.O,function(e){return e==t})}(kl(e),e.ub),Gt(kl(e),"tokenChanged",e.wa),Gt(kl(e),"userDeleted",e.xa),Gt(kl(e),"userInvalidated",e.Ja),jc(kl(e))),t&&(t.O.push(e.ub),Kt(t,"tokenChanged",e.wa),Kt(t,"userDeleted",e.xa),Kt(t,"userInvalidated",e.Ja),0<e.o&&Uc(t)),Fr(e,"currentUser",t),t&&(t.ua(e.ha()),Rc(t,e),Mc(t,e.I),Lc(t,e))}function Cl(t,e){var n=null,r=null;return Ol(t,e.then(function(e){return n=bo(e),r=xi(e),Tl(t,e)}).then(function(){return jr({user:kl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})}))}function Il(e){return e.app}function kl(e){return e.currentUser}function Nl(e){return kl(e)&&kl(e)._lat||null}function Al(e){if(e.ga){for(var t=0;t<e.m.length;t++)e.m[t]&&e.m[t](Nl(e));if(e.W!==e.getUid()&&e.J.length)for(e.W=e.getUid(),t=0;t<e.J.length;t++)e.J[t]&&e.J[t](Nl(e))}}function Ol(e,t){return e.O.push(t),t.ka(function(){V(e.O,t)}),t}function Dl(){}function Pl(){this.a={},this.b=1e12}ll.prototype.mb=function(t){var n=null,r=this;return function(e){var t=new Xr("invalid-persistence-type"),n=new Xr("unsupported-persistence-type");e:{for(r in Tu)if(Tu[r]==e){var r=!0;break e}r=!1}if(!r||"string"!=typeof e)throw t;switch(cr()){case"ReactNative":if("session"===e)throw n;break;case"Node":if("none"!==e)throw n;break;default:if(!gr()&&"none"!==e)throw n}}(t),vl(this,function(){return t!=r.c.C?r.b.get(r.c,r.a).then(function(e){return n=e,hl(r,t)}).then(function(){if(r.c=pl(t),n)return r.b.set(r.c,n,r.a)}):Ye()})},t(gl,rn),t(bl,xt),t(wl,xt),(e=gl.prototype).mb=function(e){return e=this.h.mb(e),Ol(this,e)},e.ua=function(e){this.Z===e||this.l||(this.Z=e,Ua(this.b,this.Z),this.dispatchEvent(new bl(this.ha())))},e.ha=function(){return this.Z},e.Tc=function(){var e=h.navigator;this.ua(e&&(e.languages&&e.languages[0]||e.language||e.userLanguage)||null)},e.vc=function(e){this.I.push(e),ja(this.b,dh.a.SDK_VERSION?mr(dh.a.SDK_VERSION,this.I):null),this.dispatchEvent(new wl(this.I))},e.Ca=function(){return W(this.I)},e.nb=function(e){this.P===e||this.l||(this.P=e,this.b.b=this.P)},e.R=function(){return this.P},e.toJSON=function(){return{apiKey:Il(this).options.apiKey,authDomain:Il(this).options.authDomain,appName:Il(this).name,currentUser:kl(this)&&kl(this).A()}},e.xb=function(e,t){switch(e){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==t&&!!this.f;default:return!1}},e.ja=function(e,t,n,r){"signInViaPopup"==e&&this.g==r&&(n&&this.v?this.v(n):t&&!n&&this.f&&this.f(t),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.v)},e.Ba=function(e,t){return"signInViaRedirect"==e||"signInViaPopup"==e&&this.g==t&&this.f?E(this.ac,this):null},e.ac=function(e,t,n,r){var i=this;e={requestUri:e,postBody:r,sessionId:t,tenantId:n},this.c&&(this.c.cancel(),this.c=null);var o=null,a=null,s=$a(i.b,e).then(function(e){return o=bo(e),a=xi(e),e});return Ol(this,e=i.Y.then(function(){return s}).then(function(e){return Tl(i,e)}).then(function(){return jr({user:kl(i),credential:o,additionalUserInfo:a,operationType:"signIn"})}))},e.Lc=function(t){if(!br())return Xe(new Xr("operation-not-supported-in-this-environment"));var n=this,e=Pi(t.providerId),r=Ir(),i=null;(!Er()||sr())&&Il(this).options.authDomain&&t.isOAuthProvider&&(i=Ws(Il(this).options.authDomain,Il(this).options.apiKey,Il(this).name,"signInViaPopup",t,null,r,dh.a.SDK_VERSION||null,null,null,this.R()));var o=nr(i,e&&e.sa,e&&e.ra);return Ol(this,e=_l(this).then(function(e){return uc(e,o,"signInViaPopup",t,r,!!i,n.R())}).then(function(){return new Be(function(e,t){n.ja("signInViaPopup",null,new Xr("cancelled-popup-request"),n.g),n.f=e,n.v=t,n.g=r,n.c=hc(n.a,n,"signInViaPopup",o,r)})}).then(function(e){return o&&tr(o),e?jr(e):null}).s(function(e){throw o&&tr(o),e}))},e.Mc=function(e){if(!br())return Xe(new Xr("operation-not-supported-in-this-environment"));var t=this;return Ol(this,_l(this).then(function(){return function(e){return vl(e,function(){return e.b.set(fl,e.c.C,e.a)})}(t.h)}).then(function(){return lc(t.a,"signInViaRedirect",e,void 0,t.R())}))},e.oa=function(){var t=this;return El(this).then(function(e){return t.a&&yc(t.a.b),e}).s(function(e){throw t.a&&yc(t.a.b),e})},e.Rc=function(e){if(!e)return Xe(new Xr("null-user"));if(this.P!=e.tenantId)return Xe(new Xr("tenant-id-mismatch"));var t=this,n={};n.apiKey=Il(this).options.apiKey,n.authDomain=Il(this).options.authDomain,n.appName=Il(this).name;var r=function(e,t,n,r){t=t||{apiKey:e.l,authDomain:e.o,appName:e.m};var i=e.b,o={};return o[xa]=i.b,o.refreshToken=i.a,o.expiresIn=(i.c-S())/1e3,t=new xc(t,o),n&&(t.da=n),r&&Mc(t,r),Xc(t,e),t}(e,n,t.w,t.Ca());return Ol(this,this.i.then(function(){if(Il(t).options.apiKey!=e.l)return r.reload()}).then(function(){return kl(t)&&e.uid==kl(t).uid?(Xc(kl(t),e),t.aa(e)):(Sl(t,r),Bc(r),t.aa(r))}).then(function(){Al(t)}))},e.pb=function(){var e=this,t=this.i.then(function(){return e.a&&yc(e.a.b),kl(e)?(Sl(e,null),ml(e.h).then(function(){Al(e)})):Ye()});return Ol(this,t)},e.Nc=function(){var r=this;return yl(this.h,Il(this).options.authDomain).then(function(e){if(!r.l){var t;if(t=kl(r)&&e){t=kl(r).uid;var n=e.uid;t=null!=t&&""!==t&&null!=n&&""!==n&&t==n}if(t)return Xc(kl(r),e),kl(r).G();(kl(r)||e)&&(Sl(r,e),e&&(Bc(e),e.da=r.w),r.a&&ic(r.a,r),Al(r))}})},e.aa=function(e){return dl(this.h,e)},e.bc=function(){Al(this),this.aa(kl(this))},e.mc=function(){this.pb()},e.nc=function(){this.pb()},e.oc=function(e){var t=this;this.addAuthTokenListener(function(){e.next(kl(t))})},e.pc=function(e){var t=this;!function(e,t){e.J.push(t),Ol(e,e.i.then(function(){!e.l&&j(e.J,t)&&e.W!==e.getUid()&&(e.W=e.getUid(),t(Nl(e)))}))}(this,function(){e.next(kl(t))})},e.xc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then(function(){y(e)?e(kl(r)):y(e.next)&&e.next(kl(r))}),this.Ub(e,t,n)},e.wc=function(e,t,n){var r=this;return this.ga&&Promise.resolve().then(function(){r.W=r.getUid(),y(e)?e(kl(r)):y(e.next)&&e.next(kl(r))}),this.Vb(e,t,n)},e.cc=function(e){var t=this,n=this.i.then(function(){return kl(t)?kl(t).G(e).then(function(e){return{accessToken:e}}):null});return Ol(this,n)},e.Hc=function(e){var n=this;return this.i.then(function(){return Cl(n,Ns(n.b,Ts,{token:e}))}).then(function(e){var t=e.user;return Yc(t,"isAnonymous",!1),n.aa(t),e})},e.Ic=function(e,t){var n=this;return this.i.then(function(){return Cl(n,Ns(n.b,Ss,{email:e,password:t}))})},e.Xb=function(e,t){var n=this;return this.i.then(function(){return Cl(n,Ns(n.b,rs,{email:e,password:t}))})},e.Sa=function(e){var t=this;return this.i.then(function(){return Cl(t,e.na(t.b))})},e.Gc=function(e){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Sa(e)},e.ob=function(){var n=this;return this.i.then(function(){var e=kl(n);return e&&e.isAnonymous?jr({user:e,credential:null,additionalUserInfo:jr({providerId:null,isNewUser:!1}),operationType:"signIn"}):Cl(n,n.b.ob()).then(function(e){var t=e.user;return Yc(t,"isAnonymous",!0),n.aa(t),e})})},e.getUid=function(){return kl(this)&&kl(this).uid||null},e.Wb=function(e){this.addAuthTokenListener(e),this.o++,0<this.o&&kl(this)&&Uc(kl(this))},e.Ec=function(t){var n=this;L(this.m,function(e){e==t&&n.o--}),this.o<0&&(this.o=0),0==this.o&&kl(this)&&jc(kl(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(e){var t=this;this.m.push(e),Ol(this,this.i.then(function(){t.l||j(t.m,e)&&e(Nl(t))}))},e.removeAuthTokenListener=function(t){q(this.m,function(e){return e==t})},e.delete=function(){this.l=!0;for(var e=0;e<this.O.length;e++)this.O[e].cancel("app-deleted");return this.O=[],this.h&&(e=this.h).b.removeListener(pl("local"),e.a,this.ma),this.a&&(oc(this.a,this),yc(this.a.b)),Promise.resolve()},e.$b=function(e){return Ol(this,function(e,t){return Ns(e,is,{identifier:t,continueUri:wr()?Jn():"http://localhost"}).then(function(e){return e.signinMethods||[]})}(this.b,e))},e.qc=function(e){return!!fo(e)},e.lb=function(t,n){var r=this;return Ol(this,Ye().then(function(){var e=new ci(n);if(!e.c)throw new Xr("argument-error",fi+" must be true when sending sign in link to email");return bi(e)}).then(function(e){return r.b.lb(t,e)}).then(function(){}))},e.Uc=function(e){return this.Ma(e).then(function(e){return e.data.email})},e.ab=function(e,t){return Ol(this,this.b.ab(e,t).then(function(){}))},e.Ma=function(e){return Ol(this,this.b.Ma(e).then(function(e){return new qr(e)}))},e.Ya=function(e){return Ol(this,this.b.Ya(e).then(function(){}))},e.kb=function(t,e){var n=this;return Ol(this,Ye().then(function(){return void 0===e||K(e)?{}:bi(new ci(e))}).then(function(e){return n.b.kb(t,e)}).then(function(){}))},e.Kc=function(e,t){return Ol(this,Ec(this,e,t,E(this.Sa,this)))},e.Jc=function(n,r){var i=this;return Ol(this,Ye().then(function(){var e=r||Jn(),t=ho(n,e);if(!(e=fo(e)))throw new Xr("argument-error","Invalid email link!");if(e.tenantId!==i.R())throw new Xr("tenant-id-mismatch");return i.Sa(t)}))},Dl.prototype.render=function(){},Dl.prototype.reset=function(){},Dl.prototype.getResponse=function(){},Dl.prototype.execute=function(){};var xl=null;function Rl(e,t){return(t=Ml(t))&&e.a[t]||null}function Ml(e){return(e=void 0===e?1e12:e)?e.toString():null}function Ll(e,t){this.g=!1,this.c=t,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=qn(e);var n=this;this.i=function(){n.execute()},this.h?this.execute():Kt(this.f,"click",this.i)}function Fl(e){if(e.g)throw Error("reCAPTCHA mock was already deleted!")}function Ul(){}Pl.prototype.render=function(e,t){return this.a[this.b.toString()]=new Ll(e,t),this.b++},Pl.prototype.reset=function(e){var t=Rl(this,e);e=Ml(e),t&&e&&(t.delete(),delete this.a[e])},Pl.prototype.getResponse=function(e){return(e=Rl(this,e))?e.getResponse():null},Pl.prototype.execute=function(e){(e=Rl(this,e))&&e.execute()},Ll.prototype.getResponse=function(){return Fl(this),this.b},Ll.prototype.execute=function(){Fl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var e=50,t=[];0<e;)t.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),e--;return t.join("")}();var e=n.c.callback,t=n.c["expired-callback"];if(e)try{e(n.b)}catch(e){}n.a=setTimeout(function(){if(n.a=null,n.b=null,t)try{t()}catch(e){}n.h&&n.execute()},6e4)},500))},Ll.prototype.delete=function(){Fl(this),this.g=!0,clearTimeout(this.a),this.a=null,Gt(this.f,"click",this.i)},Ul.prototype.g=function(){return Ye(xl=xl||new Pl)},Ul.prototype.c=function(){};var jl=null;function Vl(){this.b=h.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ql=new Y(J,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Bl=new Ar(3e4,6e4);Vl.prototype.g=function(i){var o=this;return new Be(function(e,t){var r=setTimeout(function(){t(new Xr("network-request-failed"))},Bl.get());!h.grecaptcha||i!==o.f&&!o.b?(h[o.a]=function(){if(h.grecaptcha){o.f=i;var n=h.grecaptcha.render;h.grecaptcha.render=function(e,t){return e=n(e,t),o.b++,e},clearTimeout(r),e(h.grecaptcha)}else clearTimeout(r),t(new Xr("internal-error"));delete h[o.a]},Ye(Sa(ne(ql,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),t(new Xr("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),e(h.grecaptcha))})},Vl.prototype.c=function(){this.b--};var Wl=null;function zl(e,t,n,r,i,o,a){if(Fr(this,"type","recaptcha"),this.c=this.f=null,this.B=!1,this.u=t,this.g=null,a=a?jl=jl||new Ul:Wl=Wl||new Vl,this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Ql])throw new Xr("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Gl],!h.document)throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!qn(t)||!this.i&&qn(t).hasChildNodes())throw new Xr("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new Da(e,o||null,i||null),this.v=r||function(){return null};var s=this;this.l=[];var u=this.a[Kl];this.a[Kl]=function(e){if(Yl(s,e),"function"==typeof u)u(e);else if("string"==typeof u){var t=vr(u,h);"function"==typeof t&&t(e)}};var c=this.a[Hl];this.a[Hl]=function(){if(Yl(s,null),"function"==typeof c)c();else if("string"==typeof c){var e=vr(c,h);"function"==typeof e&&e()}}}var Kl="callback",Hl="expired-callback",Ql="sitekey",Gl="size";function Yl(e,t){for(var n=0;n<e.l.length;n++)try{e.l[n](t)}catch(e){}}function Xl(e,t){return e.h.push(t),t.ka(function(){V(e.h,t)}),t}function $l(e){if(e.B)throw new Xr("internal-error","RecaptchaVerifier instance has been destroyed.")}function Jl(e,t,n){var r=!1;try{this.b=n||dh.a.app()}catch(e){throw new Xr("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new Xr("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ca()}catch(e){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(e){}o=dh.a.SDK_VERSION?mr(dh.a.SDK_VERSION,o):null,zl.call(this,n,e,t,function(){try{var t=i.b.auth().ha()}catch(e){t=null}return t},o,Ni(Ii),r)}function Zl(e,t,n,r){e:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<t.length;a++)if(t[a].optional)o=!0;else{if(o)throw new Xr("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=t.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=t[i].optional&&void 0===n[i],!t[i].N(n[i])&&!o){if(t=t[i],i<0||i>=eh.length)throw new Xr("internal-error","Argument validator received an unsupported number of arguments.");n=eh[i],r=(r?"":n+" argument ")+(t.name?'"'+t.name+'" ':"")+"must be "+t.M+".";break e}r=null}}if(r)throw new Xr("argument-error",e+" failed: "+r)}(e=zl.prototype).Da=function(){var t=this;return this.f?this.f:this.f=Xl(this,Ye().then(function(){if(wr()&&!ur())return or();throw new Xr("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return t.m.g(t.v())}).then(function(e){return t.g=e,Ns(t.o,ds,{})}).then(function(e){t.a[Ql]=e.recaptchaSiteKey}).s(function(e){throw t.f=null,e}))},e.render=function(){$l(this);var n=this;return Xl(this,this.Da().then(function(){if(null===n.c){var e=n.u;if(!n.i){var t=qn(e);e=zn("DIV"),t.appendChild(e)}n.c=n.g.render(e,n.a)}return n.c}))},e.verify=function(){$l(this);var i=this;return Xl(this,this.render().then(function(r){return new Be(function(t){var e=i.g.getResponse(r);if(e)t(e);else{var n=function(e){e&&(function(e,t){q(e.l,function(e){return e==t})}(i,n),t(e))};i.l.push(n),i.i&&i.g.execute(i.c)}})}))},e.reset=function(){$l(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){$l(this),this.B=!0,this.m.c();for(var e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=qn(this.u);for(var t;t=e.firstChild;)e.removeChild(t)}},t(Jl,zl);var eh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function th(e,t){return{name:e||"",M:"a valid string",optional:!!t,N:l}}function nh(e,t){return{name:e||"",M:"a boolean",optional:!!t,N:n}}function rh(e,t){return{name:e||"",M:"a valid object",optional:!!t,N:v}}function ih(e,t){return{name:e||"",M:"a function",optional:!!t,N:y}}function oh(e,t){return{name:e||"",M:"null",optional:!!t,N:i}}function ah(n){return{name:n?n+"Credential":"credential",M:n?"a valid "+n+" credential":"a valid credential",optional:!1,N:function(e){if(!e)return!1;var t=!n||e.providerId===n;return!(!e.na||!t)}}}function sh(){return{name:"applicationVerifier",M:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,N:function(e){return!!(e&&l(e.type)&&y(e.verify))}}}function uh(t,n,e,r){return{name:e||"",M:t.M+" or "+n.M,optional:!!r,N:function(e){return t.N(e)||n.N(e)}}}function ch(e,t){for(var n in t){var r=t[n].name;e[r]=fh(r,e[n],t[n].j)}}function lh(e,t){for(var n in t){var r=t[n].name;r!==n&&Object.defineProperty(e,r,{get:T(function(e){return this[e]},n),set:T(function(e,t,n,r){Zl(e,[n],[r],!0),this[t]=r},r,n,t[n].Za),enumerable:!0})}}function hh(e,t,n,r){e[t]=fh(t,n,r)}function fh(e,t,n){function r(){var e=Array.prototype.slice.call(arguments);return Zl(o,n,e),t.apply(this,e)}if(!n)return t;var i,o=function(e){return(e=e.split("."))[e.length-1]}(e);for(i in t)r[i]=t[i];for(i in t.prototype)r.prototype[i]=t.prototype[i];return r}ch(gl.prototype,{Ya:{name:"applyActionCode",j:[th("code")]},Ma:{name:"checkActionCode",j:[th("code")]},ab:{name:"confirmPasswordReset",j:[th("code"),th("newPassword")]},Xb:{name:"createUserWithEmailAndPassword",j:[th("email"),th("password")]},$b:{name:"fetchSignInMethodsForEmail",j:[th("email")]},oa:{name:"getRedirectResult",j:[]},qc:{name:"isSignInWithEmailLink",j:[th("emailLink")]},wc:{name:"onAuthStateChanged",j:[uh(rh(),ih(),"nextOrObserver"),ih("opt_error",!0),ih("opt_completed",!0)]},xc:{name:"onIdTokenChanged",j:[uh(rh(),ih(),"nextOrObserver"),ih("opt_error",!0),ih("opt_completed",!0)]},kb:{name:"sendPasswordResetEmail",j:[th("email"),uh(rh("opt_actionCodeSettings",!0),oh(null,!0),"opt_actionCodeSettings",!0)]},lb:{name:"sendSignInLinkToEmail",j:[th("email"),rh("actionCodeSettings")]},mb:{name:"setPersistence",j:[th("persistence")]},Gc:{name:"signInAndRetrieveDataWithCredential",j:[ah()]},ob:{name:"signInAnonymously",j:[]},Sa:{name:"signInWithCredential",j:[ah()]},Hc:{name:"signInWithCustomToken",j:[th("token")]},Ic:{name:"signInWithEmailAndPassword",j:[th("email"),th("password")]},Jc:{name:"signInWithEmailLink",j:[th("email"),th("emailLink",!0)]},Kc:{name:"signInWithPhoneNumber",j:[th("phoneNumber"),sh()]},Lc:{name:"signInWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Mc:{name:"signInWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Rc:{name:"updateCurrentUser",j:[uh({name:"user",M:"an instance of Firebase User",optional:!1,N:function(e){return!!(e&&e instanceof xc)}},oh(),"user")]},pb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[th(null,!0)]},Tc:{name:"useDeviceLanguage",j:[]},Uc:{name:"verifyPasswordResetCode",j:[th("code")]}}),lh(gl.prototype,{lc:{name:"languageCode",Za:uh(th(),oh(),"languageCode")},ti:{name:"tenantId",Za:uh(th(),oh(),"tenantId")}}),(gl.Persistence=Tu).LOCAL="local",gl.Persistence.SESSION="session",gl.Persistence.NONE="none",ch(xc.prototype,{delete:{name:"delete",j:[]},dc:{name:"getIdTokenResult",j:[nh("opt_forceRefresh",!0)]},G:{name:"getIdToken",j:[nh("opt_forceRefresh",!0)]},rc:{name:"linkAndRetrieveDataWithCredential",j:[ah()]},fb:{name:"linkWithCredential",j:[ah()]},sc:{name:"linkWithPhoneNumber",j:[th("phoneNumber"),sh()]},tc:{name:"linkWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},uc:{name:"linkWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Ac:{name:"reauthenticateAndRetrieveDataWithCredential",j:[ah()]},hb:{name:"reauthenticateWithCredential",j:[ah()]},Bc:{name:"reauthenticateWithPhoneNumber",j:[th("phoneNumber"),sh()]},Cc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},Dc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",M:"a valid Auth provider",optional:!1,N:function(e){return!!(e&&e.providerId&&e.hasOwnProperty&&e.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},jb:{name:"sendEmailVerification",j:[uh(rh("opt_actionCodeSettings",!0),oh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[th(null,!0)]},Qc:{name:"unlink",j:[th("provider")]},rb:{name:"updateEmail",j:[th("email")]},sb:{name:"updatePassword",j:[th("password")]},Sc:{name:"updatePhoneNumber",j:[ah("phone")]},tb:{name:"updateProfile",j:[rh("profile")]}}),ch(Pl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ch(Dl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ch(Be.prototype,{ka:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),lh(wc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",Za:nh("appVerificationDisabledForTesting")}}),ch(_c.prototype,{confirm:{name:"confirm",j:[th("verificationCode")]}}),hh(Wi,"fromJSON",function(e){e=l(e)?JSON.parse(e):e;for(var t,n=[Xi,co,mo,Qi],r=0;r<n.length;r++)if(t=n[r](e))return t;return null},[uh(th(),rh(),"json")]),hh(lo,"credential",function(e,t){return new uo(e,t)},[th("email"),th("password")]),ch(uo.prototype,{A:{name:"toJSON",j:[th(null,!0)]}}),ch(eo.prototype,{ya:{name:"addScope",j:[th("scope")]},Ga:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(eo,"credential",to,[uh(th(),rh(),"token")]),hh(lo,"credentialWithLink",ho,[th("email"),th("emailLink")]),ch(no.prototype,{ya:{name:"addScope",j:[th("scope")]},Ga:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(no,"credential",ro,[uh(th(),rh(),"token")]),ch(io.prototype,{ya:{name:"addScope",j:[th("scope")]},Ga:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(io,"credential",oo,[uh(th(),uh(rh(),oh()),"idToken"),uh(th(),oh(),"accessToken",!0)]),ch(ao.prototype,{Ga:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),hh(ao,"credential",so,[uh(th(),rh(),"token"),th("secret",!0)]),ch(Zi.prototype,{ya:{name:"addScope",j:[th("scope")]},credential:{name:"credential",j:[uh(th(),uh(rh(),oh()),"optionsOrIdToken"),uh(th(),oh(),"accessToken",!0)]},Ga:{name:"setCustomParameters",j:[rh("customOAuthParameters")]}}),ch(Gi.prototype,{A:{name:"toJSON",j:[th(null,!0)]}}),ch(Ki.prototype,{A:{name:"toJSON",j:[th(null,!0)]}}),hh(vo,"credential",go,[th("verificationId"),th("verificationCode")]),ch(vo.prototype,{Wa:{name:"verifyPhoneNumber",j:[th("phoneNumber"),sh()]}}),ch(po.prototype,{A:{name:"toJSON",j:[th(null,!0)]}}),ch(Xr.prototype,{toJSON:{name:"toJSON",j:[th(null,!0)]}}),ch(ko.prototype,{toJSON:{name:"toJSON",j:[th(null,!0)]}}),ch(Io.prototype,{toJSON:{name:"toJSON",j:[th(null,!0)]}}),ch(Jl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),hh(ei,"parseLink",ui,[th("link")]),function(){if(void 0===dh.a||!dh.a.INTERNAL||!dh.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var e={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Br,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:gl,AuthCredential:Wi,Error:Xr};hh(e,"EmailAuthProvider",lo,[]),hh(e,"FacebookAuthProvider",eo,[]),hh(e,"GithubAuthProvider",no,[]),hh(e,"GoogleAuthProvider",io,[]),hh(e,"TwitterAuthProvider",ao,[]),hh(e,"OAuthProvider",Zi,[th("providerId")]),hh(e,"SAMLAuthProvider",Ji,[th("providerId")]),hh(e,"PhoneAuthProvider",vo,[{name:"auth",M:"an instance of Firebase Auth",optional:!0,N:function(e){return!!(e&&e instanceof gl)}}]),hh(e,"RecaptchaVerifier",Jl,[uh(th(),{name:"",M:"an HTML element",optional:!1,N:function(e){return!!(e&&e instanceof Element)}},"recaptchaContainer"),rh("recaptchaParameters",!0),{name:"app",M:"an instance of Firebase App",optional:!0,N:function(e){return!!(e&&e instanceof dh.a.app.App)}}]),hh(e,"ActionCodeURL",ei,[]),dh.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(e){return new gl(e=e.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:e,instantiationMode:"LAZY",type:"PUBLIC"}),dh.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(e){return{getUid:E((e=e.getProvider("auth").getImmediate()).getUid,e),getToken:E(e.cc,e),addAuthTokenListener:E(e.Wb,e),removeAuthTokenListener:E(e.Ec,e)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),dh.a.registerVersion("@firebase/auth","0.13.4"),dh.a.INTERNAL.extendNamespace({User:xc})}()}).apply(void 0!==ph?ph:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}.call(this,n(27))},function(Zr,ei,ti){"use strict";(function(u){Object.defineProperty(ei,"__esModule",{value:!0});var e,t=(e=ti(4))&&"object"==typeof e&&"default"in e?e.default:e,d=ti(2),w=ti(17),n=ti(31),r=ti(15),i=(o.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),w.stringify(t))},o.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:w.jsonEval(t)},o.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},o.prototype.prefixedName_=function(e){return this.prefix_+e},o.prototype.toString=function(){return this.domStorage_.toString()},o);function o(e){this.domStorage_=e,this.prefix_="firebase:"}var a=(s.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},s.prototype.get=function(e){return w.contains(this.cache_,e)?this.cache_[e]:null},s.prototype.remove=function(e){delete this.cache_[e]},s);function s(){this.cache_={},this.isInMemoryStorage=!0}function c(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new i(t)}}catch(e){}return new a}function l(e){var t=w.stringToByteArray(e),n=new w.Sha1;n.update(t);var r=n.digest();return w.base64.encodeByteArray(r)}function h(e,t){w.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(I.logLevel=n.LogLevel.VERBOSE,A=I.log.bind(I),t&&C.set("logging_enabled",!0)):"function"==typeof e?A=e:(A=null,C.remove("logging_enabled"))}function f(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===O&&(O=!1,null===A&&!0===C.get("logging_enabled")&&h(!0)),A){var n=N.apply(null,e);A(n)}}function p(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];f.apply(void 0,d.__spread([n],e))}}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+N.apply(void 0,d.__spread(e));I.error(n)}function y(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+N.apply(void 0,d.__spread(e));throw I.error(n),new Error(n)}function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+N.apply(void 0,d.__spread(e));I.warn(n)}function g(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)}function b(e,t){return e===t?0:e<t?-1:1}function _(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+w.stringify(t))}function E(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)n<i+t?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r}var T,S=c("localStorage"),C=c("sessionStorage"),I=new n.Logger("@firebase/database"),k=(T=1,function(){return T++}),N=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var i=e[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=N.apply(null,i):n+="object"==typeof i?w.stringify(i):i,n+=" "}return n},A=null,O=!0,D="[MIN_NAME]",P="[MAX_NAME]",x=function(e,t){if(e===t)return 0;if(e===D||t===P)return-1;if(t===D||e===P)return 1;var n=V(e),r=V(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},R=function(e){if("object"!=typeof e||null===e)return w.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",i=0;i<t.length;i++)0!==i&&(r+=","),r+=w.stringify(t[i]),r+=":",r+=R(e[t[i]]);return r+="}"};function M(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}function L(e){var t,n,r,i,o;w.assert(!g(e),"Invalid JSON number"),0===e?t=1/e==-1/(r=n=0)?1:0:(t=e<0,r=(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(e/Math.pow(2,-1074))));var a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var s=a.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(s.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function F(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";throw v("Exception was thrown by user callback.",e),t},Math.floor(0))}}function U(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n}var j=new RegExp("^-?(0*)\\d{1,10}$"),V=function(e){if(j.test(e)){var t=Number(e);if(-2147483648<=t&&t<=2147483647)return t}return null},q=(Object.defineProperty(B,"Empty",{get:function(){return new B("")},enumerable:!0,configurable:!0}),B.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},B.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},B.prototype.popFront=function(){var e=this.pieceNum_;return e<this.pieces_.length&&e++,new B(this.pieces_,e)},B.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},B.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},B.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},B.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},B.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var e=[],t=this.pieceNum_;t<this.pieces_.length-1;t++)e.push(this.pieces_[t]);return new B(e,0)},B.prototype.child=function(e){for(var t=[],n=this.pieceNum_;n<this.pieces_.length;n++)t.push(this.pieces_[n]);if(e instanceof B)for(n=e.pieceNum_;n<e.pieces_.length;n++)t.push(e.pieces_[n]);else{var r=e.split("/");for(n=0;n<r.length;n++)0<r[n].length&&t.push(r[n])}return new B(t,0)},B.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},B.relativePath=function(e,t){var n=e.getFront(),r=t.getFront();if(null===n)return t;if(n===r)return B.relativePath(e.popFront(),t.popFront());throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")},B.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=x(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},B.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},B.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},B);function B(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}var W=(Object.defineProperty(z,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(z,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),z.prototype.push=function(e){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=w.stringLength(e),this.checkValid_()},z.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=w.stringLength(e),0<this.parts_.length&&(this.byteLength_-=1)},z.prototype.checkValid_=function(){if(this.byteLength_>z.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+z.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>z.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+z.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},z.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},z);function z(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=w.stringLength(this.parts_[n]);this.checkValid_()}var K="firebaseio.com",H="long_polling",Q=(G.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},G.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},G.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},G.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},G.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&S.set("host:"+this.host,this.internalHost))},G.prototype.connectionURL=function(e,t){var n;if(w.assert("string"==typeof e,"typeof type must == string"),w.assert("object"==typeof t,"typeof params must == object"),"websocket"===e)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==H)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return M(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},G.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},G.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},G);function G(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=S.get("host:"+e)||this.host}function Y(e){var t=se(e),n=t.namespace;"firebase"===t.domain&&y(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===t.domain||y("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&v("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new Q(t.host,t.secure,n,r,"",n!==t.subdomain),path:new q(t.pathString)}}function X(e){return"string"==typeof e&&0!==e.length&&!ue.test(e)}function $(e){return"string"==typeof e&&0!==e.length&&!ce.test(e)}function J(e){return null===e||"string"==typeof e||"number"==typeof e&&!g(e)||e&&"object"==typeof e&&w.contains(e,".sv")}function Z(e,t,n,r,i){i&&void 0===n||he(w.errorPrefix(e,t,i),n,r)}function ee(e,t,n,r,i){if(!i||void 0!==n){var o=w.errorPrefix(e,t,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var a=[];M(n,function(e,t){var n=new q(e);if(he(o,t,r.child(n)),".priority"===n.getBack()&&!J(t))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!X(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(q.comparePaths);var a=null;for(n=0;n<t.length;n++){if(r=t[n],null!==a&&a.contains(r))throw new Error(e+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(o,a)}}function te(e,t,n,r){if(!r||void 0!==n){if(g(n))throw new Error(w.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!J(n))throw new Error(w.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function ne(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(w.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function re(e,t,n,r){if(!(r&&void 0===n||X(n)))throw new Error(w.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function ie(e,t,n,r){if(!(r&&void 0===n||$(n)))throw new Error(w.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function oe(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")}function ae(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!X(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!function(e){return e=e&&e.replace(/^\/*\.info(\/|$)/,"/"),$(e)}(r))throw new Error(w.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var se=function(e){var t="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof e){var c=e.indexOf("//");0<=c&&(s=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(e){}t+="/"+i}return t}(e.substring(l,h)));var f=function(e){var t,n,r={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var i=d.__values(e.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):v("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r}(e.substring(Math.min(e.length,h)));0<=(c=t.indexOf(":"))?(a="https"===s||"wss"===s,u=parseInt(t.substring(c+1),10)):c=e.length;var p=t.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:t,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ue=/[\[\].#$\/\u0000-\u001F\u007F]/,ce=/[\[\].#$\u0000-\u001F\u007F]/,le=10485760,he=function(n,e,t){var r=t instanceof q?new W(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof e)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+e.toString());if(g(e))throw new Error(n+"contains "+e.toString()+" "+r.toErrorString());if("string"==typeof e&&e.length>le/3&&w.stringLength(e)>le)throw new Error(n+"contains a string greater than "+le+" utf8 bytes "+r.toErrorString()+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(M(e,function(e,t){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!X(e)))throw new Error(n+" contains an invalid key ("+e+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(e),he(n,t,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},fe=(pe.prototype.cancel=function(e){w.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),w.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new w.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},pe.prototype.remove=function(e){w.validateArgCount("OnDisconnect.remove",0,1,arguments.length),oe("OnDisconnect.remove",this.path_),w.validateCallback("OnDisconnect.remove",1,e,!0);var t=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},pe.prototype.set=function(e,t){w.validateArgCount("OnDisconnect.set",1,2,arguments.length),oe("OnDisconnect.set",this.path_),Z("OnDisconnect.set",1,e,this.path_,!1),w.validateCallback("OnDisconnect.set",2,t,!0);var n=new w.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},pe.prototype.setWithPriority=function(e,t,n){w.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),oe("OnDisconnect.setWithPriority",this.path_),Z("OnDisconnect.setWithPriority",1,e,this.path_,!1),te("OnDisconnect.setWithPriority",2,t,!1),w.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new w.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},pe.prototype.update=function(e,t){if(w.validateArgCount("OnDisconnect.update",1,2,arguments.length),oe("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,v("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ee("OnDisconnect.update",1,e,this.path_,!1),w.validateCallback("OnDisconnect.update",2,t,!0);var i=new w.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,i.wrapCallback(t)),i.promise},pe);function pe(e,t){this.repo_=e,this.path_=t}var de=(me.prototype.toJSON=function(){return w.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},me);function me(e,t){this.committed=e,this.snapshot=t}var ye,ve,ge,be=(ye="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ve=0,ge=[],function(e){var t,n=e===ve;ve=e;var r=new Array(8);for(t=7;0<=t;t--)r[t]=ye.charAt(e%64),e=Math.floor(e/64);w.assert(0===e,"Cannot push at time == 0");var i=r.join("");if(n){for(t=11;0<=t&&63===ge[t];t--)ge[t]=0;ge[t]++}else for(t=0;t<12;t++)ge[t]=Math.floor(64*Math.random());for(t=0;t<12;t++)i+=ye.charAt(ge[t]);return w.assert(20===i.length,"nextPushId: Length should be 20."),i}),we=(_e.Wrap=function(e,t){return new _e(e,t)},_e);function _e(e,t){this.name=e,this.node=t}var Ee,Te=(Se.prototype.getCompare=function(){return this.compare.bind(this)},Se.prototype.indexedValueChanged=function(e,t){var n=new we(D,e),r=new we(D,t);return 0!==this.compare(n,r)},Se.prototype.minPost=function(){return we.MIN},Se);function Se(){}var Ce,Ie=(Ce=Te,d.__extends(ke,Ce),Object.defineProperty(ke,"__EMPTY_NODE",{get:function(){return Ee},set:function(e){Ee=e},enumerable:!0,configurable:!0}),ke.prototype.compare=function(e,t){return x(e.name,t.name)},ke.prototype.isDefinedOn=function(e){throw w.assertionError("KeyIndex.isDefinedOn not expected to be called.")},ke.prototype.indexedValueChanged=function(e,t){return!1},ke.prototype.minPost=function(){return we.MIN},ke.prototype.maxPost=function(){return new we(P,Ee)},ke.prototype.makePost=function(e,t){return w.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new we(e,Ee)},ke.prototype.toString=function(){return".key"},ke);function ke(){return null!==Ce&&Ce.apply(this,arguments)||this}var Ne,Ae=new Ie;function Oe(e){return"number"==typeof e?"number:"+L(e):"string:"+e}function De(e){if(e.isLeafNode()){var t=e.val();w.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&w.contains(t,".sv"),"Priority must be a string or number.")}else w.assert(e===Ne||e.isEmpty(),"priority of unexpected type.");w.assert(e===Ne||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var Pe,xe,Re,Me,Le=(Object.defineProperty(Fe,"__childrenNodeConstructor",{get:function(){return Pe},set:function(e){Pe=e},enumerable:!0,configurable:!0}),Fe.prototype.isLeafNode=function(){return!0},Fe.prototype.getPriority=function(){return this.priorityNode_},Fe.prototype.updatePriority=function(e){return new Fe(this.value_,e)},Fe.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE},Fe.prototype.getChild=function(e){return e.isEmpty()?this:".priority"===e.getFront()?this.priorityNode_:Fe.__childrenNodeConstructor.EMPTY_NODE},Fe.prototype.hasChild=function(){return!1},Fe.prototype.getPredecessorChildName=function(e,t){return null},Fe.prototype.updateImmediateChild=function(e,t){return".priority"===e?this.updatePriority(t):t.isEmpty()&&".priority"!==e?this:Fe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)},Fe.prototype.updateChild=function(e,t){var n=e.getFront();return null===n?t:t.isEmpty()&&".priority"!==n?this:(w.assert(".priority"!==n||1===e.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Fe.__childrenNodeConstructor.EMPTY_NODE.updateChild(e.popFront(),t)))},Fe.prototype.isEmpty=function(){return!1},Fe.prototype.numChildren=function(){return 0},Fe.prototype.forEachChild=function(e,t){return!1},Fe.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Fe.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+Oe(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"==t?L(this.value_):this.value_,this.lazyHash_=l(e)}return this.lazyHash_},Fe.prototype.getValue=function(){return this.value_},Fe.prototype.compareTo=function(e){return e===Fe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Fe.__childrenNodeConstructor?-1:(w.assert(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},Fe.prototype.compareToLeafNode_=function(e){var t=typeof e.value_,n=typeof this.value_,r=Fe.VALUE_TYPE_ORDER.indexOf(t),i=Fe.VALUE_TYPE_ORDER.indexOf(n);return w.assert(0<=r,"Unknown leaf type: "+t),w.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:i-r},Fe.prototype.withIndex=function(){return this},Fe.prototype.isIndexed=function(){return!0},Fe.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},Fe.VALUE_TYPE_ORDER=["object","boolean","number","string"],Fe);function Fe(e,t){void 0===t&&(t=Fe.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=t,this.lazyHash_=null,w.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),De(this.priorityNode_)}function Ue(){return null!==Me&&Me.apply(this,arguments)||this}var je=new(Me=Te,d.__extends(Ue,Me),Ue.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?x(e.name,t.name):i},Ue.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},Ue.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},Ue.prototype.minPost=function(){return we.MIN},Ue.prototype.maxPost=function(){return new we(P,new Le("[PRIORITY-POST]",Re))},Ue.prototype.makePost=function(e,t){var n=xe(e);return new we(t,new Le("[PRIORITY-POST]",n))},Ue.prototype.toString=function(){return".priority"},Ue),Ve=(qe.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},qe.prototype.hasNext=function(){return 0<this.nodeStack_.length},qe.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},qe);function qe(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}var Be=(We.prototype.copy=function(e,t,n,r,i){return new We(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},We.prototype.count=function(){return this.left.count()+1+this.right.count()},We.prototype.isEmpty=function(){return!1},We.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},We.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},We.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},We.prototype.minKey=function(){return this.min_().key},We.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},We.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},We.prototype.removeMin_=function(){if(this.left.isEmpty())return He.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},We.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return He.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},We.prototype.isRed_=function(){return this.color},We.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},We.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},We.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},We.prototype.rotateLeft_=function(){var e=this.copy(null,null,We.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},We.prototype.rotateRight_=function(){var e=this.copy(null,null,We.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},We.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},We.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},We.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},We.RED=!0,We.BLACK=!1,We);function We(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:We.RED,this.left=null!=r?r:He.EMPTY_NODE,this.right=null!=i?i:He.EMPTY_NODE}var ze=(Ke.prototype.copy=function(e,t,n,r,i){return this},Ke.prototype.insert=function(e,t,n){return new Be(e,t,null)},Ke.prototype.remove=function(e,t){return this},Ke.prototype.count=function(){return 0},Ke.prototype.isEmpty=function(){return!0},Ke.prototype.inorderTraversal=function(e){return!1},Ke.prototype.reverseTraversal=function(e){return!1},Ke.prototype.minKey=function(){return null},Ke.prototype.maxKey=function(){return null},Ke.prototype.check_=function(){return 0},Ke.prototype.isRed_=function(){return!1},Ke);function Ke(){}var He=(Qe.prototype.insert=function(e,t){return new Qe(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Be.BLACK,null,null))},Qe.prototype.remove=function(e){return new Qe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Be.BLACK,null,null))},Qe.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:0<t&&(n=n.right)}return null},Qe.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:0<t&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Qe.prototype.isEmpty=function(){return this.root_.isEmpty()},Qe.prototype.count=function(){return this.root_.count()},Qe.prototype.minKey=function(){return this.root_.minKey()},Qe.prototype.maxKey=function(){return this.root_.maxKey()},Qe.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},Qe.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},Qe.prototype.getIterator=function(e){return new Ve(this.root_,null,this.comparator_,!1,e)},Qe.prototype.getIteratorFrom=function(e,t){return new Ve(this.root_,e,this.comparator_,!1,t)},Qe.prototype.getReverseIteratorFrom=function(e,t){return new Ve(this.root_,e,this.comparator_,!0,t)},Qe.prototype.getReverseIterator=function(e){return new Ve(this.root_,null,this.comparator_,!0,e)},Qe.EMPTY_NODE=new ze,Qe);function Qe(e,t){void 0===t&&(t=Qe.EMPTY_NODE),this.comparator_=e,this.root_=t}var Ge=Math.log(2),Ye=(Xe.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},Xe);function Xe(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/Ge,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}var $e,Je,Ze=function(c,e,l,t){c.sort(e);var h=function(e,t){var n,r,i=t-e;if(0==i)return null;if(1==i)return n=c[e],r=l?l(n):n,new Be(r,n.node,Be.BLACK,null,null);var o=parseInt(i/2,10)+e,a=h(e,o),s=h(o+1,t);return n=c[o],r=l?l(n):n,new Be(r,n.node,Be.BLACK,a,s)},n=function(e){for(var t=null,n=null,s=c.length,r=function(e,t){var n=s-e,r=s;s-=e;var i=h(1+n,r),o=c[n],a=l?l(o):o;u(new Be(a,o.node,t,null,i))},u=function(e){t=t?t.left=e:n=e},i=0;i<e.count;++i){var o=e.nextBitIsOne(),a=Math.pow(2,e.count-(i+1));o?r(a,Be.BLACK):(r(a,Be.BLACK),r(a,Be.RED))}return n}(new Ye(c.length));return new He(t||e,n)},et={},tt=(Object.defineProperty(nt,"Default",{get:function(){return w.assert(je,"ChildrenNode.ts has not been loaded"),$e=$e||new nt({".priority":et},{".priority":je})},enumerable:!0,configurable:!0}),nt.prototype.get=function(e){var t=w.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof He?t:null},nt.prototype.hasIndex=function(e){return w.contains(this.indexSet_,e.toString())},nt.prototype.addIndex=function(e,t){w.assert(e!==Ae,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=t.getIterator(we.Wrap),a=o.getNext();a;)i=i||e.isDefinedOn(a.node),r.push(a),a=o.getNext();n=i?Ze(r,e.getCompare()):et;var s=e.toString(),u=d.__assign({},this.indexSet_);u[s]=e;var c=d.__assign({},this.indexes_);return c[s]=n,new nt(c,u)},nt.prototype.addToIndexes=function(u,c){var l=this;return new nt(w.map(this.indexes_,function(e,t){var n=w.safeGet(l.indexSet_,t);if(w.assert(n,"Missing index implementation for "+t),e===et){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(we.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Ze(r,n.getCompare())}return et}var a=c.get(u.name),s=e;return a&&(s=s.remove(new we(u.name,a))),s.insert(u,u.node)}),this.indexSet_)},nt.prototype.removeFromIndexes=function(n,r){return new nt(w.map(this.indexes_,function(e){if(e===et)return e;var t=r.get(n.name);return t?e.remove(new we(n.name,t)):e}),this.indexSet_)},nt);function nt(e,t){this.indexes_=e,this.indexSet_=t}function rt(e,t){return x(e.name,t.name)}function it(e,t){return x(e,t)}var ot,at=(Object.defineProperty(st,"EMPTY_NODE",{get:function(){return Je=Je||new st(new He(it),null,tt.Default)},enumerable:!0,configurable:!0}),st.prototype.isLeafNode=function(){return!1},st.prototype.getPriority=function(){return this.priorityNode_||Je},st.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new st(this.children_,e,this.indexMap_)},st.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?Je:t},st.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},st.prototype.hasChild=function(e){return null!==this.children_.get(e)},st.prototype.updateImmediateChild=function(e,t){if(w.assert(t,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(t);var n=new we(e,t),r=void 0,i=void 0;i=t.isEmpty()?(r=this.children_.remove(e),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(e,t),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?Je:this.priorityNode_;return new st(r,o,i)},st.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;w.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},st.prototype.isEmpty=function(){return this.children_.isEmpty()},st.prototype.numChildren=function(){return this.children_.count()},st.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,a=!0;if(this.forEachChild(je,function(e,t){r[e]=t.val(n),i++,a&&st.INTEGER_REGEXP_.test(e)?o=Math.max(o,Number(e)):a=!1}),!n&&a&&o<2*i){var e=[];for(var t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},st.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Oe(this.getPriority().val())+":"),this.forEachChild(je,function(e,t){var n=t.hash();""!==n&&(r+=":"+e+":"+n)}),this.lazyHash_=""===r?"":l(r)}return this.lazyHash_},st.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new we(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},st.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},st.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new we(t,this.children_.get(t)):null},st.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},st.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new we(t,this.children_.get(t)):null},st.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},st.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},st.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,we.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},st.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},st.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,we.Wrap),i=r.peek();null!=i&&0<t.compare(i,e);)r.getNext(),i=r.peek();return r},st.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ct?-1:0},st.prototype.withIndex=function(e){if(e===Ae||this.indexMap_.hasIndex(e))return this;var t=this.indexMap_.addIndex(e,this.children_);return new st(this.children_,this.priorityNode_,t)},st.prototype.isIndexed=function(e){return e===Ae||this.indexMap_.hasIndex(e)},st.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var n=this.getIterator(je),r=t.getIterator(je),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},st.prototype.resolveIndex_=function(e){return e===Ae?null:this.indexMap_.get(e.toString())},st.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,st);function st(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&De(this.priorityNode_),this.children_.isEmpty()&&w.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ut(){return ot.call(this,new He(it),at.EMPTY_NODE,tt.Default)||this}var ct=new(ot=at,d.__extends(ut,ot),ut.prototype.compareTo=function(e){return e===this?0:1},ut.prototype.equals=function(e){return e===this},ut.prototype.getPriority=function(){return this},ut.prototype.getImmediateChild=function(e){return at.EMPTY_NODE},ut.prototype.isEmpty=function(){return!1},ut);Object.defineProperties(we,{MIN:{value:new we(D,at.EMPTY_NODE)},MAX:{value:new we(P,ct)}}),Ie.__EMPTY_NODE=at.EMPTY_NODE,Le.__childrenNodeConstructor=at,Ne=ct,Re=ct;var lt,ht=!0;function ft(r,e){if(void 0===e&&(e=null),null===r)return at.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(e=r[".priority"]),w.assert(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Le(r,ft(e));if(r instanceof Array||!ht){var i=at.EMPTY_NODE;return M(r,function(e,t){if(w.contains(r,e)&&"."!==e.substring(0,1)){var n=ft(t);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(e,n))}}),i.updatePriority(ft(e))}var o=[],a=!1;if(M(r,function(e,t){if("."!==e.substring(0,1)){var n=ft(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),o.push(new we(e,n)))}}),0===o.length)return at.EMPTY_NODE;var t=Ze(o,rt,function(e){return e.name},it);if(a){var n=Ze(o,je.getCompare());return new at(t,ft(e),new tt({".priority":n},{".priority":je}))}return new at(t,ft(e),tt.Default)}function pt(){return null!==lt&&lt.apply(this,arguments)||this}xe=ft;var dt,mt=new(lt=Te,d.__extends(pt,lt),pt.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?x(e.name,t.name):n},pt.prototype.isDefinedOn=function(e){return!0},pt.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},pt.prototype.minPost=function(){return we.MIN},pt.prototype.maxPost=function(){return we.MAX},pt.prototype.makePost=function(e,t){var n=ft(e);return new we(t,n)},pt.prototype.toString=function(){return".value"},pt),yt=(dt=Te,d.__extends(vt,dt),vt.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},vt.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},vt.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?x(e.name,t.name):i},vt.prototype.makePost=function(e,t){var n=ft(e),r=at.EMPTY_NODE.updateChild(this.indexPath_,n);return new we(t,r)},vt.prototype.maxPost=function(){var e=at.EMPTY_NODE.updateChild(this.indexPath_,ct);return new we(P,e)},vt.prototype.toString=function(){return this.indexPath_.slice().join("/")},vt);function vt(e){var t=dt.call(this)||this;return t.indexPath_=e,w.assert(!e.isEmpty()&&".priority"!==e.getFront(),"Can't create PathIndex with empty path or .priority key"),t}var gt=(bt.prototype.val=function(){return w.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},bt.prototype.exportVal=function(){return w.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},bt.prototype.toJSON=function(){return w.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},bt.prototype.exists=function(){return w.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},bt.prototype.child=function(e){w.validateArgCount("DataSnapshot.child",0,1,arguments.length),e=String(e),ie("DataSnapshot.child",1,e,!1);var t=new q(e),n=this.ref_.child(t);return new bt(this.node_.getChild(t),n,je)},bt.prototype.hasChild=function(e){w.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),ie("DataSnapshot.hasChild",1,e,!1);var t=new q(e);return!this.node_.getChild(t).isEmpty()},bt.prototype.getPriority=function(){return w.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},bt.prototype.forEach=function(n){var r=this;return w.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),w.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(e,t){return n(new bt(t,r.ref_.child(e),je))})},bt.prototype.hasChildren=function(){return w.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(bt.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),bt.prototype.numChildren=function(){return w.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},bt.prototype.getRef=function(){return w.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(bt.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),bt);function bt(e,t,n){this.node_=e,this.ref_=t,this.index_=n}var wt=(_t.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},_t.prototype.getEventType=function(){return this.eventType},_t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},_t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+w.stringify(this.snapshot.exportVal())},_t);function _t(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}var Et=(Tt.prototype.getPath=function(){return this.path},Tt.prototype.getEventType=function(){return"cancel"},Tt.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Tt.prototype.toString=function(){return this.path.toString()+":cancel"},Tt);function Tt(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}var St=(Ct.prototype.respondsTo=function(e){return"value"===e},Ct.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new wt("value",this,new gt(e.snapshotNode,t.getRef(),n))},Ct.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},Ct.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null},Ct.prototype.matches=function(e){return e instanceof Ct&&(!e.callback_||!this.callback_||e.callback_===this.callback_&&e.context_===this.context_)},Ct.prototype.hasAnyCallback=function(){return null!==this.callback_},Ct);function Ct(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}var It,kt=(Nt.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,w.contains(this.callbacks_,t)},Nt.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new Et(this,e,t):null},Nt.prototype.createEvent=function(e,t){w.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new wt(e.type,this,new gt(e.snapshotNode,n,r),e.prevName)},Nt.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){w.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},Nt.prototype.matches=function(t){var n=this;if(t instanceof Nt){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var e=Object.keys(t.callbacks_),r=Object.keys(this.callbacks_),i=e.length;if(i===r.length){if(1!==i)return r.every(function(e){return t.callbacks_[e]===n.callbacks_[e]});var o=e[0],a=r[0];return!(a!==o||t.callbacks_[o]&&this.callbacks_[a]&&t.callbacks_[o]!==this.callbacks_[a])}}}return!1},Nt.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Nt);function Nt(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}var At=(Object.defineProperty(Ot,"__referenceConstructor",{get:function(){return w.assert(It,"Reference.ts has not been loaded"),It},set:function(e){It=e},enumerable:!0,configurable:!0}),Ot.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Ae){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==D)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==P)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===je){if(null!=t&&!J(t)||null!=n&&!J(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(w.assert(e.getIndex()instanceof yt||e.getIndex()===mt,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},Ot.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},Ot.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},Ot.prototype.getQueryParams=function(){return this.queryParams_},Ot.prototype.getRef=function(){return w.validateArgCount("Query.ref",0,0,arguments.length),new Ot.__referenceConstructor(this.repo,this.path)},Ot.prototype.on=function(e,t,n,r){w.validateArgCount("Query.on",2,4,arguments.length),ne("Query.on",1,e,!1),w.validateCallback("Query.on",2,t,!1);var i=Ot.getCancelAndContextArgs_("Query.on",n,r);if("value"===e)this.onValueEvent(t,i.cancel,i.context);else{var o={};o[e]=t,this.onChildEvent(o,i.cancel,i.context)}return t},Ot.prototype.onValueEvent=function(e,t,n){var r=new St(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},Ot.prototype.onChildEvent=function(e,t,n){var r=new kt(e,t,n);this.repo.addEventCallbackForQuery(this,r)},Ot.prototype.off=function(e,t,n){w.validateArgCount("Query.off",0,3,arguments.length),ne("Query.off",1,e,!0),w.validateCallback("Query.off",2,t,!0),w.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===e?r=new St(t||null,null,n||null):e&&(t&&((i={})[e]=t),r=new kt(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},Ot.prototype.once=function(t,n,e,r){var i=this;w.validateArgCount("Query.once",1,4,arguments.length),ne("Query.once",1,t,!1),w.validateCallback("Query.once",2,n,!0);var o=Ot.getCancelAndContextArgs_("Query.once",e,r),a=!0,s=new w.Deferred;s.promise.catch(function(){});var u=function(e){a&&(a=!1,i.off(t,u),n&&n.bind(o.context)(e),s.resolve(e))};return this.on(t,u,function(e){i.off(t,u),o.cancel&&o.cancel.bind(o.context)(e),s.reject(e)}),s.promise},Ot.prototype.limitToFirst=function(e){if(w.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ot(this.repo,this.path,this.queryParams_.limitToFirst(e),this.orderByCalled_)},Ot.prototype.limitToLast=function(e){if(w.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new Ot(this.repo,this.path,this.queryParams_.limitToLast(e),this.orderByCalled_)},Ot.prototype.orderByChild=function(e){if(w.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===e)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===e)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===e)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');ie("Query.orderByChild",1,e,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var t=new q(e);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new yt(t),r=this.queryParams_.orderBy(n);return Ot.validateQueryEndpoints_(r),new Ot(this.repo,this.path,r,!0)},Ot.prototype.orderByKey=function(){w.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var e=this.queryParams_.orderBy(Ae);return Ot.validateQueryEndpoints_(e),new Ot(this.repo,this.path,e,!0)},Ot.prototype.orderByPriority=function(){w.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var e=this.queryParams_.orderBy(je);return Ot.validateQueryEndpoints_(e),new Ot(this.repo,this.path,e,!0)},Ot.prototype.orderByValue=function(){w.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var e=this.queryParams_.orderBy(mt);return Ot.validateQueryEndpoints_(e),new Ot(this.repo,this.path,e,!0)},Ot.prototype.startAt=function(e,t){void 0===e&&(e=null),w.validateArgCount("Query.startAt",0,2,arguments.length),Z("Query.startAt",1,e,this.path,!0),re("Query.startAt",2,t,!0);var n=this.queryParams_.startAt(e,t);if(Ot.validateLimit_(n),Ot.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===e&&(t=e=null),new Ot(this.repo,this.path,n,this.orderByCalled_)},Ot.prototype.endAt=function(e,t){void 0===e&&(e=null),w.validateArgCount("Query.endAt",0,2,arguments.length),Z("Query.endAt",1,e,this.path,!0),re("Query.endAt",2,t,!0);var n=this.queryParams_.endAt(e,t);if(Ot.validateLimit_(n),Ot.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new Ot(this.repo,this.path,n,this.orderByCalled_)},Ot.prototype.equalTo=function(e,t){if(w.validateArgCount("Query.equalTo",1,2,arguments.length),Z("Query.equalTo",1,e,this.path,!1),re("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},Ot.prototype.toString=function(){return w.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},Ot.prototype.toJSON=function(){return w.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},Ot.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},Ot.prototype.queryIdentifier=function(){var e=this.queryObject(),t=R(e);return"{}"===t?"default":t},Ot.prototype.isEqual=function(e){if(w.validateArgCount("Query.isEqual",1,1,arguments.length),!(e instanceof Ot))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var t=this.repo===e.repo,n=this.path.equals(e.path),r=this.queryIdentifier()===e.queryIdentifier();return t&&n&&r},Ot.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,w.validateCallback(e,3,r.cancel,!0),r.context=n,w.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(w.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(Ot.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),Ot);function Ot(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}var Dt=(Pt.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&0<this.children.size){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},Pt.prototype.remember=function(e,t){if(e.isEmpty())this.value=t,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(e,t);else{var n=e.getFront();this.children.has(n)||this.children.set(n,new Pt);var r=this.children.get(n);e=e.popFront(),r.remember(e,t)}},Pt.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(je,function(e,t){n.remember(new q(e),t)}),this.forget(e)}if(0<this.children.size){var r=e.getFront();return e=e.popFront(),!this.children.has(r)||this.children.get(r).forget(e)&&this.children.delete(r),0===this.children.size}return!0},Pt.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(e,t){var n=new q(r.toString()+"/"+e);t.forEachTree(n,i)})},Pt.prototype.forEachChild=function(n){this.children.forEach(function(e,t){n(t,e)})},Pt);function Pt(){this.value=null,this.children=new Map}function xt(e,t){return e&&"object"==typeof e?(w.assert(".sv"in e,"Unexpected leaf node or priority contents"),t[e[".sv"]]):e}var Rt,Mt,Lt=function(e,r){var i,t=e.getPriority().val(),n=xt(t,r);if(e.isLeafNode()){var o=e,a=xt(o.getValue(),r);return a!==o.getValue()||n!==o.getPriority().val()?new Le(a,ft(n)):e}var s=e;return n!==(i=s).getPriority().val()&&(i=i.updatePriority(new Le(n))),s.forEachChild(je,function(e,t){var n=Lt(t,r);n!==t&&(i=i.updateImmediateChild(e,n))}),i};(Mt=Rt=Rt||{})[Mt.OVERWRITE=0]="OVERWRITE",Mt[Mt.MERGE=1]="MERGE",Mt[Mt.ACK_USER_WRITE=2]="ACK_USER_WRITE",Mt[Mt.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ft=(Ut.User=new Ut(!0,!1,null,!1),Ut.Server=new Ut(!1,!0,null,!1),Ut.forServerTaggedQuery=function(e){return new Ut(!1,!0,e,!0)},Ut);function Ut(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,w.assert(!r||t,"Tagged queries must be from server.")}var jt,Vt=(qt.prototype.operationForChild=function(e){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return w.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var t=this.affectedTree.subtree(new q(e));return new qt(q.Empty,t,this.revert)}return w.assert(this.path.getFront()===e,"operationForChild called for unrelated child."),new qt(this.path.popFront(),this.affectedTree,this.revert)},qt);function qt(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Rt.ACK_USER_WRITE,this.source=Ft.User}var Bt=(Wt.fromObject=function(e){var n=Wt.Empty;return M(e,function(e,t){n=n.set(new q(e),t)}),n},Wt.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Wt.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:q.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null==i?null:{path:new q(n).child(i.path),value:i.value}},Wt.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},Wt.prototype.subtree=function(e){if(e.isEmpty())return this;var t=e.getFront(),n=this.children.get(t);return null!==n?n.subtree(e.popFront()):Wt.Empty},Wt.prototype.set=function(e,t){if(e.isEmpty())return new Wt(t,this.children);var n=e.getFront(),r=(this.children.get(n)||Wt.Empty).set(e.popFront(),t),i=this.children.insert(n,r);return new Wt(this.value,i)},Wt.prototype.remove=function(e){if(e.isEmpty())return this.children.isEmpty()?Wt.Empty:new Wt(null,this.children);var t=e.getFront(),n=this.children.get(t);if(n){var r=n.remove(e.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?Wt.Empty:new Wt(this.value,i)}return this},Wt.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},Wt.prototype.setTree=function(e,t){if(e.isEmpty())return t;var n=e.getFront(),r=(this.children.get(n)||Wt.Empty).setTree(e.popFront(),t),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Wt(this.value,i)},Wt.prototype.fold=function(e){return this.fold_(q.Empty,e)},Wt.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(e,t){i[e]=t.fold_(n.child(e),r)}),r(n,this.value,i)},Wt.prototype.findOnPath=function(e,t){return this.findOnPath_(e,q.Empty,t)},Wt.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},Wt.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,q.Empty,t)},Wt.prototype.foreachOnPath_=function(e,t,n){if(e.isEmpty())return this;this.value&&n(t,this.value);var r=e.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(e.popFront(),t.child(r),n):Wt.Empty},Wt.prototype.foreach=function(e){this.foreach_(q.Empty,e)},Wt.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(e,t){t.foreach_(n.child(e),r)}),this.value&&r(n,this.value)},Wt.prototype.foreachChild=function(n){this.children.inorderTraversal(function(e,t){t.value&&n(e,t.value)})},Wt.Empty=new Wt(null),Wt);function Wt(e,t){void 0===t&&(t=jt=jt||new He(b)),this.value=e,this.children=t}var zt=(Kt.prototype.operationForChild=function(e){return this.path.isEmpty()?new Kt(this.source,q.Empty):new Kt(this.source,this.path.popFront())},Kt);function Kt(e,t){this.source=e,this.path=t,this.type=Rt.LISTEN_COMPLETE}var Ht=(Qt.prototype.operationForChild=function(e){return this.path.isEmpty()?new Qt(this.source,q.Empty,this.snap.getImmediateChild(e)):new Qt(this.source,this.path.popFront(),this.snap)},Qt);function Qt(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Rt.OVERWRITE}var Gt=(Yt.prototype.operationForChild=function(e){if(this.path.isEmpty()){var t=this.children.subtree(new q(e));return t.isEmpty()?null:t.value?new Ht(this.source,q.Empty,t.value):new Yt(this.source,q.Empty,t)}return w.assert(this.path.getFront()===e,"Can't get a merge for a child not on the path of the operation"),new Yt(this.source,this.path.popFront(),this.children)},Yt.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Yt);function Yt(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Rt.MERGE}var Xt=($t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},$t.prototype.isFiltered=function(){return this.filtered_},$t.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},$t.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},$t.prototype.getNode=function(){return this.node_},$t);function $t(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}var Jt=(Zt.prototype.updateEventSnap=function(e,t,n){return new Zt(new Xt(e,t,n),this.serverCache_)},Zt.prototype.updateServerSnap=function(e,t,n){return new Zt(this.eventCache_,new Xt(e,t,n))},Zt.prototype.getEventCache=function(){return this.eventCache_},Zt.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Zt.prototype.getServerCache=function(){return this.serverCache_},Zt.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Zt.Empty=new Zt(new Xt(at.EMPTY_NODE,!1,!1),new Xt(at.EMPTY_NODE,!1,!1)),Zt);function Zt(e,t){this.eventCache_=e,this.serverCache_=t}var en=(tn.valueChange=function(e){return new tn(tn.VALUE,e)},tn.childAddedChange=function(e,t){return new tn(tn.CHILD_ADDED,t,e)},tn.childRemovedChange=function(e,t){return new tn(tn.CHILD_REMOVED,t,e)},tn.childChangedChange=function(e,t,n){return new tn(tn.CHILD_CHANGED,t,e,n)},tn.childMovedChange=function(e,t){return new tn(tn.CHILD_MOVED,t,e)},tn.CHILD_ADDED="child_added",tn.CHILD_REMOVED="child_removed",tn.CHILD_CHANGED="child_changed",tn.CHILD_MOVED="child_moved",tn.VALUE="value",tn);function tn(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}var nn=(rn.prototype.updateChild=function(e,t,n,r,i,o){w.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(en.childRemovedChange(t,a)):w.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(en.childAddedChange(t,n)):o.trackChildChange(en.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},rn.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(je,function(e,t){n.hasChild(e)||i.trackChildChange(en.childRemovedChange(e,t))}),n.isLeafNode()||n.forEachChild(je,function(e,t){if(r.hasChild(e)){var n=r.getImmediateChild(e);n.equals(t)||i.trackChildChange(en.childChangedChange(e,t,n))}else i.trackChildChange(en.childAddedChange(e,t))})),n.withIndex(this.index_)},rn.prototype.updatePriority=function(e,t){return e.isEmpty()?at.EMPTY_NODE:e.updatePriority(t)},rn.prototype.filtersNodes=function(){return!1},rn.prototype.getIndexedFilter=function(){return this},rn.prototype.getIndex=function(){return this.index_},rn);function rn(e){this.index_=e}var on=(an.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;w.assert(t===en.CHILD_ADDED||t===en.CHILD_CHANGED||t===en.CHILD_REMOVED,"Only child changes supported for tracking"),w.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(t===en.CHILD_ADDED&&i===en.CHILD_REMOVED)this.changeMap.set(n,en.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t===en.CHILD_REMOVED&&i===en.CHILD_ADDED)this.changeMap.delete(n);else if(t===en.CHILD_REMOVED&&i===en.CHILD_CHANGED)this.changeMap.set(n,en.childRemovedChange(n,r.oldSnap));else if(t===en.CHILD_CHANGED&&i===en.CHILD_ADDED)this.changeMap.set(n,en.childAddedChange(n,e.snapshotNode));else{if(t!==en.CHILD_CHANGED||i!==en.CHILD_CHANGED)throw w.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,en.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},an.prototype.getChanges=function(){return Array.from(this.changeMap.values())},an);function an(){this.changeMap=new Map}function sn(){}var un=new(sn.prototype.getCompleteChild=function(e){return null},sn.prototype.getChildAfterChild=function(e,t,n){return null},sn),cn=(ln.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Xt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},ln.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},ln);function ln(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}var hn=function(e,t){this.viewCache=e,this.changes=t},fn=(pn.prototype.assertIndexed=function(e){w.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),w.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},pn.prototype.applyOperation=function(e,t,n,r){var i,o,a=new on;if(t.type===Rt.OVERWRITE){var s=t;i=s.source.fromUser?this.applyUserOverwrite_(e,s.path,s.snap,n,r,a):(w.assert(s.source.fromServer,"Unknown source."),o=s.source.tagged||e.getServerCache().isFiltered()&&!s.path.isEmpty(),this.applyServerOverwrite_(e,s.path,s.snap,n,r,o,a))}else if(t.type===Rt.MERGE){var u=t;i=u.source.fromUser?this.applyUserMerge_(e,u.path,u.children,n,r,a):(w.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||e.getServerCache().isFiltered(),this.applyServerMerge_(e,u.path,u.children,n,r,o,a))}else if(t.type===Rt.ACK_USER_WRITE){var c=t;i=c.revert?this.revertUserWrite_(e,c.path,n,r,a):this.ackUserWrite_(e,c.path,c.affectedTree,n,r,a)}else{if(t.type!==Rt.LISTEN_COMPLETE)throw w.assertionError("Unknown operation type: "+t.type);i=this.listenComplete_(e,t.path,n,a)}var l=a.getChanges();return pn.maybeAddValueEvent_(e,i,l),new hn(i,l)},pn.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(0<n.length||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(en.valueChange(t.getCompleteEventSnap()))}},pn.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,i){var o=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,s=void 0;if(t.isEmpty())if(w.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),c=u instanceof at?u:at.EMPTY_NODE,l=n.calcCompleteEventChildren(c);a=this.filter_.updateFullNode(e.getEventCache().getNode(),l,i)}else{var h=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),h,i)}else{var f=t.getFront();if(".priority"===f){w.assert(1===t.getLength(),"Can't have a priority with additional path components");var p=o.getNode();s=e.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(t,p,s);a=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var m=t.popFront(),y=void 0;if(o.isCompleteForChild(f)){s=e.getServerCache().getNode();var v=n.calcEventCacheAfterServerOverwrite(t,o.getNode(),s);y=null!=v?o.getNode().getImmediateChild(f).updateChild(m,v):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,e.getServerCache());a=null!=y?this.filter_.updateChild(o.getNode(),f,y,m,r,i):o.getNode()}}return e.updateEventSnap(a,o.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},pn.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,a){var s,u=e.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())s=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var l=u.getNode().updateChild(t,n);s=c.updateFullNode(u.getNode(),l,null)}else{var h=t.getFront();if(!u.isCompleteForPath(t)&&1<t.getLength())return e;var f=t.popFront(),p=u.getNode().getImmediateChild(h).updateChild(f,n);s=".priority"===h?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),h,p,f,un,null)}var d=e.updateServerSnap(s,u.isFullyInitialized()||t.isEmpty(),c.filtersNodes()),m=new cn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,t,r,m,a)},pn.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var a,s,u=e.getEventCache(),c=new cn(r,e,i);if(t.isEmpty())s=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),a=e.updateEventSnap(s,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)s=this.filter_.updatePriority(e.getEventCache().getNode(),n),a=e.updateEventSnap(s,u.isFullyInitialized(),u.isFiltered());else{var h=t.popFront(),f=u.getNode().getImmediateChild(l),p=void 0;if(h.isEmpty())p=n;else{var d=c.getCompleteChild(l);p=null!=d?".priority"===h.getBack()&&d.getChild(h.parent()).isEmpty()?d:d.updateChild(h,n):at.EMPTY_NODE}if(f.equals(p))a=e;else{var m=this.filter_.updateChild(u.getNode(),l,p,h,c,o);a=e.updateEventSnap(m,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return a},pn.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},pn.prototype.applyUserMerge_=function(r,i,e,o,a,s){var u=this,c=r;return e.foreach(function(e,t){var n=i.child(e);pn.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,t,o,a,s))}),e.foreach(function(e,t){var n=i.child(e);pn.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,t,o,a,s))}),c},pn.prototype.applyMerge_=function(n,e){return e.foreach(function(e,t){n=n.updateChild(e,t)}),n},pn.prototype.applyServerMerge_=function(o,e,t,a,s,u,c){var l=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,h=o;n=e.isEmpty()?t:Bt.Empty.setTree(e,t);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(e,t){if(f.hasChild(e)){var n=o.getServerCache().getNode().getImmediateChild(e),r=l.applyMerge_(n,t);h=l.applyServerOverwrite_(h,new q(e),r,a,s,u,c)}}),n.children.inorderTraversal(function(e,t){var n=!o.getServerCache().isCompleteForChild(e)&&null==t.value;if(!f.hasChild(e)&&!n){var r=o.getServerCache().getNode().getImmediateChild(e),i=l.applyMerge_(r,t);h=l.applyServerOverwrite_(h,new q(e),i,a,s,u,c)}}),h},pn.prototype.ackUserWrite_=function(e,r,t,n,i,o){if(null!=n.shadowingWrite(r))return e;var a=e.getServerCache().isFiltered(),s=e.getServerCache();if(null!=t.value){if(r.isEmpty()&&s.isFullyInitialized()||s.isCompleteForPath(r))return this.applyServerOverwrite_(e,r,s.getNode().getChild(r),n,i,a,o);if(r.isEmpty()){var u=Bt.Empty;return s.getNode().forEachChild(Ae,function(e,t){u=u.set(new q(e),t)}),this.applyServerMerge_(e,r,u,n,i,a,o)}return e}var c=Bt.Empty;return t.foreach(function(e,t){var n=r.child(e);s.isCompleteForPath(n)&&(c=c.set(e,s.getNode().getChild(n)))}),this.applyServerMerge_(e,r,c,n,i,a,o)},pn.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,un,r)},pn.prototype.revertUserWrite_=function(e,t,n,r,i){var o;if(null!=n.shadowingWrite(t))return e;var a=new cn(n,e,r),s=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var c=void 0;if(e.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var l=e.getServerCache().getNode();w.assert(l instanceof at,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(l)}c=c,u=this.filter_.updateFullNode(s,c,i)}else{var h=t.getFront(),f=n.calcCompleteChild(h,e.getServerCache());null==f&&e.getServerCache().isCompleteForChild(h)&&(f=s.getImmediateChild(h)),(u=null!=f?this.filter_.updateChild(s,h,f,t.popFront(),a,i):e.getEventCache().getNode().hasChild(h)?this.filter_.updateChild(s,h,at.EMPTY_NODE,t.popFront(),a,i):s).isEmpty()&&e.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(q.Empty),e.updateEventSnap(u,o,this.filter_.filtersNodes())},pn);function pn(e){this.filter_=e}var dn=(mn.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===en.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(en.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,en.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,en.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,en.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,en.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,en.VALUE,e,n,t),i},mn.prototype.generateEventsForType_=function(r,t,e,i,o){var a=this,n=e.filter(function(e){return e.type===t});n.sort(this.compareChanges_.bind(this)),n.forEach(function(t){var n=a.materializeSingleChange_(t,o);i.forEach(function(e){e.respondsTo(t.type)&&r.push(e.createEvent(n,a.query_))})})},mn.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_)),e},mn.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw w.assertionError("Should only compare child_ events.");var n=new we(e.childName,e.snapshotNode),r=new we(t.childName,t.snapshotNode);return this.index_.compare(n,r)},mn);function mn(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}var yn,vn=(gn.prototype.getQuery=function(){return this.query_},gn.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},gn.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},gn.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},gn.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},gn.prototype.removeEventRegistration=function(e,n){var r=[];if(n){w.assert(null==e,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(e){n=n;var t=e.createCancelEvent(n,i);t&&r.push(t)})}if(e){for(var t=[],o=0;o<this.eventRegistrations_.length;++o){var a=this.eventRegistrations_[o];if(a.matches(e)){if(e.hasAnyCallback()){t=t.concat(this.eventRegistrations_.slice(o+1));break}}else t.push(a)}this.eventRegistrations_=t}else this.eventRegistrations_=[];return r},gn.prototype.applyOperation=function(e,t,n){e.type===Rt.MERGE&&null!==e.source.queryId&&(w.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),w.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(i.viewCache),w.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},gn.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(je,function(e,t){n.push(en.childAddedChange(e,t))}),t.isFullyInitialized()&&n.push(en.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},gn.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},gn);function gn(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new nn(n.getIndex()),i=n.getNodeFilter();this.processor_=new fn(i);var o=t.getServerCache(),a=t.getEventCache(),s=r.updateFullNode(at.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(at.EMPTY_NODE,a.getNode(),null),c=new Xt(s,o.isFullyInitialized(),r.filtersNodes()),l=new Xt(u,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Jt(l,c),this.eventGenerator_=new dn(this.query_)}var bn=(Object.defineProperty(wn,"__referenceConstructor",{get:function(){return w.assert(yn,"Reference.ts has not been loaded"),yn},set:function(e){w.assert(!yn,"__referenceConstructor has already been defined"),yn=e},enumerable:!0,configurable:!0}),wn.prototype.isEmpty=function(){return 0===this.views.size},wn.prototype.applyOperation=function(e,t,n){var r,i,o=e.source.queryId;if(null!==o){var a=this.views.get(o);return w.assert(null!=a,"SyncTree gave us an op for an invalid query."),a.applyOperation(e,t,n)}var s=[];try{for(var u=d.__values(this.views.values()),c=u.next();!c.done;c=u.next())a=c.value,s=s.concat(a.applyOperation(e,t,n))}catch(e){r={error:e}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return s},wn.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),a=this.views.get(o);if(!a){var s=n.calcCompleteEventCache(i?r:null),u=!1;u=!!s||(s=r instanceof at?n.calcCompleteEventChildren(r):at.EMPTY_NODE,!1);var c=new Jt(new Xt(s,u,!1),new Xt(r,i,!1));a=new vn(e,c),this.views.set(o,a)}return a.addEventRegistration(t),a.getInitialEvents(t)},wn.prototype.removeEventRegistration=function(e,t,n){var r,i,o=e.queryIdentifier(),a=[],s=[],u=this.hasCompleteView();if("default"===o)try{for(var c=d.__values(this.views.entries()),l=c.next();!l.done;l=c.next()){var h=d.__read(l.value,2),f=h[0],p=h[1];s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery()))}}catch(e){r={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(s=s.concat(p.removeEventRegistration(t,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||a.push(p.getQuery())));return u&&!this.hasCompleteView()&&a.push(new wn.__referenceConstructor(e.repo,e.path)),{removed:a,events:s}},wn.prototype.getQueryViews=function(){var t,e,n=[];try{for(var r=d.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&e.call(r)}finally{if(t)throw t.error}}return n},wn.prototype.getCompleteServerCache=function(e){var t,n,r=null;try{for(var i=d.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r||a.getCompleteServerCache(e)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return r},wn.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},wn.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},wn.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},wn.prototype.getCompleteView=function(){var t,e;try{for(var n=d.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}return null},wn);function wn(){this.views=new Map}var _n=(En.prototype.addWrite=function(e,t){if(e.isEmpty())return new En(new Bt(t));var n=this.writeTree_.findRootMostValueAndPath(e);if(null!=n){var r=n.path,i=n.value,o=q.relativePath(r,e);return i=i.updateChild(o,t),new En(this.writeTree_.set(r,i))}var a=new Bt(t);return new En(this.writeTree_.setTree(e,a))},En.prototype.addWrites=function(n,e){var r=this;return M(e,function(e,t){r=r.addWrite(n.child(e),t)}),r},En.prototype.removeWrite=function(e){return e.isEmpty()?En.Empty:new En(this.writeTree_.setTree(e,Bt.Empty))},En.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},En.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(q.relativePath(t.path,e)):null},En.prototype.getCompleteChildren=function(){var n=[],e=this.writeTree_.value;return null!=e?e.isLeafNode()||e.forEachChild(je,function(e,t){n.push(new we(e,t))}):this.writeTree_.children.inorderTraversal(function(e,t){null!=t.value&&n.push(new we(e,t.value))}),n},En.prototype.childCompoundWrite=function(e){if(e.isEmpty())return this;var t=this.getCompleteNode(e);return new En(null!=t?new Bt(t):this.writeTree_.subtree(e))},En.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},En.prototype.apply=function(e){return function n(r,e,i){if(null!=e.value)return i.updateChild(r,e.value);var o=null;return e.children.inorderTraversal(function(e,t){".priority"===e?(w.assert(null!==t.value,"Priority writes must always be leaf nodes"),o=t.value):i=n(r.child(e),t,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(q.Empty,this.writeTree_,e)},En.Empty=new En(new Bt(null)),En);function En(e){this.writeTree_=e}var Tn=(Sn.prototype.childWrites=function(e){return new Cn(e,this)},Sn.prototype.addOverwrite=function(e,t,n,r){w.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},Sn.prototype.addMerge=function(e,t,n){w.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},Sn.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},Sn.prototype.removeWrite=function(t){var n=this,e=this.allWrites_.findIndex(function(e){return e.writeId===t});w.assert(0<=e,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[e];this.allWrites_.splice(e,1);for(var i=r.visible,o=!1,a=this.allWrites_.length-1;i&&0<=a;){var s=this.allWrites_[a];s.visible&&(e<=a&&this.recordContainsPath_(s,r.path)?i=!1:r.path.contains(s.path)&&(o=!0)),a--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):M(r.children,function(e){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(e))}),!0)},Sn.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},Sn.prototype.calcCompleteEventCache=function(t,e,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(t);if(!r&&i.isEmpty())return e;if(r||null!=e||i.hasCompleteWrite(q.Empty)){var o=Sn.layerTree_(this.allWrites_,function(e){return(e.visible||r)&&(!n||!~n.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t);return u=e||at.EMPTY_NODE,o.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var s=this.visibleWrites_.childCompoundWrite(t);if(s.isEmpty())return e;if(null!=e||s.hasCompleteWrite(q.Empty)){var u=e||at.EMPTY_NODE;return s.apply(u)}return null},Sn.prototype.calcCompleteEventChildren=function(e,t){var r=at.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(e);if(n)return n.isLeafNode()||n.forEachChild(je,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(je,function(e,t){var n=i.childCompoundWrite(new q(e)).apply(t);r=r.updateImmediateChild(e,n)}),i.getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r},Sn.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){w.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=e.child(t);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(t):o.apply(r.getChild(t))},Sn.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},Sn.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},Sn.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var a,s=this.visibleWrites_.childCompoundWrite(e),u=s.getCompleteNode(q.Empty);if(null!=u)a=u;else{if(null==t)return[];a=s.apply(t)}if((a=a.withIndex(o)).isEmpty()||a.isLeafNode())return[];for(var c=[],l=o.getCompare(),h=i?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),f=h.getNext();f&&c.length<r;)0!==l(f,n)&&c.push(f),f=h.getNext();return c},Sn.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},Sn.prototype.resetTree_=function(){this.visibleWrites_=Sn.layerTree_(this.allWrites_,Sn.DefaultFilter_,q.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},Sn.DefaultFilter_=function(e){return e.visible},Sn.layerTree_=function(e,t,n){for(var r=_n.Empty,i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,s=void 0;if(o.snap)n.contains(a)?(s=q.relativePath(n,a),r=r.addWrite(s,o.snap)):a.contains(n)&&(s=q.relativePath(a,n),r=r.addWrite(q.Empty,o.snap.getChild(s)));else{if(!o.children)throw w.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))s=q.relativePath(n,a),r=r.addWrites(s,o.children);else if(a.contains(n))if((s=q.relativePath(a,n)).isEmpty())r=r.addWrites(q.Empty,o.children);else{var u=w.safeGet(o.children,s.getFront());if(u){var c=u.getChild(s.popFront());r=r.addWrite(q.Empty,c)}}}}}return r},Sn);function Sn(){this.visibleWrites_=_n.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Cn=(In.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},In.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},In.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},In.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},In.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},In.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},In.prototype.child=function(e){return new In(this.treePath_.child(e),this.writeTree_)},In);function In(e,t){this.treePath_=e,this.writeTree_=t}var kn=(Nn.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Ht(Ft.User,e,t)):[]},Nn.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=Bt.fromObject(t);return this.applyOperationToSyncPoints_(new Gt(Ft.User,e,r))},Nn.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=Bt.Empty;return null!=n.snap?r=r.set(q.Empty,!0):M(n.children,function(e,t){r=r.set(new q(e),t)}),this.applyOperationToSyncPoints_(new Vt(n.path,r,t))}return[]},Nn.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Ht(Ft.Server,e,t))},Nn.prototype.applyServerMerge=function(e,t){var n=Bt.fromObject(t);return this.applyOperationToSyncPoints_(new Gt(Ft.Server,e,n))},Nn.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new zt(Ft.Server,e))},Nn.prototype.applyTaggedQueryOverwrite=function(e,t,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Nn.parseQueryKey_(r),o=i.path,a=i.queryId,s=q.relativePath(o,e),u=new Ht(Ft.forServerTaggedQuery(a),s,t);return this.applyTaggedOperation_(o,u)},Nn.prototype.applyTaggedQueryMerge=function(e,t,n){var r=this.queryKeyForTag_(n);if(r){var i=Nn.parseQueryKey_(r),o=i.path,a=i.queryId,s=q.relativePath(o,e),u=Bt.fromObject(t),c=new Gt(Ft.forServerTaggedQuery(a),s,u);return this.applyTaggedOperation_(o,c)}return[]},Nn.prototype.applyTaggedListenComplete=function(e,t){var n=this.queryKeyForTag_(t);if(n){var r=Nn.parseQueryKey_(n),i=r.path,o=r.queryId,a=q.relativePath(i,e),s=new zt(Ft.forServerTaggedQuery(o),a);return this.applyTaggedOperation_(i,s)}return[]},Nn.prototype.addEventRegistration=function(e,t){var r=e.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=q.relativePath(e,r);i=i||t.getCompleteServerCache(n),o=o||t.hasCompleteView()});var n,a=this.syncPointTree_.get(r);a?(o=o||a.hasCompleteView(),i=i||a.getCompleteServerCache(q.Empty)):(a=new bn,this.syncPointTree_=this.syncPointTree_.set(r,a)),null!=i?n=!0:(n=!1,i=at.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(q.Empty);n&&(i=i.updateImmediateChild(e,n))}));var s=a.viewExistsForQuery(e);if(!s&&!e.getQueryParams().loadsAllData()){var u=Nn.makeQueryKey_(e);w.assert(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Nn.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var l=this.pendingWriteTree_.childWrites(r),h=a.addEventRegistration(e,t,l,i,n);if(!s&&!o){var f=a.viewForQuery(e);h=h.concat(this.setupListener_(e,f))}return h},Nn.prototype.removeEventRegistration=function(e,t,n){var r=this,i=e.path,o=this.syncPointTree_.get(i),a=[];if(o&&("default"===e.queryIdentifier()||o.viewExistsForQuery(e))){var s=o.removeEventRegistration(e,t,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),l=this.syncPointTree_.findOnPath(i,function(e,t){return t.hasCompleteView()});if(c&&!l){var h=this.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(h),p=0;p<f.length;++p){var d=f[p],m=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Nn.queryForListening_(m),this.tagForQuery_(m),y.hashFn,y.onComplete)}}!l&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Nn.queryForListening_(e),null):u.forEach(function(e){var t=r.queryToTagMap.get(Nn.makeQueryKey_(e));r.listenProvider_.stopListening(Nn.queryForListening_(e),t)})),this.removeTags_(u)}return a},Nn.prototype.calcCompleteEventCache=function(i,e){var t=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(e,t){var n=q.relativePath(e,i),r=t.getCompleteServerCache(n);if(r)return r});return t.calcCompleteEventCache(i,n,e,!0)},Nn.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),M(n,function(e,t){r=r.concat(t)}),r})},Nn.prototype.removeTags_=function(e){for(var t=0;t<e.length;++t){var n=e[t];if(!n.getQueryParams().loadsAllData()){var r=Nn.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Nn.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},Nn.prototype.setupListener_=function(e,t){var n=e.path,r=this.tagForQuery_(e),i=this.createListenerForView_(t),o=this.listenProvider_.startListening(Nn.queryForListening_(e),r,i.hashFn,i.onComplete),a=this.syncPointTree_.subtree(n);if(r)w.assert(!a.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var s=a.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),M(n,function(e,t){r=r.concat(t)}),r}),u=0;u<s.length;++u){var c=s[u];this.listenProvider_.stopListening(Nn.queryForListening_(c),this.tagForQuery_(c))}return o},Nn.prototype.createListenerForView_=function(e){var n=this,r=e.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(e.getServerCache()||at.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var t=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r}(e,r);return n.removeEventRegistration(r,null,t)}}},Nn.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},Nn.parseQueryKey_=function(e){var t=e.indexOf("$");return w.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new q(e.substr(0,t))}},Nn.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},Nn.prototype.tagForQuery_=function(e){var t=Nn.makeQueryKey_(e);return this.queryToTagMap.get(t)},Nn.getNextQueryTag_=function(){return Nn.nextQueryTag_++},Nn.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);w.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},Nn.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(q.Empty))},Nn.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(q.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(q.Empty));var o=[],a=e.path.getFront(),s=e.operationForChild(a),u=t.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=r.child(a);o=o.concat(this.applyOperationHelper_(s,u,c,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},Nn.prototype.applyOperationDescendantsHelper_=function(o,e,a,s){var u=this,t=e.get(q.Empty);null==a&&null!=t&&(a=t.getCompleteServerCache(q.Empty));var c=[];return e.children.inorderTraversal(function(e,t){var n=a?a.getImmediateChild(e):null,r=s.child(e),i=o.operationForChild(e);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,t,n,r)))}),t&&(c=c.concat(t.applyOperation(o,s,a))),c},Nn.nextQueryTag_=1,Nn);function Nn(e){this.listenProvider_=e,this.syncPointTree_=Bt.Empty,this.pendingWriteTree_=new Tn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var An=(On.prototype.getNode=function(e){return this.rootNode_.getChild(e)},On.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},On);function On(){this.rootNode_=at.EMPTY_NODE}var Dn=(Pn.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(f("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):Promise.resolve(null)},Pn.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},Pn.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},Pn.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',v(e)},Pn);function Pn(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then(function(e){return n.auth_=e})}var xn=(Rn.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),w.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},Rn.prototype.get=function(){return w.deepCopy(this.counters_)},Rn);function Rn(){this.counters_={}}var Mn=(Ln.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new xn),this.collections_[t]},Ln.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},Ln.collections_={},Ln.reporters_={},Ln);function Ln(){}var Fn=(Un.prototype.get=function(){var e=this.collection_.get(),n=d.__assign({},e);return this.last_&&M(this.last_,function(e,t){n[e]=n[e]-t}),this.last_=e,n},Un);function Un(e){this.collection_=e,this.last_=null}var jn=(Vn.prototype.includeStat=function(e){this.statsToReport_[e]=!0},Vn.prototype.reportStats_=function(){var n=this,e=this.statsListener_.get(),r={},i=!1;M(e,function(e,t){0<t&&w.contains(n.statsToReport_,e)&&(r[e]=t,i=!0)}),i&&this.server_.reportStats(r),U(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Vn);function Vn(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new Fn(e);var n=1e4+2e4*Math.random();U(this.reportStats_.bind(this),Math.floor(n))}var qn=(Bn.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new Wn(i)),t.add(r)}t&&this.eventLists_.push(t)},Bn.prototype.raiseEventsAtPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.equals(t)})},Bn.prototype.raiseEventsForChangedPath=function(t,e){this.queueEvents(e),this.raiseQueuedEventsMatchingPredicate_(function(e){return e.contains(t)||t.contains(e)})},Bn.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1)}t&&(this.eventLists_=[]),this.recursionDepth_--},Bn);function Bn(){this.eventLists_=[],this.recursionDepth_=0}var Wn=(zn.prototype.add=function(e){this.events_.push(e)},zn.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();A&&f("event: "+t.toString()),F(n)}}},zn.prototype.getPath=function(){return this.path_},zn);function zn(e){this.path_=e,this.events_=[]}var Kn=(Hn.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var r=d.__spread(this.listeners_[e]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)},Hn.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},Hn.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},Hn.prototype.validateEventType_=function(t){w.assert(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},Hn);function Hn(e){this.allowedEvents_=e,this.listeners_={},w.assert(Array.isArray(e)&&0<e.length,"Requires a non-empty array")}var Qn,Gn=(Qn=Kn,d.__extends(Yn,Qn),Yn.getInstance=function(){return new Yn},Yn.prototype.getInitialEvent=function(e){return w.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},Yn);function Yn(){var t,e,n=Qn.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(e="visibilitychange",t="hidden"):void 0!==document.mozHidden?(e="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(e="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(e="webkitvisibilitychange",t="webkitHidden")),n.visible_=!0,e&&document.addEventListener(e,function(){var e=!document[t];e!==n.visible_&&(n.visible_=e,n.trigger("visible",e))},!1),n}var Xn,$n=(Xn=Kn,d.__extends(Jn,Xn),Jn.getInstance=function(){return new Jn},Jn.prototype.getInitialEvent=function(e){return w.assert("online"===e,"Unknown event type: "+e),[this.online_]},Jn.prototype.currentlyOnline=function(){return this.online_},Jn);function Jn(){var e=Xn.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||w.isMobileCordova()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}var Zn=(er.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},er.prototype.handleResponse=function(e,t){var r=this;this.pendingResponses[e]=t;for(var n=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&F(function(){r.onMessage_(t[e])})},n=0;n<t.length;++n)e(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},er);function er(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var tr=(nr.prototype.open=function(e,t){var a=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new Zn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){a.log_("Timed out trying to connect."),a.onClosed_(),a.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if(w.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!a.isClosed_){a.scriptTagHolder=new rr(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d.__read(e,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],a.incrementIncomingBytes_(e),a.scriptTagHolder)if(a.connectTimeoutTimer_&&(clearTimeout(a.connectTimeoutTimer_),a.connectTimeoutTimer_=null),a.everConnected_=!0,"start"===r)a.id=i,a.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(a.scriptTagHolder.sendNewPolls=!1,a.myPacketOrderer.closeAfter(i,function(){a.onClosed_()})):a.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=d.__read(e,2),r=n[0],i=n[1];a.incrementIncomingBytes_(e),a.myPacketOrderer.handleResponse(r,i)},function(){a.onClosed_()},a.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),a.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=a.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",a.transportSessionId&&(e.s=a.transportSessionId),a.lastSessionId&&(e.ls=a.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(K)&&(e.r="f");var t=a.urlFn(e);a.log_("Connecting via long-poll to "+t),a.scriptTagHolder.addTag(t,function(){})}})},nr.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},nr.forceAllow=function(){nr.forceAllow_=!0},nr.forceDisallow=function(){nr.forceDisallow_=!0},nr.isAvailable=function(){return!(w.isNodeSdk()||!nr.forceAllow_&&(nr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},nr.prototype.markConnectionHealthy=function(){},nr.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},nr.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},nr.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},nr.prototype.send=function(e){var t=w.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=w.base64Encode(t),r=E(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},nr.prototype.addDisconnectPingFrame=function(e,t){if(!w.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},nr.prototype.incrementIncomingBytes_=function(e){var t=w.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},nr);function nr(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=p(e),this.stats_=Mn.getCollection(t),this.urlFn=function(e){return t.connectionURL(H,e)}}var rr=(ir.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||f("No IE domain setting required")}catch(e){var n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},ir.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},ir.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},ir.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},ir.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},ir.prototype.addLongPollTag_=function(e,t){var n=this;function r(){n.outstandingRequests.delete(t),n.newRequest_()}this.outstandingRequests.add(t);var i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})},ir.prototype.addTag=function(e,n){var r=this;w.isNodeSdk()?this.doNodeLongPoll(e,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var t=r.myIFrame.doc.createElement("script");t.type="text/javascript",t.async=!0,t.src=e,t.onload=t.onreadystatechange=function(){var e=t.readyState;e&&"loaded"!==e&&"complete"!==e||(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),n())},t.onerror=function(){f("Long-poll script failed to load: "+e),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(t)}catch(e){}},Math.floor(1))},ir);function ir(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,w.isNodeSdk())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=k(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ir.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(e){f("frame writing exception"),e.stack&&f(e.stack),f(e)}}}var or="";var ar=null;"undefined"!=typeof MozWebSocket?ar=MozWebSocket:"undefined"!=typeof WebSocket&&(ar=WebSocket);var sr=(ur.connectionURL_=function(e,t,n){var r={v:"5"};return!w.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(K)&&(r.r="f"),t&&(r.s=t),n&&(r.ls=n),e.connectionURL("websocket",r)},ur.prototype.open=function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,S.set("previous_websocket_failure",!0);try{if(w.isNodeSdk()){var r=w.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+or+"/"+u.platform+"/"+r}},o=u.env,a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new ar(this.connURL,[],i)}else this.mySock=new ar(this.connURL)}catch(e){this.log_("Error instantiating WebSocket.");var s=e.message||e.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}},ur.prototype.start=function(){},ur.forceDisallow=function(){ur.forceDisallow_=!0},ur.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);t&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)}return!e&&null!==ar&&!ur.forceDisallow_},ur.previouslyFailed=function(){return S.isInMemoryStorage||!0===S.get("previous_websocket_failure")},ur.prototype.markConnectionHealthy=function(){S.remove("previous_websocket_failure")},ur.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=w.jsonEval(t);this.onMessage(n)}},ur.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},ur.prototype.extractFrameCount_=function(e){if(w.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},ur.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},ur.prototype.send=function(e){this.resetKeepAlive();var t=w.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=E(t,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},ur.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},ur.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},ur.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},ur.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))},ur.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},ur.responsesRequiredToBeHealthy=2,ur.healthyTimeout=3e4,ur);function ur(e,t,n,r){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=p(this.connId),this.stats_=Mn.getCollection(t),this.connURL=ur.connectionURL_(t,n,r)}var cr=(Object.defineProperty(lr,"ALL_TRANSPORTS",{get:function(){return[tr,sr]},enumerable:!0,configurable:!0}),lr.prototype.initTransports_=function(e){var t,n,r=sr&&sr.isAvailable(),i=r&&!sr.previouslyFailed();if(e.webSocketOnly&&(r||v("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[sr];else{var o=this.transports_=[];try{for(var a=d.__values(lr.ALL_TRANSPORTS),s=a.next();!s.done;s=a.next()){var u=s.value;u&&u.isAvailable()&&o.push(u)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}}},lr.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},lr.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},lr);function lr(e){this.initTransports_(e)}var hr=(fr.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;0<i&&(this.healthyTimeout_=U(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&102400<e.conn_.bytesReceived?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&10240<e.conn_.bytesSent?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},fr.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},fr.prototype.disconnReceiver_=function(t){var n=this;return function(e){t===n.conn_?n.onConnectionLost_(e):t===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},fr.prototype.connReceiver_=function(t){var n=this;return function(e){2!==n.state_&&(t===n.rx_?n.onPrimaryMessageReceived_(e):t===n.secondaryConn_?n.onSecondaryMessageReceived_(e):n.log_("message on old connection"))}},fr.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},fr.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},fr.prototype.onSecondaryControl_=function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},fr.prototype.onSecondaryMessageReceived_=function(e){var t=_("t",e),n=_("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},fr.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},fr.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},fr.prototype.onPrimaryMessageReceived_=function(e){var t=_("t",e),n=_("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},fr.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},fr.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},fr.prototype.onControl_=function(e){var t=_("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?m("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):m("Unknown control packet command: "+t)}},fr.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&v("Protocol version mismatch detected"),this.tryStartUpgrade_())},fr.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},fr.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),U(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))},fr.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},fr.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):U(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},fr.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},fr.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},fr.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(S.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},fr.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},fr.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},fr.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},fr.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},fr);function fr(e,t,n,r,i,o,a){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=p("c:"+this.id+":"),this.transportManager_=new cr(t),this.log_("Connection created"),this.start_()}var pr=(dr.prototype.put=function(e,t,n,r){},dr.prototype.merge=function(e,t,n,r){},dr.prototype.refreshAuthToken=function(e){},dr.prototype.onDisconnectPut=function(e,t,n){},dr.prototype.onDisconnectMerge=function(e,t,n){},dr.prototype.onDisconnectCancel=function(e,t){},dr.prototype.reportStats=function(e){},dr);function dr(){}var mr,yr=(mr=pr,d.__extends(vr,mr),vr.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(w.stringify(i)),w.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},vr.prototype.listen=function(e,t,n,r){var i=e.queryIdentifier(),o=e.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),w.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),w.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},vr.prototype.sendListen_=function(r){var i=this,o=r.query,a=o.path.toString(),s=o.queryIdentifier();this.log_("Listen on "+a+" for "+s);var e={p:a};r.tag&&(e.q=o.queryObject(),e.t=r.tag),e.h=r.hashFn(),this.sendRequest("q",e,function(e){var t=e.d,n=e.s;vr.warnOnListenWarnings_(t,o),(i.listens.get(a)&&i.listens.get(a).get(s))===r&&(i.log_("listen response",e),"ok"!==n&&i.removeListen_(a,s),r.onComplete&&r.onComplete(n,t))})},vr.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&w.contains(e,"w")){var n=w.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',i=t.path.toString();v("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},vr.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},vr.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||w.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},vr.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,e=w.isValidFormat(i)?"auth":"gauth",t={cred:i};null===this.authOverride_?t.noauth=!0:"object"==typeof this.authOverride_&&(t.authvar=this.authOverride_),this.sendRequest(e,t,function(e){var t=e.s,n=e.d||"error";r.authToken_===i&&("ok"===t?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(t,n))})}},vr.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),w.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},vr.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},vr.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},vr.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},vr.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},vr.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},vr.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},vr.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},vr.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+t)},vr.prototype.sendPut_=function(t){var n=this,r=this.outstandingPuts_[t].action,e=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,e,function(e){n.log_(r+" response",e),delete n.outstandingPuts_[t],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(e.s,e.d)})},vr.prototype.reportStats=function(e){var n=this;if(this.connected_){var t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,function(e){if("ok"!==e.s){var t=e.d;n.log_("reportStats","Error sending stats: "+t)}})}},vr.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+w.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},vr.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):m("Unrecognized action received from server: "+w.stringify(e)+"\nAre you using the latest client?")},vr.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},vr.prototype.scheduleConnect_=function(e){var t=this;w.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},vr.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},vr.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},vr.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},vr.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+vr.nextConnectionId_++,o=this,a=this.lastSessionId,s=!1,u=null,c=function(){u?u.close():(s=!0,r())};this.realtime_={close:c,sendRequest:function(e){w.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var e=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(e).then(function(e){s?f("getToken() completed but was canceled"):(f("getToken() completed. Creating connection."),o.authToken_=e&&e.accessToken,u=new hr(i,o.repoInfo_,t,n,r,function(e){v(e+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},a))}).then(null,function(e){o.log_("Failed to get token: "+e),s||(w.CONSTANTS.NODE_ADMIN&&v(e),c())})}},vr.prototype.interrupt=function(e){f("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},vr.prototype.resume=function(e){f("Resuming connection for reason: "+e),delete this.interruptReasons_[e],w.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},vr.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},vr.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},vr.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return R(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},vr.prototype.removeListen_=function(e,t){var n,r=new q(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},vr.prototype.onAuthRevoked_=function(e,t){f("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},vr.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},vr.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth();try{for(var i=d.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,d.__values(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}},vr.prototype.sendConnectStats_=function(){var e={},t="js";w.CONSTANTS.NODE_ADMIN?t="admin_node":w.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+or.replace(/\./g,"-")]=1,w.isMobileCordova()?e["framework.cordova"]=1:w.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},vr.prototype.shouldReconnect_=function(){var e=$n.getInstance().currentlyOnline();return w.isEmpty(this.interruptReasons_)&&e},vr.nextPersistentConnectionId_=0,vr.nextConnectionId_=0,vr);function vr(e,t,n,r,i,o){var a=mr.call(this)||this;if(a.repoInfo_=e,a.onDataUpdate_=t,a.onConnectStatus_=n,a.onServerInfoUpdate_=r,a.authTokenProvider_=i,a.authOverride_=o,a.id=vr.nextPersistentConnectionId_++,a.log_=p("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=1e3,a.maxReconnectDelay_=3e5,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,o&&!w.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Gn.getInstance().on("visible",a.onVisible_,a),-1===e.host.indexOf("fblocal")&&$n.getInstance().on("online",a.onOnline_,a),a}var gr,br=(gr=pr,d.__extends(wr,gr),wr.prototype.reportStats=function(e){throw new Error("Method not implemented.")},wr.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(w.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},wr.prototype.listen=function(e,t,r,i){var o=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var s=wr.getListenId_(e,r),u={};this.listens_[s]=u;var n=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",n,function(e,t){var n=t;404===e&&(e=n=null),null===e&&o.onDataUpdate_(a,n,!1,r),w.safeGet(o.listens_,s)===u&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},wr.prototype.unlisten=function(e,t){var n=wr.getListenId_(e,t);delete this.listens_[n]},wr.prototype.refreshAuthToken=function(e){},wr.prototype.restRequest_=function(i,o,a){var s=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(e){var t=e&&e.accessToken;t&&(o.auth=t);var n=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+i+"?ns="+s.repoInfo_.namespace+w.querystring(o);s.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(a&&4===r.readyState){s.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var e=null;if(200<=r.status&&r.status<300){try{e=w.jsonEval(r.responseText)}catch(e){v("Failed to parse JSON response for "+n+": "+r.responseText)}a(null,e)}else 401!==r.status&&404!==r.status&&v("Got unsuccessful REST response for "+n+" Status: "+r.status),a(r.status);a=null}},r.open("GET",n,!0),r.send()})},wr);function wr(e,t,n){var r=gr.call(this)||this;return r.repoInfo_=e,r.onDataUpdate_=t,r.authTokenProvider_=n,r.log_=p("p:rest:"),r.listens_={},r}var _r="repo_interrupt",Er=(Tr.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Tr.prototype.name=function(){return this.repoInfo_.namespace},Tr.prototype.serverTime=function(){var e=this.infoData_.getNode(new q(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},Tr.prototype.generateServerValues=function(){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:this.serverTime()})},Tr.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var i=new q(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var o=[];if(r)if(n){var a=w.map(t,function(e){return ft(e)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,a,r)}else{var s=ft(t);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,s,r)}else if(n){var u=w.map(t,function(e){return ft(e)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=ft(t);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var l=i;0<o.length&&(l=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(l,o)},Tr.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},Tr.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},Tr.prototype.onServerInfoUpdate_=function(e){var n=this;M(e,function(e,t){n.updateInfo_(e,t)})},Tr.prototype.updateInfo_=function(e,t){var n=new q("/.info/"+e),r=ft(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Tr.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Tr.prototype.setWithPriority=function(i,e,t,o){var a=this;this.log_("set",{path:i.toString(),value:e,priority:t});var n=this.generateServerValues(),r=ft(e,t),s=Lt(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,s,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(e,t){var n="ok"===e;n||v("set at "+i+" failed: "+e);var r=a.serverSyncTree_.ackUserWrite(u,!n);a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(o,e,t)});var l=this.abortTransactions_(i);this.rerunTransactions_(l),this.eventQueue_.raiseEventsForChangedPath(l,[])},Tr.prototype.update=function(o,e,a){var s=this;this.log_("update",{path:o.toString(),value:e});var r=!0,i=this.generateServerValues(),u={};if(M(e,function(e,t){r=!1;var n=ft(t);u[e]=Lt(n,i)}),r)f("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(a,"ok");else{var c=this.getNextWriteId_(),t=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(t),this.server_.merge(o.toString(),e,function(e,t){var n="ok"===e;n||v("update at "+o+" failed: "+e);var r=s.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?s.rerunTransactions_(o):o;s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(a,e,t)}),M(e,function(e){var t=s.abortTransactions_(o.child(e));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},Tr.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var e=this.generateServerValues(),t=function(e,n){var r=new Dt;return e.forEachTree(new q(""),function(e,t){r.remember(e,Lt(t,n))}),r}(this.onDisconnect_,e),i=[];t.forEachTree(q.Empty,function(e,t){i=i.concat(r.serverSyncTree_.applyServerOverwrite(e,t));var n=r.abortTransactions_(e);r.rerunTransactions_(n)}),this.onDisconnect_=new Dt,this.eventQueue_.raiseEventsForChangedPath(q.Empty,i)},Tr.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(e,t){"ok"===e&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,e,t)})},Tr.prototype.onDisconnectSet=function(n,e,r){var i=this,o=ft(e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},Tr.prototype.onDisconnectSetWithPriority=function(n,e,t,r){var i=this,o=ft(e,t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(e,t){"ok"===e&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,e,t)})},Tr.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(w.isEmpty(n))return f("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(e,t){"ok"===e&&M(n,function(e,t){var n=ft(t);o.onDisconnect_.remember(r.child(e),n)}),o.callOnCompleteCallback(i,e,t)})},Tr.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},Tr.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},Tr.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(_r)},Tr.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(_r)},Tr.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;t=e?(this.statsListener_||(this.statsListener_=new Fn(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);M(t,function(e,t){for(var n=e,r=e.length;r<i+2;r++)n+=" ";console.log(n+t)})}},Tr.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},Tr.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),f.apply(void 0,d.__spread([n],e))},Tr.prototype.callOnCompleteCallback=function(r,i,o){r&&F(function(){if("ok"===i)r(null);else{var e=(i||"error").toUpperCase(),t=e;o&&(t+=": "+o);var n=new Error(t);n.code=e,r(n)}})},Object.defineProperty(Tr.prototype,"database",{get:function(){return this.__database||(this.__database=new Br(this))},enumerable:!0,configurable:!0}),Tr);function Tr(e,t,n,r){var a=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new qn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Dt,this.persistentConnection_=null;var i=new Dn(n,r);if(this.stats_=Mn.getCollection(e),t||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new br(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{w.stringify(o)}catch(e){throw new Error("Invalid authOverride provided: "+e)}}this.persistentConnection_=new yr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(e){a.server_.refreshAuthToken(e)}),this.statsReporter_=Mn.getOrCreateReporter(e,function(){return new jn(a.stats_,a.server_)}),this.transactionsInit_(),this.infoData_=new An,this.infoSyncTree_=new kn({startListening:function(e,t,n,r){var i=[],o=a.infoData_.getNode(e.path);return o.isEmpty()||(i=a.infoSyncTree_.applyServerOverwrite(e.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new kn({startListening:function(r,e,t,i){return a.server_.listen(r,t,e,function(e,t){var n=i(e,t);a.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(e,t){a.server_.unlisten(e,t)}})}var Sr=(Cr.prototype.getStartPost=function(){return this.startPost_},Cr.prototype.getEndPost=function(){return this.endPost_},Cr.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},Cr.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new we(t,n))||(n=at.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},Cr.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=at.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(at.EMPTY_NODE);var i=this;return t.forEachChild(je,function(e,t){i.matches(new we(e,t))||(r=r.updateImmediateChild(e,at.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},Cr.prototype.updatePriority=function(e,t){return e},Cr.prototype.filtersNodes=function(){return!0},Cr.prototype.getIndexedFilter=function(){return this.indexedFilter_},Cr.prototype.getIndex=function(){return this.index_},Cr.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},Cr.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},Cr);function Cr(e){this.indexedFilter_=new nn(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Cr.getStartPost_(e),this.endPost_=Cr.getEndPost_(e)}var Ir=(kr.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new we(t,n))||(n=at.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},kr.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=at.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=at.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(at.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)a=i.getNext(),!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,at.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},kr.prototype.updatePriority=function(e,t){return e},kr.prototype.filtersNodes=function(){return!0},kr.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},kr.prototype.getIndex=function(){return this.index_},kr.prototype.fullLimitUpdateChild_=function(e,t,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(e,t){return a(t,e)}}else o=this.index_.getCompare();var s=e;w.assert(s.numChildren()===this.limit_,"");var u=new we(t,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(t)){for(var h=s.getImmediateChild(t),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===t||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(en.childChangedChange(t,n,h)),s.updateImmediateChild(t,n);null!=i&&i.trackChildChange(en.childRemovedChange(t,h));var d=s.updateImmediateChild(t,at.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(en.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?e:l&&0<=o(c,u)?(null!=i&&(i.trackChildChange(en.childRemovedChange(c.name,c.node)),i.trackChildChange(en.childAddedChange(t,n))),s.updateImmediateChild(t,n).updateImmediateChild(c.name,at.EMPTY_NODE)):e},kr);function kr(e){this.rangedFilter_=new Sr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}var Nr=(Ar.prototype.hasStart=function(){return this.startSet_},Ar.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Ar.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Ar.prototype.getIndexStartValue=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Ar.prototype.getIndexStartName=function(){return w.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:D},Ar.prototype.hasEnd=function(){return this.endSet_},Ar.prototype.getIndexEndValue=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Ar.prototype.getIndexEndName=function(){return w.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},Ar.prototype.hasLimit=function(){return this.limitSet_},Ar.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Ar.prototype.getLimit=function(){return w.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},Ar.prototype.getIndex=function(){return this.index_},Ar.prototype.copy_=function(){var e=new Ar;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},Ar.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},Ar.prototype.limitToFirst=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=Ar.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,t},Ar.prototype.limitToLast=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_=Ar.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,t},Ar.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},Ar.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},Ar.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},Ar.prototype.getQueryObject=function(){var e=Ar.WIRE_PROTOCOL_CONSTANTS_,t={};if(this.startSet_&&(t[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(t[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(t[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(t[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){t[e.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),t[e.VIEW_FROM]=n}return this.index_!==je&&(t[e.INDEX]=this.index_.toString()),t},Ar.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Ar.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===je},Ar.prototype.getNodeFilter=function(){return this.loadsAllData()?new nn(this.getIndex()):this.hasLimit()?new Ir(this):new Sr(this)},Ar.prototype.toRestQueryStringParameters=function(){var e,t=Ar.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(e=this.index_===je?t.PRIORITY_INDEX:this.index_===mt?t.VALUE_INDEX:this.index_===Ae?t.KEY_INDEX:(w.assert(this.index_ instanceof yt,"Unrecognized index type!"),this.index_.toString()),n[t.ORDER_BY]=w.stringify(e),this.startSet_&&(n[t.START_AT]=w.stringify(this.indexStartValue_),this.startNameSet_&&(n[t.START_AT]+=","+w.stringify(this.indexStartName_))),this.endSet_&&(n[t.END_AT]=w.stringify(this.indexEndValue_),this.endNameSet_&&(n[t.END_AT]+=","+w.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[t.LIMIT_TO_FIRST]=this.limit_:n[t.LIMIT_TO_LAST]=this.limit_)),n},Ar.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Ar.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Ar.DEFAULT=new Ar,Ar);function Ar(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=je}var Or,Dr=(Or=At,d.__extends(Pr,Or),Pr.prototype.getKey=function(){return w.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Pr.prototype.child=function(e){return w.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof q||(null===this.path.getFront()?function(e,t,n,r){n=n&&n.replace(/^\/*\.info(\/|$)/,"/"),ie(e,t,n,r)}("Reference.child",1,e,!1):ie("Reference.child",1,e,!1)),new Pr(this.repo,this.path.child(e))},Pr.prototype.getParent=function(){w.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new Pr(this.repo,e)},Pr.prototype.getRoot=function(){w.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},Pr.prototype.databaseProp=function(){return this.repo.database},Pr.prototype.set=function(e,t){w.validateArgCount("Reference.set",1,2,arguments.length),oe("Reference.set",this.path),Z("Reference.set",1,e,this.path,!1),w.validateCallback("Reference.set",2,t,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},Pr.prototype.update=function(e,t){if(w.validateArgCount("Reference.update",1,2,arguments.length),oe("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,v("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ee("Reference.update",1,e,this.path,!1),w.validateCallback("Reference.update",2,t,!0);var i=new w.Deferred;return this.repo.update(this.path,e,i.wrapCallback(t)),i.promise},Pr.prototype.setWithPriority=function(e,t,n){if(w.validateArgCount("Reference.setWithPriority",2,3,arguments.length),oe("Reference.setWithPriority",this.path),Z("Reference.setWithPriority",1,e,this.path,!1),te("Reference.setWithPriority",2,t,!1),w.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new w.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},Pr.prototype.remove=function(e){return w.validateArgCount("Reference.remove",0,1,arguments.length),oe("Reference.remove",this.path),w.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},Pr.prototype.transaction=function(e,r,t){if(w.validateArgCount("Reference.transaction",1,3,arguments.length),oe("Reference.transaction",this.path),w.validateCallback("Reference.transaction",1,e,!1),w.validateCallback("Reference.transaction",2,r,!0),function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(w.errorPrefix(e,t,r)+"must be a boolean.")}("Reference.transaction",3,t,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===t&&(t=!0);var i=new w.Deferred;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,e,function(e,t,n){e?i.reject(e):i.resolve(new de(t,n)),"function"==typeof r&&r(e,t,n)},t),i.promise},Pr.prototype.setPriority=function(e,t){w.validateArgCount("Reference.setPriority",1,2,arguments.length),oe("Reference.setPriority",this.path),te("Reference.setPriority",1,e,!1),w.validateCallback("Reference.setPriority",2,t,!0);var n=new w.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},Pr.prototype.push=function(e,t){w.validateArgCount("Reference.push",0,2,arguments.length),oe("Reference.push",this.path),Z("Reference.push",1,e,this.path,!0),w.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),i=be(r),o=this.child(i),a=this.child(i);return n=null!=e?o.set(e,t).then(function(){return a}):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),o},Pr.prototype.onDisconnect=function(){return oe("Reference.onDisconnect",this.path),new fe(this.repo,this.path)},Object.defineProperty(Pr.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(Pr.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(Pr.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(Pr.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),Pr);function Pr(e,t){if(!(e instanceof Er))throw new Error("new Reference() no longer supported - use app.database().");return Or.call(this,e,t,Nr.DEFAULT,!1)||this}At.__referenceConstructor=Dr,bn.__referenceConstructor=Dr;var xr,Rr,Mr=function(){this.children={},this.childCount=0,this.value=null},Lr=(Fr.prototype.subTree=function(e){for(var t=e instanceof q?e:new q(e),n=this,r=t.getFront();null!==r;)n=new Fr(r,n,w.safeGet(n.node_.children,r)||new Mr),r=(t=t.popFront()).getFront();return n},Fr.prototype.getValue=function(){return this.node_.value},Fr.prototype.setValue=function(e){w.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},Fr.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Fr.prototype.hasChildren=function(){return 0<this.node_.childCount},Fr.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Fr.prototype.forEachChild=function(n){var r=this;M(this.node_.children,function(e,t){n(new Fr(e,r,t))})},Fr.prototype.forEachDescendant=function(t,e,n){e&&!n&&t(this),this.forEachChild(function(e){e.forEachDescendant(t,!0,n)}),e&&n&&t(this)},Fr.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},Fr.prototype.forEachImmediateDescendantWithValue=function(t){this.forEachChild(function(e){null!==e.getValue()?t(e):e.forEachImmediateDescendantWithValue(t)})},Fr.prototype.path=function(){return new q(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Fr.prototype.name=function(){return this.name_},Fr.prototype.parent=function(){return this.parent_},Fr.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Fr.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=w.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},Fr);function Fr(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Mr),this.name_=e,this.parent_=t,this.node_=n}(Rr=xr=xr||{})[Rr.RUN=0]="RUN",Rr[Rr.SENT=1]="SENT",Rr[Rr.COMPLETED=2]="COMPLETED",Rr[Rr.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Rr[Rr.NEEDS_ABORT=4]="NEEDS_ABORT",Er.MAX_TRANSACTION_RETRIES_=25,Er.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Lr},Er.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);function i(){}var o=new Dr(this,e);o.on("value",i);var a={path:e,update:t,onComplete:n,status:null,order:k(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=this.getLatestState_(e);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var c=new gt(a.currentInputSnapshot,new Dr(this,a.path),je);a.onComplete(null,!1,c)}}else{he("transaction failed: Data returned ",u,a.path),a.status=xr.RUN;var l=this.transactionQueueTree_.subTree(e),h=l.getValue()||[];h.push(a),l.setValue(h);var f=void 0;if("object"==typeof u&&null!==u&&w.contains(u,".priority"))f=w.safeGet(u,".priority"),w.assert(J(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(e)||at.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=ft(u,f),m=Lt(d,p);a.currentOutputSnapshotRaw=d,a.currentOutputSnapshotResolved=m,a.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(e,m,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,y),this.sendReadyTransactions_()}},Er.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||at.EMPTY_NODE},Er.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);w.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(e){return e.status===xr.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},Er.prototype.sendTransactionQueue_=function(s,u){for(var c=this,e=u.map(function(e){return e.currentWriteId}),t=this.getLatestState_(s,e),n=t,r=t.hash(),i=0;i<u.length;i++){var o=u[i];w.assert(o.status===xr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=xr.SENT,o.retryCount++;var a=q.relativePath(s,o.path);n=n.updateChild(a,o.currentOutputSnapshotRaw)}var l=n.val(!0),h=s;this.server_.put(h.toString(),l,function(e){c.log_("transaction put response",{path:h.toString(),status:e});var t=[];if("ok"===e){for(var n=[],r=0;r<u.length;r++){if(u[r].status=xr.COMPLETED,t=t.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new Dr(c,u[r].path),a=new gt(i,o,je);n.push(u[r].onComplete.bind(null,null,!0,a))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(s)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(s,t);for(r=0;r<n.length;r++)F(n[r])}else{if("datastale"===e)for(r=0;r<u.length;r++)u[r].status===xr.SENT_NEEDS_ABORT?u[r].status=xr.NEEDS_ABORT:u[r].status=xr.RUN;else{v("transaction at "+h.toString()+" failed: "+e);for(r=0;r<u.length;r++)u[r].status=xr.NEEDS_ABORT,u[r].abortReason=e}c.rerunTransactions_(s)}},r)},Er.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},Er.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],i=[],o=e.filter(function(e){return e.status===xr.RUN}).map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var s=e[a],u=q.relativePath(t,s.path),c=!1,l=void 0;if(w.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),s.status===xr.NEEDS_ABORT)c=!0,l=s.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else if(s.status===xr.RUN)if(s.retryCount>=Er.MAX_TRANSACTION_RETRIES_)c=!0,l="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0));else{var h=this.getLatestState_(s.path,o);s.currentInputSnapshot=h;var f=e[a].update(h.val());if(void 0!==f){he("transaction failed: Data returned ",f,s.path);var p=ft(f);"object"==typeof f&&null!=f&&w.contains(f,".priority")||(p=p.updatePriority(h.getPriority()));var d=s.currentWriteId,m=this.generateServerValues(),y=Lt(p,m);s.currentOutputSnapshotRaw=p,s.currentOutputSnapshotResolved=y,s.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(s.path,y,s.currentWriteId,s.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,l="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(s.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,i),i=[],c&&(e[a].status=xr.COMPLETED,n=e[a].unwatcher,setTimeout(n,Math.floor(0)),e[a].onComplete))if("nodata"===l){var v=new Dr(this,e[a].path),g=e[a].currentInputSnapshot,b=new gt(g,v,je);r.push(e[a].onComplete.bind(null,null,!1,b))}else r.push(e[a].onComplete.bind(null,new Error(l),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)F(r[a]);this.sendReadyTransactions_()}},Er.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;for(t=e.getFront();null!==t&&null===n.getValue();)n=n.subTree(t),t=(e=e.popFront()).getFront();return n},Er.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},Er.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},Er.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==xr.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(0<n.length?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},Er.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},Er.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],i=-1,o=0;o<t.length;o++)if(t[o].status===xr.SENT_NEEDS_ABORT);else if(t[o].status===xr.SENT)w.assert(i===o-1,"All SENT items should be at beginning of queue."),t[i=o].status=xr.SENT_NEEDS_ABORT,t[o].abortReason="set";else if(w.assert(t[o].status===xr.RUN,"Unexpected transaction status in abort"),t[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[o].currentWriteId,!0)),t[o].onComplete){n.push(t[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?e.setValue(null):t.length=i+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(o=0;o<n.length;o++)F(n[o])}};var Ur,jr="databaseURL",Vr=(qr.getInstance=function(){return Ur=Ur||new qr},qr.prototype.interrupt=function(){var t,e,n,r;try{for(var i=d.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,d.__values(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].interrupt()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},qr.prototype.resume=function(){var t,e,n,r;try{for(var i=d.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,d.__values(Object.keys(this.repos_[a]))),u=s.next();!u.done;u=s.next()){var c=u.value;this.repos_[a][c].resume()}}catch(e){n={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}},qr.prototype.databaseFromApp=function(e,t,n){var r=n||e.options[jr];void 0===r&&y("Can't determine Firebase Database URL.  Be sure to include "+jr+" option when calling firebase.initializeApp().");var i=Y(r),o=i.repoInfo,a=void 0;return void 0!==u&&(a=u.env.FIREBASE_DATABASE_EMULATOR_HOST),a&&(r="http://"+a+"?ns="+o.namespace,o=(i=Y(r)).repoInfo),ae("Invalid Firebase Database URL",1,i),i.path.isEmpty()||y("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,e,t).database},qr.prototype.deleteRepo=function(e){var t=w.safeGet(this.repos_,e.app.name);t&&w.safeGet(t,e.repoInfo_.toURLString())===e||y("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},qr.prototype.createRepo=function(e,t,n){var r=w.safeGet(this.repos_,t.name);r||(r={},this.repos_[t.name]=r);var i=w.safeGet(r,e.toURLString());return i&&y("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Er(e,this.useRestClient_,t,n),r[e.toURLString()]=i},qr.prototype.forceRestClient=function(e){this.useRestClient_=e},qr);function qr(){this.repos_={},this.useRestClient_=!1}var Br=(Object.defineProperty(Wr.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Wr.prototype.ref=function(e){return this.checkDeleted_("ref"),w.validateArgCount("database.ref",0,1,arguments.length),e instanceof Dr?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},Wr.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),w.validateArgCount(t,1,1,arguments.length);var n=Y(e);ae(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&y(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Wr.prototype.checkDeleted_=function(e){null===this.repo_&&y("Cannot call "+e+" on a deleted database.")},Wr.prototype.goOffline=function(){w.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Wr.prototype.goOnline=function(){w.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Wr.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Wr);function Wr(e){(this.repo_=e)instanceof Er||y("Don't call new Database() directly - please use firebase.database()."),this.root_=new Dr(e,q.Empty),this.INTERNAL=new zr(this)}var zr=(Kr.prototype.delete=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(e){return this.database.checkDeleted_("delete"),Vr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Kr);function Kr(e){this.database=e}var Hr=Object.freeze({__proto__:null,forceLongPolling:function(){sr.forceDisallow(),tr.forceAllow()},forceWebSockets:function(){tr.forceDisallow()},isWebSocketsAvailable:function(){return sr.isAvailable()},setSecurityDebugCallback:function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},stats:function(e,t){e.repo.stats(t)},statsIncrementCounter:function(e,t){e.repo.statsIncrementCounter(t)},dataUpdateCount:function(e){return e.repo.dataUpdateCount},interceptServerData:function(e,t){return e.repo.interceptServerData_(t)}}),Qr=yr;yr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},yr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Gr=hr,Yr=Q,Xr=Object.freeze({__proto__:null,DataConnection:Qr,RealTimeConnection:Gr,hijackHash:function(i){var o=yr.prototype.put;return yr.prototype.put=function(e,t,n,r){void 0!==r&&(r=i()),o.call(this,e,t,n,r)},function(){yr.prototype.put=o}},ConnectionTarget:Yr,queryIdentifier:function(e){return e.queryIdentifier()},forceRestClient:function(e){Vr.getInstance().forceRestClient(e)}}),$r=Br.ServerValue;function Jr(e){!function(e){or=e}(e.SDK_VERSION);var t=e.INTERNAL.registerComponent(new r.Component("database",function(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return Vr.getInstance().databaseFromApp(n,r,t)},"PUBLIC").setServiceProps({Reference:Dr,Query:At,Database:Br,DataSnapshot:gt,enableLogging:h,INTERNAL:Hr,ServerValue:$r,TEST_ACCESS:Xr}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.5.20"),w.isNodeSdk()&&(Zr.exports=t)}Jr(t),ei.DataSnapshot=gt,ei.Database=Br,ei.OnDisconnect=fe,ei.Query=At,ei.Reference=Dr,ei.ServerValue=$r,ei.enableLogging=h,ei.registerDatabase=Jr}).call(this,ti(43))},function(e,lr,hr){"use strict";hr.r(lr),function(e){hr.d(lr,"ErrorCode",function(){return ar}),hr.d(lr,"EventType",function(){return sr}),hr.d(lr,"WebChannel",function(){return ur}),hr.d(lr,"XhrIo",function(){return cr}),hr.d(lr,"createWebChannelTransport",function(){return or});var t,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},u=u||{},c=n;function s(e){return"string"==typeof e}function o(e){return"number"==typeof e}function r(e,t){e=e.split("."),t=t||c;for(var n=0;n<e.length;n++)if(null==(t=t[e[n]]))return null;return t}function i(){}function a(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var n=Object.prototype.toString.call(e);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof e.length&&void 0!==e.splice&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==e.call&&void 0!==e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&void 0===e.call)return"object";return t}function l(e){return"array"==a(e)}function h(e){var t=a(e);return"array"==t||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function m(e,t,n){return e.call.apply(e.bind,arguments)}function y(t,n,e){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(e,r),t.apply(n,e)}}return function(){return t.apply(n,arguments)}}function v(e,t,n){return(v=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function g(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var b=Date.now||function(){return+new Date};function w(e,o){function t(){}t.prototype=o.prototype,e.N=o.prototype,e.prototype=new t,(e.prototype.constructor=e).xb=function(e,t,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[t].apply(e,r)}}function _(){this.j=this.j,this.i=this.i}_.prototype.j=!1,_.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[p]||(this[p]=++d)},_.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if(s(e))return s(t)&&1==t.length?e.indexOf(t,0):-1;for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},T=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i=s(e)?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function S(e){return Array.prototype.concat.apply([],arguments)}function C(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function I(e){return/^[\s\xa0]*$/.test(e)}var k,N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function A(e,t){return-1!=e.indexOf(t)}function O(e,t){return e<t?-1:t<e?1:0}e:{var D=c.navigator;if(D){var P=D.userAgent;if(P){k=P;break e}}k=""}function x(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function R(e){var t,n={};for(t in e)n[t]=e[t];return n}var M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<M.length;o++)n=M[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){return F[" "](e),e}F[" "]=i;var U,j,V=A(k,"Opera"),q=A(k,"Trident")||A(k,"MSIE"),B=A(k,"Edge"),W=B||q,z=A(k,"Gecko")&&!(A(k.toLowerCase(),"webkit")&&!A(k,"Edge"))&&!(A(k,"Trident")||A(k,"MSIE"))&&!A(k,"Edge"),K=A(k.toLowerCase(),"webkit")&&!A(k,"Edge");function H(){var e=c.document;return e?e.documentMode:void 0}e:{var Q="",G=(j=k,z?/rv:([^\);]+)(\)|;)/.exec(j):B?/Edge\/([\d\.]+)/.exec(j):q?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):K?/WebKit\/(\S+)/.exec(j):V?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(G&&(Q=G?G[1]:""),q){var Y=H();if(null!=Y&&Y>parseFloat(Q)){U=String(Y);break e}}U=Q}var X,$={};function J(s){return function(e,t){var n=$;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(s,function(){for(var e=0,t=N(String(U)).split("."),n=N(String(s)).split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=O(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||O(0==o[2].length,0==a[2].length)||O(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e})}var Z=c.document;X=Z&&q?H()||("CSS1Compat"==Z.compatMode?parseInt(U,10):5):void 0;var ee=!q||9<=Number(X),te=q&&!J("9"),ne=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{c.addEventListener("test",i,t),c.removeEventListener("test",i,t)}catch(e){}return e}();function re(e,t){this.type=e,this.a=this.target=t,this.Ia=!0}function ie(e,t){if(re.call(this,e?e.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.a=t,t=e.relatedTarget){if(z){e:{try{F(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=s(e.pointerType)?e.pointerType:oe[e.pointerType]||"",(this.c=e).defaultPrevented&&this.b()}}re.prototype.b=function(){this.Ia=!1},w(ie,re);var oe={2:"touch",3:"pen",4:"mouse"};ie.prototype.b=function(){ie.N.b.call(this);var e=this.c;if(e.preventDefault)e.preventDefault();else if(e.returnValue=!1,te)try{(e.ctrlKey||112<=e.keyCode&&e.keyCode<=123)&&(e.keyCode=-1)}catch(e){}};var ae="closure_listenable_"+(1e6*Math.random()|0),se=0;function ue(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.da=i,this.key=++se,this.X=this.Z=!1}function ce(e){e.X=!0,e.listener=null,e.proxy=null,e.src=null,e.da=null}function le(e){this.src=e,this.a={},this.b=0}function he(e,t){var n=t.type;if(n in e.a){var r,i=e.a[n],o=E(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ce(t),0==e.a[n].length&&(delete e.a[n],e.b--))}}function fe(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.X&&o.listener==t&&o.capture==!!n&&o.da==r)return i}return-1}le.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.a[o])||(e=this.a[o]=[],this.b++);var a=fe(e,t,r,i);return-1<a?(t=e[a],n||(t.Z=!1)):((t=new ue(t,this.src,o,!!r,i)).Z=n,e.push(t)),t};var pe="closure_lm_"+(1e6*Math.random()|0),de={};function me(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,o){if(l(n)){for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);return null}r=Te(r);return t&&t[ae]?t.Aa(n,r,f(i)?!!i.capture:!!i,o):ye(t,n,r,!0,i,o)}(e,t,n,r,i);if(l(t)){for(var o=0;o<t.length;o++)me(e,t[o],n,r,i);return null}return n=Te(n),e&&e[ae]?e.za(t,n,f(r)?!!r.capture:!!r,i):ye(e,t,n,!1,r,i)}function ye(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=f(i)?!!i.capture:!!i;if(a&&!ee)return null;var s=_e(e);if(s||(e[pe]=s=new le(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){var t=we,n=ee?function(e){return t.call(n.src,n.listener,e)}:function(e){if(!(e=t.call(n.src,n.listener,e)))return e};return n}(),(n.proxy=r).src=e,r.listener=n,e.addEventListener)ne||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ge(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ve(e){if(!o(e)&&e&&!e.X){var t=e.src;if(t&&t[ae])he(t.c,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ge(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=_e(t))?(he(n,e),0==n.b&&(n.src=null,t[pe]=null)):ce(e)}}}function ge(e){return e in de?de[e]:de[e]="on"+e}function be(e,t){var n=e.listener,r=e.da||e.src;return e.Z&&ve(e),n.call(r,t)}function we(e,t){return!!e.X||(ee?be(e,new ie(t,this)):be(e,t=new ie(t||r("window.event"),this)))}function _e(e){return(e=e[pe])instanceof le?e:null}var Ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(t){return"function"==a(t)?t:(t[Ee]||(t[Ee]=function(e){return t.handleEvent(e)}),t[Ee])}function Se(){_.call(this),this.c=new le(this),(this.J=this).B=null}function Ce(e,t,n,r){if(!(t=e.c.a[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.X&&a.capture==n){var s=a.listener,u=a.da||a.src;a.Z&&he(e.c,a),i=!1!==s.call(u,r)&&i}}return i&&0!=r.Ia}w(Se,_),Se.prototype[ae]=!0,(t=Se.prototype).addEventListener=function(e,t,n,r){me(this,e,t,n,r)},t.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,o){if(l(n))for(var a=0;a<n.length;a++)e(t,n[a],r,i,o);else i=f(i)?!!i.capture:!!i,r=Te(r),t&&t[ae]?(t=t.c,(n=String(n).toString())in t.a&&-1<(r=fe(a=t.a[n],r,i,o))&&(ce(a[r]),Array.prototype.splice.call(a,r,1),0==a.length&&(delete t.a[n],t.b--))):(t=t&&_e(t))&&(n=t.a[n.toString()],t=-1,n&&(t=fe(n,r,i,o)),(r=-1<t?n[t]:null)&&ve(r))}(this,e,t,n,r)},t.dispatchEvent=function(e){var t,n=this.B;if(n)for(t=[];n;n=n.B)t.push(n);n=this.J;var r=e.type||e;if(s(e))e=new re(e,n);else if(e instanceof re)e.target=e.target||n;else{var i=e;L(e=new re(r,n),i)}if(i=!0,t)for(var o=t.length-1;0<=o;o--){var a=e.a=t[o];i=Ce(a,r,!0,e)&&i}if(i=Ce(a=e.a=n,r,!0,e)&&i,i=Ce(a,r,!1,e)&&i,t)for(o=0;o<t.length;o++)i=Ce(a=e.a=t[o],r,!1,e)&&i;return i},t.G=function(){if(Se.N.G.call(this),this.c){var e,t=this.c;for(e in t.a){for(var n=t.a[e],r=0;r<n.length;r++)ce(n[r]);delete t.a[e],t.b--}}this.B=null},t.za=function(e,t,n,r){return this.c.add(String(e),t,!1,n,r)},t.Aa=function(e,t,n,r){return this.c.add(String(e),t,!0,n,r)};var Ie=c.JSON.stringify;function ke(e,t){this.c=e,this.f=t,this.b=0,this.a=null}function Ne(){this.b=this.a=null}ke.prototype.get=function(){if(0<this.b){this.b--;var e=this.a;this.a=e.next,e.next=null}else e=this.c();return e};var Ae,Oe=new ke(function(){return new De},function(e){e.reset()});function De(){this.next=this.b=this.a=null}function Pe(e){c.setTimeout(function(){throw e},0)}function xe(e,t){Ae||function(){var e=c.Promise.resolve(void 0);Ae=function(){e.then(Le)}}(),Re||(Ae(),Re=!0),Me.add(e,t)}Ne.prototype.add=function(e,t){var n=Oe.get();n.set(e,t),this.b?this.b.next=n:this.a=n,this.b=n},De.prototype.set=function(e,t){this.a=e,this.b=t,this.next=null};var Re=!(De.prototype.reset=function(){this.next=this.b=this.a=null}),Me=new Ne;function Le(){for(var e;r=n=void 0,r=null,(n=Me).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),e=r;){try{e.a.call(e.b)}catch(e){Pe(e)}var t=Oe;t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}var n,r;Re=!1}function Fe(e,t){Se.call(this),this.b=e||1,this.a=t||c,this.f=v(this.fb,this),this.g=b()}function Ue(e){e.ba=!1,e.L&&(e.a.clearTimeout(e.L),e.L=null)}function je(e,t,n){if("function"==a(e))n&&(e=v(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=v(e.handleEvent,e)}return 2147483647<Number(t)?-1:c.setTimeout(e,t||0)}function Ve(e,t,n){_.call(this),this.f=null!=n?v(e,n):e,this.c=t,this.b=v(this.$a,this),this.a=[]}function qe(e){e.U=je(e.b,e.c),e.f.apply(null,e.a)}function Be(e){_.call(this),this.b=e,this.a={}}w(Fe,Se),(t=Fe.prototype).ba=!1,t.L=null,t.fb=function(){if(this.ba){var e=b()-this.g;0<e&&e<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-e):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(Ue(this),this.start()))}},t.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=b())},t.G=function(){Fe.N.G.call(this),Ue(this),delete this.a},w(Ve,_),(t=Ve.prototype).ea=!1,t.U=null,t.Ta=function(e){this.a=arguments,this.U?this.ea=!0:qe(this)},t.G=function(){Ve.N.G.call(this),this.U&&(c.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},t.$a=function(){this.U=null,this.ea&&(this.ea=!1,qe(this))},w(Be,_);var We=[];function ze(e,t,n,r){l(n)||(n&&(We[0]=n.toString()),n=We);for(var i=0;i<n.length;i++){var o=me(t,n[i],r||e.handleEvent,!1,e.b||e);if(!o)break;e.a[o.key]=o}}function Ke(e){x(e.a,function(e,t){this.a.hasOwnProperty(t)&&ve(e)},e),e.a={}}function He(){}Be.prototype.G=function(){Be.N.G.call(this),Ke(this)},Be.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Qe=new Se;function Ge(e){re.call(this,"serverreachability",e)}function Ye(e){Qe.dispatchEvent(new Ge(Qe,e))}function Xe(e){re.call(this,"statevent",e)}function $e(e){Qe.dispatchEvent(new Xe(Qe,e))}function Je(e){re.call(this,"timingevent",e)}function Ze(e,t){if("function"!=a(e))throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){e()},t)}w(Ge,re),w(Xe,re),w(Je,re);var et={NO_ERROR:0,gb:1,nb:2,mb:3,jb:4,lb:5,ob:6,La:7,TIMEOUT:8,rb:9},tt={ib:"complete",vb:"success",Ma:"error",La:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",kb:"downloadprogress",wb:"uploadprogress"};function nt(){}function rt(e){var t;return(t=e.a)||(t=e.a={}),t}function it(){}nt.prototype.a=null;var ot,at={OPEN:"a",hb:"b",Ma:"c",qb:"d"};function st(){re.call(this,"d")}function ut(){re.call(this,"c")}function ct(){}function lt(e,t,n){this.g=e,this.W=t,this.V=n||1,this.I=new Be(this),this.O=ht,e=W?125:void 0,this.P=new Fe(e),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}w(st,re),w(ut,re),w(ct,nt),ot=new ct;var ht=45e3,ft={},pt={};function dt(e,t,n){e.F=1,e.f=jt(Pt(t)),e.l=n,e.H=!0,yt(e,null)}function mt(e,t,n,r){e.F=1,e.f=jt(Pt(t)),e.l=null,e.H=n,yt(e,r)}function yt(e,t){e.v=b(),bt(e),e.D=Pt(e.f),Ut(e.D,"t",e.V),e.A=0,e.a=e.g.$(e.g.Y()?t:null),0<e.J&&(e.B=new Ve(v(e.Ja,e,e.a),e.J)),ze(e.I,e.a,"readystatechange",e.cb),t=e.h?R(e.h):{},e.l?(e.w||(e.w="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.a.ca(e.D,e.w,e.l,t)):(e.w="GET",e.a.ca(e.D,e.w,null,t)),Ye(1)}function vt(e,t,n){for(var r=!0;!e.m&&e.A<n.length;){var i=gt(e,n);if(i==pt){4==t&&(e.c=4,$e(14),r=!1);break}if(i==ft){e.c=4,$e(15),r=!1;break}St(e,i)}4==t&&0==n.length&&(e.c=1,$e(16),r=!1),e.b=e.b&&r,r||(Tt(e),Et(e))}function gt(e,t){var n=e.A,r=t.indexOf("\n",n);return-1==r?pt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1)+n>t.length?pt:(t=t.substr(r,n),e.A=r+n,t))}function bt(e){e.R=b()+e.O,wt(e,e.O)}function wt(e,t){if(null!=e.i)throw Error("WatchDog timer not null");e.i=Ze(v(e.ab,e),t)}function _t(e){e.i&&(c.clearTimeout(e.i),e.i=null)}function Et(e){e.g.Ca()||e.m||e.g.na(e)}function Tt(e){_t(e);var t=e.B;t&&"function"==typeof t.la&&t.la(),e.B=null,Ue(e.P),Ke(e.I),e.a&&(t=e.a,e.a=null,t.abort(),t.la())}function St(e,t){try{e.g.Fa(e,t),Ye(4)}catch(e){}}function Ct(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(h(e)||s(e))T(e,t,void 0);else{if(e.K&&"function"==typeof e.K)var n=e.K();else if(e.C&&"function"==typeof e.C)n=void 0;else if(h(e)||s(e)){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.C&&"function"==typeof e.C)return e.C();if(s(e))return e.split("");if(h(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function It(e,t){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof It)for(n=e.K(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function kt(e,t){At(e.b,t)&&(delete e.b[t],e.c--,e.a.length>2*e.c&&Nt(e))}function Nt(e){if(e.c!=e.a.length){for(var t=0,n=0;t<e.a.length;){var r=e.a[t];At(e.b,r)&&(e.a[n++]=r),t++}e.a.length=n}if(e.c!=e.a.length){var i={};for(n=t=0;t<e.a.length;)At(i,r=e.a[t])||(i[e.a[n++]=r]=1),t++;e.a.length=n}}function At(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t=lt.prototype).setTimeout=function(e){this.O=e},t.cb=function(e){e=e.target;var t=this.B;t&&3==Pn(e)?t.Ta():this.Ja(e)},t.Ja=function(e){try{if(e==this.a)e:{var t=Pn(this.a),n=this.a.ya(),r=this.a.T();if(!(t<3||3==t&&!W&&!this.a.aa())){this.m||4!=t||7==n||Ye(8==n||r<=0?3:2),_t(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){t:{if(this.a){var a=xn(this.a,"X-HTTP-Initial-Response");if(a&&!I(a)){var s=a;break t}}s=null}if(!s){this.b=!1,this.c=3,$e(12),Tt(this),Et(this);break e}this.s=!0,St(this,s)}this.H?(vt(this,t,o),W&&this.b&&3==t&&(ze(this.I,this.P,"tick",this.bb),this.P.start())):St(this,o),4==t&&Tt(this),this.b&&!this.m&&(4==t?this.g.na(this):(this.b=!1,bt(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,$e(12)):(this.c=0,$e(13)),Tt(this),Et(this)}}}catch(e){}},t.bb=function(){if(this.a){var e=Pn(this.a),t=this.a.aa();this.A<t.length&&(_t(this),vt(this,e,t),this.b&&4!=e&&bt(this))}},t.cancel=function(){this.m=!0,Tt(this)},t.ab=function(){this.i=null;var e=b();0<=e-this.R?(2!=this.F&&(Ye(3),$e(17)),Tt(this),this.c=2,Et(this)):wt(this,this.R-e)},(t=It.prototype).C=function(){Nt(this);for(var e=[],t=0;t<this.a.length;t++)e.push(this.b[this.a[t]]);return e},t.K=function(){return Nt(this),this.a.concat()},t.get=function(e,t){return At(this.b,e)?this.b[e]:t},t.set=function(e,t){At(this.b,e)||(this.c++,this.a.push(e)),this.b[e]=t},t.forEach=function(e,t){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var Ot=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Dt(e,t){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,e instanceof Dt?(this.h=void 0!==t?t:e.h,xt(this,e.f),this.j=e.j,Rt(this,e.b),Mt(this,e.i),this.a=e.a,Lt(this,Zt(e.c)),this.g=e.g):e&&(n=String(e).match(Ot))?(this.h=!!t,xt(this,n[1]||"",!0),this.j=Vt(n[2]||""),Rt(this,n[3]||"",!0),Mt(this,n[4]),this.a=Vt(n[5]||"",!0),Lt(this,n[6]||"",!0),this.g=Vt(n[7]||"")):(this.h=!!t,this.c=new Gt(null,this.h))}function Pt(e){return new Dt(e)}function xt(e,t,n){e.f=n?Vt(t,!0):t,e.f&&(e.f=e.f.replace(/:$/,""))}function Rt(e,t,n){e.b=n?Vt(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.i=t}else e.i=null}function Lt(e,t,n){t instanceof Gt?(e.c=t,function(e,t){t&&!e.f&&(Yt(e),e.c=null,e.a.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Xt(this,t),Jt(this,n,e))},e)),e.f=t}(e.c,e.h)):(n||(t=qt(t,Ht)),e.c=new Gt(t,e.h))}function Ft(e,t,n){e.c.set(t,n)}function Ut(e,t,n){l(n)||(n=[String(n)]),Jt(e.c,t,n)}function jt(e){return Ft(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^b()).toString(36)),e}function Vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function qt(e,t,n){return s(e)?(e=encodeURI(e).replace(t,Bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Dt.prototype.toString=function(){var e=[],t=this.f;t&&e.push(qt(t,Wt,!0),":");var n=this.b;return!n&&"file"!=t||(e.push("//"),(t=this.j)&&e.push(qt(t,Wt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&e.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&e.push("/"),e.push(qt(n,"/"==n.charAt(0)?Kt:zt,!0))),(n=this.c.toString())&&e.push("?",n),(n=this.g)&&e.push("#",qt(n,Qt)),e.join("")},Dt.prototype.resolve=function(e){var t=Pt(this),n=!!e.f;n?xt(t,e.f):n=!!e.j,n?t.j=e.j:n=!!e.b,n?Rt(t,e.b):n=null!=e.i;var r=e.a;if(n)Mt(t,e.i);else if(n=!!e.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=t.a.lastIndexOf("/");-1!=i&&(r=t.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(A(i,"./")||A(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?t.a=r:n=""!==e.c.toString(),n?Lt(t,Zt(e.c)):n=!!e.g,n&&(t.g=e.g),t};var Wt=/[#\/\?@]/g,zt=/[#\?:]/g,Kt=/[#\?]/g,Ht=/[#\?@]/g,Qt=/#/g;function Gt(e,t){this.b=this.a=null,this.c=e||null,this.f=!!t}function Yt(n){n.a||(n.a=new It,n.b=0,n.c&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Xt(e,t){Yt(e),t=en(e,t),At(e.a.b,t)&&(e.c=null,e.b-=e.a.get(t).length,kt(e.a,t))}function $t(e,t){return Yt(e),t=en(e,t),At(e.a.b,t)}function Jt(e,t,n){Xt(e,t),0<n.length&&(e.c=null,e.a.set(en(e,t),C(n)),e.b+=n.length)}function Zt(e){var t=new Gt;return t.c=e.c,e.a&&(t.a=new It(e.a),t.b=e.b),t}function en(e,t){return t=String(t),e.f&&(t=t.toLowerCase()),t}function tn(e){this.a=e,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function nn(e){var t=e.a.F.a;if(null!=t)$e(4),t?($e(10),Kn(e.a,e,!1)):($e(11),Kn(e.a,e,!0));else{e.b=new lt(e,void 0,void 0),e.b.h=e.h,t=Xn(t=e.a,t.Y()?e.f:null,e.i),$e(4),Ut(t,"TYPE","xmlhttp");var n=e.a.j,r=e.a.I;n&&r&&Ft(t,n,r),mt(e.b,t,!1,e.f)}}function rn(){this.a=this.b=null}function on(){this.a=new It}function an(e){var t=typeof e;return"object"==t&&e||"function"==t?"o"+(e[p]||(e[p]=++d)):t.charAt(0)+e}function sn(e,t){this.b=e,this.a=t}function un(e){this.g=e||cn,e=c.PerformanceNavigationTiming?0<(e=c.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(c.ka&&c.ka.Da&&c.ka.Da()&&c.ka.Da().yb),this.f=e?this.g:1,this.a=null,1<this.f&&(this.a=new on),this.b=null,this.c=[]}(t=Gt.prototype).add=function(e,t){Yt(this),this.c=null,e=en(this,e);var n=this.a.get(e);return n||this.a.set(e,n=[]),n.push(t),this.b+=1,this},t.forEach=function(n,r){Yt(this),this.a.forEach(function(e,t){T(e,function(e){n.call(r,e,t,this)},this)},this)},t.K=function(){Yt(this);for(var e=this.a.C(),t=this.a.K(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},t.C=function(e){Yt(this);var t=[];if(s(e))$t(this,e)&&(t=S(t,this.a.get(en(this,e))));else{e=this.a.C();for(var n=0;n<e.length;n++)t=S(t,e[n])}return t},t.set=function(e,t){return Yt(this),this.c=null,$t(this,e=en(this,e))&&(this.b-=this.a.get(e).length),this.a.set(e,[t]),this.b+=1,this},t.get=function(e,t){return e&&0<(e=this.C(e)).length?String(e[0]):t},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var e=[],t=this.a.K(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.c=e.join("&")},w(function(){},function(){}),(t=tn.prototype).M=null,t.$=function(e){return this.a.$(e)},t.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},t.Ca=function(){return!1},t.Fa=function(e,t){if(this.c=e.o,0==this.M){if(!this.a.o&&(e=e.a)){var n=xn(e,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(e=xn(e,"X-HTTP-Session-Id"))&&(this.a.I=e)}if(t){try{var r=this.a.ja.a.parse(t)}catch(e){return(t=this.a).m=this.c,void Gn(t,2)}this.f=r[0]}else(t=this.a).m=this.c,Gn(t,2)}else 1==this.M&&(this.g?$e(6):"11111"==t?($e(5),this.g=!0,(!q||10<=Number(X))&&(this.c=200,this.b.cancel(),$e(11),Kn(this.a,this,!0))):($e(7),this.g=!1))},t.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,nn(this)):1==this.M&&(this.g?($e(11),Kn(this.a,this,!0)):($e(10),Kn(this.a,this,!1)));else{0==this.M?$e(8):1==this.M&&$e(9);var e=this.a;e.m=this.c,Gn(e,2)}},t.Y=function(){return this.a.Y()},t.ma=function(){return this.a.ma()},on.prototype.add=function(e){this.a.set(an(e),e)},on.prototype.C=function(){return this.a.C()};var cn=10;function ln(e,t){!e.a&&(A(t,"spdy")||A(t,"quic")||A(t,"h2"))&&(e.f=e.g,e.a=new on,e.b&&(dn(e,e.b),e.b=null))}function hn(e){return!!e.b||!!e.a&&e.a.a.c>=e.f}function fn(e){return e.b?1:e.a?e.a.a.c:0}function pn(e,t){return e=e.b?e.b==t:!!e.a&&(t=an(t),At(e.a.a.b,t))}function dn(e,t){e.a?e.a.add(t):e.b=t}function mn(e,t){var n;e.b&&e.b==t?e.b=null:((n=e.a)&&(n=an(t),n=At(e.a.a.b,n)),n&&kt(e.a.a,an(t)))}function yn(e){if(null!=e.b)return e.c.concat(e.b.j);if(null==e.a||0==e.a.a.c)return C(e.c);var t=e.c;return T(e.a.C(),function(e){t=t.concat(e.j)}),t}function vn(){}function gn(){this.a=new vn}function bn(e,r,t){var i=t||"";try{Ct(e,function(e,t){var n=e;f(e)&&(n=Ie(e)),r.push(i+t+"="+encodeURIComponent(n))})}catch(e){throw r.push(i+"type="+encodeURIComponent("_badmap")),e}}function wn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}un.prototype.cancel=function(){this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(e){e.cancel()}),function(e){e.b={},e.a.length=0,e.c=0}(this.a.a))},vn.prototype.stringify=function(e){return c.JSON.stringify(e,void 0)},vn.prototype.parse=function(e){return c.JSON.parse(e,void 0)};var _n=c.JSON.parse;function En(e){Se.call(this),this.headers=new It,this.H=e||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Tn,this.D=this.F=!1}w(En,Se);var Tn="",Sn=/^https?$/i,Cn=["POST","PUT"];function In(e){return"content-type"==e.toLowerCase()}function kn(e,t){e.b=!1,e.a&&(e.g=!0,e.a.abort(),e.g=!1),e.f=t,e.h=5,Nn(e),On(e)}function Nn(e){e.v||(e.v=!0,e.dispatchEvent("complete"),e.dispatchEvent("error"))}function An(e){if(e.b&&void 0!==u&&(!e.s[1]||4!=Pn(e)||2!=e.T()))if(e.l&&4==Pn(e))je(e.Ea,0,e);else if(e.dispatchEvent("readystatechange"),4==Pn(e)){e.b=!1;try{var t,n=e.T();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.A).match(Ot)[1]||null;if(!o&&c.self&&c.self.location){var a=c.self.location.protocol;o=a.substr(0,a.length-1)}i=!Sn.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{e.h=6;try{var s=2<Pn(e)?e.a.statusText:""}catch(e){s=""}e.f=s+" ["+e.T()+"]",Nn(e)}}finally{On(e)}}}function On(e,t){if(e.a){Dn(e);var n=e.a,r=e.s[0]?i:null;e.a=null,e.s=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){}}}function Dn(e){e.a&&e.D&&(e.a.ontimeout=null),e.m&&(c.clearTimeout(e.m),e.m=null)}function Pn(e){return e.a?e.a.readyState:0}function xn(e,t){return e.a?e.a.getResponseHeader(t):null}function Rn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}if(r)return e;if(n=function(e){var n="";return x(e,function(e,t){n+=t,n+=":",n+=e,n+="\r\n"}),n}(n),s(e)){if(t=encodeURIComponent(String(t)),t+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=e.indexOf("#"))<0&&(n=e.length),(r=e.indexOf("?"))<0||n<r){r=n;var i=""}else i=e.substring(r+1,n);n=(e=[e.substr(0,r),i,e.substr(n)])[1],e[1]=t?n?n+"&"+t:t:n,e=e[0]+(e[1]?"?"+e[1]:"")+e[2]}return e}return Ft(e,t,n),e}function Mn(e){this.f=[],this.F=new rn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!r("internalChannelParams.failFast",e),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=r("internalChannelParams.baseRetryDelayMs",e)||5e3,this.Ra=r("internalChannelParams.retryDelaySeedMs",e)||1e4,this.Pa=r("internalChannelParams.forwardChannelMaxRetries",e)||2,this.qa=r("internalChannelParams.forwardChannelRequestTimeoutMs",e)||2e4,this.Ka=e&&e.zb||void 0,this.D=void 0,this.R=e&&e.supportsCrossDomainXhr||!1,this.H="",this.b=new un(e&&e.concurrentRequestLimit),this.ja=new gn,this.o=!e||void 0===e.backgroundChannelTest||e.backgroundChannelTest,(this.W=e&&e.fastHandshake||!1)&&!this.o&&(this.o=!0),e&&e.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Ln(e){if(Fn(e),3==e.u){var t=e.P++,n=Pt(e.B);Ft(n,"SID",e.H),Ft(n,"RID",t),Ft(n,"TYPE","terminate"),qn(e,n),(t=new lt(e,t,void 0)).F=2,t.f=jt(Pt(n)),n=!1,c.navigator&&c.navigator.sendBeacon&&(n=c.navigator.sendBeacon(t.f.toString(),"")),!n&&c.Image&&((new Image).src=t.f,n=!0),n||(t.a=t.g.$(null),t.a.ca(t.f)),t.v=b(),bt(t)}Yn(e)}function Fn(e){e.w&&(e.w.abort(),e.w=null),e.a&&(e.a.cancel(),e.a=null),e.l&&(c.clearTimeout(e.l),e.l=null),Hn(e),e.b.cancel(),e.h&&(o(e.h)&&c.clearTimeout(e.h),e.h=null)}function Un(e,t){e.f.push(new sn(e.Qa++,t)),3==e.u&&jn(e)}function jn(e){hn(e.b)||e.h||(e.h=!0,xe(e.Ha,e),e.A=0)}function Vn(e,t){var n;n=t?t.W:e.P++;var r=Pt(e.B);Ft(r,"SID",e.H),Ft(r,"RID",n),Ft(r,"AID",e.O),qn(e,r),e.g&&e.i&&Rn(r,e.g,e.i),n=new lt(e,n,e.A+1),null===e.g&&(n.h=e.i),t&&(e.f=t.j.concat(e.f)),t=Bn(e,n,1e3),n.setTimeout(Math.round(.5*e.qa)+Math.round(.5*e.qa*Math.random())),dn(e.b,n),dt(n,r,t)}function qn(e,n){e.c&&Ct({},function(e,t){Ft(n,t,e)})}function Bn(e,t,n){n=Math.min(e.f.length,n);var r=e.c?v(e.c.Sa,e.c,e):null;e:for(var i=e.f,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].b,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),s=!1;else try{bn(l,a,"req"+c+"_")}catch(e){r&&r(l)}}if(s){r=a.join("&");break e}}return e=e.f.splice(0,n),t.j=e,r}function Wn(e){e.a||e.l||(e.S=1,xe(e.Ga,e),e.v=0)}function zn(e){return!(e.a||e.l||3<=e.v)&&(e.S++,e.l=Ze(v(e.Ga,e),Qn(e,e.v)),e.v++,!0)}function Kn(e,t,n){var r=t.l;r&&ln(e.b,r),e.ia=e.oa&&n,e.m=t.c,e.B=Xn(e,null,e.ha),jn(e)}function Hn(e){null!=e.s&&(c.clearTimeout(e.s),e.s=null)}function Qn(e,t){var n=e.Na+Math.floor(Math.random()*e.Ra);return e.ma()||(n*=2),n*t}function Gn(e,t){if(2==t){var n=null;e.c&&(n=null);var r=v(e.eb,e);n||(n=new Dt("//www.google.com/images/cleardot.gif"),c.location&&"http"==c.location.protocol||xt(n,"https"),jt(n)),function(e,t){var n=new He;if(c.Image){var r=new Image;r.onload=g(wn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g(wn,n,r,"TestLoadImage: error",!1,t),r.onabort=g(wn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g(wn,n,r,"TestLoadImage: timeout",!1,t),c.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else $e(2);e.u=0,e.c&&e.c.ta(t),Yn(e),Fn(e)}function Yn(e){e.u=0,e.m=-1,e.c&&(0==yn(e.b).length&&0==e.f.length||(e.b.c.length=0,C(e.f),e.f.length=0),e.c.sa())}function Xn(e,t,n){var r=function(e){return e instanceof Dt?Pt(e):new Dt(e,void 0)}(n);if(""!=r.b)t&&Rt(r,t+"."+r.b),Mt(r,r.i);else{var i,o=c.location;i=t?t+"."+o.hostname:o.hostname,r=function(e,t,n,r){var i=new Dt(null,void 0);return e&&xt(i,e),t&&Rt(i,t),n&&Mt(i,n),r&&(i.a=r),i}(o.protocol,i,+o.port,n)}return e.V&&x(e.V,function(e,t){Ft(r,t,e)}),t=e.j,n=e.I,t&&n&&Ft(r,t,n),Ft(r,"VER",e.wa),qn(e,r),r}function $n(){}function Jn(){if(q&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Zn(e,t){Se.call(this),this.a=new Mn(t),this.g=e,this.m=t&&t.testUrl?t.testUrl:function(e){for(var t=e,n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))t=i;else(r=""==t)||(r=0<=(r=t.length-1)&&t.indexOf("/",r)==r),t+=r?i:"/"+i}return t}(this.g,"test"),this.b=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.a.i=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.xa&&(e?e["X-WebChannel-Client-Profile"]=t.xa:e={"X-WebChannel-Client-Profile":t.xa}),this.a.J=e,(e=t&&t.httpHeadersOverwriteParam)&&!I(e)&&(this.a.g=e),this.l=t&&t.supportsCrossDomainXhr||!1,this.h=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!I(t)&&(this.a.j=t,null!==(e=this.b)&&t in e&&(t in(e=this.b)&&delete e[t])),this.f=new nr(this)}function er(e){st.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.c=e)?(e=this.c,this.data=null!==t&&e in t?t[e]:void 0):this.data=t}else this.data=e}function tr(){ut.call(this),this.status=1}function nr(e){this.a=e}(t=En.prototype).ca=function(e,t,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+e);t=t?t.toUpperCase():"GET",this.A=e,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?rt(this.H):rt(ot),this.a.onreadystatechange=v(this.Ea,this);try{this.w=!0,this.a.open(t,String(e),!0),this.w=!1}catch(e){return void kn(this,e)}e=n||"";var i=new It(this.headers);r&&Ct(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=In,n=e.length,r=s(e)?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return t<0?null:s(e)?e.charAt(t):e[t]}(i.K()),n=c.FormData&&e instanceof c.FormData,0<=E(Cn,t)&&!r&&!n&&i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.a.setRequestHeader(t,e)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Dn(this),0<this.o&&((this.D=function(e){return q&&J(9)&&o(e.timeout)&&void 0!==e.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=v(this.Ba,this)):this.m=je(this.Ba,this.o,this)),this.l=!0,this.a.send(e),this.l=!1}catch(e){kn(this,e)}},t.Ba=function(){void 0!==u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(e){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=e||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),On(this))},t.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),On(this,!0)),En.N.G.call(this)},t.Ea=function(){this.j||(this.w||this.l||this.g?An(this):this.Za())},t.Za=function(){An(this)},t.T=function(){try{return 2<Pn(this)?this.a.status:-1}catch(e){return-1}},t.aa=function(){try{return this.a?this.a.responseText:""}catch(e){return""}},t.Ua=function(e){if(this.a){var t=this.a.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_n(t)}},t.ya=function(){return this.h},t.Xa=function(){return s(this.f)?this.f:String(this.f)},(t=Mn.prototype).wa=8,t.u=1,t.Ca=function(){return 0==this.u},t.Ha=function(e){if(this.h)if(this.h=null,1==this.u){if(!e){this.P=Math.floor(1e5*Math.random()),e=this.P++;var t,n=new lt(this,e,void 0),r=this.i;if(this.J&&(r?L(r=R(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)e:{for(var i=t=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&s(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(t+=o)){t=i;break e}if(4096===t||i===this.f.length-1){t=i+1;break e}}t=1e3}else t=1e3;t=Bn(this,n,t),Ft(i=Pt(this.B),"RID",e),Ft(i,"CVER",22),this.o&&this.j&&Ft(i,"X-HTTP-Session-Id",this.j),qn(this,i),this.g&&r&&Rn(i,this.g,r),dn(this.b,n),this.W?(Ft(i,"$req",t),Ft(i,"SID","null"),n.S=!0,dt(n,i,null)):dt(n,i,t),this.u=2}}else 3==this.u&&(e?Vn(this,e):0==this.f.length||hn(this.b)||Vn(this))},t.Ga=function(){this.l=null,this.a=new lt(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var e=Pt(this.pa);Ft(e,"RID","rpc"),Ft(e,"SID",this.H),Ft(e,"CI",this.ia?"0":"1"),Ft(e,"AID",this.O),qn(this,e),Ft(e,"TYPE","xmlhttp"),this.g&&this.i&&Rn(e,this.g,this.i),this.D&&this.a.setTimeout(this.D),mt(this.a,e,!0,this.ga)},t.Fa=function(e,t){if(0!=this.u&&(this.a==e||pn(this.b,e)))if(this.m=e.o,!e.s&&pn(this.b,e)&&3==this.u){try{var n=this.ja.a.parse(t)}catch(e){n=null}if(l(n)&&3==n.length){if(0==(t=n)[0]){e:if(!this.l){if(this.a){if(!(this.a.v+3e3<e.v))break e;Hn(this),this.a.cancel(),this.a=null}zn(this),$e(18)}}else this.ra=t[1],0<this.ra-this.O&&t[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Ze(v(this.Ya,this),6e3));if(fn(this.b)<=1&&this.fa){try{this.fa()}catch(e){}this.fa=void 0}}else Gn(this,11)}else if(!e.s&&this.a!=e||Hn(this),!I(t))for(t=n=this.ja.a.parse(t),n=0;n<t.length;n++){var r=t[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&o(r)&&0<r&&(this.D=1.5*r),this.o&&(r=e.a)&&((i=xn(r,"X-Client-Wire-Protocol"))&&ln(this.b,i),this.j&&(r=xn(r,"X-HTTP-Session-Id")))&&(this.I=r,Ft(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=e,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(mn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(_t(r),bt(r)),this.a=r):Wn(this),0<this.f.length&&jn(this)}else"stop"!=r[0]&&"close"!=r[0]||Gn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Gn(this,7):Ln(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},t.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,zn(this),$e(19))},t.na=function(e){var t=null;if(this.a==e){Hn(this),this.a=null;var n=2}else{if(!pn(this.b,e))return;t=e.j,mn(this.b,e),n=1}if(this.m=e.o,0!=this.u)if(e.b)1==n?(t=b()-e.v,Qe.dispatchEvent(new Je(Qe,e.l?e.l.length:0,t,this.A)),jn(this)):Wn(this);else{var r=e.c;if(3==r||0==r&&0<this.m||!(1==n&&function(e,t){return!(fn(e.b)>=e.b.f-(e.h?1:0))&&(e.h?(e.f=t.j.concat(e.f),!0):!(1==e.u||2==e.u||e.A>=(e.Oa?0:e.Pa))&&(e.h=Ze(v(e.Ha,e,t),Qn(e,e.A)),e.A++,!0))}(this,e)||2==n&&zn(this)))switch(t&&0<t.length&&(e=this.b,e.c=e.c.concat(t)),r){case 1:Gn(this,5);break;case 4:Gn(this,10);break;case 3:Gn(this,6);break;default:Gn(this,2)}}},t.eb=function(e){$e(e?2:1)},t.$=function(e){if(e&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new En(this.Ka)).F=this.R,e},t.ma=function(){return!!this.c&&!0},t.Y=function(){return this.R},(t=$n.prototype).va=function(){},t.ua=function(){},t.ta=function(){},t.sa=function(){},t.Sa=function(){},Jn.prototype.a=function(e,t){return new Zn(e,t)},w(Zn,Se),(t=Zn.prototype).addEventListener=function(e,t,n,r){Zn.N.addEventListener.call(this,e,t,n,r)},t.removeEventListener=function(e,t,n,r){Zn.N.removeEventListener.call(this,e,t,n,r)},t.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var e=this.a,t=this.m,n=this.g,r=this.b||void 0;$e(0),e.ha=n,e.V=r||{},e.o&&(e.F.b=[],e.F.a=!1),e.w=new tn(e),null===e.g&&(e.w.h=e.i),n=t,e.g&&e.i&&(n=Rn(t,e.g,e.i)),(e=e.w).i=n,t=Xn(e.a,null,e.i),$e(3),null!=(n=e.a.F.b)?(e.f=n[0],e.M=1,nn(e)):(Ut(t,"MODE","init"),!e.a.o&&e.a.j&&Ut(t,"X-HTTP-Session-Id",e.a.j),e.b=new lt(e,void 0,void 0),e.b.h=e.h,mt(e.b,t,!1,null),e.M=0)},t.close=function(){Ln(this.a)},t.Wa=function(e){if(s(e)){var t={};t.__data__=e,Un(this.a,t)}else this.h?((t={}).__data__=Ie(e),Un(this.a,t)):Un(this.a,e)},t.G=function(){this.a.c=null,delete this.f,Ln(this.a),delete this.a,Zn.N.G.call(this)},w(er,st),w(tr,ut),w(nr,$n),nr.prototype.va=function(){this.a.dispatchEvent("a")},nr.prototype.ua=function(e){this.a.dispatchEvent(new er(e))},nr.prototype.ta=function(e){this.a.dispatchEvent(new tr(e))},nr.prototype.sa=function(){this.a.dispatchEvent("b")};var rr=g(function(e,t){function n(){}n.prototype=e.prototype;var r=new n;return e.apply(r,Array.prototype.slice.call(arguments,1)),r},Jn);Jn.prototype.createWebChannel=Jn.prototype.a,Zn.prototype.send=Zn.prototype.Wa,Zn.prototype.open=Zn.prototype.Va,Zn.prototype.close=Zn.prototype.close,et.NO_ERROR=0,et.TIMEOUT=8,et.HTTP_ERROR=6,tt.COMPLETE="complete",(it.EventType=at).OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Se.prototype.listen=Se.prototype.za,En.prototype.listenOnce=En.prototype.Aa,En.prototype.getLastError=En.prototype.Xa,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getResponseJson=En.prototype.Ua,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var ir={createWebChannelTransport:rr,ErrorCode:et,EventType:tt,WebChannel:it,XhrIo:En},or=ir.createWebChannelTransport,ar=ir.ErrorCode,sr=ir.EventType,ur=ir.WebChannel,cr=ir.XhrIo;lr.default=ir}.call(this,hr(27))},function(e,t,n){"use strict";var r,i,o=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r,f=n(2),a=n(15),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},p=(i=Error,f.__extends(s,i),s);function s(e,t,n){var r=i.call(this,t)||this;return Object.setPrototypeOf(r,s.prototype),r.code=e,r.details=n,r}function d(e,t,n){var r=function(e){if(200<=e&&e<300)return"ok";switch(e){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(e),i=r,o=void 0;try{var a=t&&t.error;if(a){var s=a.status;if("string"==typeof s){if(!c[s])return new p("internal","internal");r=c[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(e){}return"ok"===r?null:new p(r,i,o)}var u=(l.prototype.getAuthToken=function(){return f.__awaiter(this,void 0,void 0,function(){var t;return f.__generator(this,function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}})})},l.prototype.getInstanceIdToken=function(){return f.__awaiter(this,void 0,void 0,function(){return f.__generator(this,function(e){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(e){return[2,void 0]}return[2]})})},l.prototype.getContext=function(){return f.__awaiter(this,void 0,void 0,function(){var t,n;return f.__generator(this,function(e){switch(e.label){case 0:return[4,this.getAuthToken()];case 1:return t=e.sent(),[4,this.getInstanceIdToken()];case 2:return n=e.sent(),[2,{authToken:t,instanceIdToken:n}]}})})},l);function l(e,t){var n=this;this.auth=null,this.messaging=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(function(e){return n.auth=e},function(){}),this.messaging||t.get().then(function(e){return n.messaging=e},function(){})}function h(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=t(e[r]));return n}var m=(y.prototype.encode=function(e){var t=this;if(null==e)return null;if(e instanceof Number&&(e=e.valueOf()),"number"==typeof e&&isFinite(e))return e;if(!0===e||!1===e)return e;if("[object String]"===Object.prototype.toString.call(e))return e;if(Array.isArray(e))return e.map(function(e){return t.encode(e)});if("function"==typeof e||"object"==typeof e)return h(e,function(e){return t.encode(e)});throw new Error("Data cannot be encoded in JSON: "+e)},y.prototype.decode=function(e){var t=this;if(null==e)return e;if(e["@type"])switch(e["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(e.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+e);return n;default:throw new Error("Data cannot be decoded from JSON: "+e)}return Array.isArray(e)?e.map(function(e){return t.decode(e)}):"function"==typeof e||"object"==typeof e?h(e,function(e){return t.decode(e)}):e},y);function y(){}var v=(Object.defineProperty(g.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),g.prototype._url=function(e){var t=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+t+".cloudfunctions.net/"+e:this.emulatorOrigin+"/"+t+"/"+n+"/"+e},g.prototype.useFunctionsEmulator=function(e){this.emulatorOrigin=e},g.prototype.httpsCallable=function(t,n){var r=this;return function(e){return r.call(t,e,n||{})}},g.prototype.postJSON=function(r,i,o){return f.__awaiter(this,void 0,void 0,function(){var t,n;return f.__generator(this,function(e){switch(e.label){case 0:o.append("Content-Type","application/json"),e.label=1;case 1:return e.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return t=e.sent(),[3,4];case 3:return e.sent(),[2,{status:0,json:null}];case 4:n=null,e.label=5;case 5:return e.trys.push([5,7,,8]),[4,t.json()];case 6:return n=e.sent(),[3,8];case 7:return e.sent(),[3,8];case 8:return[2,{status:t.status,json:n}]}})})},g.prototype.call=function(c,l,h){return f.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u;return f.__generator(this,function(e){switch(e.label){case 0:return t=this._url(c),l=this.serializer.encode(l),n={data:l},r=new Headers,[4,this.contextProvider.getContext()];case 1:return(i=e.sent()).authToken&&r.append("Authorization","Bearer "+i.authToken),i.instanceIdToken&&r.append("Firebase-Instance-ID-Token",i.instanceIdToken),o=h.timeout||7e4,[4,Promise.race([this.postJSON(t,n,r),function(n){return new Promise(function(e,t){setTimeout(function(){t(new p("deadline-exceeded","deadline-exceeded"))},n)})}(o),this.cancelAllRequests])];case 2:if(!(a=e.sent()))throw new p("cancelled","Firebase Functions instance was deleted.");if(s=d(a.status,a.json,this.serializer))throw s;if(!a.json)throw new p("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new p("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}})})},g);function g(e,t,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=e,this.region_=r,this.serializer=new m,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new u(t,n),this.cancelAllRequests=new Promise(function(e){i.deleteService=function(){return e()}})}function b(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("messaging");return new v(n,r,i,t)}var w;w={Functions:v},o.INTERNAL.registerComponent(new a.Component("functions",b,"PUBLIC").setServiceProps(w).setMultipleInstances(!0)),o.registerVersion("@firebase/functions","0.4.31")},function(e,t,n){"use strict";n.r(t);var r,i=n(4),o=n.n(i),a=(n(33),n(15)),c=n(2),s=n(17),u=n(25),l=((r={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',r["only-available-in-window"]="This method is available in a Window context.",r["only-available-in-sw"]="This method is available in a service worker context.",r["permission-default"]="The notification permission was not granted and dismissed instead.",r["permission-blocked"]="The notification permission was not granted and blocked instead.",r["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",r["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",r["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",r["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",r["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",r["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",r["token-update-no-token"]="FCM returned no token when updating the user to push.",r["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",r["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",r["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",r["invalid-vapid-key"]="The public VAPID key must be a string.",r["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",r),h=new s.ErrorFactory("messaging","Messaging",l);function f(e){return h.create("missing-app-config-values",{valueName:e})}function p(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,Object(c.__spread)(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var d="fcm_token_details_db",m=5,y="fcm_token_object_Store";function v(s){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,a,n=this;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(t=e.sent(),!t.map(function(e){return e.name}).includes(d))return[2,null];e.label=2;case 2:return a=null,[4,Object(u.openDb)(d,m,function(o){return Object(c.__awaiter)(n,void 0,void 0,function(){var t,n,r,i;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(y)?[4,(t=o.transaction.objectStore(y)).index("fcmSenderId").get(s)]:[2];case 1:return n=e.sent(),[4,t.clear()];case 2:if(e.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];a={token:r.fcmToken,createTime:(i=r.createTime,null!=i?i:Date.now()),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:p(r.vapidKey)}}}else 3===o.oldVersion?a={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:p(r.auth),p256dh:p(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:p(r.vapidKey)}}:4===o.oldVersion&&(a={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:p(r.auth),p256dh:p(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:p(r.vapidKey)}});return[2]}})})})];case 3:return e.sent().close(),[4,Object(u.deleteDb)(d)];case 4:return e.sent(),[4,Object(u.deleteDb)("fcm_vapid_details_db")];case 5:return e.sent(),[4,Object(u.deleteDb)("undefined")];case 6:return e.sent(),[2,function(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&0<e.createTime&&"string"==typeof e.token&&0<e.token.length&&"string"==typeof t.auth&&0<t.auth.length&&"string"==typeof t.p256dh&&0<t.p256dh.length&&"string"==typeof t.endpoint&&0<t.endpoint.length&&"string"==typeof t.swScope&&0<t.swScope.length&&"string"==typeof t.vapidKey&&0<t.vapidKey.length}(a)?a:null]}})})}var g="firebase-messaging-database",b=1,w="firebase-messaging-store",_=null;function E(){return _=_||Object(u.openDb)(g,b,function(e){switch(e.oldVersion){case 0:e.createObjectStore(w)}})}function T(i){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return t=C(i),[4,E()];case 1:return[4,e.sent().transaction(w).objectStore(w).get(t)];case 2:return(n=e.sent())?[2,n]:[3,3];case 3:return[4,v(i.appConfig.senderId)];case 4:return(r=e.sent())?[4,S(i,r)]:[3,6];case 5:return e.sent(),[2,r];case 6:return[2]}})})}function S(i,o){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return t=C(i),[4,E()];case 1:return n=e.sent(),[4,(r=n.transaction(w,"readwrite")).objectStore(w).put(o,t)];case 2:return e.sent(),[4,r.complete];case 3:return e.sent(),[2,o]}})})}function C(e){return e.appConfig.appId}var I="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",k="https://fcmregistrations.googleapis.com/v1",N="google.c.a.c_id";function A(a,s){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,D(a)];case 1:t=e.sent(),n={method:"DELETE",headers:t},e.label=2;case 2:return e.trys.push([2,5,,6]),[4,fetch(O(a.appConfig)+"/"+s,n)];case 3:return[4,e.sent().json()];case 4:if((r=e.sent()).error)throw i=r.error.message,h.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=e.sent(),h.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function O(e){var t=e.projectId;return k+"/projects/"+t+"/registrations"}function D(e){var n=e.appConfig,r=e.installations;return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,r.getToken()];case 1:return t=e.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}})})}function P(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==I&&(o.web.applicationPubKey=i),o}var x,R;function M(o,a,s){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(c.__generator)(this,function(e){switch(e.label){case 0:if("granted"!==Notification.permission)throw h.create("permission-blocked");return[4,function(n,r){return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(t=e.sent())?[2,t]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})]}})})}(a,s)];case 1:return t=e.sent(),[4,T(o)];case 2:return n=e.sent(),r={vapidKey:s,swScope:a.scope,endpoint:t.endpoint,auth:p(t.getKey("auth")),p256dh:p(t.getKey("p256dh"))},n?[3,3]:[2,F(o,r)];case 3:if(function(e,t){var n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,i=t.auth===e.auth,o=t.p256dh===e.p256dh;return n&&r&&i&&o}(n.subscriptionOptions,r))return[3,8];e.label=4;case 4:return e.trys.push([4,6,,7]),[4,A(o,n.token)];case 5:return e.sent(),[3,7];case 6:return i=e.sent(),console.warn(i),[3,7];case 7:return[2,F(o,r)];case 8:return Date.now()>=n.createTime+6048e5?[2,function(i,o,a){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,5]),[4,function(s,u){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,D(s)];case 1:t=e.sent(),n=P(u.subscriptionOptions),r={method:"PATCH",headers:t,body:JSON.stringify(n)},e.label=2;case 2:return e.trys.push([2,5,,6]),[4,fetch(O(s.appConfig)+"/"+u.token,r)];case 3:return[4,e.sent().json()];case 4:return i=e.sent(),[3,6];case 5:throw o=e.sent(),h.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw a=i.error.message,h.create("token-update-failed",{errorInfo:a});if(!i.token)throw h.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return t=e.sent(),n=Object(c.__assign)({token:t,createTime:Date.now()},i),[4,S(o,n)];case 2:return e.sent(),[2,t];case 3:return r=e.sent(),[4,L(o,a)];case 4:throw e.sent(),r;case 5:return[2]}})})}({token:n.token,createTime:Date.now(),subscriptionOptions:r},o,a)]:[2,n.token];case 9:return[2]}})})}function L(r,i){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,T(r)];case 1:return(t=e.sent())?[4,A(r,t.token)]:[3,4];case 2:return e.sent(),[4,function(i){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return t=C(i),[4,E()];case 1:return n=e.sent(),[4,(r=n.transaction(w,"readwrite")).objectStore(w).delete(t)];case 2:return e.sent(),[4,r.complete];case 3:return e.sent(),[2]}})})}(r)];case 3:e.sent(),e.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=e.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function F(r,i){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,function(s,u){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,D(s)];case 1:t=e.sent(),n=P(u),r={method:"POST",headers:t,body:JSON.stringify(n)},e.label=2;case 2:return e.trys.push([2,5,,6]),[4,fetch(O(s.appConfig),r)];case 3:return[4,e.sent().json()];case 4:return i=e.sent(),[3,6];case 5:throw o=e.sent(),h.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw a=i.error.message,h.create("token-subscribe-failed",{errorInfo:a});if(!i.token)throw h.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return t=e.sent(),n={token:t,createTime:Date.now(),subscriptionOptions:i},[4,S(r,n)];case 2:return e.sent(),[2,n.token]}})})}function U(e){return"object"==typeof e&&!!e&&N in e}(R=x=x||{}).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked";var j=(Object.defineProperty(V.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),V.prototype.getToken=function(){return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return this.vapidKey||(this.vapidKey=I),[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:e.sent(),e.label=3;case 3:if("granted"!==Notification.permission)throw h.create("permission-blocked");return[2,M(this.firebaseDependencies,t,this.vapidKey)]}})})},V.prototype.deleteToken=function(){return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return t=e.sent(),[2,L(this.firebaseDependencies,t)]}})})},V.prototype.requestPermission=function(){return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?h.create("permission-blocked"):h.create("permission-default")}})})},V.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw h.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw h.create("invalid-vapid-key");this.vapidKey=e},V.prototype.useServiceWorker=function(e){if(!(e instanceof ServiceWorkerRegistration))throw h.create("invalid-sw-registration");if(this.swRegistration)throw h.create("use-sw-after-get-token");this.swRegistration=e},V.prototype.onMessage=function(e){var t=this;return this.onMessageCallback="function"==typeof e?e:e.next,function(){t.onMessageCallback=null}},V.prototype.setBackgroundMessageHandler=function(){throw h.create("only-available-in-sw")},V.prototype.onTokenRefresh=function(){return function(){}},V.prototype.getServiceWorkerRegistration=function(){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(c.__generator)(this,function(e){switch(e.label){case 0:if(this.swRegistration)return[3,4];e.label=1;case 1:return e.trys.push([1,3,,4]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return t.swRegistration=e.sent(),[3,4];case 3:throw n=e.sent(),h.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},V.prototype.messageEventListener=function(o){var a;return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return(null===(a=o.data)||void 0===a?void 0:a.firebaseMessaging)?(t=o.data.firebaseMessaging,n=t.type,r=t.payload,this.onMessageCallback&&n===x.PUSH_RECEIVED&&this.onMessageCallback(r),U(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},V.prototype.logEvent=function(n,r){return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return t=function(e){switch(e){case x.NOTIFICATION_CLICKED:return"notification_open";case x.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return e.sent().logEvent(t,{message_id:r[N],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},V);function V(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(e){return t.messageEventListener(e)})}var q=(Object.defineProperty(B.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),B.prototype.setBackgroundMessageHandler=function(e){if(!e||"function"!=typeof e)throw h.create("invalid-bg-handler");this.bgMessageHandler=e},B.prototype.getToken=function(){var n,r,i;return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return this.vapidKey?[3,2]:[4,T(this.firebaseDependencies)];case 1:t=e.sent(),this.vapidKey=null!=(i=null===(r=null===(n=t)||void 0===n?void 0:n.subscriptionOptions)||void 0===r?void 0:r.vapidKey)?i:I,e.label=2;case 2:return[2,M(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},B.prototype.deleteToken=function(){return L(this.firebaseDependencies,self.registration)},B.prototype.requestPermission=function(){throw h.create("only-available-in-window")},B.prototype.usePublicVapidKey=function(e){if(null!==this.vapidKey)throw h.create("use-vapid-key-after-get-token");if("string"!=typeof e||0===e.length)throw h.create("invalid-vapid-key");this.vapidKey=e},B.prototype.useServiceWorker=function(){throw h.create("only-available-in-window")},B.prototype.onMessage=function(){throw h.create("only-available-in-window")},B.prototype.onTokenRefresh=function(){throw h.create("only-available-in-window")},B.prototype.onPush=function(i){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return(t=function(e){var t=e.data;if(!t)return null;try{return t.json()}catch(e){return null}}(i))?[4,W()]:[2];case 1:return function(e){return e.some(function(e){return"visible"===e.visibilityState&&!e.url.startsWith("chrome-extension://")})}(n=e.sent())?[2,function(e,t){var n,r,i=z(x.PUSH_RECEIVED,t);try{for(var o=Object(c.__values)(e),a=o.next();!a.done;a=o.next())a.value.postMessage(i)}catch(e){n={error:e}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,t)]:(r=function(e){var t;if(e&&"object"==typeof e.notification){var n=Object(c.__assign)({},e.notification);return n.data=Object(c.__assign)(Object(c.__assign)({},e.notification.data),((t={}).FCM_MSG=e,t)),n}}(t))?[4,function(e){var t,n=null!==(t=e.title)&&void 0!==t?t:"",r=e.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,e)}(r)]:[3,3];case 2:return e.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(t)]:[3,5];case 4:e.sent(),e.label=5;case 5:return[2]}})})},B.prototype.onSubChange=function(n){var r,i,o;return Object(c.__awaiter)(this,void 0,void 0,function(){var t;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return n.newSubscription?[3,2]:[4,L(this.firebaseDependencies,self.registration)];case 1:return e.sent(),[2];case 2:return[4,T(this.firebaseDependencies)];case 3:return t=e.sent(),[4,L(this.firebaseDependencies,self.registration)];case 4:return e.sent(),[4,M(this.firebaseDependencies,self.registration,(o=null===(i=null===(r=t)||void 0===r?void 0:r.subscriptionOptions)||void 0===i?void 0:i.vapidKey,null!=o?o:I))];case 5:return e.sent(),[2]}})})},B.prototype.onNotificationClick=function(o){var a,s;return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return(t=null===(s=null===(a=o.notification)||void 0===a?void 0:a.data)||void 0===s?void 0:s.FCM_MSG)?o.action?[2]:(o.stopImmediatePropagation(),o.notification.close(),(n=function(e){var t,n,r,i=null!==(n=null===(t=e.fcmOptions)||void 0===t?void 0:t.link)&&void 0!==n?n:null===(r=e.notification)||void 0===r?void 0:r.click_action;return i||(U(e.data)?self.location.origin:null)}(t))?[4,function(u){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n,r,i,o,a,s;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return t=new URL(u,self.location.href).href,[4,W()];case 1:n=e.sent();try{for(r=Object(c.__values)(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===t)return[2,o]}catch(e){a={error:e}}finally{try{i&&!i.done&&(s=r.return)&&s.call(r)}finally{if(a)throw a.error}}return[2,null]}})})}(n)]:[2]):[2];case 1:return(r=e.sent())?[3,4]:[4,self.clients.openWindow(n)];case 2:return r=e.sent(),[4,function(t){return new Promise(function(e){setTimeout(e,t)})}(3e3)];case 3:return e.sent(),[3,6];case 4:return[4,r.focus()];case 5:r=e.sent(),e.label=6;case 6:return r?(i=z(x.NOTIFICATION_CLICKED,t),[2,r.postMessage(i)]):[2]}})})},B);function B(e){var t=this;this.firebaseDependencies=e,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(e){e.waitUntil(t.onPush(e))}),self.addEventListener("pushsubscriptionchange",function(e){e.waitUntil(t.onSubChange(e))}),self.addEventListener("notificationclick",function(e){e.waitUntil(t.onNotificationClick(e))})}function W(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function z(e,t){return{firebaseMessaging:{type:e,payload:t}}}var K={isSupported:H};function H(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}o.a.INTERNAL.registerComponent(new a.Component("messaging",function(e){var t=e.getProvider("app").getImmediate(),n={app:t,appConfig:function(e){var t,n;if(!e||!e.options)throw f("App Configuration Object");if(!e.name)throw f("App Name");var r=e.options;try{for(var i=Object(c.__values)(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw f(a)}}catch(e){t={error:e}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return{appName:e.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(t),installations:e.getProvider("installations").getImmediate(),analyticsProvider:e.getProvider("analytics-internal")};if(!H())throw h.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new q(n):new j(n)},"PUBLIC").setServiceProps(K))},function(e,t,n){"use strict";n.r(t),n.d(t,"registerStorage",function(){return mt});var r=n(4),a=n.n(r),d=n(2),i=n(15),h="firebasestorage.googleapis.com",f="storageBucket",v=(o.prototype.codeProp=function(){return this.code},o.prototype.codeEquals=function(e){return s(e)===this.codeProp()},o.prototype.serverResponseProp=function(){return this.serverResponse_},o.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(o.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),o);function o(e,t){this.code_=s(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}var g={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function s(e){return"storage/"+e}function u(){return new v(g.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function c(){return new v(g.CANCELED,"User canceled the upload/download.")}function b(){return new v(g.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function l(e,t,n){return new v(g.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+n)}function p(){return new v(g.APP_DELETED,"The Firebase app was deleted.")}function m(e,t){return new v(g.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function y(e){throw new v(g.INTERNAL_ERROR,"Internal error: "+e)}var w={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function _(e){switch(e){case w.RAW:case w.BASE64:case w.BASE64URL:case w.DATA_URL:return;default:throw"Expected one of the event types: ["+w.RAW+", "+w.BASE64+", "+w.BASE64URL+", "+w.DATA_URL+"]."}}var E=function(e,t){this.data=e,this.contentType=t||null};function T(e,t){switch(e){case w.RAW:return new E(S(t));case w.BASE64:case w.BASE64URL:return new E(C(e,t));case w.DATA_URL:return new E(function(e){var t=new I(e);return t.base64?C(w.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(e){throw m(w.DATA_URL,"Malformed data URL.")}return S(t)}(t.rest)}(t),function(e){return new I(e).contentType}(t))}throw u()}function S(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<e.length-1&&56320==(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function C(t,e){switch(t){case w.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw m(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case w.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw m(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw m(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var I=function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw m(w.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=t[1]||null;null!=n&&(this.base64=function(e,t){return e.length>=t.length&&e.substring(e.length-t.length)===t}(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=e.substring(e.indexOf(",")+1)};var k,N,A={STATE_CHANGED:"state_changed"},O="running",D="pausing",P="paused",x="success",R="canceling",M="canceled",L="error",F={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function U(e){switch(e){case O:case D:case R:return F.RUNNING;case P:return F.PAUSED;case x:return F.SUCCESS;case M:return F.CANCELED;case L:default:return F.ERROR}}function j(e){return null!=e}function V(e){return void 0!==e}function q(e){return"function"==typeof e}function B(e){return"object"==typeof e}function W(e){return"string"==typeof e||e instanceof String}function z(e){return"number"==typeof e||e instanceof Number}function K(e){return H()&&e instanceof Blob}function H(){return"undefined"!=typeof Blob}(N=k=k||{})[N.NO_ERROR=0]="NO_ERROR",N[N.NETWORK_ERROR=1]="NETWORK_ERROR",N[N.ABORT=2]="ABORT";var Q=(G.prototype.send=function(e,t,n,r){if(this.sent_)throw y("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),j(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return j(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},G.prototype.getErrorCode=function(){if(!this.sent_)throw y("cannot .getErrorCode() before sending");return this.errorCode_},G.prototype.getStatus=function(){if(!this.sent_)throw y("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},G.prototype.getResponseText=function(){if(!this.sent_)throw y("cannot .getResponseText() before sending");return this.xhr_.responseText},G.prototype.abort=function(){this.xhr_.abort()},G.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},G.prototype.addUploadProgressListener=function(e){j(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},G.prototype.removeUploadProgressListener=function(e){j(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},G);function G(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=k.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=k.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=k.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}var Y=(X.prototype.createXhrIo=function(){return new Q},X);function X(){}function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<e.length;i++)r.append(e[i]);return r.getBlob()}if(H())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}var J=(Z.prototype.size=function(){return this.size_},Z.prototype.type=function(){return this.type_},Z.prototype.slice=function(e,t){if(K(this.data_)){var n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new Z(n)}return new Z(new Uint8Array(this.data_.buffer,e,t-e),!0)},Z.getBlob=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(H()){var n=e.map(function(e){return e instanceof Z?e.data_:e});return new Z($.apply(null,n))}var r=e.map(function(e){return W(e)?T(w.RAW,e).data:e.data_}),i=0;r.forEach(function(e){i+=e.byteLength});var o=new Uint8Array(i),a=0;return r.forEach(function(e){for(var t=0;t<e.length;t++)o[a++]=e[t]}),new Z(o,!0)},Z.prototype.uploadData=function(){return this.data_},Z);function Z(e,t){var n=0,r="";K(e)?(n=(this.data_=e).size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}var ee=(Object.defineProperty(te.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(te.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),te.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},te.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},te.makeFromBucketSpec=function(t){var e;try{e=te.makeFromUrl(t)}catch(e){return new te(t,"")}if(""===e.path)return e;throw function(e){return new v(g.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}(t)},te.makeFromUrl=function(e){for(var t=null,n="([A-Za-z0-9.\\-_]+)",r=new RegExp("^gs://"+n+"(/(.*))?$","i"),i=h.replace(/[.]/g,"\\."),o=[{regex:r,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+i+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(e){e.path_=decodeURIComponent(e.path)}}],a=0;a<o.length;a++){var s=o[a],u=s.regex.exec(e);if(u){var c=u[s.indices.bucket],l=u[s.indices.path];t=new te(c,l=l||""),s.postModify(t);break}}if(null==t)throw function(e){return new v(g.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return t},te);function te(e,t){this.bucket=e,this.path_=t}function ne(e){var t;try{t=JSON.parse(e)}catch(e){return null}return function(e){return B(e)&&!Array.isArray(e)}(t)?t:null}function re(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ie(e){return"https://"+h+"/v0"+e}function oe(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function ae(e,t){return t}var se=function(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||ae},ue=null;function ce(){if(ue)return ue;var e=[];e.push(new se("bucket")),e.push(new se("generation")),e.push(new se("metageneration")),e.push(new se("name","fullPath",!0));var t=new se("name");t.xform=function(e,t){return function(e){return!W(e)||e.length<2?e:re(e)}(t)},e.push(t);var n=new se("size");return n.xform=function(e,t){return j(t)?Number(t):t},e.push(n),e.push(new se("timeCreated")),e.push(new se("updated")),e.push(new se("md5Hash",null,!0)),e.push(new se("cacheControl",null,!0)),e.push(new se("contentDisposition",null,!0)),e.push(new se("contentEncoding",null,!0)),e.push(new se("contentLanguage",null,!0)),e.push(new se("contentType",null,!0)),e.push(new se("metadata","customMetadata",!0)),ue=e}function le(r,i){Object.defineProperty(r,"ref",{get:function(){var e=r.bucket,t=r.fullPath,n=new ee(e,t);return i.makeStorageReference(n)}})}function he(e,t,n){var r=ne(t);return null===r?null:function(e,t,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,t[a.server])}return le(r,e),r}(e,r,n)}function fe(e,t){for(var n={},r=t.length,i=0;i<r;i++){var o=t[i];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}function pe(e){if(!B(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];if("customMetadata"===t){if(!B(n))throw"Expected object for 'customMetadata' mapping."}else if(B(r=n)&&null!==r)throw"Mapping for '"+t+"' cannot be an object."}var r}var de="maxResults",me=1e3,ye="pageToken",ve="prefixes",ge="items";function be(e,t){var n={prefixes:[],items:[],nextPageToken:t.nextPageToken},r=e.bucket();if(null===r)throw new v(g.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+f+"' property when initializing the app?");if(t[ve])for(var i=0,o=t[ve];i<o.length;i++){var a=o[i].replace(/\/$/,""),s=e.makeStorageReference(new ee(r,a));n.prefixes.push(s)}if(t[ge])for(var u=0,c=t[ge];u<c.length;u++){var l=c[u];s=e.makeStorageReference(new ee(r,l.name));n.items.push(s)}return n}function we(e){if(!B(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===de){if(!z(n=e[de])||!Number.isInteger(n)||e[de]<=0)throw"Expected maxResults to be a positive number.";if(1e3<e[de])throw"Expected maxResults to be less than or equal to "+me+"."}else{if(t!==ye)throw"Unknown option: "+t;if(e[ye]&&!W(e[ye]))throw"Expected pageToken to be string."}var n}var _e=function(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Ee(e){if(!e)throw u()}function Te(r,i){return function(e,t){var n=he(r,t,i);return Ee(null!==n),n}}function Se(r){return function(e,t){var n=function(e,t){var n=ne(t);return null===n?null:be(e,n)}(r,t);return Ee(null!==n),n}}function Ce(r,i){return function(e,t){var n=he(r,t,i);return Ee(null!==n),function(r,e){var t=ne(e);if(null===t)return null;if(!W(t.downloadTokens))return null;var n=t.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(e){var t=r.bucket,n=r.fullPath;return ie("/b/"+i(t)+"/o/"+i(n))+oe({alt:"media",token:e})})[0]}(n,t)}}function Ie(r){return function(e,t){var n;return(n=401===e.getStatus()?new v(g.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?function(e){return new v(g.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(r.bucket):403===e.getStatus()?function(e){return new v(g.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}(r.path):t).setServerResponseProp(t.serverResponseProp()),n}}function ke(r){var i=Ie(r);return function(e,t){var n=i(e,t);return 404===e.getStatus()&&(n=function(e){return new v(g.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}(r.path)),n.setServerResponseProp(t.serverResponseProp()),n}}function Ne(e,t,n){var r=ie(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new _e(r,"GET",Te(e,n),i);return o.errorHandler=ke(t),o}function Ae(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Oe(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ae(t,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+fe(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=J.getBlob(c,r,l);if(null===h)throw b();var f={name:u.fullPath},p=ie(o),d=e.maxUploadRetryTime(),m=new _e(p,"POST",Te(e,n),d);return m.urlParams=f,m.headers=a,m.body=h.uploadData(),m.errorHandler=Ie(t),m}var De=function(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null};function Pe(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(e){Ee(!1)}return Ee(!!n&&-1!==(t||["active"]).indexOf(n)),n}function xe(e,t,n,r,i){var o=t.bucketOnlyServerUrl(),a=Ae(t,r,i),s={name:a.fullPath},u=ie(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=fe(a,n),h=e.maxUploadRetryTime();var f=new _e(u,"POST",function(e){var t;Pe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(e){Ee(!1)}return Ee(W(t)),t},h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=Ie(t),f}function Re(e,t,n,i){var r=e.maxUploadRetryTime(),o=new _e(n,"POST",function(e){var t=Pe(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(e){Ee(!1)}n||Ee(!1);var r=Number(n);return Ee(!isNaN(r)),new De(r,i.size(),"final"===t)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Ie(t),o}function Me(e,a,t,s,n,u,r,i){var c=new De(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=s.size()),s.size()!==c.total)throw new v(g.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,l=o;0<n&&(l=Math.min(l,n));var h=c.current,f=h+l,p={"X-Goog-Upload-Command":l===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=s.slice(h,f);if(null===d)throw b();var m=a.maxUploadRetryTime(),y=new _e(t,"POST",function(e,t){var n,r=Pe(e,["active","final"]),i=c.current+l,o=s.size();return n="final"===r?Te(a,u)(e,t):null,new De(i,o,"final"===r,n)},m);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=Ie(e),y}var Le=function(e,t,n){if(q(e)||j(t)||j(n))this.next=e,this.error=t||null,this.complete=n||null;else{var r=e;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Fe=function(e,t,n,r,i,o){this.bytesTransferred=e,this.totalBytes=t,this.state=n,this.metadata=r,this.task=i,this.ref=o};function Ue(t,e,n){for(var r=e.length,i=e.length,o=0;o<e.length;o++)if(e[o].optional){r=o;break}if(!(r<=n.length&&n.length<=i))throw function(e,t,n,r){var i,o;return o=e===t?1===(i=e)?"argument":"arguments":(i="between "+e+" and "+t,"arguments"),new v(g.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+n+"`: Expected "+i+" "+o+", received "+r+".")}(r,i,t,n.length);for(o=0;o<n.length;o++)try{e[o].validator(n[o])}catch(e){throw e instanceof Error?l(o,t,e.message):l(o,t,e)}}var je=function(t,e){var n=this;this.validator=function(e){n.optional&&!V(e)||t(e)},this.optional=!!e};function Ve(e,t){function n(e){if(!W(e))throw"Expected string."}var r;return r=e?function(t,n){return function(e){t(e),n(e)}}(n,e):n,new je(r,t)}function qe(){return new je(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||H()&&e instanceof Blob))throw"Expected Blob or File."})}function Be(e){return new je(pe,e)}function We(){return new je(function(e){if(!(z(e)&&0<=e))throw"Expected a number 0 or greater."})}function ze(t,e){return new je(function(e){if(!(null===e||j(e)&&e instanceof Object))throw"Expected an Object.";null!=t&&t(e)},e)}function Ke(e){return new je(function(e){if(!(null===e||q(e)))throw"Expected a Function."},e)}function He(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];Promise.resolve().then(function(){return n.apply(void 0,e)})}}var Qe=(Ge.prototype.makeProgressCallback_=function(){var t=this,n=this.transferred_;return function(e){return t.updateProgress_(n+e)}},Ge.prototype.shouldDoResumable_=function(e){return 262144<e.size()},Ge.prototype.start_=function(){this.state_===O&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},Ge.prototype.resolveToken_=function(t){var n=this;this.authWrapper_.getAuthToken().then(function(e){switch(n.state_){case O:t(e);break;case R:n.transition_(M);break;case D:n.transition_(P)}})},Ge.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(e){var t=xe(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.request_=null,r.uploadUrl_=e,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},Ge.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(e){var t=Re(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){e=e,r.request_=null,r.updateProgress_(e.current),r.needToFetchStatus_=!1,e.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},Ge.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new De(this.transferred_,this.blob_.size()),a=this.uploadUrl_;this.resolveToken_(function(e){var t;try{t=Me(r.location_,r.authWrapper_,a,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(e){return r.error_=e,void r.transition_(L)}var n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(e.current),e.finalized?(r.metadata_=e.metadata,r.transition_(x)):r.completeTransitions_()},r.errorHandler_)})},Ge.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},Ge.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(e){var t=Ne(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.request_=null,r.metadata_=e,r.transition_(x)},r.metadataErrorHandler_)})},Ge.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(e){var t=Oe(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(t,e);(r.request_=n).getPromise().then(function(e){r.request_=null,r.metadata_=e,r.updateProgress_(r.blob_.size()),r.transition_(x)},r.errorHandler_)})},Ge.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},Ge.prototype.transition_=function(e){if(this.state_!==e)switch(e){case R:case D:this.state_=e,null!==this.request_&&this.request_.cancel();break;case O:var t=this.state_===P;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case P:this.state_=e,this.notifyObservers_();break;case M:this.error_=c(),this.state_=e,this.notifyObservers_();break;case L:case x:this.state_=e,this.notifyObservers_()}},Ge.prototype.completeTransitions_=function(){switch(this.state_){case D:this.transition_(P);break;case R:this.transition_(M);break;case O:this.start_()}},Object.defineProperty(Ge.prototype,"snapshot",{get:function(){var e=U(this.state_);return new Fe(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),Ge.prototype.on=function(e,t,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=Ke(!0).validator,a=ze(null,!0).validator;function s(e){try{return void i(e)}catch(e){}try{if(a(e),!(V(e.next)||V(e.error)||V(e.complete)))throw"";return}catch(e){throw r}}Ue("on",[Ve(function(){if(e!==A.STATE_CHANGED)throw"Expected one of the event types: ["+A.STATE_CHANGED+"]."}),ze(s,!0),Ke(!0),Ke(!0)],arguments);var u=this;function c(i){return function(e,t,n){null!==i&&Ue("on",i,arguments);var r=new Le(e,t,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var l=[ze(function(e){if(null===e)throw r;s(e)}),Ke(!0),Ke(!0)];return V(t)||V(n)||V(o)?c(null)(t,n,o):c(l)},Ge.prototype.then=function(e,t){return this.promise_.then(e,t)},Ge.prototype.catch=function(e){return this.then(null,e)},Ge.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},Ge.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},Ge.prototype.notifyObservers_=function(){var t=this;this.finishPromise_(),this.observers_.slice().forEach(function(e){t.notifyObserver_(e)})},Ge.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(U(this.state_)){case F.SUCCESS:He(this.resolve_.bind(null,this.snapshot))();break;case F.CANCELED:case F.ERROR:He(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},Ge.prototype.notifyObserver_=function(e){switch(U(this.state_)){case F.RUNNING:case F.PAUSED:e.next&&He(e.next.bind(e,this.snapshot))();break;case F.SUCCESS:e.complete&&He(e.complete.bind(e))();break;case F.CANCELED:case F.ERROR:e.error&&He(e.error.bind(e,this.error_))();break;default:e.error&&He(e.error.bind(e,this.error_))()}},Ge.prototype.resume=function(){Ue("resume",[],arguments);var e=this.state_===P||this.state_===D;return e&&this.transition_(O),e},Ge.prototype.pause=function(){Ue("pause",[],arguments);var e=this.state_===O;return e&&this.transition_(D),e},Ge.prototype.cancel=function(){Ue("cancel",[],arguments);var e=this.state_===O||this.state_===D;return e&&this.transition_(R),e},Ge);function Ge(e,t,n,r,i,o){var a=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=O,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(g.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(L))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(g.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(L))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}var Ye=(Xe.prototype.toString=function(){return Ue("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},Xe.prototype.newRef=function(e,t){return new Xe(e,t)},Xe.prototype.mappings=function(){return ce()},Xe.prototype.child=function(e){Ue("child",[Ve()],arguments);var t=function(e,t){var n=t.split("/").filter(function(e){return 0<e.length}).join("/");return 0===e.length?n:e+"/"+n}(this.location.path,e),n=new ee(this.location.bucket,t);return this.newRef(this.authWrapper,n)},Object.defineProperty(Xe.prototype,"parent",{get:function(){var e=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this.location.path);if(null===e)return null;var t=new ee(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"root",{get:function(){var e=new ee(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"name",{get:function(){return re(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(Xe.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),Xe.prototype.put=function(e,t){return void 0===t&&(t=null),Ue("put",[qe(),Be(!0)],arguments),this.throwIfRoot_("put"),new Qe(this,this.authWrapper,this.location,this.mappings(),new J(e),t)},Xe.prototype.putString=function(e,t,n){void 0===t&&(t=w.RAW),Ue("putString",[Ve(),Ve(_,!0),Be(!0)],arguments),this.throwIfRoot_("putString");var r=T(t,e),i=Object.assign({},n);return!j(i.contentType)&&j(r.contentType)&&(i.contentType=r.contentType),new Qe(this,this.authWrapper,this.location,this.mappings(),new J(r.data,!0),i)},Xe.prototype.delete=function(){var n=this;return Ue("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(e){var t=function(e,t){var n=ie(t.fullServerUrl()),r=e.maxOperationRetryTime(),i=new _e(n,"DELETE",function(e,t){},r);return i.successCodes=[200,204],i.errorHandler=ke(t),i}(n.authWrapper,n.location);return n.authWrapper.makeRequest(t,e).getPromise()})},Xe.prototype.listAll=function(){Ue("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},Xe.prototype.listAllHelper=function(o,a){return Object(d.__awaiter)(this,void 0,void 0,function(){var t,n,r,i;return Object(d.__generator)(this,function(e){switch(e.label){case 0:return t={pageToken:a},[4,this.list(t)];case 1:return n=e.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:e.sent(),e.label=3;case 3:return[2]}})})},Xe.prototype.list=function(r){Ue("list",[function(e){return new je(we,e)}(!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(e){var t=r||{},n=function(e,t,n,r,i){var o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=ie(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new _e(a,"GET",Se(e),s);return u.urlParams=o,u.errorHandler=Ie(t),u}(i.authWrapper,i.location,"/",t.pageToken,t.maxResults);return i.authWrapper.makeRequest(n,e).getPromise()})},Xe.prototype.getMetadata=function(){var n=this;return Ue("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(e){var t=Ne(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(t,e).getPromise()})},Xe.prototype.updateMetadata=function(n){var r=this;return Ue("updateMetadata",[Be()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(e){var t=function(e,t,n,r){var i=ie(t.fullServerUrl()),o=fe(n,r),a=e.maxOperationRetryTime(),s=new _e(i,"PATCH",Te(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=ke(t),s}(r.authWrapper,r.location,n,r.mappings());return r.authWrapper.makeRequest(t,e).getPromise()})},Xe.prototype.getDownloadURL=function(){var n=this;return Ue("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(e){var t=function(e,t,n){var r=ie(t.fullServerUrl()),i=e.maxOperationRetryTime(),o=new _e(r,"GET",Ce(e,n),i);return o.errorHandler=ke(t),o}(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(t,e).getPromise().then(function(e){if(null===e)throw new v(g.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e})})},Xe.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw function(e){return new v(g.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)},Xe);function Xe(e,t){this.authWrapper=e,this.location=t instanceof ee?t:ee.makeFromUrl(t)}var $e=(Je.prototype.getPromise=function(){return this.promise_},Je.prototype.cancel=function(e){},Je);function Je(e){this.promise_=Promise.reject(e)}var Ze=(et.prototype.addRequest=function(e){var t=this,n=this.id;this.id++,this.map.set(n,e),e.getPromise().then(function(){return t.map.delete(n)},function(){return t.map.delete(n)})},et.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},et);function et(){this.map=new Map,this.id=-9007199254740991}var tt=(nt.extractBucket_=function(e){var t=e[f]||null;return null==t?null:ee.makeFromBucketSpec(t).bucket},nt.prototype.getAuthToken=function(){var e=this.authProvider_.getImmediate({optional:!0});return e?e.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},nt.prototype.bucket=function(){if(this.deleted_)throw p();return this.bucket_},nt.prototype.service=function(){return this.service_},nt.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},nt.prototype.makeRequest=function(e,t){if(this.deleted_)return new $e(p());var n=this.requestMaker_(e,t,this.pool_);return this.requestMap_.addRequest(n),n},nt.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},nt.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},nt.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},nt.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},nt.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},nt);function nt(e,t,n,r,i,o){if(this.bucket_=null,this.deleted_=!1,this.app_=e,null!==this.app_){var a=this.app_.options;j(a)&&(this.bucket_=nt.extractBucket_(a))}this.authProvider_=t,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new Ze}var rt=(it.prototype.start_=function(){var s=this;function e(e,t){var n,r=s.resolve_,i=s.reject_,o=t.xhr;if(t.wasSuccessCode)try{var a=s.callback_(o,o.getResponseText());V(a)?r(a):r()}catch(e){i(e)}else null!==o?((n=u()).setServerResponseProp(o.getResponseText()),s.errorCallback_?i(s.errorCallback_(o,n)):i(n)):t.canceled?i(n=s.appDelete_?p():c()):i(n=new v(g.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new ot(!1,null,!0)):this.backoffId_=function(t,n,e){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u||(u=!0,n.apply(null,e))}function l(e){i=setTimeout(function(){i=null,t(h,s())},e)}function h(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];u||(e?c.call.apply(c,Object(d.__spreadArrays)([null,e],t)):s()||o?c.call.apply(c,Object(d.__spreadArrays)([null,e],t)):(r<64&&(r*=2),l(1===a?(a=2,0):1e3*(r+Math.random()))))}var f=!1;function p(e){f||(f=!0,u||(null!==i?(e||(a=2),clearTimeout(i),l(0)):e||(a=1)))}return l(0),setTimeout(function(){p(o=!0)},e),p}(function(o,e){if(e)o(!1,new ot(!1,null,!0));else{var t=s.pool_.createXhrIo();s.pendingXhr_=t,null!==s.progressCallback_&&t.addUploadProgressListener(a),t.send(s.url_,s.method_,s.body_,s.headers_).then(function(e){null!==s.progressCallback_&&e.removeUploadProgressListener(a),s.pendingXhr_=null;var t=(e=e).getErrorCode()===k.NO_ERROR,n=e.getStatus();if(t&&!s.isRetryStatusCode_(n)){var r=-1!==s.successCodes_.indexOf(n);o(!0,new ot(r,e))}else{var i=e.getErrorCode()===k.ABORT;o(!1,new ot(!1,null,i))}})}function a(e){var t=e.loaded,n=e.lengthComputable?e.total:-1;null!==s.progressCallback_&&s.progressCallback_(t,n)}},e,this.timeout_)},it.prototype.getPromise=function(){return this.promise_},it.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},it.prototype.isRetryStatusCode_=function(e){var t=500<=e&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r},it);function it(e,t,n,r,i,o,a,s,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){h.resolve_=e,h.reject_=t,h.start_()})}var ot=function(e,t,n){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!n};function at(e,t,n){var r=oe(e.urlParams),i=e.url+r,o=Object.assign({},e.headers);return function(e,t){null!==t&&0<t.length&&(e.Authorization="Firebase "+t)}(o,t),function(e){var t=void 0!==a.a?a.a.SDK_VERSION:"AppManager";e["X-Firebase-Storage-Version"]="webjs/"+t}(o),new rt(i,e.method,o,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var st=(ut.prototype.ref=function(e){if(Ue("ref",[Ve(function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new Ye(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},ut.prototype.refFromURL=function(e){return Ue("refFromURL",[Ve(function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{ee.makeFromUrl(e)}catch(e){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Ye(this.authWrapper_,e)},Object.defineProperty(ut.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),ut.prototype.setMaxUploadRetryTime=function(e){Ue("setMaxUploadRetryTime",[We()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},ut.prototype.setMaxOperationRetryTime=function(e){Ue("setMaxOperationRetryTime",[We()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(ut.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(ut.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),ut);function ut(e,t,n,r){if(this.bucket_=null,this.authWrapper_=new tt(e,t,function(e,t){return new Ye(e,t)},at,this,n),this.app_=e,null!=r)this.bucket_=ee.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new ee(i,""))}this.internals_=new ct(this)}var ct=(lt.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},lt);function lt(e){this.service_=e}var ht="@firebase/storage",ft="0.3.25",pt="storage";function dt(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return new st(n,r,new Y,t)}function mt(e){var t={TaskState:F,TaskEvent:A,StringFormat:w,Storage:st,Reference:Ye};e.INTERNAL.registerComponent(new i.Component(pt,dt,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(ht,ft)}mt(a.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r;n(33);var o,a,s,u,c=n(2),l=n(17),h=n(31),f=n(15),p="0.2.31",d="FB-PERF-TRACE-MEASURE",m="@firebase/performance/config",y="@firebase/performance/configexpire",v="Performance",g=((o={})["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",o),b=new l.ErrorFactory("performance",v,g),w=(_.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},_.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},_.prototype.measure=function(e,t,n){this.performance&&this.performance.measure&&this.performance.measure(e,t,n)},_.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},_.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},_.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},_.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},_.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,n=e.getEntries();t<n.length;t++){var r=n[t];i(r)}}).observe({entryTypes:[e]})},_.getInstance=function(){return void 0===a&&(a=new _(s)),a},_);function _(e){if(!(this.window=e))throw b.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}var E,T,S,C=(I.prototype.getAppId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!e)throw b.create("no app id");return e},I.prototype.getProjectId=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!e)throw b.create("no project id");return e},I.prototype.getApiKey=function(){var e=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!e)throw b.create("no api key");return e},I.getInstance=function(){return void 0===u&&(u=new I),u},I);function I(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function k(){return E}(S=T=T||{})[S.UNKNOWN=0]="UNKNOWN",S[S.VISIBLE=1]="VISIBLE",S[S.HIDDEN=2]="HIDDEN";var N=["firebase_","google_","ga_"],A=new RegExp("^[a-zA-Z]\\w*$");function O(){switch(w.getInstance().document.visibilityState){case"visible":return T.VISIBLE;case"hidden":return T.HIDDEN;default:return T.UNKNOWN}}var D=new h.Logger(v);D.logLevel=h.LogLevel.INFO;var P="0.0.1",x={loggingEnabled:!0},R="FIREBASE_INSTALLATIONS_AUTH";function M(e){var t=function(){var e=w.getInstance().localStorage;if(!e)return;var t=e.getItem(y);if(!t||!function(e){return Number(e)>Date.now()}(t))return;var n=e.getItem(m);if(!n)return;try{return JSON.parse(n)}catch(e){return}}();return t?(F(t),Promise.resolve()):function(r){return function(){var e=C.getInstance().installationsService.getToken();return e.then(function(e){}),e}().then(function(e){var t="https://firebaseremoteconfig.googleapis.com/v1/projects/"+C.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+C.getInstance().getApiKey(),n=new Request(t,{method:"POST",headers:{Authorization:R+" "+e},body:JSON.stringify({app_instance_id:r,app_instance_id_token:e,app_id:C.getInstance().getAppId(),app_version:p,sdk_version:P})});return fetch(n).then(function(e){if(e.ok)return e.json();throw b.create("RC response not ok")})}).catch(function(){D.info(L)})}(e).then(function(e){return F(e)}).then(function(e){return function(e){var t=w.getInstance().localStorage;if(!e||!t)return;t.setItem(m,JSON.stringify(e)),t.setItem(y,String(Date.now()+60*C.getInstance().configTimeToLive*60*1e3))}(e)},function(){})}var L="Could not fetch config, will use default configs";function F(e){if(!e)return e;var t=C.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):x.loggingEnabled,n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=U(t.tracesSamplingRate),t.logNetworkAfterSampling=U(t.networkRequestsSamplingRate),e}function U(e){return Math.random()<=e}var j,V=1;function q(){return V=2,j=j||function(){var n=w.getInstance().document;return new Promise(function(e){if(n&&"complete"!==n.readyState){var t=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",t),e())};n.addEventListener("readystatechange",t)}else e()})}().then(function(){return function(){var e=C.getInstance().installationsService.getId();return e.then(function(e){E=e}),e}()}).then(function(e){return M(e)}).then(function(){return B()},function(){return B()})}function B(){V=3}var W,z=1e4,K=5500,H=3,Q=H,G=[],Y=!1;function X(){Y||(!function r(e){setTimeout(function(){if(0!==Q){if(!G.length)return r(z);var e=c.__spreadArrays(G);G=[];var t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:C.getInstance().logSource,log_event:t};fetch(C.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then(function(e){return e.ok||D.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.next_request_wait_millis),n=isNaN(t)?z:Math.max(z,t);Q=H,r(n)}).catch(function(){G=c.__spreadArrays(e,G),Q--,D.info("Tries left: "+Q+"."),r(z)})}},e)}(K),Y=!0)}function $(n){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw b.create("invalid cc log");G=c.__spreadArrays(G,[e])}({message:n.apply(void 0,e),eventTime:Date.now()})}}function J(e,t){(W=W||$(te))(e,t)}function Z(e){var t=C.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&w.getInstance().requiredApisAvailable()&&(e.isAuto&&O()!==T.VISIBLE||t.loggingEnabled&&t.logTraceAfterSampling&&(3===V?ee(e):q().then(function(){return ee(e)},function(){return ee(e)})))}function ee(e){k()&&setTimeout(function(){return J(e,1)},0)}function te(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:ne(),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:ne(),trace_metric:t};return JSON.stringify(r)}(e)}function ne(){return{google_app_id:C.getInstance().getAppId(),app_instance_id:k(),web_app_info:{sdk_version:p,page_url:w.getInstance().getUrl(),service_worker_status:function(){var e=w.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}(),visibility_state:O(),effective_connection_type:function(){var e=w.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0}}var re=["_fp","_fcp","_fid"];var ie=(oe.prototype.start=function(){if(1!==this.state)throw b.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},oe.prototype.stop=function(){if(2!==this.state)throw b.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)},oe.prototype.record=function(e,t,n){if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Z(this)},oe.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]&&this.putMetric(e,0),this.counters[e]+=t},oe.prototype.putMetric=function(e,t){if(!function(e,t){return!(0===e.length||100<e.length)&&(t&&t.startsWith("_wt_")&&-1<re.indexOf(e)||!e.startsWith("_"))}(e,this.name))throw b.create("invalide custom metric name",{customMetricName:e});this.counters[e]=t},oe.prototype.getMetric=function(e){return this.counters[e]||0},oe.prototype.putAttribute=function(e,t){var n=function(t){return!(0===t.length||40<t.length||N.some(function(e){return t.startsWith(e)})||!t.match(A))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw b.create("invalid attribute name",{attributeName:e});if(!r)throw b.create("invalid attribute value",{attributeValue:t})}},oe.prototype.getAttribute=function(e){return this.customAttributes[e]},oe.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},oe.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},oe.prototype.setStartTime=function(e){this.startTimeUs=e},oe.prototype.setDuration=function(e){this.durationUs=e},oe.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},oe.createOobTrace=function(e,t,n){var r=w.getInstance().getUrl();if(r){var i=new oe("_wt_"+r,!0),o=Math.floor(1e3*w.getInstance().getTimeOrigin());if(i.setStartTime(o),e&&e[0]&&(i.setDuration(Math.floor(1e3*e[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd))),t){var a=t.find(function(e){return"first-paint"===e.name});a&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime));var s=t.find(function(e){return"first-contentful-paint"===e.name});s&&s.startTime&&i.putMetric("_fcp",Math.floor(1e3*s.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}Z(i)}},oe.createUserTimingTrace=function(e){Z(new oe(e,!1,e))},oe);function oe(e,t,n){void 0===t&&(t=!1),this.name=e,this.isAuto=t,this.state=1,this.customAttributes={},this.counters={},this.api=w.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||d+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function ae(e){var t=e;if(t&&void 0!==t.responseStart){var n=w.getInstance().getTimeOrigin(),r=Math.floor(1e3*(t.startTime+n)),i=t.responseStart?Math.floor(1e3*(t.responseStart-t.startTime)):void 0,o=Math.floor(1e3*(t.responseEnd-t.startTime));!function(e){var t=C.getInstance();t.instrumentationEnabled&&e.url!==t.logEndPointUrl.split("?")[0]&&t.loggingEnabled&&t.logNetworkAfterSampling&&setTimeout(function(){return J(e,0)},0)}({url:t.name&&t.name.split("?")[0],responsePayloadBytes:t.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}var se=5e3;function ue(){k()&&(setTimeout(function(){return function(){var e=w.getInstance(),t=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");if(e.onFirstInputDelay){var r=setTimeout(function(){ie.createOobTrace(t,n),r=void 0},se);e.onFirstInputDelay(function(e){r&&(clearTimeout(r),ie.createOobTrace(t,n,e))})}else ie.createOobTrace(t,n)}()},0),setTimeout(function(){return function(){for(var e=w.getInstance(),t=e.getEntriesByType("resource"),n=0,r=t;n<r.length;n++){ae(r[n])}e.setupObserver("resource",ae)}()},0),setTimeout(function(){return function(){for(var e=w.getInstance(),t=e.getEntriesByType("measure"),n=0,r=t;n<r.length;n++){ce(r[n])}e.setupObserver("measure",ce)}()},0))}function ce(e){var t=e.name;t.substring(0,d.length)!==d&&ie.createUserTimingTrace(t)}var le=(he.prototype.trace=function(e){return new ie(e)},Object.defineProperty(he.prototype,"instrumentationEnabled",{get:function(){return C.getInstance().instrumentationEnabled},set:function(e){C.getInstance().instrumentationEnabled=e},enumerable:!0,configurable:!0}),Object.defineProperty(he.prototype,"dataCollectionEnabled",{get:function(){return C.getInstance().dataCollectionEnabled},set:function(e){C.getInstance().dataCollectionEnabled=e},enumerable:!0,configurable:!0}),he);function he(e){this.app=e,w.getInstance().requiredApisAvailable()?(X(),q().then(ue,ue)):D.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}function fe(e){function r(e,t){if("[DEFAULT]"!==e.name)throw b.create("FB not default");if("undefined"==typeof window)throw b.create("no window");return function(e){s=e}(window),C.getInstance().firebaseAppInstance=e,C.getInstance().installationsService=t,new le(e)}e.INTERNAL.registerComponent(new f.Component("performance",function(e){var t=e.getProvider("app").getImmediate(),n=e.getProvider("installations").getImmediate();return r(t,n)},"PUBLIC")),e.registerVersion("@firebase/performance","0.2.31")}fe(i),t.registerPerformance=fe},function(e,t,n){"use strict";n.r(t),n.d(t,"factory",function(){return N}),n.d(t,"registerAnalytics",function(){return P}),n.d(t,"resetGlobalVars",function(){return I}),n.d(t,"settings",function(){return k});var d,r,i,o,a,s=n(4),u=n.n(s),c=(n(33),n(2)),l=n(17),h=n(15),f="measurementId",p="firebase_id",m="origin",y="https://www.googletagmanager.com/gtag/js";function v(e,n,t){var r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];window[n].push(arguments)};return window[t]&&"function"==typeof window[t]&&(r=window[t]),window[t]=function(f,p){return function(e,t,n){if(e===d.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,a=i;o<a.length;o++){var s=a[o],u=p[s];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,l=Object.values(p);c<l.length;c++){var h=l[c];r.push(h)}Promise.all(r).then(function(){return f(d.EVENT,t,n||{})}).catch(function(e){return console.error(e)})}else if(e===d.CONFIG){(p[t]||Promise.resolve()).then(function(){f(d.CONFIG,t,n)}).catch(function(e){return console.error(e)})}else f(d.SET,t)}}(r,e),{gtagCore:r,wrappedGtag:window[t]}}(r=d=d||{}).EVENT="event",r.SET="set",r.CONFIG="config",(o=i=i||{}).ADD_PAYMENT_INFO="add_payment_info",o.ADD_TO_CART="add_to_cart",o.ADD_TO_WISHLIST="add_to_wishlist",o.BEGIN_CHECKOUT="begin_checkout",o.CHECKOUT_PROGRESS="checkout_progress",o.EXCEPTION="exception",o.GENERATE_LEAD="generate_lead",o.LOGIN="login",o.PAGE_VIEW="page_view",o.PURCHASE="purchase",o.REFUND="refund",o.REMOVE_FROM_CART="remove_from_cart",o.SCREEN_VIEW="screen_view",o.SEARCH="search",o.SELECT_CONTENT="select_content",o.SET_CHECKOUT_OPTION="set_checkout_option",o.SHARE="share",o.SIGN_UP="sign_up",o.TIMING_COMPLETE="timing_complete",o.VIEW_ITEM="view_item",o.VIEW_ITEM_LIST="view_item_list",o.VIEW_PROMOTION="view_promotion",o.VIEW_SEARCH_RESULTS="view_search_results";var g,b,w=((a={})["no-ga-id"]='"'+f+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',a["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",a["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",a["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",a),_=new l.ErrorFactory("analytics","Analytics",w),E={},T="dataLayer",S="gtag",C=!1;function I(e,t){void 0===e&&(e=!1),void 0===t&&(t={}),C=e,E=t,T="dataLayer",S="gtag"}function k(e){if(C)throw _.create("already-initialized");e.dataLayerName&&(T=e.dataLayerName),e.gtagName&&(S=e.gtagName)}function N(e,t){var r=e.options[f];if(!r)throw _.create("no-ga-id");if(null!=E[r])throw _.create("already-exists",{id:r});if(!C){!function(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(y))return r}return null}()&&function(e){var t=document.createElement("script");t.src=y+"?l="+e,t.async=!0,document.head.appendChild(t)}(T),function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(T);var n=v(E,T,S),i=n.wrappedGtag,o=n.gtagCore;b=i,g=o,C=!0}return E[r]=function(r,i,o){return Object(c.__awaiter)(this,void 0,void 0,function(){var t,n;return Object(c.__generator)(this,function(e){switch(e.label){case 0:return[4,i.getId()];case 1:return t=e.sent(),o("js",new Date),o(d.CONFIG,r.options[f],((n={})[p]=t,n[m]="firebase",n.update=!0,n)),[2]}})})}(e,t,g),{app:e,logEvent:function(e,t,n){return function(e,t,n,r,i){var o=r||{};i&&i.global||(o=Object(c.__assign)(Object(c.__assign)({},r),{send_to:t})),e(d.EVENT,n,o||{})}(b,r,e,t,n)},setCurrentScreen:function(e,t){return function(e,t,n,r){r&&r.global?e(d.SET,{screen_name:n}):e(d.CONFIG,t,{update:!0,screen_name:n})}(b,r,e,t)},setUserId:function(e,t){return function(e,t,n,r){r&&r.global?e(d.SET,{user_id:n}):e(d.CONFIG,t,{update:!0,user_id:n})}(b,r,e,t)},setUserProperties:function(e,t){return function(e,t,n,r){if(r&&r.global){for(var i={},o=0,a=Object.keys(n);o<a.length;o++){var s=a[o];i["user_properties."+s]=n[s]}e(d.SET,i)}else e(d.CONFIG,t,{update:!0,user_properties:n})}(b,r,e,t)},setAnalyticsCollectionEnabled:function(e){return function(e,t){window["ga-disable-"+e]=!t}(r,e)}}}var A="@firebase/analytics",O="0.2.12",D="analytics";function P(e){e.INTERNAL.registerComponent(new h.Component(D,function(e){return N(e.getProvider("app").getImmediate(),e.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:k,EventName:i})),e.INTERNAL.registerComponent(new h.Component("analytics-internal",function(e){try{return{logEvent:e.getProvider(D).getImmediate().logEvent}}catch(e){throw _.create("interop-component-reg-failed",{reason:e})}},"PRIVATE")),e.registerVersion(A,O)}P(u.a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,i=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r;n(33);var o,_=n(2),s=n(17),y=n(31),a=n(15),v=(u.prototype.isCachedDataFresh=function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+e+". Is cache hit: "+r+"."),r},u.prototype.fetch=function(a){return _.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o;return _.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return t=e.sent(),n=t[0],(r=t[1])&&this.isCachedDataFresh(a.cacheMaxAgeMillis,n)?[2,r]:(a.eTag=r&&r.eTag,[4,this.client.fetch(a)]);case 2:return i=e.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return e.sent(),[2,i]}})})},u);function u(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}var c=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),E=new s.ErrorFactory("remoteconfig","Remote Config",c);var g=(l.prototype.fetch=function(w){return _.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a,s,u,c,l,h,f,p,d,m,y,v,g,b;return _.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:t=e.sent(),n=t[0],r=t[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:function(e){return void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language}()},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise(function(e,t){w.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",t(e)})}),e.label=2;case 2:return e.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return e.sent(),[4,c];case 4:return h=e.sent(),[3,6];case 5:throw f=e.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),E.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,m=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];g=void 0,e.label=7;case 7:return e.trys.push([7,9,,10]),[4,h.json()];case 8:return g=e.sent(),[3,10];case 9:throw b=e.sent(),E.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:y=g.entries,v=g.state,e.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===v?d=500:"NO_CHANGE"===v?d=304:"NO_TEMPLATE"!==v&&"EMPTY_CONFIG"!==v||(y={}),304!==d&&200!==d)throw E.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:m,config:y}]}})})},l);function l(e,t,n,r,i,o){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var h=(f.prototype.addEventListener=function(e){this.listeners.push(e)},f.prototype.abort=function(){this.listeners.forEach(function(e){return e()})},f);function f(){this.listeners=[]}var p=["1","true","t","yes","y","on"],d=(m.prototype.asString=function(){return this._value},m.prototype.asBoolean=function(){return"static"!==this._source&&0<=p.indexOf(this._value.toLowerCase())},m.prototype.asNumber=function(){if("static"===this._source)return 0;var e=Number(this._value);return isNaN(e)&&(e=0),e},m.prototype.getSource=function(){return this._source},m);function m(e,t){void 0===t&&(t=""),this._source=e,this._value=t}var b=(w.prototype.setLogLevel=function(e){switch(e){case"debug":this._logger.logLevel=y.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=y.LogLevel.SILENT;break;default:this._logger.logLevel=y.LogLevel.ERROR}},Object.defineProperty(w.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),w.prototype.activate=function(){return _.__awaiter(this,void 0,void 0,function(){var t,n,r;return _.__generator(this,function(e){switch(e.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=e.sent(),n=t[0],r=t[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return e.sent(),[2,!0]}})})},w.prototype.ensureInitialized=function(){var e=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){e._isInitializationComplete=!0})),this._initializePromise},w.prototype.fetch=function(){return _.__awaiter(this,void 0,void 0,function(){var t,n,r,i=this;return _.__generator(this,function(e){switch(e.label){case 0:t=new h,setTimeout(function(){return _.__awaiter(i,void 0,void 0,function(){return _.__generator(this,function(e){return t.abort(),[2]})})},this.settings.fetchTimeoutMillis),e.label=1;case 1:return e.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return e.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return e.sent(),[3,6];case 4:return n=e.sent(),r=function(e,t){return e instanceof s.FirebaseError&&-1!==e.code.indexOf(t)}(n,"fetch-throttle")?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(r)];case 5:throw e.sent(),n;case 6:return[2]}})})},w.prototype.fetchAndActivate=function(){return _.__awaiter(this,void 0,void 0,function(){return _.__generator(this,function(e){switch(e.label){case 0:return[4,this.fetch()];case 1:return e.sent(),[2,this.activate()]}})})},w.prototype.getAll=function(){var n=this;return function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),Object.keys(_.__assign(_.__assign({},e),t))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(e,t){return e[t]=n.getValue(t),e},{})},w.prototype.getBoolean=function(e){return this.getValue(e).asBoolean()},w.prototype.getNumber=function(e){return this.getValue(e).asNumber()},w.prototype.getString=function(e){return this.getValue(e).asString()},w.prototype.getValue=function(e){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+e+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var t=this._storageCache.getActiveConfig();return t&&void 0!==t[e]?new d("remote",t[e]):this.defaultConfig&&void 0!==this.defaultConfig[e]?new d("default",String(this.defaultConfig[e])):(this._logger.debug('Returning static value for key "'+e+'". Define a default or remote value if this is unintentional.'),new d("static"))},w);function w(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function T(e,t){var n=e.target.error||void 0;return E.create(t,{originalErrorMessage:n&&n.message})}var S="app_namespace_store",C="firebase_remote_config",I=1;var k=(N.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},N.prototype.setLastFetchStatus=function(e){return this.set("last_fetch_status",e)},N.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},N.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.set("last_successful_fetch_timestamp_millis",e)},N.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},N.prototype.setLastSuccessfulFetchResponse=function(e){return this.set("last_successful_fetch_response",e)},N.prototype.getActiveConfig=function(){return this.get("active_config")},N.prototype.setActiveConfig=function(e){return this.set("active_config",e)},N.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},N.prototype.setActiveConfigEtag=function(e){return this.set("active_config_etag",e)},N.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},N.prototype.setThrottleMetadata=function(e){return this.set("throttle_metadata",e)},N.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},N.prototype.get=function(s){return _.__awaiter(this,void 0,void 0,function(){var o,a=this;return _.__generator(this,function(e){switch(e.label){case 0:return[4,this.openDbPromise];case 1:return o=e.sent(),[2,new Promise(function(n,t){var e=o.transaction([S],"readonly").objectStore(S),r=a.createCompositeKey(s);try{var i=e.get(r);i.onerror=function(e){t(T(e,"storage-get"))},i.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(e){t(E.create("storage-get",{originalErrorMessage:e&&e.message}))}})]}})})},N.prototype.set=function(s,u){return _.__awaiter(this,void 0,void 0,function(){var o,a=this;return _.__generator(this,function(e){switch(e.label){case 0:return[4,this.openDbPromise];case 1:return o=e.sent(),[2,new Promise(function(e,t){var n=o.transaction([S],"readwrite").objectStore(S),r=a.createCompositeKey(s);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(e){t(T(e,"storage-set"))},i.onsuccess=function(){e()}}catch(e){t(E.create("storage-set",{originalErrorMessage:e&&e.message}))}})]}})})},N.prototype.delete=function(s){return _.__awaiter(this,void 0,void 0,function(){var o,a=this;return _.__generator(this,function(e){switch(e.label){case 0:return[4,this.openDbPromise];case 1:return o=e.sent(),[2,new Promise(function(e,t){var n=o.transaction([S],"readwrite").objectStore(S),r=a.createCompositeKey(s);try{var i=n.delete(r);i.onerror=function(e){t(T(e,"storage-delete"))},i.onsuccess=function(){e()}}catch(e){t(E.create("storage-delete",{originalErrorMessage:e&&e.message}))}})]}})})},N.prototype.createCompositeKey=function(e){return[this.appId,this.appName,this.namespace,e].join()},N);function N(e,t,n,r){void 0===r&&(r=new Promise(function(t,n){var e=indexedDB.open(C,I);e.onerror=function(e){n(T(e,"storage-open"))},e.onsuccess=function(e){t(e.target.result)},e.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(S,{keyPath:"compositeKey"})}}})),this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}var A=(O.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},O.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},O.prototype.getActiveConfig=function(){return this.activeConfig},O.prototype.loadFromStorage=function(){return _.__awaiter(this,void 0,void 0,function(){var t,n,r,i,o,a;return _.__generator(this,function(e){switch(e.label){case 0:return t=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,t];case 1:return(i=e.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=e.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(a=e.sent())&&(this.activeConfig=a),[2]}})})},O.prototype.setLastFetchStatus=function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)},O.prototype.setLastSuccessfulFetchTimestampMillis=function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)},O.prototype.setActiveConfig=function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)},O);function O(e){this.storage=e}var D=(P.prototype.fetch=function(n){return _.__awaiter(this,void 0,void 0,function(){var t;return _.__generator(this,function(e){switch(e.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return t=e.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,t)]}})})},P.prototype.attemptFetch=function(i,e){var o=e.throttleEndTimeMillis,a=e.backoffCount;return _.__awaiter(this,void 0,void 0,function(){var t,n,r;return _.__generator(this,function(e){switch(e.label){case 0:return[4,function(i,o){return new Promise(function(e,t){var n=Math.max(o-Date.now(),0),r=setTimeout(e,n);i.addEventListener(function(){clearTimeout(r),t(E.create("fetch-throttle",{throttleEndTimeMillis:o}))})})}(i.signal,o)];case 1:e.sent(),e.label=2;case 2:return e.trys.push([2,5,,7]),[4,this.client.fetch(i)];case 3:return t=e.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return e.sent(),[2,t];case 5:if(!function(e){if(!(e instanceof s.FirebaseError))return 0;var t=Number(e.httpStatus);return 429===t||500===t||503===t||504===t}(n=e.sent()))throw n;return r={throttleEndTimeMillis:Date.now()+function(e){var t=1e3*Math.pow(2,e),n=Math.round(.5*t*(Math.random()-.5)*2);return Math.min(144e5,t+n)}(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(r)];case 6:return e.sent(),[2,this.attemptFetch(i,r)];case 7:return[2]}})})},P);function P(e,t){this.client=e,this.storage=t}var x="@firebase/remote-config";function R(m){m.INTERNAL.registerComponent(new a.Component("remoteConfig",function(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("installations").getImmediate();if("undefined"==typeof window)throw E.create("registration-window");var i=n.options,o=i.projectId,a=i.apiKey,s=i.appId;if(!o)throw E.create("registration-project-id");if(!a)throw E.create("registration-api-key");if(!s)throw E.create("registration-app-id");t=t||"firebase";var u=new k(s,n.name,t),c=new A(u),l=new y.Logger(x);l.logLevel=y.LogLevel.ERROR;var h=new g(r,m.SDK_VERSION,t,o,a,s),f=new D(h,u),p=new v(f,u,c,l),d=new b(n,p,c,u,l);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),m.registerVersion(x,"0.1.12")}R(i),t.registerRemoteConfig=R},function(e,t,n){"use strict";var r,i=(r=n(4))&&"object"==typeof r&&"default"in r?r.default:r;i.registerVersion("firebase","7.8.0","app"),e.exports=i},function(e,t,n){"use strict";n.r(t);n(44)},function(e,t){e.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(14),s=n.n(r),u=function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t},a=function(e){return"undefined"!=typeof Map&&e instanceof Map};function c(e){if(a(e))return Array.from(e.keys());if("undefined"!=typeof Reflect&&"function"==typeof Reflect.ownKeys)return Reflect.ownKeys(e);var t=Object.getOwnPropertyNames(e);return"function"==typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e))),t}var l="||";function h(e,t){return a(t)?t.get(e):t[e]}var f,p=(f=function(e){return(u(e)||a(e))&&!function(e){var t=c(e),n=t.every(function(e){return"next"===e||"throw"===e});return t.length&&t.length<=2&&n}(e)},function r(i,e,o,a){var t=void 0===e?{}:e,n=t.namespace,s=void 0===n?"/":n,u=t.prefix;return void 0===o&&(o={}),void 0===a&&(a=""),c(i).forEach(function(e){var t=function(e){return a||!u||u&&new RegExp("^"+u+s).test(e)?e:""+u+s+e}(function(e){var t;if(!a)return e;var n=e.toString().split(l),r=a.split(l);return(t=[]).concat.apply(t,r.map(function(t){return n.map(function(e){return""+t+s+e})})).join(l)}(e)),n=h(e,i);f(n)?r(n,{namespace:s,prefix:u},o,t):o[t]=n}),o}),d=n(29),m=n(26),y=function(e){return null==e},v=function(e){return void 0===e},g=function(e){return e.toString()};function i(e,n,t){void 0===t&&(t={}),s()(u(e)||a(e),"Expected handlers to be a plain object.");var r=p(e,t),i=c(r).map(function(e){return function(e,t,r){void 0===t&&(t=m.a);var i=g(e).split(l);s()(!v(r),"defaultState for reducer handling "+i.join(", ")+" should be defined"),s()(Object(d.a)(t)||u(t),"Expected reducer to be a function or object with next and throw reducers");var n=Object(d.a)(t)?[t,t]:[t.next,t.throw].map(function(e){return y(e)?m.a:e}),o=n[0],a=n[1];return function(e,t){void 0===e&&(e=r);var n=t.type;return n&&-1!==i.indexOf(g(n))?(!0===t.error?a:o)(e,t):e}}(e,h(e,r),n)}),o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var s="function"!=typeof t[t.length-1]&&t.pop(),u=t;if(void 0===s)throw new TypeError("The initial state may not be undefined. If you do not want to set a value for this reducer, you can use null instead of undefined.");return function(e,n){for(var t=arguments.length,r=Array(2<t?t-2:0),i=2;i<t;i++)r[i-2]=arguments[i];var o=void 0===e,a=void 0===n;return o&&a&&s?s:u.reduce(function(e,t){return t.apply(void 0,[e,n].concat(r))},o&&!a&&s?s:e)}}.apply(void 0,i.concat([n]));return function(e,t){return void 0===e&&(e=n),o(e,t)}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function s(e){return null===e}var r=n(14),u=n.n(r),c=n(29),l=n(26);function i(n,i,r){void 0===i&&(i=l.a),u()(Object(c.a)(i)||s(i),"Expected payloadCreator to be a function, undefined or null");function e(){var e=o.apply(void 0,arguments),t={type:n};return e instanceof Error&&(t.error=!0),void 0!==e&&(t.payload=e),a&&(t.meta=r.apply(void 0,arguments)),t}var o=s(i)||i===l.a?l.a:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e instanceof Error?e:i.apply(void 0,[e].concat(n))},a=Object(c.a)(r),t=n.toString();return e.toString=function(){return t},e}n.d(t,"a",function(){return i})}]]);